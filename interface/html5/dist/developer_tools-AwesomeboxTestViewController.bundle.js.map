{"version":3,"sources":["webpack://timetrex/./interface/html5/views/developer_tools/AwesomeboxTestViewController.js"],"names":["AwesomeboxTestViewController","BaseViewController","options","_","defaults","el","user_api","user_group_api","company_api","user_id_array","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIUser","select_company_id","LocalCacheData","getCurrentCompany","id","APIUserGroup","APICompany","render","buildContextMenu","initData","collectUIDataToCurrentEditRecord","setEditViewDataDone","$this","tab_model","setTabModel","tab_employee_column1","edit_view_tab","find","edit_view_tabs","push","form_item_input","Global","loadWidgetByName","FormItemType","AWESOME_DROPDOWN","ADropDown","field","display_show_all","key","allow_drag_to_order","display_close_btn","auto_sort","display_column_settings","default_height","addClass","display_columns","ALayoutCache","getDefaultColumn","convertColumnsTojGridFormat","addEditFieldToColumn","setColumns","setUnselectedGridData","setGridColumnsWidths","setHeight","AWESOME_BOX","AComboBox","api_class","allow_multiple_selection","layout_name","show_search_inputs","set_empty","setEnabled","APILegalEntity","tree_mode","setSourceData","user_group_array","COMBO_BOX","TComboBox","status_array","TTPromise","resolve","buildSearchFields","search_fields","SearchField","label","in_column","multiple","custom_first_label","default_item","basic_search","PermissionManager","checkTopLevelPermission","adv_search","form_item_type","any_item","exclude","include","ContextMenuIconName","view","edit","cancel","callBack","initDropDownOptions","option_name","result","len","length","complete_count","option_result","res","JSON","parse","edit_only_mode","sub_view_mode","basic_search_field_ui_dic","adv_search_field_ui_dic","i","option_info","initDropDownOption","field_name","onGetOptionResult","result_data","processResultData","grid","setData","setGridColumnsWidth","current_edit_record","setCurrentEditViewState","add","wait","initEditView","initEditViewUI","setTimeout","TAlertManager","showConfirmAlert","runTests","setTabOVisibility","css","appendTo","QUnit","config","autostart","show","remove","window","qunit_initiated","start","module","test","assert","done_awesomebox_tests","async","Debug","Text","checkOpenAwesomeBox","edit_view_ui_dic","checkMultiSelectAwesomeBox","checkAwesomeBox","checkTreeBox","checkMultiTreeAwesomeBox","checkClearSearch","checkMoveAllScenario","callback","awesomebox","trigger","visible_awesomebox","val","getValue","ok","TTUUID","isUUID","zero_id","checkGridWidths","setValue","box","selected_id","attr","unselect_grid_diff","width","is","select_grid_container_width","select_grid_width","select_grid_diff","Math","abs","getRowId","row","prop","indexOf","id_array","split","expectedInGrid","target_grid_name","dropdown","expected_ids","selected_rows","all_found","n","is_found","checkboxes","select_grid_text_inputs","openAwesomeBox","focus_in_select_grid","e","Event","keyCode","which","selectNextItem","first_row","click","jqGrid","call","splice"],"mappings":"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","file":"developer_tools-AwesomeboxTestViewController.bundle.js?v=e355601dec8878f294ac","sourcesContent":["export class AwesomeboxTestViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#awesomebox_test_view_container',\n\n\t\t\t// _required_files: ['TImage', 'TImageAdvBrowser'],\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tcompany_api: null,\n\t\t\tuser_id_array: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.edit_view_tpl = 'AwesomeboxTestEditView.html';\n\t\tthis.permission_id = 'user';\n\t\tthis.viewId = 'AwesomeboxTest';\n\t\tthis.script_name = 'AwesomeboxTestView';\n\t\tthis.table_name_key = 'awesomebox_test';\n\t\tthis.context_menu_name = $.i18n._( 'AwesomeBox Test' );\n\t\tthis.navigation_label = $.i18n._( 'AwesomBox Test' ) + ':';\n\t\tthis.api = TTAPI.APIUser;\n\t\tthis.select_company_id = LocalCacheData.getCurrentCompany().id;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.user_id_array = [];\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\t\tthis.initData();\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tclearEditViewData() {\n\t\treturn false;\n\t}\n\n\tbuildEditViewUI() {\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_employee': { 'label': $.i18n._( 'AWESOMEBOX TESTING VIEW' ) },\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\t//Tab 0 start\n\n\t\tvar tab_employee = this.edit_view_tab.find( '#tab_employee' );\n\n\t\tvar tab_employee_column1 = tab_employee.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab_employee_column1 );\n\n//\t\tUser\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_DROPDOWN );\n\t\tform_item_input.ADropDown( {\n\t\t\t//api_class: TTAPI.APIUser,\n\t\t\tfield: 'user_id',\n\t\t\tdisplay_show_all: false,\n\t\t\tid: 'user_id_dropdown',\n\t\t\tkey: 'id',\n\t\t\tallow_drag_to_order: false,\n\t\t\tdisplay_close_btn: false,\n\t\t\tauto_sort: true,\n\t\t\tdisplay_column_settings: false,\n\t\t\tdefault_height: 100\n\t\t} );\n\n\t\t// form_item_input.setSourceData( $this.user_id_array );\n\t\tform_item_input.addClass( 'splayed-adropdown' );\n\t\tvar display_columns = ALayoutCache.getDefaultColumn( 'global_user' ); //Get Default columns base on different layout name\n\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, 'global_user' ); //Convert to jQgrid format\n\t\tthis.addEditFieldToColumn( $.i18n._( 'User' ), form_item_input, tab_employee_column1 );\n\t\tform_item_input.setColumns( display_columns );\n\t\tform_item_input.setUnselectedGridData( this.user_id_array );\n\t\tform_item_input.setGridColumnsWidths();\n\t\tform_item_input.setHeight( 150 );\n\n\t\t//Company\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'user_id2'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'User ( Big multi select)' ), form_item_input, tab_employee_column1 );\n\t\tform_item_input.setEnabled( false );\n\n\t\t//Company\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APICompany,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_company',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'company_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Company' ), form_item_input, tab_employee_column1 );\n\t\tform_item_input.setEnabled( false );\n\n\t\t//Legal Entity\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APILegalEntity,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_legal_entity',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'legal_entity_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Legal Entity' ), form_item_input, tab_employee_column1 );\n\n\t\t//Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\ttree_mode: true,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_tree_column',\n\t\t\tset_empty: true,\n\t\t\tfield: 'group_id'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.user_group_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Group' ), form_item_input, tab_employee_column1 );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\ttree_mode: true,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_tree_column',\n\t\t\tset_empty: true,\n\t\t\tfield: 'group_id2'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.user_group_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Group (Multi)' ), form_item_input, tab_employee_column1 );\n\n\t\t//Status\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_employee_column1 );\n\n\t\tTTPromise.resolve( 'Awesomeboxtest', 'init' );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tvar $this = this;\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Company' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'company_id',\n\t\t\t\tlayout_name: 'global_company',\n\t\t\t\tapi_class: TTAPI.APICompany,\n\t\t\t\tmultiple: false,\n\t\t\t\tcustom_first_label: Global.default_item,\n\t\t\t\tbasic_search: PermissionManager.checkTopLevelPermission( 'Companies' ) ? true : false,\n\t\t\t\tadv_search: PermissionManager.checkTopLevelPermission( 'Companies' ) ? true : false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Legal Entity' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'legal_entity_id',\n\t\t\t\tlayout_name: 'global_legal_entity',\n\t\t\t\tapi_class: TTAPI.APILegalEntity,\n\t\t\t\tmultiple: true,\n\t\t\t\tcustom_first_label: Global.any_item,\n\t\t\t\tbasic_search: PermissionManager.checkTopLevelPermission( 'LegalEntity' ) ? true : false,\n\t\t\t\tadv_search: PermissionManager.checkTopLevelPermission( 'LegalEntity' ) ? true : false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Gender' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'sex_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\tContextMenuIconName.view,\n\t\t\t\tContextMenuIconName.edit,\n\t\t\t\tContextMenuIconName.cancel\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tinitOptions( callBack ) {\n\n\t\tvar options = [\n\t\t\t{ option_name: 'status' },\n\t\t\t{ option_name: 'company_id' }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\n\t\t} );\n\t}\n\n\tinitDropDownOptions( options, callBack ) {\n\t\tvar $this = this;\n\t\tvar len = options.length + 2;\n\t\tvar complete_count = 0;\n\t\tvar option_result = [];\n\n\t\tvar res = '[{\"id\":\"00000000-0000-0000-0000-000000000000\",\"name\":\"Root\",\"level\":0,\"children\":[{\"id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"00000000-0000-0000-0000-000000000000\",\"name\":\"Corporate\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":1,\"children\":[{\"id\":\"11e85213-a779-fa20-835f-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"name\":\"Executives\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a778-6410-bee1-123456abcdef\",\"isLeaf\":true},{\"id\":\"11e85213-a77a-39c0-9bc2-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"name\":\"Human Resources\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a778-6410-bee1-123456abcdef\",\"isLeaf\":true}],\"expanded\":true,\"loaded\":true,\"parent\":\"00000000-0000-0000-0000-000000000000\"},{\"id\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"00000000-0000-0000-0000-000000000000\",\"name\":\"Hourly (Non-Exempt)\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":1,\"children\":[{\"id\":\"11e85213-a77a-bb40-b83e-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"name\":\"Salary (Exempt)\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"isLeaf\":true}],\"expanded\":true,\"loaded\":true,\"parent\":\"00000000-0000-0000-0000-000000000000\"}],\"expanded\":true,\"loaded\":true},{\"id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"00000000-0000-0000-0000-000000000000\",\"name\":\"Corporate\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":1,\"children\":[{\"id\":\"11e85213-a779-fa20-835f-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"name\":\"Executives\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a778-6410-bee1-123456abcdef\",\"isLeaf\":true},{\"id\":\"11e85213-a77a-39c0-9bc2-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"name\":\"Human Resources\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a778-6410-bee1-123456abcdef\",\"isLeaf\":true}],\"expanded\":true,\"loaded\":true,\"parent\":\"00000000-0000-0000-0000-000000000000\"},{\"id\":\"11e85213-a779-fa20-835f-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"name\":\"Executives\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a778-6410-bee1-123456abcdef\",\"isLeaf\":true},{\"id\":\"11e85213-a77a-39c0-9bc2-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a778-6410-bee1-123456abcdef\",\"name\":\"Human Resources\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a778-6410-bee1-123456abcdef\",\"isLeaf\":true},{\"id\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"00000000-0000-0000-0000-000000000000\",\"name\":\"Hourly (Non-Exempt)\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":1,\"children\":[{\"id\":\"11e85213-a77a-bb40-b83e-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"name\":\"Salary (Exempt)\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"isLeaf\":true}],\"expanded\":true,\"loaded\":true,\"parent\":\"00000000-0000-0000-0000-000000000000\"},{\"id\":\"11e85213-a77a-bb40-b83e-123456abcdef\",\"company_id\":\"11e85213-a6b2-93b0-a2cd-123456abcdef\",\"parent_id\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"name\":\"Salary (Exempt)\",\"deleted\":false,\"created_by_id\":false,\"created_by\":false,\"created_date\":\"07-May-18 9:28 AM\",\"updated_by_id\":false,\"updated_by\":false,\"updated_date\":\"07-May-18 9:28 AM\",\"level\":2,\"expanded\":true,\"loaded\":true,\"parent\":\"11e85213-a77a-7810-a67f-123456abcdef\",\"isLeaf\":true}]';\n\t\tres = JSON.parse( res );\n\t\tif ( !$this.edit_only_mode ) {\n\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t}\n\n\t\t}\n\n\t\t$this.user_group_array = res;\n\n\t\tcomplete_count = complete_count + 1;\n\n\t\tif ( complete_count === len ) {\n\n\t\t\tcallBack( option_result );\n\t\t}\n\n\t\tfor ( var i = 0; i < len - 2; i++ ) {\n\t\t\tvar option_info = options[i];\n\t\t\tthis.initDropDownOption( option_info.option_name, option_info.field_name, option_info.api, onGetOptionResult );\n\n\t\t}\n\n\t\tfunction onGetOptionResult( result ) {\n\n\t\t\toption_result.push( result );\n\n\t\t\tcomplete_count = complete_count + 1;\n\n\t\t\tif ( complete_count === len ) {\n\n\t\t\t\tcallBack( option_result );\n\t\t\t}\n\t\t}\n\t}\n\n\t//override that forces same data to grid at all times.\n\tsearch() {\n\t\tvar result_data = JSON.parse( '[{\"id\":\"11e85213-a799-d200-b041-123456abcdef\",\"status\":\"Active\",\"employee_number\":100,\"first_name\":\"Mr.\",\"last_name\":\"FAKE\",\"full_name\":\"Administrator, Mr.\",\"home_phone\":\"471-438-3900\",\"is_owner\":true,\"is_child\":false},' +\n\t\t\t'{\"id\":\"11e85213-ad34-e0e0-8541-123456abcdef\",\"status\":\"Active\",\"employee_number\":13,\"first_name\":\"Tristen\",\"last_name\":\"Braun\",\"full_name\":\"FAKE Braun, Tristen\",\"home_phone\":\"527-500-4852\",\"is_owner\":false,\"is_child\":true},' +\n\t\t\t'{\"id\":\"11e85213-af64-d0e0-9b00-123456abcdef\",\"status\":\"Active\",\"employee_number\":20,\"first_name\":\"Jane\",\"last_name\":\"Doe\",\"full_name\":\"FAKE Doe, Jane\",\"home_phone\":\"477-443-9650\",\"is_owner\":false,\"is_child\":true},' +\n\t\t\t'{\"id\":\"11e85213-ac44-1830-9908-123456abcdef\",\"status\":\"Active\",\"employee_number\":10,\"first_name\":\"John\",\"last_name\":\"Doe\",\"full_name\":\"FAKE Doe, John\",\"home_phone\":\"464-547-9452\",\"is_owner\":false,\"is_child\":true}]' );\n\t\tthis.user_id_array = result_data;\n\t\tresult_data = this.processResultData( result_data );\n\t\tthis.grid.setData( result_data );\n\t\tthis.grid.setGridColumnsWidth();\n\t\tthis.current_edit_record = result_data[0];\n\t\tthis.setCurrentEditViewState( 'edit' );\n\n\t\tTTPromise.add( 'Awesomeboxtest', 'init' );\n\t\tvar $this = this;\n\t\tTTPromise.wait( 'Awesomeboxtest', 'init', function() {\n\t\t\t$this.initEditView();\n\t\t} );\n\n\t\tthis.initEditViewUI( this.viewId, this.edit_view_tpl );\n\t}\n\n\tsetEditViewDataDone() {\n\t\tvar $this = this;\n\t\tsetTimeout( function() {\n\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'Run tests?' ), null, function( result ) {\n\t\t\t\tif ( result == true ) {\n\t\t\t\t\t$this.runTests();\n\t\t\t\t}\n\t\t\t} );\n\t\t\t$this.setTabOVisibility( true );\n\t\t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t\t}, 2500 );\n\t}\n\n\t/**\n\t * in the testing code are a lot of null null waits to ensure that all awesomeboxes are ready for next step in test\n\t */\n\trunTests() {\n\t\tif ( $( '#qunit_script' ).length == 0 ) {\n\t\t\t$( '<script id=\\'qunit_script\\' src=\\'framework/qunit/qunit.js\\'></script>' ).appendTo( 'head' );\n\t\t\t$( '<link rel=\\'stylesheet\\' type=\\'text/css\\' href=\\'framework/qunit/qunit.css\\'>' ).appendTo( 'head' );\n\t\t}\n\t\t;\n\n\t\tQUnit.config.autostart = false;\n\t\t$( '#qunit_container' ).css( 'width', '100%' );\n\t\t$( '#qunit_container' ).css( 'height', 'auto' );\n\t\t$( '#qunit_container' ).css( 'overflow-y', 'scroll' );\n\t\t$( '#qunit_container' ).css( 'top', '0px' );\n\t\t$( '#qunit_container' ).css( 'left', '0px' );\n\t\t$( '#qunit_container' ).css( 'z-index', '100' );\n\t\t$( '#qunit_container' ).css( 'background', '#fff' );\n\t\t$( '#qunit_container' ).show();\n\n\t\t$( '#tt_debug_console' ).remove();\n\t\tif ( !window.qunit_initiated ) {\n\t\t\twindow.qunit_initiated = true;\n\t\t\tQUnit.start();\n\t\t}\n\n\t\t// QUnit.module('QUnit Sanity');\n\t\t// QUnit.test(\"QUnit test\", function (assert) {\n\t\t// \tassert.ok(1 == \"1\", \"QUnit is loaded and sane!\");\n\t\t// });\n\n\t\t//select an item by clicking a td in the last row\n\t\tvar $this = this;\n\t\tQUnit.module( 'AwesomeBox' );\n\t\tQUnit.test( 'Awesomebox tests', function( assert ) {\n\t\t\tvar done_awesomebox_tests = assert.async();\n\n\t\t\tDebug.Text( 'A: Test Splayed Awesomebox', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t$this.checkOpenAwesomeBox( $this.edit_view_ui_dic['user_id'], assert, function() {\n\t\t\t\tDebug.Text( 'B: Test MultiSelect AwesomeBox', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t\t$this.checkMultiSelectAwesomeBox( assert, function() {\n\t\t\t\t\tDebug.Text( 'C: Test regular AwesomeBox', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t\t\t$this.checkAwesomeBox( assert, function() {\n\t\t\t\t\t\tDebug.Text( 'D: Test tree_mode AwesomeBox', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t\t\t\t$this.checkTreeBox( assert, function() {\n\t\t\t\t\t\t\tDebug.Text( 'E: Test tree_mode MultiSelect AwesomeBox', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t\t\t\t\t$this.checkMultiTreeAwesomeBox( assert, function() {\n\t\t\t\t\t\t\t\tDebug.Text( 'F: Test searching in AwesomeBox', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t\t\t\t\t\t$this.checkClearSearch( $this.edit_view_ui_dic['user_id2'], assert, function() {\n\t\t\t\t\t\t\t\t\tDebug.Text( 'G: Wonky move all scenario', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t\t\t\t\t\t\t$this.checkMoveAllScenario( $this.edit_view_ui_dic['user_id2'], assert, function() {\n\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\tDebug.Text( 'Z: Testing Complete', 'AwesomeboxTestViewController.js', 'AwesomeboxTestViewController', 'runTests', 11 );\n\t\t\t\t\t\t\t\t\t\t\tdone_awesomebox_tests();\n\t\t\t\t\t\t\t\t\t\t}, 1000 );\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t} );\n\t}\n\n\tcheckMultiTreeAwesomeBox( assert, callback ) {\n\t\tvar awesomebox = this.edit_view_ui_dic['group_id2'];\n\t\tawesomebox.trigger( 'click' );\n\t\tvar visible_awesomebox = $( '#group_id2a_dropdown_div' );\n\t\tvar $this = this;\n\t\tTTPromise.wait( 'AComboBox', 'init', function() {\n\t\t\tvisible_awesomebox.find( '.unselect-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\t\tvisible_awesomebox.find( '.a-grid-right-arrow' ).trigger( 'click' );\n\t\t\tvisible_awesomebox.find( '#select_grid_close_btn' ).trigger( 'click' );\n\t\t\tvar val = awesomebox.getValue();\n\n\t\t\tassert.ok( ( TTUUID.isUUID( val ) && val != TTUUID.zero_id ), 'Multi tree - selection valid' );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tawesomebox.trigger( 'click' );\n\t\t\t\tsetTimeout( function() {\n\n\t\t\t\t\tvar visible_awesomebox = $( '#group_id2a_dropdown_div' );\n\t\t\t\t\tvisible_awesomebox.find( '.select-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\t\t\t\tvisible_awesomebox.find( '.a-grid-left-arrow' ).trigger( 'click' );\n\t\t\t\t\tvisible_awesomebox.find( '#select_grid_close_btn' ).trigger( 'click' );\n\t\t\t\t\tvar val = awesomebox.getValue();\n\n\t\t\t\t\tassert.ok( ( val == TTUUID.zero_id ), 'Multi tree - unselection valid' );\n\n\t\t\t\t\tawesomebox.trigger( 'click' );\n\t\t\t\t\t//this check fails when it should not as the border makes it look fine\n\t\t\t\t\t//$this.checkGridWidths( visible_awesomebox, assert );\n\t\t\t\t\tvisible_awesomebox.find( '#select_grid_close_btn' ).trigger( 'click' );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}, 1000 );\n\t\t\t}, 1000 );\n\n\t\t} );\n\t}\n\n\tcheckTreeBox( assert, callback ) {\n\t\tvar awesomebox = this.edit_view_ui_dic['group_id'];\n\t\tvar val = awesomebox.getValue();\n\t\tassert.ok( ( val == TTUUID.zero_id ), 'tree - unselection valid' );\n\t\tvar $this = this;\n\t\tsetTimeout( function() {\n\t\t\tawesomebox.trigger( 'click' );\n\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t$this.checkGridWidths( $( '#group_ida_dropdown_div' ), assert );\n\t\t\t\t$( '#group_ida_dropdown_div .unselect-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tvar val = awesomebox.getValue();\n\t\t\t\t\tawesomebox.setValue( null );\n\n\t\t\t\t\tassert.ok( ( TTUUID.isUUID( val ) && val != TTUUID.zero_id ), 'tree - selection valid' );\n\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}, 1000 );\n\n\t\t\t} );\n\t\t}, 1000 );\n\t}\n\n\tcheckAwesomeBox( assert, callback ) {\n\t\tvar awesomebox = this.edit_view_ui_dic['legal_entity_id'];\n\t\tvar val = awesomebox.getValue();\n\n\t\tassert.ok( ( val == TTUUID.zero_id ), 'regular - unselection valid' );\n\n\t\tvar $this = this;\n\t\tsetTimeout( function() {\n\t\t\tawesomebox.trigger( 'click' );\n\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t$this.checkGridWidths( $( '#legal_entity_idADropDown' ), assert );\n\t\t\t\t$( '#legal_entity_idADropDown .unselect-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tval = awesomebox.getValue();\n\t\t\t\t\tawesomebox.setValue( null );\n\t\t\t\t\tassert.ok( ( TTUUID.isUUID( val ) && val != TTUUID.zero_id ), 'regular - selection valid' );\n\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}, 1000 );\n\n\t\t\t} );\n\t\t}, 1000 );\n\t}\n\n\tcheckMultiSelectAwesomeBox( assert, callback ) {\n\t\tvar awesomebox = this.edit_view_ui_dic['company_id'];\n\t\tawesomebox.trigger( 'click' );\n\t\tvar visible_awesomebox = $( '#company_ida_dropdown_div' );\n\t\tvar $this = this;\n\t\tTTPromise.wait( 'AComboBox', 'init', function() {\n\t\t\tvisible_awesomebox.find( '.unselect-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\t\tvisible_awesomebox.find( '.a-grid-right-arrow' ).trigger( 'click' );\n\t\t\tvisible_awesomebox.find( '#select_grid_close_btn' ).trigger( 'click' );\n\t\t\tvar val = awesomebox.getValue();\n\n\t\t\tassert.ok( ( TTUUID.isUUID( val ) && val != TTUUID.zero_id ), 'multiselect - selection valid' );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tawesomebox.trigger( 'click' );\n\t\t\t\tTTPromise.wait( 'AComboBox', 'init', function() {\n\n\t\t\t\t\tvar visible_awesomebox = $( '#company_ida_dropdown_div' );\n\t\t\t\t\tvisible_awesomebox.find( '.select-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\t\t\t\tvisible_awesomebox.find( '.a-grid-left-arrow' ).trigger( 'click' );\n\t\t\t\t\t$this.checkGridWidths( visible_awesomebox, assert );\n\t\t\t\t\tvisible_awesomebox.find( '#select_grid_close_btn' ).trigger( 'click' );\n\t\t\t\t\tval = awesomebox.getValue();\n\t\t\t\t\tawesomebox.trigger( 'click' );\n\n\t\t\t\t\tassert.ok( ( val == TTUUID.zero_id ), 'multiselect - unselection valid' );\n\n\t\t\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}, 2000 );\n\n\t\t} );\n\t}\n\n\tcheckOpenAwesomeBox( box, assert, callback ) {\n\t\tvar selected_id = box.find( '.unselect-grid-div tbody tr:last' ).attr( 'id' );\n\t\tbox.find( '.unselect-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\tbox.find( '.a-grid-right-arrow' ).trigger( 'click' );\n\t\tvar val = box.getValue();\n\n\t\tassert.ok( ( TTUUID.isUUID( val[0].id ) && val[0].id == selected_id ), 'splayed - selection valid' );\n\n\t\tvar $this = this;\n\t\tTTPromise.wait( 'AComboBox', 'init', function() {\n\t\t\tbox.find( '.select-grid-div tbody tr:last td:last' ).trigger( 'click' );\n\t\t\tbox.find( '.a-grid-left-arrow' ).trigger( 'click' );\n\n\t\t\tassert.ok( ( val.length === 0 ), 'splayed - unselection valid' );\n\n\t\t\t$this.checkGridWidths( box, assert );\n\n\t\t\tif ( callback ) {\n\t\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t\tcallback();\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\tcheckGridWidths( box, assert ) {\n\n\t\tvar unselect_grid_container_width = box.find( '.unselect-grid-border-div' ).width();\n\t\tvar unselect_grid_width = box.find( '.ui-jqgrid' ).width();\n\t\tvar unselect_grid_diff = unselect_grid_container_width - unselect_grid_width;\n\n\t\tassert.ok( ( unselect_grid_diff <= 2 ), 'unselect grid width diff <= 2: ' + unselect_grid_diff );\n\n\t\tif ( box.find( '.select-grid-border-div' ).is( ':visible' ) > 0 ) {\n\t\t\tvar select_grid_container_width = box.find( '.select-grid-border-div' ).width();\n\t\t\tvar select_grid_width = box.find( '.ui-jqgrid' ).width();\n\t\t\tvar select_grid_diff = Math.abs( select_grid_container_width - select_grid_width );\n\n\t\t\tassert.ok( ( select_grid_diff <= 2 ), 'select grid width diff <= 2: ' + select_grid_diff );\n\t\t}\n\t}\n\n\tcheckClearSearch( box, assert, callback ) {\n\t\t// open\n\t\tvar $this = this;\n\t\tbox.trigger( 'click' );\n\t\tTTPromise.wait( null, null, function() {\n\t\t\tvar dropdown = $( '#user_id2ADropDown' );\n\t\t\tvar checkboxes = dropdown.find( '.unselect-grid-div .ui-jqgrid input[type=\"checkbox\"]' );\n\n\t\t\tvar expected_ids = [];\n\t\t\t// select a couple records\n\t\t\t$( checkboxes[1] ).trigger( 'click' );\n\t\t\t$( checkboxes[3] ).trigger( 'click' );\n\t\t\t$( checkboxes[6] ).trigger( 'click' );\n\t\t\t$( checkboxes[7] ).trigger( 'click' );\n\n\t\t\t//note selected ids\n\t\t\texpected_ids.push( getRowId( $( checkboxes[1] ) ) );\n\t\t\texpected_ids.push( getRowId( $( checkboxes[3] ) ) );\n\t\t\texpected_ids.push( getRowId( $( checkboxes[6] ) ) );\n\t\t\texpected_ids.push( getRowId( $( checkboxes[7] ) ) );\n\n\t\t\t// click move button\n\t\t\tdropdown.find( '.a-grid-right-arrow' ).trigger( 'click' );\n\n\t\t\t// check that visible values contain expected ids\n\t\t\tassert.ok( expectedInGrid( 'select_grid', dropdown, expected_ids ), 'all expected records are in selected grid' );\n\n\t\t\t// search to filter\n\t\t\tvar select_grid_text_inputs = dropdown.find( '.select-grid-div input[type=\"text\"].search-input' );\n\n\t\t\t// set up grid search prerequisites\n\t\t\t$( select_grid_text_inputs[0] ).trigger( 'focus' );\n\t\t\t$( select_grid_text_inputs[0] ).val( 'mr' );\n\t\t\tLocalCacheData.openAwesomeBox.focus_in_select_grid = true;\n\t\t\tvar e = $.Event( \"keydown\", { keyCode: 77, which: 77 } );\n\t\t\tLocalCacheData.openAwesomeBox.selectNextItem( e );\n\t\t\tvar e = $.Event( \"keydown\", { keyCode: 82, which: 82 } );\n\t\t\tLocalCacheData.openAwesomeBox.selectNextItem( e );\n\t\t\t// trigger search\n\t\t\t$( select_grid_text_inputs[0] ).trigger( 'searchEnter', ['mr', 'first_name'] );\n\n\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t// check that VISIBLE values contain expected ids\n\t\t\t\tassert.ok( ( dropdown.find( '.select-grid tr' ).length == 2 ), 'only .sizetr and mr admin shows after filter (only works with demo data)' );\n\n\t\t\t\t// move first record back ( note id )\n\t\t\t\tvar first_row = $( dropdown.find( '.select-grid tr' )[dropdown.find( '.select-grid tr' ).length - 1] );\n\t\t\t\tfirst_row.find( 'input[type=\"checkbox\"]' ).click();\n\t\t\t\tvar ondblClickRowHandler = dropdown.find( '.select-grid' ).jqGrid( 'getGridParam', 'ondblClickRow' );\n\t\t\t\tondblClickRowHandler.call( dropdown.find( '.select-grid' )[0], first_row.prop( 'id' ) );\n\n\t\t\t\t// check that selected values contain expected ids\n\t\t\t\tassert.ok( $( dropdown.find( '.select-grid tr' ).length == 1 ), 'removed record is in not in selectgrid' ); //1 because of sizetr\n\t\t\t\tassert.ok( expectedInGrid( 'unselect_grid', dropdown, [getRowId( first_row )] ), 'removed record is in unselectgrid' );\n\n\t\t\t\t// clear search\n\t\t\t\tdropdown.find( '.select-grid-search-div .close-btn' ).trigger( 'click' );\n\n\t\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t\texpected_ids.splice( 0, 1 ); // remove moved record from expected_ids\n\n\t\t\t\t\t// check that selected values contain expected ids\n\t\t\t\t\tassert.ok( ( expected_ids.length == 3 ), 'correct number of expected records' );\n\t\t\t\t\tassert.ok( ( dropdown.find( '.select-grid tr' ).length == 4 ), 'correct number of selected rows' );\n\t\t\t\t\tassert.ok( expectedInGrid( 'select_grid', dropdown, expected_ids ), 'all expected records are in selected grid' );\n\n\t\t\t\t\tdropdown.find( '#select_grid_close_btn' ).click();\n\t\t\t\t\tbox.setValue( [] );\n\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\n\t\t//strip out jqgrid stuff and get row id\n\t\tfunction getRowId( row ) {\n\t\t\tif ( !row || !row.prop ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( row.prop( 'id' ).indexOf( '_' ) == -1 ) {\n\t\t\t\treturn row.prop( 'id' );\n\t\t\t}\n\n\t\t\tvar id_array = $( row ).prop( 'id' ).split( '_' );\n\t\t\treturn id_array[id_array.length - 1];\n\t\t}\n\n\t\tfunction expectedInGrid( target_grid_name, dropdown, expected_ids ) {\n\t\t\tvar selected_rows = null;\n\t\t\tif ( target_grid_name == 'select_grid' ) {\n\t\t\t\tselected_rows = dropdown.find( '.select-grid tr' );\n\t\t\t} else {\n\t\t\t\tselected_rows = dropdown.find( '.unselect-grid tr' );\n\t\t\t}\n\t\t\tvar all_found = true;\n\n\t\t\tfor ( var n = 0; n < expected_ids.length; n++ ) {\n\t\t\t\tvar is_found = false;\n\t\t\t\tfor ( var i = 0; i < selected_rows.length; i++ ) {\n\t\t\t\t\tif ( expected_ids[n] == getRowId( $( selected_rows[i] ) ) ) {\n\t\t\t\t\t\tis_found = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( !is_found ) {\n\t\t\t\t\tall_found = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn all_found;\n\t\t}\n\t}\n\n\tcheckMoveAllScenario( box, assert, callback ) {\n\t\t// open\n\t\tvar $this = this;\n\t\tbox.trigger( 'click' );\n\t\tTTPromise.wait( 'AComboBox', 'init', function() {\n\t\t\tvar dropdown = $( '#user_id2ADropDown' );\n\t\t\tif ( dropdown.length == 0 ) {\n\t\t\t\t//wait until combobox is visible ( sometimes takes longer than promise )\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t$this.checkMoveAllScenario( box, assert, callback );\n\t\t\t\t}, 1000 );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar checkboxes = dropdown.find( '.unselect-grid-div .ui-jqgrid input[type=\"checkbox\"]' );\n\n\t\t\tvar expected_ids = [];\n\t\t\t// select a couple records\n\t\t\t$( checkboxes[1] ).trigger( 'click' );\n\t\t\t$( checkboxes[3] ).trigger( 'click' );\n\t\t\t$( checkboxes[6] ).trigger( 'click' );\n\t\t\t$( checkboxes[7] ).trigger( 'click' );\n\n\t\t\t//note selected ids\n\t\t\texpected_ids.push( getRowId( $( checkboxes[1] ) ) );\n\t\t\texpected_ids.push( getRowId( $( checkboxes[3] ) ) );\n\t\t\texpected_ids.push( getRowId( $( checkboxes[6] ) ) );\n\t\t\texpected_ids.push( getRowId( $( checkboxes[7] ) ) );\n\n\t\t\t// click move button\n\t\t\tdropdown.find( '.a-grid-right-arrow' ).trigger( 'click' );\n\n\t\t\t// check that visible values contain expected ids\n\t\t\tassert.ok( expectedInGrid( 'select_grid', dropdown, expected_ids ), 'all expected records are in selected grid' );\n\n\t\t\t//click \"move all\" button to remove all selected records\n\t\t\tdropdown.find( '.select-grid-title-bar #clear_btn' ).trigger( 'click' );\n\n\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\texpected_ids = [];\n\n\t\t\t\t// check that selected values contain expected ids\n\t\t\t\tassert.ok( ( expected_ids.length == 0 ), 'correct number of expected records' );\n\t\t\t\tassert.ok( ( dropdown.find( '.select-grid tr' ).length == 1 ), 'correct number of selected rows ( zero )' ); // the 1 is sizetr\n\t\t\t\tassert.ok( expectedInGrid( 'select_grid', dropdown, expected_ids ), 'zero records are in selected grid' );\n\n\t\t\t\tdropdown.find( '#select_grid_close_btn' ).click();\n\t\t\t\tbox.setValue( [] );\n\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\n\t\t\t} );\n\t\t} );\n\n\t\tfunction getRowId( row ) {\n\t\t\tif ( !row || !row.prop ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( row.prop( 'id' ).indexOf( '_' ) == -1 ) {\n\t\t\t\treturn row.prop( 'id' );\n\t\t\t}\n\n\t\t\tvar id_array = $( row ).prop( 'id' ).split( '_' );\n\t\t\treturn id_array[id_array.length - 1];\n\t\t}\n\n\t\tfunction expectedInGrid( target_grid_name, dropdown, expected_ids ) {\n\t\t\tvar selected_rows = null;\n\t\t\tif ( target_grid_name == 'select_grid' ) {\n\t\t\t\tselected_rows = dropdown.find( '.select-grid tr' );\n\t\t\t} else {\n\t\t\t\tselected_rows = dropdown.find( '.unselect-grid tr' );\n\t\t\t}\n\t\t\tvar all_found = true;\n\n\t\t\tfor ( var n = 0; n < expected_ids.length; n++ ) {\n\t\t\t\tvar is_found = false;\n\t\t\t\tfor ( var i = 0; i < selected_rows.length; i++ ) {\n\t\t\t\t\tif ( expected_ids[n] == getRowId( $( selected_rows[i] ) ) ) {\n\t\t\t\t\t\tis_found = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( !is_found ) {\n\t\t\t\t\tall_found = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn all_found;\n\t\t}\n\t}\n}\n"],"sourceRoot":""}