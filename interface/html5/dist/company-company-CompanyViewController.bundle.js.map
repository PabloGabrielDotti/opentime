{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/filebrowser/TImageAdvBrowser.js","webpack://timetrex/./interface/html5/global/widgets/filebrowser/TImageBrowser.js","webpack://timetrex/./interface/html5/views/company/company/CompanyViewController.js"],"names":["$","fn","TImageAdvBrowser","options","Global","addCss","field","image","result_form_data","opts","extend","defaults","$this","this","accept_filter","default_width","default_height","callBack","setEnable","val","btn","children","eq","show","hide","clearErrorStyle","getField","getValue","setImage","attr","d","Date","getTime","getCookie","css","onImageLoad","image_height","height","naturalHeight","image_width","width","naturalWidth","trigger","setValue","setEnableDelete","find","removeAttr","each","o","meta","data","text","i18n","_","show_browser","isSet","name","deleteImageHandler","on","bind","IndexViewController","openWizard","form_data","jQuery","TImageBrowser","browser","setEnabled","removeClass","addClass","getFileName","FormData","getImageSrc","changeHandler","FileReader","files","length","window","reader","readAsDataURL","onloadend","url","result","CompanyViewController","BaseViewController","product_edition_array","industry_array","country_array","province_array","e_province_array","terminated_user_disable_login_type_array","password_policy_type_array","password_minimum_permission_level_array","password_minimum_strength_array","ldap_authentication_type_array","file_browser","super","permission_id","viewId","script_name","table_name_key","context_menu_name","api","TTAPI","APICompany","render","buildContextMenu","initData","exclude","include","ContextMenuIconName","save","cancel","initDropDownOptions","option_name","field_name","args","filter_data","id","LocalCacheData","getLoginUser","company_id","key_name","onResult","result_data","getResult","edit_only_mode","initOptions","edit_view","initEditViewUI","getCompanyData","current_edit_record","initEditView","new_url","location","href","indexOf","setURLToBrowser","parts","split","i","removeCompanyIdFromUrl","removeEditView","key","widget","edit_view_ui_dic","setCountryValue","ServiceCaller","getURLByObjectType","collectUIDataToCurrentEditRecord","setEditViewDataDone","onTypeChange","getProductEdition","edit_view_tab","setEditMenu","html","getUpgradeMessage","context_btn","pId","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","c_value","validate","onCountryChange","isValid","updateCurrentCompanyCache","APIAuthentication","getCurrentCompany","onGetCurrentCompany","e","is_setup_complete","setCurrentCompany","animate","opacity","len","context_menu_array","m","getOptions","res","buildRecordArray","refresh","province_widget","province","value","setSourceData","buildEditViewUI","tab_model","setTabModel","form_item_input","widgetContainer","label","tab_company","tab_company_column1","tab_company_column2","edit_view_tabs","push","loadWidgetByName","FormItemType","COMBO_BOX","TComboBox","addEditFieldToColumn","TEXT_INPUT","TTextInput","parent","set_empty","AWESOME_BOX","AComboBox","api_class","APIUser","allow_multiple_selection","layout_name","show_search_inputs","SEPARATED_BOX","SeparatedBox","terminated_user_disable_login_after_days_description","append","IMAGE_BROWSER","uploadFile","toLowerCase","updateCompanyLogo","TAlertManager","showAlert","IMAGE_AVD_BROWSER","is_edit","deleteImage","tab_password_policy_column1","tab_ldap_column1","ldap_authentication_type_id","detachElement","attachElement","editFieldResize"],"mappings":"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","file":"company-company-CompanyViewController.bundle.js?v=1619cad1f38d4e0b6d62","sourcesContent":["( function( $ ) {\n\n\t$.fn.TImageAdvBrowser = function( options ) {\n\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImageAdvBrowser.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar name = 'filedata';\n\n\t\tvar accept_filter = '';\n\n\t\tvar default_width = 177;\n\t\tvar default_height = 42;\n\n\t\tvar callBack = null;\n\n\t\tvar enabled = true;\n\n\t\tvar image;\n\n\t\tvar result_form_data;\n\n\t\tthis.setEnable = function( val ) {\n\t\t\tenabled = val;\n\n\t\t\tvar btn = this.children().eq( 1 );\n\t\t\tif ( !val ) {\n\t\t\t\tbtn.hide();\n\t\t\t} else {\n\t\t\t\tbtn.show();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn result_form_data;\n\t\t};\n\n\t\tthis.setImage = function( val ) {\n\t\t\tif ( !val ) {\n\t\t\t\timage.attr( 'src', '' );\n\t\t\t\timage.hide();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar d = new Date();\n\t\t\timage.hide();\n\t\t\timage.attr( 'src', val + '&t=' + d.getTime() + '&X-CSRF-Token=' + getCookie( 'CSRF-Token' ) );\n\t\t\timage.css( 'height', 'auto' );\n\t\t\timage.css( 'width', 'auto' );\n\n\t\t};\n\n\t\tthis.onImageLoad = function( image ) {\n\n\t\t\tvar image_height = $( image ).height() > 0 ? $( image ).height() : image.naturalHeight;\n\t\t\tvar image_width = $( image ).width() > 0 ? $( image ).width() : image.naturalWidth;\n\n\t\t\tif ( image_height > default_height ) {\n\t\t\t\t$( image ).css( 'height', default_height );\n\n\t\t\t}\n\n\t\t\tif ( image_width > default_width ) {\n\t\t\t\t$( image ).css( 'width', default_width );\n\t\t\t\t$( image ).css( 'height', 'auto' );\n\t\t\t}\n\n\t\t\t$this.trigger( 'setSize' );\n\n\t\t\tif ( image_height < 5 ) {\n\t\t\t\t$( image ).hide();\n\t\t\t} else {\n\t\t\t\t$( image ).show();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setEnableDelete = function( val ) {\n\t\t\tvar image = $this.find( '.image' );\n\t\t\tif ( !val ) {\n\t\t\t\timage.removeAttr( 'enable-delete' );\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\timage.attr( 'enable-delete', 1 );\n\t\t\t}\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t\tvar $$this = this;\n\n\t\t\t$( this ).find( '#upload_image' ).text( $.i18n._( 'Upload Image' ) );\n\n\t\t\tif ( o.callBack ) {\n\t\t\t\tcallBack = o.callBack;\n\t\t\t}\n\n\t\t\tif ( o.show_browser === false ) {\n\t\t\t\t$( this ).children().eq( 1 ).hide();\n\t\t\t}\n\n\t\t\tif ( o.default_width > 0 ) {\n\t\t\t\tdefault_width = o.default_width;\n\t\t\t}\n\n\t\t\tif ( o.default_height > 0 ) {\n\t\t\t\tdefault_height = o.default_height;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.name ) ) {\n\t\t\t\tname = o.name;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( accept_filter ) ) {\n\t\t\t\taccept_filter = o.accept_filter;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.deleteImageHandler ) ) {\n\t\t\t\t$this.find( '.file-browser' ).on( 'deleteClick', function() {\n\t\t\t\t\to.deleteImageHandler();\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar browser = $( this ).children().eq( 1 );\n\t\t\tbrowser.bind( 'click', function() {\n\t\t\t\tIndexViewController.openWizard( 'UserPhotoWizard', null, function( form_data ) {\n\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack( form_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_form_data = form_data;\n\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\timage = $( this ).children().eq( 0 );\n\t\t\timage.on( 'load', function() {\n\t\t\t\t$this.onImageLoad( this );\n\t\t\t} );\n\n\t\t\timage.hide();\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImageAdvBrowser.defaults = {};\n\n} )( jQuery );","( function( $ ) {\n\n\t$.fn.TImageBrowser = function( options ) {\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImageBrowser.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar id = 'file_browser';\n\t\tvar name = 'filedata';\n\t\tvar browser;\n\n\t\tvar accept_filter = '';\n\n\t\tvar default_width = 177;\n\t\tvar default_height = 42;\n\t\tvar enabled = true;\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\n\t\t\tvar btn = this.find( '.browser-form input' );\n\n\t\t\tif ( !val ) {\n\t\t\t\tbtn.attr( 'disabled', true );\n\t\t\t\tbtn.removeClass( 'disable-element' ).addClass( 'disable-element' );\n\t\t\t} else {\n\t\t\t\tbtn.removeAttr( 'disabled' );\n\t\t\t\tbtn.removeClass( 'disable-element' );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getFileName = function() {\n\n\t\t\treturn browser.val();\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.setEnableDelete = function( val ) {\n\t\t\tvar image = $this.find( '.image' );\n\t\t\tif ( !val ) {\n\t\t\t\timage.removeAttr( 'enable-delete' );\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\timage.attr( 'enable-delete', 1 );\n\t\t\t}\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\tvar form_data;\n\t\t\tif ( browser && browser.val() ) {\n\n\t\t\t\tif ( typeof FormData == 'undefined' ) {\n\t\t\t\t\tform_data = $this.find( '.browser-form' );\n\t\t\t\t} else {\n\t\t\t\t\tform_data = new FormData( $( $this.find( '.browser-form' ) )[0] );\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tform_data = null;\n\t\t\t}\n\n\t\t\treturn form_data;\n\t\t};\n\n\t\tthis.getImageSrc = function() {\n\t\t\tvar image = $this.find( '.image' );\n\t\t\treturn image.attr( 'src' );\n\t\t};\n\n\t\tthis.setImage = function( val ) {\n\t\t\tvar image = $this.find( '.image' );\n\n\t\t\tif ( !val ) {\n\t\t\t\timage.attr( 'src', '' );\n\t\t\t\timage.hide();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar d = new Date();\n\t\t\timage.hide();\n\t\t\timage.attr( 'src', val + '&t=' + d.getTime() );\n\t\t\timage.css( 'height', 'auto' );\n\t\t\timage.css( 'width', 'auto' );\n\n\t\t};\n\n\t\tvar onImageLoad = function( image ) {\n\n\t\t\tvar image_height = $( image ).height() > 0 ? $( image ).height() : image.naturalHeight;\n\t\t\tvar image_width = $( image ).width() > 0 ? $( image ).width() : image.naturalWidth;\n\n\t\t\tif ( image_height > default_height ) {\n\t\t\t\t$( image ).css( 'height', default_height );\n\n\t\t\t}\n\n\t\t\tif ( image_width > default_width ) {\n\t\t\t\t$( image ).css( 'width', default_width );\n\t\t\t\t$( image ).css( 'height', 'auto' );\n\t\t\t}\n\n\t\t\t$this.trigger( 'setSize' );\n\n\t\t\tif ( image_height < 5 ) {\n\t\t\t\t$( image ).hide();\n\t\t\t} else {\n\t\t\t\t$( image ).show();\n\t\t\t}\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\n\t\t};\n\n\t\tthis.each( function() {\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t\t// var $this = this;\n\n\t\t\tif ( o.default_width > 0 ) {\n\t\t\t\tdefault_width = o.default_width;\n\t\t\t}\n\n\t\t\tif ( o.default_height > 0 ) {\n\t\t\t\tdefault_height = o.default_height;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.name ) ) {\n\t\t\t\tname = o.name;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( accept_filter ) ) {\n\t\t\t\taccept_filter = o.accept_filter;\n\t\t\t}\n\n\t\t\tbrowser = $( this ).find( '.browser' );\n\t\t\tvar image = $( this ).find( '.image' );\n\t\t\timage.hide();\n\t\t\timage.on( 'load', function() {\n\t\t\t\tonImageLoad( this );\n\n\t\t\t} );\n\n\t\t\tif ( accept_filter ) {\n\t\t\t\tbrowser.attr( 'accept', accept_filter );\n\t\t\t} else {\n\t\t\t\taccept_filter = 'image/*';\n\t\t\t\tbrowser.attr( 'accept', 'image/*' );\n\t\t\t}\n\n\t\t\tbrowser.attr( 'id', id );\n\t\t\tbrowser.attr( 'name', name );\n\n\t\t\tif ( Global.isSet( o.changeHandler ) ) {\n\n\t\t\t\t$this.bind( 'imageChange', o.changeHandler );\n\t\t\t}\n\t\t\tif ( Global.isSet( o.deleteImageHandler ) ) {\n\t\t\t\tthis.find( '.file-browser' ).on( 'deleteClick', function() {\n\t\t\t\t\to.deleteImageHandler();\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tbrowser.bind( 'change', function() {\n\t\t\t\timage.hide();\n\n\t\t\t\tif ( typeof FileReader != 'undefined' ) {\n\n\t\t\t\t\tvar files = !!this.files ? this.files : [];\n\n\t\t\t\t\t// If no files were selected, or no FileReader support, return\n\t\t\t\t\tif ( !files.length || !window.FileReader ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( accept_filter === 'image/*' ) {\n\t\t\t\t\t\t// Create a new instance of the FileReader\n\t\t\t\t\t\tvar reader = new FileReader();\n\n\t\t\t\t\t\t// Read the local file as a DataURL\n\t\t\t\t\t\treader.readAsDataURL( files[0] );\n\n\t\t\t\t\t\t// When loaded, set image data as background of div\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = this.result;\n\t\t\t\t\t\t\timage.attr( 'src', url );\n\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t$this.trigger( 'imageChange', [$this] );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImageBrowser.defaults = {};\n\n} )( jQuery );","import '@/global/widgets/filebrowser/TImageBrowser';\nimport '@/global/widgets/filebrowser/TImageAdvBrowser';\n\n\nexport class CompanyViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tproduct_edition_array: null,\n\t\t\tindustry_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\t\t\te_province_array: null,\n\t\t\tterminated_user_disable_login_type_array: null,\n\t\t\tpassword_policy_type_array: null,\n\t\t\tpassword_minimum_permission_level_array: null,\n\t\t\tpassword_minimum_strength_array: null,\n\t\t\tldap_authentication_type_array: null,\n\n\t\t\tfile_browser: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tvar $this = this;\n\n\t\tthis.permission_id = 'company';\n\t\tthis.viewId = 'Company';\n\t\tthis.script_name = 'CompanyView';\n\t\tthis.table_name_key = 'company';\n\t\tthis.context_menu_name = $.i18n._( 'Company Information' );\n\t\tthis.api = TTAPI.APICompany;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\tContextMenuIconName.save,\n\t\t\t\tContextMenuIconName.cancel\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tinitOptions( callBack ) {\n\n\t\tvar options = [\n\t\t\t{ option_name: 'product_edition' },\n\t\t\t{ option_name: 'terminated_user_disable_login_type' },\n\t\t\t{ option_name: 'industry' },\n\t\t\t{ option_name: 'country' },\n\t\t\t{ option_name: 'password_policy_type' },\n\t\t\t{ option_name: 'password_minimum_permission_level', field_name: 'password_minimum_permission_level' },\n\t\t\t{ option_name: 'password_minimum_strength', field_name: 'password_minimum_strength' },\n\t\t\t{ option_name: 'ldap_authentication_type' }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\n\t\t} );\n\t}\n\n\tgetCompanyData( callBack ) {\n\t\tvar $this = this;\n\n\t\t// First to get current company's user default data, if no have any data to get the default data which has been set up in TTAPI.APIUserDefault.\n\t\tvar args = { filter_data: { id: LocalCacheData.getLoginUser().company_id } };\n\n\t\t$this.api['get' + $this.api.key_name]( args, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( Global.isSet( result_data[0] ) ) {\n\t\t\t\t\tcallBack( result_data[0] );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\topenEditView() {\n\n\t\tvar $this = this;\n\n\t\tif ( $this.edit_only_mode ) {\n\n\t\t\t$this.initOptions( function( result ) {\n\n\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t$this.initEditViewUI( 'Company', 'CompanyEditView.html' );\n\t\t\t\t}\n\n\t\t\t\t$this.getCompanyData( function( result ) {\n\t\t\t\t\t// Waiting for the TTAPI.API returns data to set the current edit record.\n\t\t\t\t\t$this.current_edit_record = result;\n\n\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tif ( !this.edit_view ) {\n\t\t\t\tthis.initEditViewUI( 'Company', 'CompanyEditView.html' );\n\t\t\t}\n\t\t}\n\n\t\tvar new_url = window.location.href;\n\t\tif ( new_url.indexOf( 'company_id' ) == -1 ) {\n\t\t\tnew_url = new_url + '&company_id=' + LocalCacheData.getLoginUser().company_id;\n\t\t\tGlobal.setURLToBrowser( new_url );\n\t\t}\n\t}\n\n\tremoveCompanyIdFromUrl() {\n\t\tvar new_url = window.location.href;\n\t\tif ( new_url.indexOf( 'company_id' ) != -1 ) {\n\t\t\tvar parts = new_url.split( '&' );\n\t\t\tnew_url = parts[0];\n\t\t\tfor ( var i = 1; i < ( parts.length - 1 ); i++ ) {\n\t\t\t\tnew_url += ( '&' + parts[i] );\n\t\t\t}\n\t\t\tGlobal.setURLToBrowser( new_url );\n\t\t}\n\t}\n\n\tremoveEditView() {\n\t\tthis.removeCompanyIdFromUrl();\n\t\tsuper.removeEditView();\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country':\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.file_browser.setImage( ServiceCaller.getURLByObjectType( 'company_logo' ) );\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.onTypeChange();\n\t}\n\n\tinitSubPasswordPolicyView() {\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tthis.edit_view_tab.find( '#tab_password_policy' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\tthis.buildContextMenu( true );\n\t\t\tthis.setEditMenu();\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_password_policy' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t}\n\t}\n\n\tsetEditMenuSaveIcon( context_btn, pId ) {\n\t\t//#2542 - Always needs a save icon as this view is always in edit-only mode, ver in view mode\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tswitch ( key ) {\n\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( key === 'ldap_authentication_type_id' ) {\n\n\t\t\tthis.onTypeChange();\n\t\t}\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tonSaveDone( result ) {\n\t\tif ( result.isValid() && result.getResult() === true ) {\n\t\t\tthis.updateCurrentCompanyCache();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tupdateCurrentCompanyCache() {\n\n\t\tvar authentication_api = TTAPI.APIAuthentication;\n\t\tauthentication_api.getCurrentCompany( { onResult: this.onGetCurrentCompany } );\n\t}\n\n\tonGetCurrentCompany( e ) {\n\n\t\tvar result = e.getResult();\n\t\tif ( result.is_setup_complete === '1' || result.is_setup_complete === 1 ) {\n\t\t\tresult.is_setup_complete = true;\n\t\t} else {\n\t\t\tresult.is_setup_complete = false;\n\t\t}\n\n\t\tLocalCacheData.setCurrentCompany( result );\n\t}\n\n\tupdateCompanyLogo() {\n\t\t$( '#rightLogo' ).css( 'opacity', 0 );\n\t\t$( '#rightLogo' ).attr( 'src', ServiceCaller.getURLByObjectType( 'company_logo' ) );\n\n\t\t$( '#rightLogo' ).on( 'load', function() {\n\n\t\t\tvar ratio = 42 / $( this ).height();\n\n\t\t\tif ( $( this ).height() > 42 ) {\n\t\t\t\t$( this ).css( 'height', 42 );\n\n\t\t\t\tif ( $( this ).width > 177 ) {\n\t\t\t\t\t$( this ).css( 'width', 177 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( $( this ).width > 177 ) {\n\t\t\t\t$( this ).css( 'width', 177 );\n\t\t\t}\n\n\t\t\t$( this ).animate( {\n\t\t\t\topacity: 1\n\t\t\t}, 100 );\n\t\t} );\n\t}\n\n\tsetErrorMenu() {\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\n\t\t} else {\n\n\t\t\tthis.api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tvar $this = this;\n\t\tsuper.buildEditViewUI();\n\n\t\tvar tab_model = {\n\t\t\t'tab_company': { 'label': $.i18n._( 'Company' ) },\n\t\t\t'tab_password_policy': {\n\t\t\t\t'label': $.i18n._( 'Password Policy' ),\n\t\t\t\t'init_callback': 'initSubPasswordPolicyView'\n\t\t\t},\n\t\t\t'tab_ldap': { 'label': $.i18n._( 'LDAP Authentication' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\t//Tab 0 start\n\n\t\tvar tab_company = this.edit_view_tab.find( '#tab_company' );\n\n\t\tvar tab_company_column1 = tab_company.find( '.first-column' );\n\t\tvar tab_company_column2 = tab_company.find( '.second-column' );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_company_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_company_column2 );\n\n\t\t// Product Edition\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'product_edition_id' } );\n\t\tform_item_input.setSourceData( $this.product_edition_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Product Edition' ), form_item_input, tab_company_column1, '' );\n\n\t\t// Full Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Full Name' ), form_item_input, tab_company_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Short Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'short_name', width: 128 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Short Name' ), form_item_input, tab_company_column1 );\n\n\t\t// Industry\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'industry_id' } );\n\t\tform_item_input.setSourceData( $this.industry_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Industry' ), form_item_input, tab_company_column1 );\n\n\t\t// Business/Employer ID Number\n//\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n//\t\tform_item_input.TTextInput( {field: 'business_number', width: 149} );\n//\t\tthis.addEditFieldToColumn( $.i18n._( 'Business/Employer ID Number' ), form_item_input, tab_company_column1 );\n\n\t\t// Address (Line 1)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address1', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 1)' ), form_item_input, tab_company_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Address (Line 2)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address2', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 2)' ), form_item_input, tab_company_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'city', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_company_column1 );\n\n\t\t//Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'country', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_company_column1 );\n\n\t\t//Province / State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'province' } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province/State' ), form_item_input, tab_company_column1 );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'postal_code', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_company_column1, '' );\n\n\t\t// Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'work_phone', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Phone' ), form_item_input, tab_company_column2, '' );\n\n\t\t// Fax\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'fax_phone', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fax' ), form_item_input, tab_company_column2 );\n\n\t\t// Administrative Contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'admin_contact'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Administrative Contact' ), form_item_input, tab_company_column2 );\n\n\t\t// billing contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'billing_contact'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Billing Contact' ), form_item_input, tab_company_column2 );\n\n\t\t// Primary Support contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'support_contact'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Primary Support Contact' ), form_item_input, tab_company_column2 );\n\n\t\t// Company Settings\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Company Settings' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_company_column2 );\n\n\t\t// Terminated User Disable Login Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'terminated_user_disable_login_type_id' } );\n\t\tform_item_input.setSourceData( $this.terminated_user_disable_login_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Disable Terminated Employees' ), form_item_input, tab_company_column2, '' );\n\n\t\t// Terminated User Disable Login After Days\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'terminated_user_disable_login_after_days', width: 25 } );\n\n\t\tvar terminated_user_disable_login_after_days_description = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tterminated_user_disable_login_after_days_description.append( form_item_input );\n\t\tterminated_user_disable_login_after_days_description.append( $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'Days' ) + ' )</span>' ) );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Disable Terminated Employees Login After' ), form_item_input, tab_company_column2, '', terminated_user_disable_login_after_days_description );\n\n\t\t// Logo\n\n\t\tif ( typeof FormData == 'undefined' ) {\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.IMAGE_BROWSER );\n\n\t\t\tthis.file_browser = form_item_input.TImageBrowser( { field: '', default_width: 128, default_height: 128 } );\n\n\t\t\tthis.file_browser.bind( 'imageChange', function( e, target ) {\n\t\t\t\tnew ServiceCaller().uploadFile( target.getValue(), 'object_type=company_logo', {\n\t\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t\tif ( result.toLowerCase() === 'true' ) {\n\t\t\t\t\t\t\t$this.file_browser.setImage( ServiceCaller.getURLByObjectType( 'company_logo' ) );\n\t\t\t\t\t\t\t$this.updateCompanyLogo();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tTAlertManager.showAlert( result, 'Error' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t} );\n\t\t} else {\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.IMAGE_AVD_BROWSER );\n\n\t\t\tthis.file_browser = form_item_input.TImageAdvBrowser( {\n\t\t\t\tfield: '', callBack: function( form_data ) {\n\t\t\t\t\tnew ServiceCaller().uploadFile( form_data, 'object_type=company_logo', {\n\t\t\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t\t\tif ( result.toLowerCase() === 'true' ) {\n\t\t\t\t\t\t\t\t$this.file_browser.setImage( ServiceCaller.getURLByObjectType( 'company_logo' ) );\n\t\t\t\t\t\t\t\t$this.updateCompanyLogo();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tTAlertManager.showAlert( result, 'Error' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tif ( this.is_edit || this.edit_only_mode ) {\n\t\t\tthis.file_browser.setEnableDelete( true );\n\t\t\tthis.file_browser.bind( 'deleteClick', function( e, target ) {\n\t\t\t\t$this.api.deleteImage( $this.current_edit_record.id, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.initEditView( result );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Logo' ), this.file_browser, tab_company_column2, '', null, false, true );\n\n\t\t// // Enable Second Surname\n\t\t// form_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t// form_item_input.TCheckbox( {field: 'enable_second_last_name'} );\n\t\t// this.addEditFieldToColumn( $.i18n._( 'Enable Second Surname' ), form_item_input, tab_company_column2, '' );\n\n\t\t//Tab 1 start\n\n\t\tvar tab_password_policy = this.edit_view_tab.find( '#tab_password_policy' );\n\n\t\tvar tab_password_policy_column1 = tab_password_policy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[1] = [];\n\n\t\tthis.edit_view_tabs[1].push( tab_password_policy_column1 );\n\n\t\t// Password Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'password_policy_type_id' } );\n\t\tform_item_input.setSourceData( $this.password_policy_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Password Policy' ), form_item_input, tab_password_policy_column1, '' );\n\n\t\t// Minimum Permission Level\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'password_minimum_permission_level' } );\n\t\tform_item_input.setSourceData( $this.password_minimum_permission_level_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Permission Level' ), form_item_input, tab_password_policy_column1 );\n\n\t\t// Minimum Strength\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'password_minimum_strength' } );\n\t\tform_item_input.setSourceData( $this.password_minimum_strength_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Strength' ), form_item_input, tab_password_policy_column1 );\n\n\t\t// Minimum Length\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'password_minimum_length', width: 30 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Length' ), form_item_input, tab_password_policy_column1 );\n\n\t\t// Minimum Age\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'password_minimum_age', width: 30 } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'in Days' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Age' ), form_item_input, tab_password_policy_column1, '', widgetContainer );\n\n\t\t// Maximum Age\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'password_maximum_age', width: 30 } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'in Days' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Maximum Age' ), form_item_input, tab_password_policy_column1, '', widgetContainer );\n\n\t\t//Tab 1 start\n\n\t\tvar tab_ldap = this.edit_view_tab.find( '#tab_ldap' );\n\n\t\tvar tab_ldap_column1 = tab_ldap.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[2] = [];\n\n\t\tthis.edit_view_tabs[2].push( tab_ldap_column1 );\n\n\t\t//\n\t\t// LDAP Authentication\n\t\t//\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'ldap_authentication_type_id' } );\n\t\tform_item_input.setSourceData( $this.ldap_authentication_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'LDAP Authentication' ), form_item_input, tab_ldap_column1 );\n\n\t\t// Server\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_host', width: 240 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(ie: ldap.example.com or ldaps://ldap.example.com for SSL)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Server' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Port\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_port', width: 50 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(ie: 389 or 636 for SSL)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Port' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Bind User Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_bind_user_name' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'Used to search for the user, for anonymous binding enter: anonymous' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bind User Name' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Bind Password\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_bind_password' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bind Password' ), form_item_input, tab_ldap_column1, '', null, true );\n\n\t\t// Base DN\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_base_dn', width: 300 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(ie: ou=People,dc=example,dc=com)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Base DN' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Bind Attribute\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_bind_attribute', width: 150 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'For binding the LDAP user. (ie: AD/openLDAP: userPrincipalName, Mac OSX: uid)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bind Attribute' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// User Filter\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_user_filter', width: 150 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'Additional filter parameters. (ie: is_timetrex_user=1)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'User Filter' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Login Attribute\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_login_attribute', width: 150 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'For searching the LDAP user. (ie: AD: sAMAccountName, openLDAP: dn, Mac OSX: dn)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Login Attribute' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\t}\n\n\tonTypeChange() {\n\t\tif ( this.current_edit_record.ldap_authentication_type_id == 0 ) {\n\t\t\tthis.detachElement( 'ldap_host' );\n\t\t\tthis.detachElement( 'ldap_port' );\n\t\t\tthis.detachElement( 'ldap_bind_user_name' );\n\t\t\tthis.detachElement( 'ldap_bind_password' );\n\t\t\tthis.detachElement( 'ldap_base_dn' );\n\t\t\tthis.detachElement( 'ldap_bind_attribute' );\n\t\t\tthis.detachElement( 'ldap_user_filter' );\n\t\t\tthis.detachElement( 'ldap_login_attribute' );\n\n\t\t} else {\n\t\t\tthis.attachElement( 'ldap_host' );\n\t\t\tthis.attachElement( 'ldap_port' );\n\t\t\tthis.attachElement( 'ldap_bind_user_name' );\n\t\t\tthis.attachElement( 'ldap_bind_password' );\n\t\t\tthis.attachElement( 'ldap_base_dn' );\n\t\t\tthis.attachElement( 'ldap_bind_attribute' );\n\t\t\tthis.attachElement( 'ldap_user_filter' );\n\t\t\tthis.attachElement( 'ldap_login_attribute' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n}\n\n//\n//CompanyViewController.loadView = function() {\n//\n//\t  Global.loadViewSource( 'Company', 'CompanyView.html', function( result ) {\n//\n//\t\t  var args = {};\n//\t\t  var template = _.template( result, args );\n//\n//\t\t  Global.contentContainer().html( template );\n//\t  } )\n//\n//};"],"sourceRoot":""}