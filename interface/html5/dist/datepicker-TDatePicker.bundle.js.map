{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/datepicker/TDatePicker.js"],"names":["$","jQuery","fn","TDatePicker","options","field","validation_field","date_picker_input","icon","error_tip_box","multiple","opts","extend","defaults","$this","this","error_string","mode","check_box","enabled","is_open","is_static_width","getEnabled","setEnabled","val","addClass","css","attr","hide","removeClass","removeAttr","show","setCheckBox","children","eq","checked","isChecked","setMassEditMode","insertBefore","change","trigger","remove","setErrorStyle","errStr","isWarning","showErrorTip","sec","Global","isSet","loadWidgetByName","WidgetNamesDic","ERROR_TOOLTIP","ErrorTipBox","hasClass","hideErrorTip","clearErrorStyle","getField","getValidationField","getDefaultFormatValue","strToDate","format","setPlaceHolder","getValue","setValue","autoResize","setDefaultWidgetValue","content_width","example_width","example_display","LocalCacheData","getLoginUserPreference","date_format_display","calculateTextWidth","time_format_display","min_width","max_width","padding","width","each","o","meta","data","find","getRealImagePath","bind","e","stopPropagation","datepicker","time_format","date_format_1","time_format_1","day_name_min","i18n","_","month_name_short","current_text","close_text","_gotoToday","id","Date","showOtherMonths","selectOtherMonths","showTime","dateFormat","showHour","showMinute","changeMonth","changeYear","showButtonPanel","duration","showAnim","yearRange","showOn","dayNamesMin","currentText","monthNamesShort","closeText","beforeShow","onClose","datetimepicker","timeFormat","loginUserPreference","mouseover","length","mouseout","is","focusin","current_open_sub_controller","edit_view","is_viewing","current_open_primary_controller","view_mode_message","focusout"],"mappings":"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","file":"datepicker-TDatePicker.bundle.js?v=860cb9e3a05f8a2f4634","sourcesContent":["( function( $ ) {\n\n\t$.fn.TDatePicker = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TDatePicker.defaults, options );\n\t\t//Global.addCss( 'global/widgets/datepicker/TDatePicker.css' );\n\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar validation_field;\n\t\tvar date_picker_input;\n\t\tvar icon;\n\t\tvar error_string = '';\n\t\tvar error_tip_box;\n\t\tvar mode = 'date';\n\t\tvar multiple; // This is used to test Punches -> Edit view Date\n\t\tvar mass_edit_mode = false;\n\t\tvar check_box = null;\n\t\tvar enabled = true;\n\t\tvar is_open = false;\n\t\tvar focus_out_timer;\n\t\tvar can_open = false; //default when the calender can be open, we only open it when click on the icon\n\t\tvar is_static_width = false;\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\t//$this.attr( 'disabled', 'true' );\n\t\t\t\tdate_picker_input.addClass( 't-date-picker-readonly' );\n\t\t\t\ticon.css( 'display', 'none' );\n\t\t\t\tdate_picker_input.attr( 'readonly', 'readonly' );\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.hide();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//$this.removeAttr( 'disabled' );\n\t\t\t\tdate_picker_input.removeClass( 't-date-picker-readonly' );\n\t\t\t\ticon.css( 'display', 'inline' );\n\t\t\t\tdate_picker_input.removeAttr( 'readonly' );\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.show();\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tif ( check_box ) {\n\t\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t\t}\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\tdate_picker_input.addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\tdate_picker_input.addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( date_picker_input.hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\t// Error: TypeError: date_picker_input is undefined in /interface/html5/global/widgets/datepicker/TDatePicker.js?v=8.0.3-20150313-161037 line 122\n\t\tthis.clearErrorStyle = function() {\n\t\t\tif ( !date_picker_input ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdate_picker_input.removeClass( 'error-tip' );\n\t\t\tdate_picker_input.removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValidationField = function() {\n\t\t\treturn validation_field;\n\t\t};\n\n\t\tthis.getDefaultFormatValue = function() {\n\t\t\t// Error: Uncaught TypeError: Cannot read property 'val' of undefined in interface/html5/global/widgets/datepicker/TDatePicker.js?v=9.0.5-20151222-162114 line 145\n\t\t\tvar val = date_picker_input ? date_picker_input.val() : null;\n\t\t\t//Error: Uncaught TypeError: Cannot read property 'format' of null in interface/html5/global/widgets/datepicker/TDatePicker.js?v=9.0.0-20150909-213207 line 140\n\t\t\tval = Global.strToDate( val ) && Global.strToDate( val ).format( 'YYYY-MM-DD' );\n\n\t\t\treturn val;\n\t\t};\n\n\t\tthis.setPlaceHolder = function( val ) {\n\t\t\tdate_picker_input.attr( 'placeholder', val );\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\t// This is used to test Punches -> Edit view Date\n\t\t\tif ( multiple ) {\n\t\t\t\treturn [date_picker_input.val()];\n\t\t\t}\n\n\t\t\treturn date_picker_input.val();\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\t//Error: Uncaught TypeError: Cannot read property 'val' of undefined in /interface/html5/global/widgets/datepicker/TDatePicker.js?v=8.0.0-20141230-130626 line 144\n\t\t\tif ( !date_picker_input ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\t\t\tdate_picker_input.val( val );\n\t\t\tthis.autoResize();\n\t\t};\n\n\t\tthis.setDefaultWidgetValue = function() {\n\t\t\tif ( $( this ).attr( 'widget-value' ) ) {\n\t\t\t\tthis.setValue( $( this ).attr( 'widget-value' ) );\n\t\t\t}\n\t\t};\n\n\t\tthis.autoResize = function() {\n\t\t\tvar content_width, example_width, example_display;\n\t\t\tif ( LocalCacheData.getLoginUserPreference() ) {\n\t\t\t\texample_display = LocalCacheData.getLoginUserPreference().date_format_display;\n\t\t\t} else {\n\t\t\t\texample_display = 'dd-mmm-yy';\n\t\t\t}\n\t\t\tif ( !is_static_width ) {\n\t\t\t\tif ( mode === 'date' ) {\n\t\t\t\t\texample_width = Global.calculateTextWidth( example_display );\n\t\t\t\t} else if ( mode === 'date_time' ) {\n\t\t\t\t\texample_width = Global.calculateTextWidth( example_display + ' ' + LocalCacheData.getLoginUserPreference().time_format_display );\n\t\t\t\t}\n\t\t\t\tcontent_width = Global.calculateTextWidth( date_picker_input.val(), {\n\t\t\t\t\tmin_width: example_width,\n\t\t\t\t\tmax_width: ( example_width + 100 ),\n\t\t\t\t\tpadding: 28\n\t\t\t\t} );\n\t\t\t\t$this.width( content_width + 'px' );\n\t\t\t}\n\t\t};\n\n\t\tthis.each( function() {\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\t\t\tfield = o.field;\n\t\t\tif ( o.validation_field ) {\n\t\t\t\tvalidation_field = o.validation_field;\n\t\t\t}\n\t\t\tmultiple = o.multiple; // This is used to test Punches -> Edit view Date\n\t\t\tif ( Global.isSet( o.mode ) ) {\n\t\t\t\tmode = o.mode;\n\t\t\t}\n\t\t\ticon = $( this ).find( '.t-date-picker-icon' );\n\t\t\tdate_picker_input = $( this ).find( '.t-date-picker' );\n\t\t\ticon.attr( 'src', Global.getRealImagePath( 'images/cal.png' ) );\n\n\t\t\ticon.bind( 'mousedown', function( e ) {\n\t\t\t\te.stopPropagation(); //Stop jquery-ui datepickers own mousedown event from firing, which cause the date picker to close, then the below 'mouseup' event opens it again.\n\t\t\t} );\n\n\t\t\ticon.bind( 'mouseup', function() { //Need to use 'mouseup' event as main.js binds 'mousedown' for closing when clicked off.\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( !is_open ) {\n\t\t\t\t\tdate_picker_input.datepicker( 'show' );\n\t\t\t\t\tis_open = true;\n\t\t\t\t} else {\n\t\t\t\t\tdate_picker_input.datepicker( 'hide' );\n\t\t\t\t\tis_open = false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tvar time_format = 'h:mm TT';\n\t\t\tvar format = 'dd-M-y';\n\t\t\t// When portal mode, no user preference.\n\t\t\tif ( LocalCacheData.getLoginUserPreference() ) {\n\t\t\t\tformat = LocalCacheData.getLoginUserPreference().date_format_1;\n\t\t\t\ttime_format = LocalCacheData.getLoginUserPreference().time_format_1;\n\t\t\t}\n\t\t\tvar day_name_min = [\n\t\t\t\t$.i18n._( 'Sun' ), $.i18n._( 'Mon' ), $.i18n._( 'Tue' ),\n\t\t\t\t$.i18n._( 'Wed' ), $.i18n._( 'Thu' ), $.i18n._( 'Fri' ), $.i18n._( 'Sat' )\n\t\t\t];\n\t\t\tvar month_name_short = [\n\t\t\t\t$.i18n._( 'Jan' ), $.i18n._( 'Feb' ),\n\t\t\t\t$.i18n._( 'Mar' ), $.i18n._( 'Apr' ), $.i18n._( 'May' ),\n\t\t\t\t$.i18n._( 'Jun' ), $.i18n._( 'Jul' ), $.i18n._( 'Aug' ),\n\t\t\t\t$.i18n._( 'Sep' ), $.i18n._( 'Oct' ), $.i18n._( 'Nov' ),\n\t\t\t\t$.i18n._( 'Dec' )\n\t\t\t];\n\t\t\tvar current_text = $.i18n._( 'Today' );\n\t\t\tvar close_text = $.i18n._( 'Close' );\n\n\t\t\t$.datepicker._gotoToday = function( id ) {\n\t\t\t\t//This fixes JS exception when using the \"TODAY\" button in the date pickers: Uncaught TypeError: Cannot read property 'selectedYear' of undefined\n\t\t\t\t$( id ).datepicker( 'setDate', new Date() ).datepicker( 'hide' ).change();\n\n\t\t\t\t// var target = $( id );\n\t\t\t\t// var inst = this._getInst( target[0] );\n\t\t\t\t// if ( this._get( inst, 'gotoCurrent' ) && inst.currentDay ) {\n\t\t\t\t// \tinst.selectedDay = inst.currentDay;\n\t\t\t\t// \tinst.drawMonth = inst.selectedMonth = inst.currentMonth;\n\t\t\t\t// \tinst.drawYear = inst.selectedYear = inst.currentYear;\n\t\t\t\t// }\n\t\t\t\t// else {\n\t\t\t\t// \tvar date = new Date();\n\t\t\t\t// \tinst.selectedDay = date.getDate();\n\t\t\t\t// \tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\t\t\t// \tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\t\t\t// \t// the below two lines are new\n\t\t\t\t// \tthis._setDateDatepicker( target, date );\n\t\t\t\t// \tthis._selectDate( id, this._getDateDatepicker( target ) );\n\t\t\t\t// \t$( target ).datepicker( 'setDate', date );\n\t\t\t\t// }\n\t\t\t\t// this._notifyChange( inst );\n\t\t\t\t// this._adjustDate( target );\n\t\t\t};\n\n\t\t\tif ( mode === 'date' ) {\n\t\t\t\tdate_picker_input = date_picker_input.datepicker( {\n\t\t\t\t\tshowOtherMonths: true,\n\t\t\t\t\tselectOtherMonths: true,\n\t\t\t\t\tshowTime: false,\n\t\t\t\t\tdateFormat: format,\n\t\t\t\t\tshowHour: false,\n\t\t\t\t\tshowMinute: false,\n\t\t\t\t\tchangeMonth: true,\n\t\t\t\t\tchangeYear: true,\n\t\t\t\t\tshowButtonPanel: true,\n\t\t\t\t\tduration: '',\n\t\t\t\t\tshowAnim: '',\n\t\t\t\t\tyearRange: '-100:+10',\n\t\t\t\t\tshowOn: '',\n\t\t\t\t\tdayNamesMin: day_name_min,\n\t\t\t\t\tcurrentText: current_text,\n\t\t\t\t\tmonthNamesShort: month_name_short,\n\t\t\t\t\tcloseText: close_text,\n\t\t\t\t\tbeforeShow: function() {\n\t\t\t\t\t\tif ( o.beforeShow ) {\n\t\t\t\t\t\t\to.beforeShow();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\tonClose: function() {\n\t\t\t\t\t\tis_open = false;\n\t\t\t\t\t\t$this.autoResize();\n\t\t\t\t\t\tif ( o.onClose ) {\n\t\t\t\t\t\t\to.onClose();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t//#2353 - removed because it breaks the month navigation buttons\n\t\t\t\t\t// onChangeMonthYear: function( year, month, args ) {\n\t\t\t\t\t// \tvar day = $.datepicker.formatDate( 'dd', $( this ).datepicker( 'getDate' ) );\n\t\t\t\t\t// \t$( this ).val( $.datepicker.formatDate( format, new Date( year, month - 1, day ) ) );\n\t\t\t\t\t// }\n\n\t\t\t\t} );\n\n\t\t\t\t// Portal mode, no user preference.\n\t\t\t\tif ( LocalCacheData.getLoginUserPreference() ) {\n\t\t\t\t\t$this.setPlaceHolder( LocalCacheData.getLoginUserPreference().date_format_display );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setPlaceHolder( 'dd-mmm-yy' );\n\t\t\t\t}\n\n\t\t\t} else if ( mode === 'date_time' ) {\n\t\t\t\tdate_picker_input = date_picker_input.datetimepicker( {\n\t\t\t\t\tshowOtherMonths: true,\n\t\t\t\t\tselectOtherMonths: true,\n\t\t\t\t\tdateFormat: format,\n\t\t\t\t\ttimeFormat: time_format,\n\t\t\t\t\tshowTime: true,\n\t\t\t\t\tshowHour: true,\n\t\t\t\t\tshowMinute: true,\n\t\t\t\t\tchangeMonth: true,\n\t\t\t\t\tchangeYear: true,\n\t\t\t\t\tshowButtonPanel: true,\n\t\t\t\t\tduration: '',\n\t\t\t\t\tshowAnim: '',\n\t\t\t\t\tshowOn: '',\n\t\t\t\t\tyearRange: '-100:+10',\n\t\t\t\t\tcloseText: close_text,\n\t\t\t\t\tdayNamesMin: day_name_min,\n\t\t\t\t\tmonthNamesShort: month_name_short,\n\t\t\t\t\tcurrentText: current_text,\n\t\t\t\t\tonClose: function() {\n\t\t\t\t\t\tis_open = false;\n\t\t\t\t\t\t$this.autoResize();\n\t\t\t\t\t\tif ( o.onClose ) {\n\t\t\t\t\t\t\to.onClose();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\t$this.setPlaceHolder( LocalCacheData.loginUserPreference.date_format_display + ' ' + LocalCacheData.loginUserPreference.time_format_display );\n\t\t\t}\n\n\t\t\tdate_picker_input.change( function() {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t$this.autoResize();\n\t\t\t} );\n\n\t\t\tdate_picker_input.mouseover( function() {\n\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tdate_picker_input.mouseout( function() {\n\t\t\t\tif ( !$( $this ).is( ':focus' ) ) {\n\t\t\t\t\t$this.hideErrorTip();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tdate_picker_input.focusin( function( e ) {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( !check_box ) {\n\t\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tdate_picker_input.focusout( function() {\n\t\t\t\t$this.hideErrorTip();\n\n\t\t\t} );\n\n\t\t\tif ( o.width > 0 ) {\n\t\t\t\t$this.width( o.width );\n\t\t\t\tis_static_width = true;\n\t\t\t} else {\n\t\t\t\t$this.autoResize();\n\t\t\t\tis_static_width = false;\n\t\t\t}\n\n\t\t\t$this.setDefaultWidgetValue();\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TDatePicker.defaults = {};\n\n} )( jQuery );\n"],"sourceRoot":""}