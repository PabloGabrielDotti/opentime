(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["attendance-job-JobViewController"],{1088:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"JobViewController":()=>o});class o extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#job_view_container",status_array:null,job_group_array:null,job_group_api:null,user_group_api:null,job_item_group_api:null,job_detail_report_api:null,user_group_selection_type_array:null,user_branch_selection_type_array:null,user_department_selection_type_array:null,job_item_group_selection_type_array:null,user_group_array:null,sub_document_view_controller:null,sub_job_item_amendment_view_controller:null,document_object_type_id:null,date_api:null,report_template:null,country_array:null,province_array:null,e_province_array:null,company_api:null}),super(e)}init(e){this.edit_view_tpl="JobEditView.html",this.permission_id="job",this.viewId="Job",this.script_name="JobView",this.table_name_key="job",this.context_menu_name=$.i18n._("Job"),this.navigation_label=$.i18n._("Job")+":",this.document_object_type_id=60,this.api=TTAPI.APIJob,this.date_api=TTAPI.APITTDate,this.job_group_api=TTAPI.APIJobGroup,this.user_group_api=TTAPI.APIUserGroup,this.job_item_group_api=TTAPI.APIJobItemGroup,this.job_detail_report_api=TTAPI.APIJobDetailReport,this.company_api=TTAPI.APICompany,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary("Job")}initOptions(){var e=this;this.initDropDownOption("status"),this.initDropDownOption("user_group_selection_type"),this.initDropDownOption("user_branch_selection_type"),this.initDropDownOption("user_department_selection_type"),this.initDropDownOption("job_item_group_selection_type"),this.initDropDownOption("country","country",this.company_api),this.job_group_api.getJobGroup("",!1,!1,{onResult:function(t){t=t.getResult(),t=Global.buildTreeRecord(t),!e.sub_view_mode&&e.basic_search_field_ui_dic.group_id&&(e.basic_search_field_ui_dic.group_id.setSourceData(t),e.adv_search_field_ui_dic.group_id.setSourceData(t)),e.job_group_array=t}}),this.user_group_api.getUserGroup("",!1,!1,{onResult:function(t){t=t.getResult(),t=Global.buildTreeRecord(t),e.user_group_array=t}}),this.job_item_group_api.getJobItemGroup("",!1,!1,{onResult:function(t){t=t.getResult(),t=Global.buildTreeRecord(t),e.job_item_group_array=t}}),this.job_detail_report_api.getTemplate("view_job_detail",{onResult:function(t){t=t.getResult(),e.report_template=t}})}getCustomContextMenuModel(){return{exclude:[],include:[{label:$.i18n._("Invoice"),id:ContextMenuIconName.job_invoice,group:"other",icon:Icons.invoice,permission_result:PermissionManager.checkTopLevelPermission("JobInvoice"),permission:null},{label:$.i18n._("Import"),id:ContextMenuIconName.import_icon,group:"other",icon:Icons.import_icon,permission_result:PermissionManager.checkTopLevelPermission("ImportCSVJob"),permission:null,sort_order:8e3},{label:$.i18n._("Report"),id:ContextMenuIconName.print,group:"other",icon:Icons.print},{label:$.i18n._("Map"),id:ContextMenuIconName.map,group:"other",icon:Icons.map}]}}onCustomContextClick(e){switch(e){case ContextMenuIconName.import_icon:this.onOtherIconsClick("ImportCSVWizard");break;case ContextMenuIconName.job_invoice:this.onOtherIconsClick("JobInvoiceWizard");break;case ContextMenuIconName.print:this.generatePDFReport()}}onMapClick(){if(Global.getProductEdition()>=15){this.is_viewing=!1,ProgressBar.showProgressBar();var e={filter_columns:{id:!0,name:!0,address1:!0,address2:!0,city:!0,province:!0,country:!0,postal_code:!0,latitude:!0,longitude:!0}},t=this.getGridSelectIdArray();e.filter_data=Global.convertLayoutFilterToAPIFilter(this.select_layout),t.length>0&&(e.filter_data.id=t);var o=this.api.getJob(e,{async:!1}).getResult();this.is_mass_editing||Promise.all([i.e("vendors-node_modules_leaflet-draw_dist_leaflet_draw_js-node_modules_leaflet_dist_leaflet-src_js"),i.e("vendors-node_modules_leaflet_dist_images_marker-icon-2x_png-node_modules_leaflet_dist_images_-e2a419"),i.e("interface_html5_framework_leaflet_leaflet-timetrex_js"),i.e("leaflet-timetrex")]).then(i.bind(i,6889)).then((e=>{var t=e.TTConvertMapData.processBasicFromGenericViewController(o);IndexViewController.openEditView(this,"Map",t)})).catch(Global.importErrorHandler)}}getSelectEmployee(e){return e?LocalCacheData.getLoginUser():LocalCacheData.getLoginUser().id}generatePDFReport(){var e,t=this,i=[];if(t.edit_view&&t.current_edit_record.id?i.push(t.current_edit_record.id):(e=this.getGridSelectIdArray(),$.each(e,(function(e,o){var a=t.getRecordFromGridById(o);i.push(a.id)}))),!(i.length>0))return TAlertManager.showAlert($.i18n._("No selected record")),void ProgressBar.closeOverlay();if(this.report_template){this.report_template.include_job_id=i;var o=[];o.push(this.report_template),o.push("pdf_job_detail"),this.doFormIFrameCall(o)}}doFormIFrameCall(e){Global.APIFileDownload("APIJobDetailReport","getJobDetailReport",e)}removeEditView(){super.removeEditView(),this.sub_job_item_amendment_view_controller=null}onOtherIconsClick(e){var t=this;IndexViewController.openWizard(e,null,(function(){t.search()}))}buildEditViewUI(){super.buildEditViewUI();var e=this,t={"tab_job":{"label":$.i18n._("Job")},"tab_location":{"label":$.i18n._("Location")},"tab_employee_criteria":{"label":$.i18n._("Employee Criteria")},"tab_task_criteria":{"label":$.i18n._("Task Criteria")},"tab_task_amendments":{"label":$.i18n._("Task Amendments"),"init_callback":"initSubJobItemAmendmentView","display_on_mass_edit":!1},"tab_attachment":!0,"tab_audit":!0};this.setTabModel(t),this.navigation.AComboBox({api_class:TTAPI.APIJob,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_job",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i,o,a=this.edit_view_tab.find("#tab_job"),_=a.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(_),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"status_id"}),i.setSourceData(e.status_array),this.addEditFieldToColumn($.i18n._("Status"),i,_,""),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),i,_),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),i,_),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"manual_id",width:65}),this.addEditFieldToColumn($.i18n._("Code"),i,_),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({tree_mode:!0,allow_multiple_selection:!1,layout_name:"global_tree_column",set_empty:!0,field:"group_id"}),i.setSourceData(e.job_group_array),this.addEditFieldToColumn($.i18n._("Group"),i,_),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIClient,allow_multiple_selection:!1,layout_name:"global_client",show_search_inputs:!0,set_empty:!0,field:"client_id"}),this.addEditFieldToColumn($.i18n._("Client"),i,_),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIBranch,allow_multiple_selection:!1,layout_name:"global_branch",show_search_inputs:!0,set_empty:!0,field:"branch_id"}),this.addEditFieldToColumn($.i18n._("Branch"),i,_),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIDepartment,allow_multiple_selection:!1,layout_name:"global_department",show_search_inputs:!0,set_empty:!0,field:"department_id"}),this.addEditFieldToColumn($.i18n._("Department"),i,_),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!1,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"supervisor_user_id"}),this.addEditFieldToColumn($.i18n._("Supervisor"),i,_),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!1,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,field:"default_item_id"}),this.addEditFieldToColumn($.i18n._("Default Task"),i,_),Global.getProductEdition()>=20&&((i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIGEOFence,allow_multiple_selection:!0,layout_name:"global_geo_fence",show_search_inputs:!0,set_empty:!0,field:"geo_fence_ids"}),this.addEditFieldToColumn($.i18n._("Allowed GEO Fences"),i,_)),(i=Global.loadWidgetByName(FormItemType.TAG_INPUT)).TTagInput({field:"tag",object_type_id:600}),this.addEditFieldToColumn($.i18n._("Tags"),i,_,"",null,null,!0);var l=a.find(".second-column");this.edit_view_tabs[0].push(l),(i=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"start_date"}),this.addEditFieldToColumn($.i18n._("Start Date"),i,l),(i=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"end_date"}),this.addEditFieldToColumn($.i18n._("End Date"),i,l),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"estimate_time",mode:"time_unit",need_parser_sec:!0}),o=$("<div class='widget-h-box'></div>");var n=$("<span style='margin-bottom: 5px; margin-top: 0; width: 300px; display: block;'>"+$.i18n._("Set estimates to 0 to use Task Billable Amounts instead.")+" </span>");o.append(n),o.append(i),this.addEditFieldToColumn($.i18n._("Estimate Time"),i,l,"",o,!0,!1),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"billable_rate",width:86}),this.addEditFieldToColumn($.i18n._("Billable Rate"),i,l),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"minimum_time",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn($.i18n._("Minimum Time"),i,l,"",null),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"estimate_quantity",width:150}),this.addEditFieldToColumn($.i18n._("Estimate Quantity"),i,l),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"estimate_bad_quantity",width:150}),this.addEditFieldToColumn($.i18n._("Estimate Bad Quantity"),i,l),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"bad_quantity_rate",width:150}),this.addEditFieldToColumn($.i18n._("Bad Quantity Rate"),i,l),(i=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"note",width:"100%"}),this.addEditFieldToColumn($.i18n._("Note"),i,l,"",null,null,!0),i.parent().width("45%");var r=this.edit_view_tab.find("#tab_location").find(".first-column");this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(r),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address1",width:"100%"}),this.addEditFieldToColumn($.i18n._("Address (Line 1)"),i,r),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address2",width:"100%"}),this.addEditFieldToColumn($.i18n._("Address (Line 2)"),i,r),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"city",width:149}),this.addEditFieldToColumn($.i18n._("City"),i,r),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"country",set_empty:!0}),i.setSourceData(e.country_array),this.addEditFieldToColumn($.i18n._("Country"),i,r),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"province"}),i.setSourceData([]),this.addEditFieldToColumn($.i18n._("Province/State"),i,r),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"postal_code",width:149}),this.addEditFieldToColumn($.i18n._("Postal/ZIP Code"),i,r),(i=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"location_note",width:"100%"}),this.addEditFieldToColumn($.i18n._("Location Note"),i,r,"",null,null,!0),i.parent().width("45%");var d=this.edit_view_tab.find("#tab_employee_criteria").find(".first-column");this.edit_view_tabs[2]=[],this.edit_view_tabs[2].push(d);var s=$("<div class='v-box'></div>");(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"user_group_selection_type_id"}),i.setSourceData(e.user_group_selection_type_array);var m=this.putInputToInsideFormItem(i,$.i18n._("Selection Type"));s.append(m),s.append("<div class='clear-both-div'></div>");var u=Global.loadWidgetByName(FormItemType.AWESOME_BOX);u.AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"user_group_ids"}),u.setSourceData(e.user_group_array),m=this.putInputToInsideFormItem(u,$.i18n._("Selection")),s.append(m),this.addEditFieldToColumn($.i18n._("Employee Groups"),[i,u],d,"",s,!1,!0),s=$("<div class='v-box'></div>"),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"user_branch_selection_type_id"}),i.setSourceData(e.user_branch_selection_type_array),m=this.putInputToInsideFormItem(i,$.i18n._("Selection Type")),s.append(m),s.append("<div class='clear-both-div'></div>"),(u=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIBranch,allow_multiple_selection:!0,layout_name:"global_branch",show_search_inputs:!0,set_empty:!0,field:"user_branch_ids"}),m=this.putInputToInsideFormItem(u,$.i18n._("Selection")),s.append(m),this.addEditFieldToColumn($.i18n._("Branches"),[i,u],d,"",s,!1,!0),s=$("<div class='v-box'></div>"),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"user_department_selection_type_id"}),i.setSourceData(e.user_department_selection_type_array),m=this.putInputToInsideFormItem(i,$.i18n._("Selection Type")),s.append(m),s.append("<div class='clear-both-div'></div>"),(u=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIDepartment,allow_multiple_selection:!0,layout_name:"global_department",show_search_inputs:!0,set_empty:!0,field:"user_department_ids"}),m=this.putInputToInsideFormItem(u,$.i18n._("Selection")),s.append(m),this.addEditFieldToColumn($.i18n._("Departments"),[i,u],d,"",s,!1,!0),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!0,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"include_user_ids"}),this.addEditFieldToColumn($.i18n._("Include Employees"),i,d),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!0,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"exclude_user_ids"}),this.addEditFieldToColumn($.i18n._("Exclude Employees"),i,d,"");var c=this.edit_view_tab.find("#tab_task_criteria").find(".first-column");this.edit_view_tabs[3]=[],this.edit_view_tabs[3].push(c),s=$("<div class='v-box'></div>"),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_item_group_selection_type_id"}),i.setSourceData(e.job_item_group_selection_type_array),m=this.putInputToInsideFormItem(i,$.i18n._("Selection Type")),s.append(m),s.append("<div class='clear-both-div'></div>"),(u=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"job_item_group_ids"}),u.setSourceData(e.job_item_group_array),m=this.putInputToInsideFormItem(u,$.i18n._("Selection")),s.append(m),this.addEditFieldToColumn($.i18n._("Task Groups"),[i,u],c,"",s,!1,!0),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!0,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,field:"include_job_item_ids"}),this.addEditFieldToColumn($.i18n._("Include Tasks"),i,c),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!0,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,field:"exclude_job_item_ids"}),this.addEditFieldToColumn($.i18n._("Exclude Tasks"),i,c,"")}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Code"),in_column:1,field:"manual_id",multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Description"),in_column:1,field:"description",multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Supervisor"),in_column:1,field:"supervisor",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Tags"),field:"tag",basic_search:!0,adv_search:!0,in_column:1,object_type_id:600,form_item_type:FormItemType.TAG_INPUT}),new SearchField({label:$.i18n._("Group"),in_column:2,multiple:!0,field:"group_id",layout_name:"global_tree_column",tree_mode:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Branch"),in_column:2,field:"branch_id",layout_name:"global_branch",api_class:TTAPI.APIBranch,multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Department"),in_column:2,field:"department_id",layout_name:"global_department",api_class:TTAPI.APIDepartment,multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Client"),in_column:2,field:"client_id",layout_name:"global_client",api_class:TTAPI.APIClient,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX})]}checkTabPermissions(e){var t=!1;switch(e){case"tab_task_amendments":(PermissionManager.validate("job_item","edit")||PermissionManager.validate("job_item","edit_child")||PermissionManager.validate("job_item","edit_own"))&&(t=!0);break;default:t=super.checkTabPermissions(e)}return t}initSubJobItemAmendmentView(){var e=this;if(this.current_edit_record.id){if(this.sub_job_item_amendment_view_controller)return this.sub_job_item_amendment_view_controller.buildContextMenu(!0),this.sub_job_item_amendment_view_controller.setDefaultMenu(),e.sub_job_item_amendment_view_controller.parent_key="job_id",e.sub_job_item_amendment_view_controller.parent_value=e.current_edit_record.id,e.sub_job_item_amendment_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_item_amendment_view_controller.parent_view_controller=e,void e.sub_job_item_amendment_view_controller.initData();Global.loadScript("views/attendance/job_item_amendment/JobItemAmendmentViewController.js",(function(){var o=e.edit_view_tab.find("#tab_task_amendments").find(".first-column-sub-view");Global.trackView("SubJobItemAmendmentView"),JobItemAmendmentViewController.loadSubView(o,t,i)}))}else TTPromise.resolve("BaseViewController","onTabShow");function t(){}function i(t){e.sub_job_item_amendment_view_controller=t,e.sub_job_item_amendment_view_controller.parent_key="job_id",e.sub_job_item_amendment_view_controller.parent_value=e.current_edit_record.id,e.sub_job_item_amendment_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_item_amendment_view_controller.parent_view_controller=e,e.sub_job_item_amendment_view_controller.initData()}}setCurrentEditRecordData(){for(var e in this.setDefaultData({"user_branch_selection_type_id":10,"user_department_selection_type_id":10,"user_group_selection_type_id":10,"job_item_group_selection_type_id":10}),this.current_edit_record){var t=this.edit_view_ui_dic[e];if(Global.isSet(t))switch(e){case"country":this.current_edit_record[e]||(this.current_edit_record[e]=LocalCacheData.getCurrentCompany().country),this.eSetProvince(this.current_edit_record[e]),t.setValue(this.current_edit_record[e]);break;case"province":this.current_edit_record[e]||(this.current_edit_record[e]=LocalCacheData.getCurrentCompany().province),t.setValue(this.current_edit_record[e]);break;default:t.setValue(this.current_edit_record[e])}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}setEditViewDataDone(){super.setEditViewDataDone(),this.onEmployeeGroupSelectionTypeChange(),this.onBranchSelectionTypeChange(),this.onDepartmentSelectionTypeChange(),this.isDisableIncludeEmployees(),this.onJobItemGroupSelectionTypeChange(),this.isDisableIncludeTasks()}onFormItemChange(e,t){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var i=e.getField(),o=e.getValue();switch(i){case"country":this.edit_view_ui_dic.province.setValue(null)}this.current_edit_record[i]=o,"country"===i&&this.onCountryChange(),"user_group_selection_type_id"===i&&this.onEmployeeGroupSelectionTypeChange(),"user_branch_selection_type_id"===i&&this.onBranchSelectionTypeChange(),"user_department_selection_type_id"===i&&this.onDepartmentSelectionTypeChange(),"job_item_group_selection_type_id"===i&&this.onJobItemGroupSelectionTypeChange(),this.isDisableIncludeEmployees(),this.isDisableIncludeTasks(),t||this.validate()}eSetProvince(e,t){var i=this,o=i.edit_view_ui_dic.province;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),i.e_province_array=Global.buildRecordArray(e),t&&i.e_province_array.length>0&&(i.current_edit_record.province=i.e_province_array[0].value,o.setValue(i.current_edit_record.province)),o.setSourceData(i.e_province_array)}}):(i.e_province_array=[],o.setSourceData([]))}isDisableIncludeEmployees(){this.edit_view_ui_dic.user_group_ids.getEnabled()||this.edit_view_ui_dic.user_branch_ids.getEnabled()||this.edit_view_ui_dic.user_department_ids.getEnabled()?this.edit_view_ui_dic.include_user_ids.setEnabled(!0):this.edit_view_ui_dic.include_user_ids.setEnabled(!1)}isDisableIncludeTasks(){this.edit_view_ui_dic.job_item_group_ids.getEnabled()?this.edit_view_ui_dic.include_job_item_ids.setEnabled(!0):this.edit_view_ui_dic.include_job_item_ids.setEnabled(!1)}onEmployeeGroupSelectionTypeChange(){10==this.current_edit_record.user_group_selection_type_id?this.edit_view_ui_dic.user_group_ids.setEnabled(!1):this.edit_view_ui_dic.user_group_ids.setEnabled(!0)}onBranchSelectionTypeChange(){10==this.current_edit_record.user_branch_selection_type_id?this.edit_view_ui_dic.user_branch_ids.setEnabled(!1):this.edit_view_ui_dic.user_branch_ids.setEnabled(!0)}onDepartmentSelectionTypeChange(){10==this.current_edit_record.user_department_selection_type_id?this.edit_view_ui_dic.user_department_ids.setEnabled(!1):this.edit_view_ui_dic.user_department_ids.setEnabled(!0)}onJobItemGroupSelectionTypeChange(){10==this.current_edit_record.job_item_group_selection_type_id?this.edit_view_ui_dic.job_item_group_ids.setEnabled(!1):this.edit_view_ui_dic.job_item_group_ids.setEnabled(!0)}getFilterColumnsFromDisplayColumns(e,t){return null==e&&(e={}),e.latitude=!0,e.longitude=!0,this._getFilterColumnsFromDisplayColumns(e,t)}}}}]);
//# sourceMappingURL=attendance-job-JobViewController.bundle.js.map?v=89be93d05552fda6cde7