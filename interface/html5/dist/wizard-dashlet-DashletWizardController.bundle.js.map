{"version":3,"sources":["webpack://timetrex/./interface/html5/views/wizard/dashlet/DashletWizardController.js"],"names":["DashletWizardController","BaseWizardController","options","_","defaults","el","user_generic_data_api","api_user_report","numArray","label","$","i18n","value","super","this","title","steps","current_step","TTAPI","APIUserGenericData","APIUserReportData","render","initCurrentStep","combobox","$this","stepsWidgetDic","content_div","empty","getLabel","text","append","getComboBox","unbind","bind","e","target","stepsDataDic","off","on","step1ComboboxChanged","val","getField","form_item","form_item_label","form_item_input_div","textInput","step_1_data","dashlet_type","Global","loadWidget","find","setLayout","getScriptNameByAPIViewKey","getValue","setDefaultName","getTextInput","setValueKey","setLabelKey","setSourceData","setTemplateSource","template","setValue","setSavedReport","getProductEdition","TAlertManager","showAlert","getUpgradeMessage","setWidgetEnabled","next_btn","step_2_ui","step_1_ui","name","script","report","current_step_data","current_step_ui","api","APIDashboard","getOptions","onResult","result","result_data","buildRecordArray","getResult","saved_dashlet_id","getUserGenericData","filter_data","id","deleted","isArray","length","saved_dashlet","data","array","rows_per_page","view_name","layout","done_btn","auto_refresh","step_2_widgets","template_combobox","templates","async","unshift","fullvalue","orderValue","step_2_data","layout_combobox","saved_report","hide","parent","show","getUserReportData","sort","a","b","compare","fullValue","empty_item","layout_id","key","onDoneClick","saveCurrentStep","clearErrorStyle","dasglet_name","width","args","is_default","height","saved_report_id","setUserGenericData","isValid","onCloseClick","call_back","showErrorAlert","setErrorStyle","default_data","getDefaultData"],"mappings":"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","file":"wizard-dashlet-DashletWizardController.bundle.js?v=86e4e2d5a23a0373ad4c","sourcesContent":["export class DashletWizardController extends BaseWizardController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.wizard-bg',\n\t\t\tuser_generic_data_api: null,\n\t\t\tapi_user_report: null,\n\t\t\tnumArray: [\n\t\t\t\t{ label: $.i18n._( 'Default' ), value: 0 },\n\t\t\t\t{ label: 5, value: 5 },\n\t\t\t\t{ label: 10, value: 10 },\n\t\t\t\t{ label: 15, value: 15 },\n\t\t\t\t{ label: 20, value: 20 },\n\t\t\t\t{ label: 25, value: 25 },\n\t\t\t\t{ label: 50, value: 50 },\n\t\t\t\t{ label: 100, value: 100 },\n\t\t\t\t{ label: 250, value: 250 },\n\t\t\t\t{ label: 500, value: 500 },\n\t\t\t\t{ label: 1000, value: 1000 }\n\t\t\t]\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.title = $.i18n._( 'Dashlet Wizard' );\n\t\tthis.steps = 2;\n\t\tthis.current_step = 1;\n\t\tthis.user_generic_data_api = TTAPI.APIUserGenericData;\n\t\tthis.api_user_report = TTAPI.APIUserReportData;\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\t\tthis.initCurrentStep();\n\t}\n\n\t//Create each page UI\n\tbuildCurrentStepUI() {\n\t\tvar $this = this;\n\t\tthis.stepsWidgetDic[this.current_step] = {};\n\t\tthis.content_div.empty();\n\t\tvar combobox;\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tvar label = this.getLabel();\n\t\t\t\tlabel.text( $.i18n._( 'Choose the type of dashlet' ) );\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tcombobox = this.getComboBox( 'dashlet_type', false );\n\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.stepsDataDic[2] = null;\n\t\t\t\t\t$this.stepsWidgetDic[2] = null;\n\t\t\t\t} );\n\t\t\t\tcombobox.off( 'change' ).on( 'change', function( e ) {\n\t\t\t\t\t$this.step1ComboboxChanged( $( e.target ).val() );\n\t\t\t\t} );\n\t\t\t\tthis.content_div.append( combobox );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tlabel = this.getLabel();\n\t\t\t\tvar step_1_data = this.stepsDataDic[1];\n\t\t\t\tvar form_item;\n\t\t\t\tvar form_item_label;\n\t\t\t\tvar form_item_input_div;\n\t\t\t\tvar textInput;\n\n\t\t\t\tif ( step_1_data.dashlet_type == 'custom_list' ) {\n\t\t\t\t\tlabel.text( $.i18n._( 'Choose a list view and layout to display in the dashlet' ) );\n\t\t\t\t\tthis.content_div.append( label );\n\n\t\t\t\t\t// Choose view\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'script', false );\n\t\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t\t$this.setLayout( $this.getScriptNameByAPIViewKey( target.getValue() ) );\n\t\t\t\t\t\t$this.setDefaultName( step_1_data.dashlet_type );\n\t\t\t\t\t} );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'List View' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t//Dashlet Title\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\ttextInput = this.getTextInput( 'name', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Dashlet Title' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( textInput );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField()] = textInput;\n\n\t\t\t\t\t//Choose layout\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'layout', false );\n\t\t\t\t\tcombobox.setValueKey( 'id' );\n\t\t\t\t\tcombobox.setLabelKey( 'name' );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Saved Layout' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t// Rows per page\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'rows_per_page', false );\n\t\t\t\t\tcombobox.setSourceData( this.numArray );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Rows per page' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t} else if ( step_1_data.dashlet_type == 'custom_report' ) {\n\t\t\t\t\tlabel.text( $.i18n._( 'Choose a saved report to display in the dashlet' ) );\n\t\t\t\t\tthis.content_div.append( label );\n\n\t\t\t\t\t// Choose a Report\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'report', false );\n\t\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t\t$this.setTemplateSource();\n\t\t\t\t\t\t$this.stepsWidgetDic[2].template.setValue( 'saved_report' );\n\t\t\t\t\t\t$this.setSavedReport();\n\t\t\t\t\t\t$this.setDefaultName( step_1_data.dashlet_type );\n\t\t\t\t\t} );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Report' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t//Template\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'template', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Template' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t\t$this.setSavedReport();\n\t\t\t\t\t} );\n\n\t\t\t\t\t//Choose saved report\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'saved_report', false );\n\t\t\t\t\tcombobox.setValueKey( 'id' );\n\t\t\t\t\tcombobox.setLabelKey( 'name' );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Saved Report' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t//Dashlet Title\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\ttextInput = this.getTextInput( 'name', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Dashlet Title' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( textInput );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField()] = textInput;\n\n\t\t\t\t} else {\n\t\t\t\t\tlabel.text( $.i18n._( 'Choose dashlet specific settings' ) );\n\t\t\t\t\tthis.content_div.append( label );\n\n\t\t\t\t\t//Dashlet Title\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\ttextInput = this.getTextInput( 'name', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Dashlet Title' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( textInput );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField()] = textInput;\n\n\t\t\t\t\t// Rows per page\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'rows_per_page', false );\n\t\t\t\t\tcombobox.setSourceData( this.numArray );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Rows per page' ) + ': ' );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t}\n\n\t\t\t\t// Auto refresh\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tcombobox = this.getComboBox( 'auto_refresh', false );\n\t\t\t\tform_item_label.text( $.i18n._( 'Auto Refresh' ) + ': ' );\n\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tstep1ComboboxChanged( value ) {\n\t\tif ( Global.getProductEdition() <= 10 && ( value == 'custom_list' || value == 'custom_report' ) ) {\n\t\t\tTAlertManager.showAlert( Global.getUpgradeMessage(), $.i18n._( 'Denied' ) );\n\t\t\tGlobal.setWidgetEnabled( this.next_btn, false );\n\t\t} else {\n\t\t\tGlobal.setWidgetEnabled( this.next_btn, true );\n\t\t}\n\t}\n\n\tsetDefaultName( dashlet_type ) {\n\t\tvar step_2_ui = this.stepsWidgetDic[2];\n\t\tvar step_1_ui = this.stepsWidgetDic[1];\n\t\tif ( dashlet_type === 'custom_list' ) {\n\t\t\tstep_2_ui.name.setValue( step_2_ui.script.getLabel() );\n\t\t} else if ( dashlet_type === 'custom_report' ) {\n\t\t\tstep_2_ui.name.setValue( step_2_ui.report.getLabel() );\n\t\t} else {\n\t\t\tstep_2_ui.name.setValue( step_1_ui.dashlet_type.getLabel() );\n\t\t}\n\t}\n\n\tbuildCurrentStepData() {\n\t\tvar $this = this;\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tvar api = TTAPI.APIDashboard;\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tapi.getOptions( 'dashlets', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar result_data = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\tcurrent_step_ui.dashlet_type.setSourceData( result_data );\n\t\t\t\t\t\tif ( current_step_data ) {\n\t\t\t\t\t\t\tif ( current_step_data.dashlet_type ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.dashlet_type.setValue( current_step_data.dashlet_type );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( current_step_data.saved_dashlet_id ) {\n\t\t\t\t\t\t\t\t\t$this.user_generic_data_api.getUserGenericData( {\n\t\t\t\t\t\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\t\t\t\t\t\tid: current_step_data.saved_dashlet_id,\n\t\t\t\t\t\t\t\t\t\t\tdeleted: false\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\t\t\t\tif ( Global.isArray( result.getResult() ) && result.getResult().length > 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent_step_data.saved_dashlet = result.getResult()[0];\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent_step_ui.dashlet_type.setValue( current_step_data.saved_dashlet.data.dashlet_type );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tif ( this.stepsDataDic[1].dashlet_type == 'custom_list' ) {\n\t\t\t\t\tapi.getOptions( 'custom_list', {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar array = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\t\tcurrent_step_ui.script.setSourceData( array );\n\t\t\t\t\t\t\t//If has saved steps data\n\t\t\t\t\t\t\tif ( current_step_data && current_step_data.script ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.script.setValue( current_step_data.script );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( current_step_data.name );\n\t\t\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( current_step_data.rows_per_page );\n\t\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.script.setValue( $this.stepsDataDic[1].saved_dashlet.data.view_name );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( $this.stepsDataDic[1].saved_dashlet.name );\n\t\t\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( $this.stepsDataDic[1].saved_dashlet.data.rows_per_page );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcurrent_step_ui.script.setValue( array[0] );\n\t\t\t\t\t\t\t\t$this.setDefaultName( $this.stepsDataDic[1].dashlet_type );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.setLayout( $this.getScriptNameByAPIViewKey( current_step_ui.script.getValue() ), current_step_ui.layout );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else if ( this.stepsDataDic[1].dashlet_type == 'custom_report' ) {\n\t\t\t\t\tapi.getOptions( 'custom_report', {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar array = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\t\tif ( array.length === 0 ) {\n\t\t\t\t\t\t\t\tGlobal.setWidgetEnabled( $this.done_btn, false );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrent_step_ui.report.setSourceData( array );\n\t\t\t\t\t\t\t//If has saved steps data\n\t\t\t\t\t\t\tif ( current_step_data && current_step_data.report ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.report.setValue( current_step_data.report );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( current_step_data.name );\n\t\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.report.setValue( $this.stepsDataDic[1].saved_dashlet.data.report );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( $this.stepsDataDic[1].saved_dashlet.name );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcurrent_step_ui.report.setValue( array.value );\n\t\t\t\t\t\t\t\t$this.setDefaultName( $this.stepsDataDic[1].dashlet_type );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.setTemplateSource( current_step_ui.report.getValue() );\n\t\t\t\t\t\t\tif ( current_step_data && current_step_data.report ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.template.setValue( current_step_data.template );\n\t\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.template.setValue( $this.stepsDataDic[1].saved_dashlet.data.template );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcurrent_step_ui.template.setValue( 'saved_report' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.setSavedReport( current_step_ui.report.getValue(), current_step_ui.template.getValue() );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tif ( current_step_data ) {\n\t\t\t\t\t\tcurrent_step_ui.name.setValue( current_step_data.name );\n\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( current_step_data.rows_per_page );\n\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\tcurrent_step_ui.name.setValue( $this.stepsDataDic[1].saved_dashlet.name );\n\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( $this.stepsDataDic[1].saved_dashlet.data.rows_per_page );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.setDefaultName( $this.stepsDataDic[1].dashlet_type );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tapi.getOptions( 'auto_refresh', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar array = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\tcurrent_step_ui.auto_refresh.setSourceData( array );\n\t\t\t\t\t\t//If has saved steps data\n\t\t\t\t\t\tif ( current_step_data && current_step_data.auto_refresh ) {\n\t\t\t\t\t\t\tcurrent_step_ui.auto_refresh.setValue( current_step_data.auto_refresh );\n\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\tcurrent_step_ui.auto_refresh.setValue( $this.stepsDataDic[1].saved_dashlet.data.auto_refresh );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetTemplateSource() {\n\t\tvar step_2_widgets = this.stepsWidgetDic[2];\n\t\tvar script = step_2_widgets.report.getValue();\n\t\tvar template_combobox = step_2_widgets.template;\n\t\t//var report_api = new ( APIFactory.getAPIClass( this.report_apis[script] ) )();\n\t\t//var report_api = TTAPI[this.report_apis[script]];\n\t\tvar report_api = TTAPI['API' + script];\n\t\tvar template_options_result = report_api.getOptions( 'templates', { async: false } );\n\t\tvar templates = template_options_result.getResult();\n\t\ttemplates = Global.buildRecordArray( templates );\n\t\ttemplates.unshift( {\n\t\t\tfullvalue: 'saved_report',\n\t\t\tid: 'saved_report',\n\t\t\tlabel: '-- ' + $.i18n._( 'Saved Report' ) + ' --',\n\t\t\torderValue: 0,\n\t\t\tvalue: 'saved_report'\n\t\t} );\n\t\ttemplate_combobox.setSourceData( templates );\n\t}\n\n\tsetSavedReport() {\n\t\tvar step_2_data = this.stepsDataDic[2];\n\t\tvar step_1_data = this.stepsDataDic[1];\n\t\tvar step_2_widgets = this.stepsWidgetDic[2];\n\t\tvar layout_combobox = step_2_widgets.saved_report;\n\t\tvar script = step_2_widgets.report.getValue();\n\t\tvar template = step_2_widgets.template.getValue();\n\t\tif ( template !== 'saved_report' ) {\n\t\t\tlayout_combobox.hide();\n\t\t\tlayout_combobox.parent().parent().hide();\n\t\t\treturn;\n\t\t} else {\n\t\t\tlayout_combobox.parent().parent().show();\n\t\t\tlayout_combobox.show();\n\t\t}\n\n\t\tthis.api_user_report.getUserReportData( {\n\t\t\tfilter_data: {\n\t\t\t\tscript: script\n\t\t\t}\n\t\t}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\t\t\t\t\tresult_data.sort( function( a, b ) {\n\t\t\t\t\t\t\treturn Global.compare( a, b, 'name' );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresult_data = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfullValue: 0,\n\t\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\t\tname: Global.empty_item,\n\t\t\t\t\t\t\tlabel: Global.empty_item,\n\t\t\t\t\t\t\torderValue: 0,\n\t\t\t\t\t\t\tvalue: 0\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tlayout_combobox.setSourceData( result_data );\n\t\t\t\tif ( step_2_data && step_2_data.layout ) {\n\t\t\t\t\tlayout_combobox.setValue( step_2_data.layout );\n\t\t\t\t} else if ( step_1_data.saved_dashlet ) {\n\t\t\t\t\tlayout_combobox.setValue( step_1_data.saved_dashlet.data.saved_report );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetLayout( script ) {\n\t\tvar step_2_data = this.stepsDataDic[2];\n\t\tvar step_1_data = this.stepsDataDic[1];\n\t\tvar layout_combobox = this.stepsWidgetDic[2].layout;\n\t\tthis.user_generic_data_api.getUserGenericData( {\n\t\t\tfilter_data: {\n\t\t\t\tscript: script,\n\t\t\t\tdeleted: false\n\t\t\t}\n\t\t}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\t\t\t\t\tresult_data.sort( function( a, b ) {\n\t\t\t\t\t\t\treturn Global.compare( a, b, 'name' );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresult_data = [{ id: 0, name: '- ' + $.i18n._( 'Default' ) + ' -' }];\n\t\t\t\t}\n\t\t\t\tlayout_combobox.setSourceData( result_data );\n\t\t\t\tif ( step_2_data && step_2_data.layout ) {\n\t\t\t\t\tlayout_combobox.setValue( step_2_data.layout );\n\t\t\t\t} else if ( step_1_data.saved_dashlet ) {\n\t\t\t\t\tlayout_combobox.setValue( step_1_data.saved_dashlet.data.layout_id );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetScriptNameByAPIViewKey( key ) {\n\t\tvar result = '';\n\t\tswitch ( key ) {\n\t\t\tcase 'Exception':\n\t\t\t\tresult = 'exceptionView';\n\t\t\t\tbreak;\n\t\t\tcase 'Request':\n\t\t\t\tresult = 'RequestView';\n\t\t\t\tbreak;\n\t\t\tcase 'User':\n\t\t\t\tresult = 'EmployeeView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserExpense':\n\t\t\t\tresult = 'UserExpenseView';\n\t\t\t\tbreak;\n\t\t\tcase 'Schedule':\n\t\t\t\tresult = 'ScheduleShiftView';\n\t\t\t\tbreak;\n\t\t\tcase 'Invoice':\n\t\t\t\tresult = 'InvoiceView';\n\t\t\t\tbreak;\n\t\t\tcase 'Request-Authorization':\n\t\t\t\tresult = 'RequestAuthorizationView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayPeriodTimeSheetVerify':\n\t\t\t\tresult = 'TimeSheetAuthorizationView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserExpense-Authorization':\n\t\t\t\tresult = 'ExpenseAuthorizationView';\n\t\t\t\tbreak;\n\t\t\tcase 'AccrualBalance':\n\t\t\t\tresult = 'AccrualBalanceView';\n\t\t\t\tbreak;\n\t\t\tcase 'Accrual':\n\t\t\t\tresult = 'AccrualView';\n\t\t\t\tbreak;\n\t\t\tcase 'RecurringScheduleControl':\n\t\t\t\tresult = 'RecurringScheduleControlView';\n\t\t\t\tbreak;\n\t\t\tcase 'RecurringScheduleTemplateControl':\n\t\t\t\tresult = 'RecurringScheduleTemplateControlView';\n\t\t\t\tbreak;\n\t\t\tcase 'Job':\n\t\t\t\tresult = 'JobView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobItem':\n\t\t\t\tresult = 'JobItemView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserContact':\n\t\t\t\tresult = 'UserContactView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserWage':\n\t\t\t\tresult = 'WageView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayStub':\n\t\t\t\tresult = 'PayStubView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayStubTransaction':\n\t\t\t\tresult = 'PayStubTransactionView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayPeriod':\n\t\t\t\tresult = 'PayPeriodsView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayStubAmendment':\n\t\t\t\tresult = 'PayStubAmendmentView';\n\t\t\t\tbreak;\n\t\t\tcase 'Client':\n\t\t\t\tresult = 'ClientView';\n\t\t\t\tbreak;\n\t\t\tcase 'ClientContact':\n\t\t\t\tresult = 'ClientContactView';\n\t\t\t\tbreak;\n\t\t\tcase 'Transaction':\n\t\t\t\tresult = 'InvoiceTransaction';\n\t\t\t\tbreak;\n\t\t\tcase 'UserReviewControl':\n\t\t\t\tresult = 'UserReviewControlView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobVacancy':\n\t\t\t\tresult = 'JobVacancyView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicant':\n\t\t\t\tresult = 'JobApplicantView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplication':\n\t\t\t\tresult = 'JobApplicationView';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tonDoneClick() {\n\t\tvar $this = this;\n\t\tsuper.onDoneClick();\n\t\tthis.saveCurrentStep();\n\t\tthis.stepsWidgetDic[2].name.clearErrorStyle();\n\t\tvar saved_dashlet = this.stepsDataDic[1].saved_dashlet;\n\t\tvar dashlet_type = this.stepsDataDic[1].dashlet_type;\n\t\tvar dasglet_name = this.stepsDataDic[2].name;\n\t\tvar auto_refresh = this.stepsDataDic[2].auto_refresh;\n\t\tvar rows_per_page = this.stepsDataDic[2].rows_per_page;\n\t\tvar height = 200;\n\t\tvar width = 33;\n\t\tif ( dashlet_type === 'custom_report' ) {\n\t\t\twidth = 99;\n\t\t}\n\t\tvar args = {};\n\t\tif ( !dasglet_name ) {\n\t\t\tthis.stepsWidgetDic[2].name.setErrorStyle( 'Dashlet title can\\'t be empty', true );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( dashlet_type == 'custom_list' ) {\n\t\t\tvar view_name = this.stepsDataDic[2].script;\n\t\t\tvar layout_id = this.stepsDataDic[2].layout;\n\t\t\tif ( !saved_dashlet ) {\n\t\t\t\targs.script = 'global_dashboard';\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data = {\n\t\t\t\t\tdashlet_type: dashlet_type,\n\t\t\t\t\tview_name: view_name,\n\t\t\t\t\tlayout_id: layout_id,\n\t\t\t\t\tauto_refresh: auto_refresh,\n\t\t\t\t\theight: height,\n\t\t\t\t\twidth: width,\n\t\t\t\t\trows_per_page: rows_per_page\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\targs = saved_dashlet;\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data.dashlet_type = dashlet_type;\n\t\t\t\targs.data.view_name = view_name;\n\t\t\t\targs.data.layout_id = layout_id;\n\t\t\t\targs.data.auto_refresh = auto_refresh;\n\t\t\t\targs.data.rows_per_page = rows_per_page;\n\t\t\t}\n\t\t} else if ( dashlet_type == 'custom_report' ) {\n\t\t\tvar report = this.stepsDataDic[2].report;\n\t\t\tvar saved_report_id = ( this.stepsDataDic[2].saved_report && this.stepsDataDic[2].saved_report != 0 ) ? this.stepsDataDic[2].saved_report : false;\n\t\t\tvar template = this.stepsDataDic[2].template;\n\t\t\tif ( template === 'saved_report' && !saved_report_id ) {\n\t\t\t\tTAlertManager.showAlert( $.i18n._( 'No saved report!' ) );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !saved_dashlet ) {\n\t\t\t\targs.script = 'global_dashboard';\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data = {\n\t\t\t\t\tdashlet_type: dashlet_type,\n\t\t\t\t\treport: report,\n\t\t\t\t\ttemplate: template,\n\t\t\t\t\tsaved_report_id: saved_report_id,\n\t\t\t\t\tauto_refresh: auto_refresh,\n\t\t\t\t\theight: height,\n\t\t\t\t\twidth: width\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\targs = saved_dashlet;\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data.dashlet_type = dashlet_type;\n\t\t\t\targs.data.report = report;\n\t\t\t\targs.data.template = template;\n\t\t\t\targs.data.saved_report_id = saved_report_id;\n\t\t\t\targs.data.auto_refresh = auto_refresh;\n\t\t\t\targs.data.rows_per_page = rows_per_page;\n\t\t\t}\n\t\t} else {\n\t\t\tif ( !saved_dashlet ) {\n\t\t\t\targs.script = 'global_dashboard';\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data = {\n\t\t\t\t\tdashlet_type: dashlet_type,\n\t\t\t\t\tauto_refresh: auto_refresh,\n\t\t\t\t\trows_per_page: rows_per_page,\n\t\t\t\t\theight: height,\n\t\t\t\t\twidth: width\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\targs = saved_dashlet;\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data.dashlet_type = dashlet_type;\n\t\t\t\targs.data.auto_refresh = auto_refresh;\n\t\t\t\targs.data.rows_per_page = rows_per_page;\n\t\t\t}\n\t\t}\n\n\t\tthis.user_generic_data_api.setUserGenericData( args, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\t$this.onCloseClick();\n\t\t\t\t\tif ( $this.call_back ) {\n\t\t\t\t\t\t$this.call_back();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsaveCurrentStep() {\n\t\tif ( !this.stepsDataDic[this.current_step] ) {\n\t\t\tthis.stepsDataDic[this.current_step] = {};\n\t\t}\n\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tcurrent_step_data.dashlet_type = current_step_ui.dashlet_type.getValue();\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tvar step_1_data = this.stepsDataDic[1];\n\t\t\t\tif ( step_1_data.dashlet_type == 'custom_list' ) {\n\t\t\t\t\tcurrent_step_data.script = current_step_ui.script.getValue();\n\t\t\t\t\tcurrent_step_data.layout = current_step_ui.layout.getValue();\n\t\t\t\t\tcurrent_step_data.rows_per_page = current_step_ui.rows_per_page.getValue();\n\t\t\t\t\tcurrent_step_data.name = current_step_ui.name.getValue();\n\t\t\t\t} else if ( step_1_data.dashlet_type == 'custom_report' ) {\n\t\t\t\t\tcurrent_step_data.report = current_step_ui.report.getValue();\n\t\t\t\t\tcurrent_step_data.saved_report = current_step_ui.saved_report.getValue();\n\t\t\t\t\tcurrent_step_data.name = current_step_ui.name.getValue();\n\t\t\t\t\tcurrent_step_data.template = current_step_ui.template.getValue();\n\t\t\t\t} else {\n\t\t\t\t\tcurrent_step_data.name = current_step_ui.name.getValue();\n\t\t\t\t\tcurrent_step_data.rows_per_page = current_step_ui.rows_per_page.getValue();\n\t\t\t\t}\n\t\t\t\tcurrent_step_data.auto_refresh = current_step_ui.auto_refresh.getValue();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetProperDashletName( step_1_data ) {\n\t\tvar key = step_1_data['dashlet_type'];\n\t\tvar name = '';\n\t\tswitch ( key ) {\n\t\t\tcase 'request_summary':\n\t\t\t\tname = $.i18n._( 'Request Summary' );\n\t\t\t\tbreak;\n\t\t\tcase 'expense_summary':\n\t\t\t\tname = $.i18n._( 'Expense Summary' );\n\t\t\t\tbreak;\n\t\t\tcase 'message_summary':\n\t\t\t\tname = $.i18n._( 'Message Summary' );\n\t\t\t\tbreak;\n\t\t\tcase 'exception_summary':\n\t\t\t\tname = $.i18n._( 'Exception Summary' );\n\t\t\t\tbreak;\n\t\t}\n\t\treturn name;\n\t}\n\n\tsetDefaultDataToSteps() {\n\t\tif ( !this.default_data ) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.stepsDataDic[1] = {};\n\t\tif ( this.getDefaultData( 'saved_dashlet_id' ) ) {\n\t\t\tthis.stepsDataDic[1].saved_dashlet_id = this.getDefaultData( 'saved_dashlet_id' );\n\t\t} else {\n\t\t\tthis.stepsDataDic[1].saved_dashlet_id = false;\n\t\t}\n\t}\n\n}"],"sourceRoot":""}