{"version":3,"sources":["webpack://timetrex/./interface/html5/views/policy/pay_code/PayCodeViewController.js"],"names":["PayCodeViewController","BaseViewController","options","_","defaults","el","type_array","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIPayCode","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","initDropDownOption","exclude","include","label","id","ContextMenuIconName","migrate_pay_codes","group","icon","Icons","wizard","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_pay_code_column1","edit_view_tab","find","edit_view_tabs","push","form_item_input","Global","loadWidgetByName","FormItemType","TEXT_INPUT","TTextInput","field","width","addEditFieldToColumn","parent","TEXT_AREA","TTextArea","COMBO_BOX","TComboBox","set_empty","setSourceData","AWESOME_BOX","APIPayFormulaPolicy","custom_first_label","added_items","value","TTUUID","zero_id","APIPayStubEntryAccount","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser","ProgressBar","showOverlay","onWizardClick","ignoreWarning","onSaveClick","clearCache","IndexViewController","openWizard"],"mappings":"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","file":"policy-pay_code-PayCodeViewController.bundle.js?v=28dcb89979a9182a020b","sourcesContent":["export class PayCodeViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_code_view_container',\n\n\t\t\ttype_array: null,\n\t\t\t//pay_type_array: null,\n\t\t\t//wage_source_type_array: null,\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PayCodeEditView.html';\n\t\tthis.permission_id = 'pay_code';\n\t\tthis.viewId = 'PayCode';\n\t\tthis.script_name = 'PayCodeView';\n\t\tthis.table_name_key = 'pay_code';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Code' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Code' ) + ':';\n\t\tthis.api = TTAPI.APIPayCode;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'PayCode' );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'type' );\n\t\t//this.initDropDownOption( 'pay_type' );\n\t\t//this.initDropDownOption( 'wage_source_type' );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Migrate<br>Pay Codes' ),\n\t\t\t\t\tid: ContextMenuIconName.migrate_pay_codes,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.wizard\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_code': { 'label': $.i18n._( 'Pay Code' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayCode,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_code',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_pay_code = this.edit_view_tab.find( '#tab_pay_code' );\n\n\t\tvar tab_pay_code_column1 = tab_pay_code.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_pay_code_column1 );\n\n\t\t//Name\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_pay_code_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_pay_code_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Code\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'code', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Code' ), form_item_input, tab_pay_code_column1, '' );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_pay_code_column1 );\n\t\t/*\n\t\t // Pay Type\n\t\t form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\t form_item_input.TComboBox( {field: 'pay_type_id', set_empty: false} );\n\t\t form_item_input.setSourceData( $this.pay_type_array );\n\t\t this.addEditFieldToColumn( $.i18n._( 'Pay Type' ), form_item_input, tab_pay_code_column1 );\n\n\t\t // Wage Source\n\t\t form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\t form_item_input.TComboBox( {field: 'wage_source_type_id', set_empty: false} );\n\t\t form_item_input.setSourceData( $this.wage_source_type_array );\n\t\t this.addEditFieldToColumn( $.i18n._( 'Wage Source' ), form_item_input, tab_pay_code_column1 );\n\n\t\t //Wage Source Contributing Shift\n\t\t form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t form_item_input.AComboBox( {\n\t\t api_class: TTAPI.APIContributingShiftPolicy,\n\t\t allow_multiple_selection: false,\n\t\t layout_name: 'global_contributing_shift_policy',\n\t\t show_search_inputs: true,\n\t\t set_empty: true,\n\t\t field: 'wage_source_contributing_shift_policy_id'} );\n\t\t this.addEditFieldToColumn( $.i18n._( 'Wage Source Contributing Shift Policy' ), form_item_input, tab_pay_code_column1 );\n\n\t\t //Time Source Contributing Shift\n\t\t form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t form_item_input.AComboBox( {\n\t\t api_class: TTAPI.APIContributingShiftPolicy,\n\t\t allow_multiple_selection: false,\n\t\t layout_name: 'global_contributing_shift_policy',\n\t\t show_search_inputs: true,\n\t\t set_empty: true,\n\t\t field: 'time_source_contributing_shift_policy_id'} );\n\t\t this.addEditFieldToColumn( $.i18n._( 'Time Source Contributing Shift Policy' ), form_item_input, tab_pay_code_column1 );\n\n\t\t // Wage Group\n\t\t form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t form_item_input.AComboBox( {\n\t\t api_class: TTAPI.APIWageGroup,\n\t\t allow_multiple_selection: false,\n\t\t layout_name: 'global_wage_group',\n\t\t show_search_inputs: true,\n\t\t set_empty: true,\n\t\t field: 'wage_group_id'} );\n\t\t this.addEditFieldToColumn( $.i18n._( 'Wage Group' ), form_item_input, tab_pay_code_column1 );\n\n\t\t // Rate\n\t\t form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t form_item_input.TTextInput( {field: 'rate', width: 100} );\n\t\t this.addEditFieldToColumn( $.i18n._( 'Rate' ), form_item_input, tab_pay_code_column1 );\n\n\t\t // Deposit Accrual Policy\n\t\t form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t form_item_input.AComboBox( {\n\t\t api_class: TTAPI.APIAccrualPolicy,\n\t\t allow_multiple_selection: false,\n\t\t layout_name: 'global_accrual',\n\t\t show_search_inputs: true,\n\t\t set_empty: true,\n\t\t field: 'accrual_policy_id'} );\n\t\t this.addEditFieldToColumn( $.i18n._( 'Deposit Accrual Policy' ), form_item_input, tab_pay_code_column1, '' );\n\t\t */\n\t\t//Pay Formula Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayFormulaPolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_formula_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_formula_policy_id',\n\t\t\tcustom_first_label: $.i18n._( '-- Defined By Policy --' ),\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.zero_id, label: $.i18n._( '-- Defined By Policy --' ) }\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Formula Policy' ), form_item_input, tab_pay_code_column1 );\n\n\t\t// Pay Stub Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_stub_entry_account_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Stub Account' ), form_item_input, tab_pay_code_column1 );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Formula Policy' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_formula_policy_id',\n\t\t\t\tlayout_name: 'global_pay_formula_policy',\n\t\t\t\tapi_class: TTAPI.APIPayFormulaPolicy,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Stub Account' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'pay_stub_entry_account_id',\n\t\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.migrate_pay_codes:\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onWizardClick();\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tonSaveClick( ignoreWarning ) {\n\t\tsuper.onSaveClick( ignoreWarning );\n\t\tGlobal.clearCache( 'getOptions_columns' ); //Needs to clear cache so if they add a pay code it will immediately appear on all reports in the Display Columns.\n\t}\n\n\tonWizardClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'PayCodeWizard', null, function() {\n//\t\t\t$this.search();\n\t\t} );\n\t}\n\n}\n"],"sourceRoot":""}