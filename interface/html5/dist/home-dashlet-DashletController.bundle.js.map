{"version":3,"sources":["webpack://timetrex/./interface/html5/views/home/dashlet/DashletController.js"],"names":["DashletController","TTBackboneView","options","_","defaults","data","api_dashboard","api_user_report","user_generic_data_api","all_columns","grid","dashboard_data","refresh_timer","iframe_data","initComplete","iframe","homeViewController","initTimesheetGridComplete","accumulated_total_grid_source_map","accmulated_order_map","super","initialize","this","TTAPI","APIDashboard","APIUserGenericData","dashlet_type","addIframeBack","setIframeData","$this","doInit","$","el","addClass","initCustomViewContent","initReportContent","bind","removeIframe","initDefaultDashletContent","initTimesheetContent","initNewsContent","unbind","setTitle","Global","isScrolledIntoView","detectMobileBrowser","attr","resizable","handles","start","e","ui","resize","setGridSize","stop","height","Math","floor","size","width","saveSize","updateLayout","dashboard_container","masonry","parent","scroll","target_view","open_reoprt","view_name","IndexViewController","openReport","goToView","cell_value","related_data","row","decodeCellValue","punch_info","time_span","col_model","colModel","content_div","rowid","pos","type","TOTAL_ROW","isSet","text","get","outerHTML","REGULAR_ROW","name","hasOwnProperty","override","note","prepend","ACCUMULATED_TIME_ROW","find","remove","target","initNewsData","startRefresh","getDashletData","onResult","result","getResult","removeNoResultCover","showNoResultCover","removeClass","length","contentWindow","document","open","writeln","close","api","getAPIByViewName","id","initDefaultTimesheetData","onViewClick","getTimeSheetData","LocalCacheData","getLoginUser","Date","format","isValid","full_timesheet_data","pay_period_data","timesheet_verify_data","timesheet_dates","start_date","strToDate","start_display_date","end_date","end_display_date","buildAccumulatedTotalGrid","buildAccumulatedTotalData","total","key","key1","order","accumulated_total_grid_source","accumulated_user_date_total_data","pay_period_accumulated_user_date_total_data","accumulated_time","premium_time","absence_time","absence_time_taken","buildAccmulatedOrderMap","label","total_time","buildSubGridsData","total_result","sortAccumulatedTotalData","setData","sort","m_sort_by","array","date_string","map","result_array","parent_key","marked_regular_row","getTimeUnit","is_override_row","indexOf","PREMIUM_ROW","key_array","split","no_id","unshift","push","pay_period_header","i18n","pay_period_id","pay_period","grid_id","columns","punch_in_out_column","index","sortable","title","formatter","onCellFormat","start_date_str","getLoginUserDateFormat","end_date_str","getAccumulatedTotalGridPayperiodHeader","column_1","column_2","grid_data","shrinkToFit","multiselectPosition","gridComplete","jqGrid","setGridColumnsWidth","onResizeGrid","TTGrid","window","initDefaultDashletData","getDefaultDashletData","getAllColumns","setSelectLayout","formatGridData","processId","isArray","setGridCellBackGround","start_id","item","TTUUID","zero_id","append","h","w","console","log","setUserGenericData","is","setGridWidth","setGridHeight","initReportData","APIUserReportData","report","clearInterval","template","getTemplate","config","other","is_embedded","key_name","res","getUserReportData","filter_data","saved_report_id","result_data","auto_refresh","setInterval","current_open_primary_controller","viewId","initCustomViewData","len","getData","i","exception_background_color","severity","css","exception_color","code","status_id","_status_id","status","getCustomListDashboardData","TTPromise","wait","callback","rows_per_page","layout_id","toString","apiDisplayColumnsArray","len1","display_columns","j","value","buildDisplayColumns","column_info_array","view_column_data","column_info","onSelectRow","proxy","onGridSelectRow","ondblClickRow","onGridDblClickRow","no_result_box","loadWidgetByName","WidgetNamesDic","NO_RESULT_BOX","NoResultBox","related_view_controller","is_new","message","getNoResultMessage","callBack","getOptions","columns_result","columns_result_data","buildColumnArray","default_display_columns","toLowerCase","APIMessageControl","APISchedule","APIException","APIInvoice","APIUser","APIRequest","APIAccrualBalance","APITimesheetSummaryReport","APITimeSheet","APIActiveShiftReport","APIPayPeriodTimeSheetVerify","APIUserExpense","APITimesheetDetailReport","APIAccrual","APIRecurringScheduleControl","APIRecurringScheduleTemplateControl","APIJob","APIJobItem","APIUserContact","APIUserWage","APIPayStub","APIPayPeriod","APIPayStubAmendment","APIClient","APIClientContact","APITransaction","APIUserReviewControl","APIJobVacancy","APIJobApplicant","APIJobApplication","APIAccrualBalanceSummaryReport","APIUserSummaryReport","APIAuditTrailReport","APIScheduleSummaryReport","APIPunchSummaryReport","APIExceptionReport","APIPayStubSummaryReport","APIUserExpenseReport","APIJobSummaryReport","APIJobDetailReport","APIJobInformationReport","APIJobItemInformationReport","APIInvoiceTransactionSummaryReport","APIUserQualificationReport","APIKPIReport","APIUserRecruitmentSummaryReport","APIUserRecruitmentDetailReport","getGridParam","grid_total_width","col","field","longest_words","row_data","current_words","width_test","header_width","setColProp","widthOrg","gw","ABSENCE_ROW"],"mappings":"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","file":"home-dashlet-DashletController.bundle.js?v=d178e81f65820e5181f5","sourcesContent":["import { TTBackboneView } from '@/views/TTBackboneView';\n\nexport class DashletController extends TTBackboneView {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tdata: null,\n\t\t\tapi_dashboard: null,\n\t\t\tapi_user_report: null,\n\t\t\tuser_generic_data_api: null,\n\t\t\tall_columns: null,\n\t\t\tgrid: null,\n\t\t\tdashboard_data: null,\n\t\t\trefresh_timer: null,\n\t\t\tiframe_data: null,\n\t\t\tinitComplete: false,\n\t\t\tiframe: null,\n\t\t\thomeViewController: null,\n\t\t\tinitTimesheetGridComplete: null,\n\t\t\taccumulated_total_grid_source_map: null,\n\t\t\taccmulated_order_map: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitialize( options ) {\n\t\tsuper.initialize( options );\n\t\tthis.api_dashboard = TTAPI.APIDashboard;\n\t\tthis.user_generic_data_api = TTAPI.APIUserGenericData;\n\t}\n\n\trefreshIfNecessary() {\n\t\tif ( this.data && this.data.data.dashlet_type == 'custom_report' || this.data.data.dashlet_type === 'news' ) {\n\t\t\tif ( this.iframe_data ) {\n\t\t\t\tthis.addIframeBack();\n\t\t\t\tthis.setIframeData();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitContent() {\n\t\tvar $this = this;\n\t\tthis.setTitle();\n\t\tthis.initComplete = false;\n\n\t\tif ( Global.isScrolledIntoView( $( $this.el ) ) ) {\n\t\t\tdoInit();\n\t\t}\n\n\t\t//BUG#2070 - Disable resizable for mobile because it negatively impacts usability\n\t\tif ( Global.detectMobileBrowser() == false ) {\n\t\t\t$( '#' + $( this.el ).attr( 'id' ) ).resizable( {\n\t\t\t\thandles: 'all',\n\t\t\t\tstart: function( e, ui ) {\n\t\t\t\t},\n\t\t\t\tresize: function( e, ui ) {\n\t\t\t\t\t$this.setGridSize();\n\t\t\t\t},\n\t\t\t\tstop: function( e, ui ) {\n\t\t\t\t\t$this.addIframeBack();\n\t\t\t\t\tvar height = Math.floor( ui.size.height );\n\t\t\t\t\tvar width = Math.floor( ui.size.width );\n\n\t\t\t\t\t$this.saveSize( height, width );\n\n\t\t\t\t\t$this.homeViewController.updateLayout();\n\t\t\t\t\t$this.homeViewController.dashboard_container.masonry( 'reloadItems' );\n\t\t\t\t},\n\t\t\t} );\n\t\t\t//$( '#' + $( this.el ).attr( 'id' ) ).resizable( 'option', 'handles','all' );\n\t\t}\n\n\t\tthis.homeViewController.dashboard_container.parent().scroll( function() {\n\t\t\tif ( Global.isScrolledIntoView( $( $this.el ) ) && !$this.initComplete ) {\n\t\t\t\tdoInit();\n\t\t\t}\n\t\t} );\n\n\t\tfunction doInit() {\n\t\t\tif ( $this.data.data.dashlet_type == 'custom_list' ) {\n\t\t\t\t$( $this.el ).addClass( 'custom_list' );\n\t\t\t\t$this.initCustomViewContent();\n\t\t\t} else if ( $this.data.data.dashlet_type == 'custom_report' ) {\n\t\t\t\t$( $this.el ).addClass( 'custom-report' );\n\t\t\t\t$this.initReportContent();\n\t\t\t\t//DO NOT call .unbind here, as it breaks resizing dashlets at the very bottom that have to be scrolled into view by overwriting jquery-ui mousedown events\n\t\t\t\t$( $this.el ).bind( 'mousedown', function() {\n\t\t\t\t\t$this.removeIframe();\n\t\t\t\t} );\n\t\t\t\t$( $this.el ).bind( 'mouseup', function() {\n\t\t\t\t\t$this.addIframeBack();\n\t\t\t\t} );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'request_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'request-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'request_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'request_authorize_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'request-authorize-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'request_authorize_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'accrual_balance_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'accrual-balance-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'accrual_balance_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'exception_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'exception-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'exception_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'exception_summary_child' ) {\n\t\t\t\t$( $this.el ).addClass( 'exception-summary-child' );\n\t\t\t\t$this.initDefaultDashletContent( 'exception_summary_child' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'message_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'message-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'message_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'user_active_shift_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'user-active-shift-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'user_active_shift_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'timesheet_verification_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'timesheet-verification-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'timesheet_verification_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'timesheet_verification_summary_child' ) {\n\t\t\t\t$( $this.el ).addClass( 'timesheet-verification_summary-child' );\n\t\t\t\t$this.initDefaultDashletContent( 'timesheet_verification_summary_child' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'timesheet_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'timesheet-summary' );\n\t\t\t\t$this.initTimesheetContent( 'timesheet_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'schedule_summary' ) {\n\t\t\t\t$( $this.el ).addClass( 'schedule-summary' );\n\t\t\t\t$this.initDefaultDashletContent( 'schedule_summary' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'schedule_summary_child' ) {\n\t\t\t\t$( $this.el ).addClass( 'schedule-summary-child' );\n\t\t\t\t$this.initDefaultDashletContent( 'schedule_summary_child' );\n\t\t\t} else if ( $this.data.data.dashlet_type == 'news' ) {\n\t\t\t\t$( $this.el ).addClass( 'news' );\n\t\t\t\t$this.initNewsContent();\n\t\t\t\t$( $this.el ).unbind( 'mousedown' ).bind( 'mousedown', function() {\n\t\t\t\t\t$this.removeIframe();\n\t\t\t\t} );\n\t\t\t\t$( $this.el ).unbind( 'mouseup' ).bind( 'mouseup', function() {\n\t\t\t\t\t$this.addIframeBack();\n\n\t\t\t\t} );\n\t\t\t}\n\t\t\t$this.initComplete = true;\n\t\t}//if not android\n\t}\n\n\tonViewClick() {\n\t\tvar target_view = '';\n\t\tvar open_reoprt = false;\n\t\tif ( this.data.data.dashlet_type == 'custom_list' ) {\n\t\t\ttarget_view = this.data.data.view_name;\n\t\t\tif ( target_view === 'Request-Authorization' ) {\n\t\t\t\ttarget_view = 'RequestAuthorization';\n\t\t\t} else if ( target_view === 'PayPeriodTimeSheetVerify' ) {\n\t\t\t\ttarget_view = 'TimeSheetAuthorization';\n\t\t\t} else if ( target_view === 'UserExpense-Authorization' ) {\n\t\t\t\ttarget_view = 'ExpenseAuthorization';\n\t\t\t} else if ( target_view === 'User' ) {\n\t\t\t\ttarget_view = 'Employee';\n\t\t\t} else if ( target_view === 'Transaction' ) {\n\t\t\t\ttarget_view = 'InvoiceTransaction';\n\t\t\t} else if ( target_view === 'UserWage' ) {\n\t\t\t\ttarget_view = 'Wage';\n\t\t\t}\n\t\t} else {\n\t\t\tswitch ( this.data.data.dashlet_type ) {\n\t\t\t\tcase 'message_summary':\n\t\t\t\t\ttarget_view = 'MessageControl';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'exception_summary_child':\n\t\t\t\tcase 'exception_summary':\n\t\t\t\t\ttarget_view = 'Exception';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'schedule_summary':\n\t\t\t\tcase 'schedule_summary_child':\n\t\t\t\t\ttarget_view = 'Schedule';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'request_summary':\n\t\t\t\t\ttarget_view = 'Request';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'timesheet_verification_summary':\n\t\t\t\t\topen_reoprt = true;\n\t\t\t\t\ttarget_view = 'TimesheetSummaryReport';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'timesheet_verification_summary_child':\n\t\t\t\t\topen_reoprt = true;\n\t\t\t\t\ttarget_view = 'TimesheetSummaryReport';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'timesheet_summary':\n\t\t\t\t\ttarget_view = 'TimeSheet';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user_active_shift_summary':\n\t\t\t\t\topen_reoprt = true;\n\t\t\t\t\ttarget_view = 'ActiveShiftReport';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'request_authorize_summary':\n\t\t\t\t\ttarget_view = 'RequestAuthorization';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'accrual_balance_summary':\n\t\t\t\t\ttarget_view = 'AccrualBalance';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif ( open_reoprt ) {\n\t\t\tIndexViewController.openReport( this.homeViewController, target_view );\n\t\t} else {\n\t\t\tIndexViewController.goToView( target_view );\n\t\t}\n\t}\n\n\tonCellFormat( cell_value, related_data, row ) {\n\t\tcell_value = Global.decodeCellValue( cell_value );\n\t\tvar col_model = related_data.colModel;\n\t\tvar row_id = related_data.rowid;\n\t\tvar content_div = $( '<div class=\\'punch-content-div\\'></div>' );\n\t\tvar punch_info;\n\t\tif ( related_data.pos === 0 ) {\n\t\t\tif ( row.type === DashletController.TOTAL_ROW ) {\n\t\t\t\tpunch_info = $( '<span class=\\'total\\' style=\\'font-size: 11px\\'></span>' );\n\t\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\t\tpunch_info.text( cell_value );\n\t\t\t\t} else {\n\t\t\t\t\tpunch_info.text( '' );\n\t\t\t\t}\n\t\t\t\treturn punch_info.get( 0 ).outerHTML;\n\t\t\t} else if ( row.type === DashletController.REGULAR_ROW ) {\n\n\t\t\t\tpunch_info = $( '<span class=\\'top-line-span\\' style=\\'font-size: 11px\\'></span>' );\n\t\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\t\tpunch_info.text( cell_value );\n\t\t\t\t} else {\n\t\t\t\t\tpunch_info.text( '' );\n\t\t\t\t}\n\t\t\t\treturn punch_info.get( 0 ).outerHTML;\n\t\t\t}\n\t\t\treturn cell_value;\n\t\t}\n\t\tvar ex_span;\n\t\tvar i;\n\t\tvar time_span;\n\t\tvar punch;\n\t\tvar break_span;\n\t\tvar related_punch;\n\t\tvar exception;\n\t\tvar len;\n\t\tvar text;\n\t\tvar ex;\n\t\tvar data;\n\t\tif ( row.type === DashletController.TOTAL_ROW ) {\n\t\t\tdata = row[col_model.name + '_data'];\n\t\t\ttime_span = $( '<span class=\\'total\\'></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.hasOwnProperty( 'override' ) && data.override === true ) {\n\t\t\t\t\t\ttime_span.addClass( 'absence-override' );\n\t\t\t\t\t}\n\t\t\t\t\tif ( data.hasOwnProperty( 'note' ) && data.note ) {\n\t\t\t\t\t\tcell_value = '*' + cell_value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttime_span.text( cell_value );\n\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t} else if ( row.type === DashletController.REGULAR_ROW ) {\n\t\t\tcontent_div.addClass( 'top-line' );\n\t\t\tdata = row[col_model.name + '_data'];\n\t\t\ttime_span = $( '<span ></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.hasOwnProperty( 'override' ) && data.override === true ) {\n\t\t\t\t\t\ttime_span.addClass( 'absence-override' );\n\t\t\t\t\t}\n\t\t\t\t\tif ( data.hasOwnProperty( 'note' ) && data.note ) {\n\t\t\t\t\t\tcell_value = '*' + cell_value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttime_span.text( cell_value );\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t} else if ( row.type === DashletController.ACCUMULATED_TIME_ROW ) {\n\t\t\tdata = row[col_model.name + '_data'];\n\t\t\ttime_span = $( '<span></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.hasOwnProperty( 'override' ) && data.override === true ) {\n\t\t\t\t\t\ttime_span.addClass( 'absence-override' );\n\t\t\t\t\t}\n\t\t\t\t\tif ( data.hasOwnProperty( 'note' ) && data.note ) {\n\t\t\t\t\t\tcell_value = '*' + cell_value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttime_span.text( cell_value );\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t} else {\n\t\t\ttime_span = $( '<span class=\\'punch-time\\'></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\ttime_span.text( cell_value );\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t}\n\t\treturn content_div.get( 0 ).outerHTML;\n\t}\n\n\tinitNewsContent() {\n\t\tvar $this = this;\n\t\t$( this.el ).find( '#grid' ).remove();\n\t\t$( this.el ).find( '.view-btn' ).remove();\n\t\t$( this.el ).find( '.refresh-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$( e.target ).addClass( 'button-rotate' );\n\t\t\t$this.initNewsData();\n\t\t} );\n\t\tthis.initNewsData();\n\t\tthis.startRefresh();\n\t}\n\n\tinitNewsData() {\n\t\tvar $this = this;\n\t\tthis.api_dashboard.getDashletData( this.data.data.dashlet_type, {}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result = result.getResult();\n\t\t\t\t$this.iframe_data = result;\n\t\t\t\tif ( result ) {\n\t\t\t\t\t$this.removeNoResultCover();\n\n\t\t\t\t\t$this.setIframeData();\n\t\t\t\t} else {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t}\n\t\t\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\t\t\t}\n\t\t} );\n\t}\n\n\t//Error: Uncaught TypeError: Cannot read property 'contentDocument' of undefined in/interface/html5/#!m=MessageControl line 359\n\tsetIframeData( iframe_data ) {\n\t\tif ( $( this.el ).find( '#iframe' ).length > 0 && $( this.el ).find( '#iframe' )[0].contentWindow.document ) {\n\t\t\t$( this.el ).find( '#iframe' )[0].contentWindow.document.open();\n\t\t\t$( this.el ).find( '#iframe' )[0].contentWindow.document.writeln( this.iframe_data );\n\t\t\t$( this.el ).find( '#iframe' )[0].contentWindow.document.close();\n\t\t}\n\t}\n\n\tinitTimesheetContent( view_name ) {\n\t\t$( this.el ).find( '#iframe' ).remove();\n\t\tvar $this = this;\n\t\tthis.api = this.getAPIByViewName( view_name );\n\t\t// set grid id\n\t\tif ( !Global.isSet( this.grid ) || !Global.isSet( this.grid.grid ) ) {\n\t\t\tvar grid = $( this.el ).find( '#grid' );\n\t\t\tgrid.attr( 'id', 'dashlet_' + this.data.id + '_grid' );  //Grid's id is ScriptName + _grid\n\t\t}\n\t\t// refresh event\n\t\t$( this.el ).find( '.refresh-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$( e.target ).addClass( 'button-rotate' );\n\t\t\t$this.initDefaultTimesheetData();\n\t\t} );\n\t\t// view event\n\t\t$( this.el ).find( '.view-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this.onViewClick();\n\t\t} );\n\n\t\t// start load grid data\n\t\tthis.initDefaultTimesheetData();\n\t\tthis.startRefresh();\n\t}\n\n\tinitDefaultTimesheetData() {\n\t\tvar $this = this;\n\t\tthis.accumulated_total_grid_source_map = {};\n\t\tthis.api.getTimeSheetData( LocalCacheData.getLoginUser().id, new Date().format(), {\n\t\t\tonResult: function( result ) {\n\t\t\t\t//Error: Uncaught TypeError: Cannot read property 'start_display_date' of undefined in /interface/html5/#!m=Home line 409\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\t$this.full_timesheet_data = result.getResult();\n\t\t\t\t\t$this.pay_period_data = $this.full_timesheet_data.pay_period_data;\n\t\t\t\t\t$this.timesheet_verify_data = $this.full_timesheet_data.timesheet_verify_data;\n\t\t\t\t\tif ( $this.full_timesheet_data.timesheet_dates ) {\n\t\t\t\t\t\t$this.start_date = Global.strToDate( $this.full_timesheet_data.timesheet_dates.start_display_date );\n\t\t\t\t\t\t$this.end_date = Global.strToDate( $this.full_timesheet_data.timesheet_dates.end_display_date );\n\t\t\t\t\t\t// Error: Uncaught TypeError: Cannot read property 'format' of null in interface/html5/#!m=Home line 607\n\t\t\t\t\t\tif ( !$this.initTimesheetGridComplete && $this.start_date && $this.end_date ) {\n\t\t\t\t\t\t\t$this.buildAccumulatedTotalGrid();\n\t\t\t\t\t\t\t$this.initTimesheetGridComplete = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$this.buildAccumulatedTotalData();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t}\n\n\t\t\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildAccmulatedOrderMap( total ) {\n\t\tif ( !total ) {\n\t\t\treturn;\n\t\t}\n\t\tfor ( var key in total ) {\n\t\t\tfor ( var key1 in total[key] ) {\n\t\t\t\tthis.accmulated_order_map[key1] = total[key][key1].order;\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildAccumulatedTotalData() {\n\t\t// There will be no grid when no start date and end date when calling getTimeSheetData\n\t\tif ( !this.grid ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.accmulated_order_map = {};\n\t\tthis.accumulated_total_grid_source = [];\n\t\tvar accumulated_user_date_total_data = this.full_timesheet_data.accumulated_user_date_total_data;\n\t\tvar pay_period_accumulated_user_date_total_data = this.full_timesheet_data.pay_period_accumulated_user_date_total_data;\n\t\tvar accumulated_time = pay_period_accumulated_user_date_total_data.accumulated_time;\n\t\tvar premium_time = pay_period_accumulated_user_date_total_data.premium_time;\n\t\tvar absence_time = pay_period_accumulated_user_date_total_data.absence_time_taken;\n\t\t// Save the order, will do sort after all data prepared.\n\t\tif ( accumulated_user_date_total_data.total ) {\n\t\t\tthis.buildAccmulatedOrderMap( accumulated_user_date_total_data.total );\n\t\t}\n\t\tif ( pay_period_accumulated_user_date_total_data ) {\n\t\t\tthis.buildAccmulatedOrderMap( pay_period_accumulated_user_date_total_data );\n\t\t}\n\t\tif ( Global.isSet( accumulated_time ) ) {\n\t\t\tthis.buildSubGridsData( accumulated_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\t} else {\n\t\t\taccumulated_time = { total: { label: 'Total Time', total_time: '0' } };\n\t\t\tthis.buildSubGridsData( accumulated_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\t}\n\t\tif ( Global.isSet( premium_time ) ) {\n\t\t\tthis.buildSubGridsData( premium_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'premium_time' );\n\t\t}\n\t\tif ( Global.isSet( absence_time ) ) {\n\t\t\tthis.buildSubGridsData( absence_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'absence_time' );\n\t\t}\n\t\taccumulated_time = { total: { label: 'Total Time', total_time: '0' } };\n\t\tthis.buildSubGridsData( accumulated_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\tfor ( var key in accumulated_user_date_total_data ) {\n\t\t\t//Build Accumulated Total Grid week column data\n\t\t\tif ( key === 'total' ) {\n\t\t\t\tvar total_result = accumulated_user_date_total_data.total;\n\t\t\t\taccumulated_time = total_result.accumulated_time;\n\t\t\t\tpremium_time = total_result.premium_time;\n\t\t\t\tabsence_time = total_result.absence_time_taken;\n\t\t\t\tif ( Global.isSet( accumulated_time ) ) {\n\t\t\t\t\tthis.buildSubGridsData( accumulated_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\t\t\t}\n\t\t\t\tif ( Global.isSet( premium_time ) ) {\n\t\t\t\t\tthis.buildSubGridsData( premium_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'premium_time' );\n\t\t\t\t}\n\t\t\t\tif ( Global.isSet( absence_time ) ) {\n\t\t\t\t\tthis.buildSubGridsData( absence_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'absence_time' );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tthis.sortAccumulatedTotalData();\n\t\tthis.grid.setData( this.accumulated_total_grid_source );\n\t}\n\n\tsortAccumulatedTotalData() {\n\t\tvar sort_fields = ['order', 'punch_info'];\n\t\tthis.accumulated_total_grid_source.sort( Global.m_sort_by( sort_fields ) );\n\t}\n\n\tbuildSubGridsData( array, date_string, map, result_array, parent_key ) {\n\t\tvar row;\n\t\tvar marked_regular_row = false; //Only mark the first regular time row, as thats where the bold top-line is going to go.\n\t\tfor ( var key in array ) {\n\t\t\tif ( !map[key] ) {\n\t\t\t\trow = {};\n\t\t\t\trow.parent_key = parent_key;\n\t\t\t\trow.key = key;\n\n\t\t\t\tif ( parent_key === 'accumulated_time' ) {\n\n\t\t\t\t\tif ( key === 'total' || key === 'worked_time' ) {\n\t\t\t\t\t\trow.type = DashletController.TOTAL_ROW;\n\t\t\t\t\t} else if ( marked_regular_row == false && key.indexOf( 'regular_time' ) === 0 ) {\n\t\t\t\t\t\trow.type = DashletController.REGULAR_ROW;\n\t\t\t\t\t\tmarked_regular_row = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow.type = DashletController.ACCUMULATED_TIME_ROW;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( array[key].override ) {\n\t\t\t\t\t\trow.is_override_row = true;\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( parent_key === 'premium_time' ) {\n\t\t\t\t\trow.type = DashletController.PREMIUM_ROW;\n\t\t\t\t}\n\n\t\t\t\tif ( this.accmulated_order_map[key] ) {\n\t\t\t\t\trow.order = this.accmulated_order_map[key];\n\t\t\t\t}\n\n\t\t\t\trow.punch_info = array[key].label;\n\n\t\t\t\tvar key_array = key.split( '_' );\n\t\t\t\tvar no_id = false;\n\t\t\t\tif ( key_array.length > 1 && key_array[1] == '0' ) {\n\t\t\t\t\tno_id = true;\n\t\t\t\t}\n\n\t\t\t\tarray[key].key = key;\n\t\t\t\trow[date_string] = Global.getTimeUnit( array[key].total_time );\n\t\t\t\trow[date_string + '_data'] = array[key];\n\n\t\t\t\t//if id == 0, put the row as first row.\n\t\t\t\tif ( no_id ) {\n\t\t\t\t\tresult_array.unshift( row );\n\t\t\t\t} else {\n\t\t\t\t\tresult_array.push( row );\n\t\t\t\t}\n\n\t\t\t\tmap[key] = row;\n\t\t\t} else {\n\t\t\t\trow = map[key];\n\t\t\t\tif ( row[date_string] && key === 'total' ) { //Override total cell data since we set all to 00:00 at beginning\n\t\t\t\t\tarray[key].key = key;\n\t\t\t\t\trow[date_string] = Global.getTimeUnit( array[key].total_time );\n\t\t\t\t\trow[date_string + '_data'] = array[key];\n\n\t\t\t\t\tif ( row.parent_key === 'accumulated_time' ) {\n\t\t\t\t\t\tif ( array[key].override ) {\n\t\t\t\t\t\t\trow.is_override_row = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray[key].key = key;\n\t\t\t\t\trow[date_string] = Global.getTimeUnit( array[key].total_time );\n\t\t\t\t\trow[date_string + '_data'] = array[key];\n\n\t\t\t\t\tif ( row.parent_key === 'accumulated_time' ) {\n\t\t\t\t\t\tif ( array[key].override ) {\n\t\t\t\t\t\t\trow.is_override_row = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAccumulatedTotalGridPayperiodHeader() {\n\t\tthis.pay_period_header = $.i18n._( 'No Pay Period' );\n\t\tvar pay_period_id = this.timesheet_verify_data.pay_period_id;\n\t\tif ( pay_period_id && this.pay_period_data ) {\n\t\t\tfor ( var key in this.pay_period_data ) {\n\t\t\t\tvar pay_period = this.pay_period_data[key];\n\t\t\t\tif ( pay_period.id === pay_period_id ) {\n\t\t\t\t\tvar start_date = Global.strToDate( pay_period.start_date ).format();\n\t\t\t\t\tvar end_date = Global.strToDate( pay_period.end_date ).format();\n\t\t\t\t\tthis.pay_period_header = start_date + ' to ' + end_date;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildAccumulatedTotalGrid() {\n\t\tvar $this = this;\n\t\tvar columns = [];\n\t\tvar grid_id;\n\t\tif ( !Global.isSet( this.grid ) ) {\n\t\t\tgrid_id = 'dashlet_' + this.data.id + '_grid';\n\t\t}\n\t\tvar punch_in_out_column = {\n\t\t\tname: 'punch_info',\n\t\t\tindex: 'punch_info',\n\t\t\tlabel: ' ',\n\t\t\twidth: 200,\n\t\t\tsortable: false,\n\t\t\ttitle: false,\n\t\t\tformatter: this.onCellFormat\n\t\t};\n\t\tcolumns.push( punch_in_out_column );\n\t\tvar start_date_str = this.start_date.format( Global.getLoginUserDateFormat() );\n\t\tvar end_date_str = this.end_date.format( Global.getLoginUserDateFormat() );\n\t\tthis.getAccumulatedTotalGridPayperiodHeader();\n\t\tvar column_1 = {\n\t\t\tname: 'week',\n\t\t\tindex: 'week',\n\t\t\tlabel: $.i18n._( 'Week' ) + '<br>' + start_date_str + ' to ' + end_date_str,\n\t\t\twidth: 100,\n\t\t\tsortable: false,\n\t\t\ttitle: false,\n\t\t\tformatter: this.onCellFormat\n\t\t};\n\t\tvar column_2 = {\n\t\t\tname: 'pay_period',\n\t\t\tindex: 'pay_period',\n\t\t\tlabel: $.i18n._( 'Pay Period' ) + '<br>' + this.pay_period_header,\n\t\t\twidth: 100,\n\t\t\tsortable: false,\n\t\t\ttitle: false,\n\t\t\tformatter: this.onCellFormat\n\t\t};\n\t\tcolumns.push( column_1 );\n\t\tcolumns.push( column_2 );\n\t\tvar grid_data = {};\n\t\tif ( !this.grid ) { //#2571 - this.grid.jqGrid is not a function\n\t\t\tgrid_data = {\n\n\t\t\t\tmultiselectPosition: 'none',\n\t\t\t\tgridComplete: function() {\n\t\t\t\t\tif ( $( this ).jqGrid( 'getGridParam', 'data' ).length > 0 ) {\n\t\t\t\t\t\t$this.setGridColumnsWidth();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tgrid_data = {\n\t\t\t\tshrinkToFit: false\n\t\t\t}; //use the defaults\n\t\t}\n\n\t\tgrid_data.onResizeGrid = false; //we take care of dashlet grid sizing here.\n\t\tthis.grid = new TTGrid( grid_id, grid_data, columns );\n\n\t\t$this.setGridSize();\n\t}\n\n\tinitDefaultDashletContent( view_name ) {\n\t\t$( this.el ).find( '#iframe' ).remove();\n\t\tvar $this = this;\n\t\tthis.api = this.getAPIByViewName( view_name );\n\t\t// when auto resize\n\t\t$( window ).resize( function() {\n\t\t\tif ( $this.grid ) {\n\t\t\t\t$this.setGridSize();\n\t\t\t}\n\t\t} );\n\t\t// set grid id\n\t\tif ( !Global.isSet( this.grid ) ) {\n\t\t\tvar grid = $( this.el ).find( '#grid' );\n\t\t\tgrid.attr( 'id', 'dashlet_' + this.data.id + '_grid' );  //Grid's id is ScriptName + _grid\n\t\t}\n\t\t// refresh event\n\t\t$( this.el ).find( '.refresh-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$( e.target ).addClass( 'button-rotate' );\n\t\t\t$this.initDefaultDashletData();\n\t\t} );\n\t\t// view event\n\t\t$( this.el ).find( '.view-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this.onViewClick();\n\t\t} );\n\n\t\t// start load grid data\n\t\tthis.initDefaultDashletData();\n\t\tthis.startRefresh();\n\t}\n\n\tinitDefaultDashletData() {\n\t\tvar $this = this;\n\t\t$this.getDefaultDashletData( function() {\n\t\t\t$this.getAllColumns( function() {\n\t\t\t\t$this.setSelectLayout();\n\t\t\t\tvar data = Global.formatGridData( $this.dashboard_data.data, $this.data.data.dashlet_type );\n\t\t\t\tdata = $this.processId( data );\n\t\t\t\tif ( $this.grid ) {\n\t\t\t\t\t$this.grid.setData( data );\n\t\t\t\t}\n\t\t\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\t\t\t\tif ( !Global.isArray( $this.dashboard_data.data ) || $this.dashboard_data.data.length < 1 ) {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t} else {\n\t\t\t\t\t$this.removeNoResultCover();\n\t\t\t\t}\n\t\t\t\t$this.setGridCellBackGround();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tprocessId( data ) {\n\t\tvar start_id = -2;\n\t\t// Add a random id to make sure each row has different id when the item don't have id itself (Scheudle summary)\n\t\tdata = _.map( data, function( item ) {\n\t\t\tif ( item.hasOwnProperty( 'id' ) && ( !item.id || item.id == TTUUID.zero_id ) ) {\n\t\t\t\titem.id = start_id;\n\t\t\t}\n\t\t\tstart_id--;\n\t\t\treturn item;\n\t\t} );\n\n\t\treturn data;\n\t}\n\n\taddIframeBack() {\n\t\tvar $this = this;\n\t\tif ( $this.iframe ) {\n\t\t\t$( $this.el ).find( '.content' ).append( $this.iframe );\n\t\t\t$this.setIframeData();\n\t\t\t$this.iframe = null;\n\t\t}\n\t}\n\n\tremoveIframe() {\n\t\tvar $this = this;\n\t\t$this.iframe = $( $this.el ).find( '#iframe' );\n\t\t$( $this.el ).find( '#iframe' ).remove();\n\t}\n\n\tsaveSize( h, w ) {\n\t\tthis.data.data.width = Math.floor( w / $( '.dashboard-container' ).width() * 100 ); //needs a percentage\n\t\tthis.data.data.height = h;\n\t\tconsole.log( this.data.data );\n\t\tthis.user_generic_data_api.setUserGenericData( this.data, {\n\t\t\tonResult: function( result ) {\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetGridSize() {\n\t\tif ( ( !this.grid || !this.grid.grid || !this.grid.grid.is( ':visible' ) ) ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.grid.grid.setGridWidth( $( this.el ).find( '.content' ).width() );\n\t\tthis.grid.grid.setGridHeight( $( this.el ).find( '.content' ).height() - 28 );\n\t}\n\n\tinitReportContent() {\n\t\tvar $this = this;\n\t\t$( this.el ).find( '#grid' ).remove();\n\t\t$( this.el ).find( '.view-btn' ).remove();\n\t\t$( this.el ).find( '.refresh-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$( e.target ).addClass( 'button-rotate' );\n\t\t\t$this.initReportData();\n\t\t} );\n\t\tthis.api_user_report = TTAPI.APIUserReportData;\n\t\tthis.api = this.getAPIByViewName( this.data.data.report );\n\t\tthis.initReportData();\n\t\tthis.startRefresh();\n\t}\n\n\tcleanWhenUnloadView() {\n\t\tif ( this.refresh_timer ) {\n\t\t\tclearInterval( this.refresh_timer );\n\t\t}\n\t}\n\n\tinitReportData() {\n\t\tvar $this = this;\n\t\tif ( $this.data.data.template !== 'saved_report' ) {\n\t\t\tvar report_api = this.getAPIByViewName( this.data.data.report );\n\t\t\treport_api.getTemplate( $this.data.data.template, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar config = result.getResult();\n\t\t\t\t\tconfig.other = {\n\t\t\t\t\t\t'page_orientation': 'P',\n\t\t\t\t\t\t'font_size': 0,\n\t\t\t\t\t\t'auto_refresh': false,\n\t\t\t\t\t\t'disable_grand_total': false,\n\t\t\t\t\t\t'maximum_page_limit': 100,\n\t\t\t\t\t\t'show_duplicate_values': false,\n\t\t\t\t\t\tis_embedded: true\n\t\t\t\t\t};\n\t\t\t\t\t$this.api['get' + $this.api.key_name]( config, 'html', {\n\t\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\t\tvar result = res.getResult();\n\t\t\t\t\t\t\t$this.iframe_data = result;\n\t\t\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\t\t\t$this.setIframeData();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\t$this.api_user_report.getUserReportData( {\n\t\t\t\tfilter_data: {\n\t\t\t\t\tid: $this.data.data.saved_report_id\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data && result_data.length == 1 ) {\n\t\t\t\t\t\tif ( result_data[0].data.config.other ) {\n\t\t\t\t\t\t\tresult_data[0].data.config.other.is_embedded = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult_data[0].data.config.other = { is_embedded: true };\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$this.api['get' + $this.api.key_name]( result_data[0].data.config, 'html', {\n\t\t\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\t\t\tvar result = res.getResult();\n\t\t\t\t\t\t\t\t$this.iframe_data = result;\n\t\t\t\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\t\t\t\t$this.setIframeData();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tstartRefresh() {\n\t\tvar $this = this;\n\t\tvar auto_refresh = this.data.data.auto_refresh;\n\t\tif ( auto_refresh > 0 ) {\n\t\t\tthis.refresh_timer = setInterval( function() {\n\t\t\t\tif ( LocalCacheData.current_open_primary_controller.viewId !== 'Home' ) {\n\t\t\t\t\tclearInterval( $this.refresh_timer );\n\t\t\t\t}\n\t\t\t\tif ( $this.data.data.dashlet_type == 'custom_list' ) {\n\t\t\t\t\t$this.initCustomViewData();\n\t\t\t\t} else if ( $this.data.data.dashlet_type == 'custom_report' ) {\n\t\t\t\t\t$this.initReportData();\n\t\t\t\t} else if ( $this.data.data.dashlet_type == 'exception_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'request_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'message_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'exception_summary_child' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'request_authorize_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'accrual_balance_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'user_active_shift_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'timesheet_verification_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'timesheet_verification_summary_child' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'schedule_summary' ||\n\t\t\t\t\t$this.data.data.dashlet_type == 'schedule_summary_child' ) {\n\t\t\t\t\t$this.initDefaultDashletData();\n\t\t\t\t} else if ( $this.data.data.dashlet_type == 'timesheet_summary' ) {\n\t\t\t\t\t$this.initDefaultTimesheetData();\n\t\t\t\t} else if ( $this.data.data.dashlet_type == 'news' ) {\n\t\t\t\t\t$this.initNewsData();\n\t\t\t\t}\n\n\t\t\t}, ( auto_refresh * 1000 ) );\n\t\t}\n\t}\n\n\tinitCustomViewContent() {\n\t\t$( this.el ).find( '#iframe' ).remove();\n\t\tvar $this = this;\n\t\tthis.api = this.getAPIByViewName( this.data.data.view_name );\n\t\t// when auto resize\n\t\t$( window ).resize( function() {\n\t\t\tif ( $this.grid ) {\n\t\t\t\t$this.setGridSize();\n\t\t\t}\n\t\t} );\n\t\t// set grid id\n\t\tif ( !Global.isSet( this.grid ) ) {\n\t\t\tvar grid = $( this.el ).find( '#grid' );\n\t\t\tgrid.attr( 'id', 'dashlet_' + this.data.id + '_grid' );  //Grid's id is ScriptName + _grid\n\t\t}\n\t\t// refresh event\n\t\t$( this.el ).find( '.refresh-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$( e.target ).addClass( 'button-rotate' );\n\t\t\t$this.initCustomViewData();\n\t\t} );\n\t\t// view event\n\t\t$( this.el ).find( '.view-btn' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this.onViewClick();\n\t\t} );\n\n\t\t// start load grid data\n\t\tthis.initCustomViewData();\n\t\tthis.startRefresh();\n\t}\n\n\tsetGridCellBackGround() {\n\t\tvar data = this.grid.getData();\n\t\tvar len;\n\t\tvar i;\n\t\tvar item;\n\t\tif ( this.data.data.dashlet_type === 'exception_summary' ||\n\t\t\tthis.data.data.dashlet_type === 'exception_summary_child' ) {\n\t\t\t//Error: TypeError: data is undefined in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 70\n\t\t\tif ( !data ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlen = data.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\titem = data[i];\n\t\t\t\tif ( item.exception_background_color ) {\n\t\t\t\t\tvar severity = $( this.el ).find( 'tr[id=\\'' + item.id + '\\']' ).find( 'td[aria-describedby=\"dashlet_' + this.data.id + '_grid_severity\"]' );\n\t\t\t\t\tseverity.css( 'background-color', item.exception_background_color );\n\t\t\t\t\tseverity.css( 'font-weight', 'bold' );\n\t\t\t\t}\n\t\t\t\tif ( item.exception_color ) {\n\t\t\t\t\tvar code = $( this.el ).find( 'tr[id=\\'' + item.id + '\\']' ).find( 'td[aria-describedby=\"dashlet_' + this.data.id + '_grid_exception_policy_type_id\"]' );\n\t\t\t\t\tcode.css( 'color', item.exception_color );\n\t\t\t\t\tcode.css( 'font-weight', 'bold' );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( this.data.data.dashlet_type === 'message_summary' ) {\n\t\t\t//Error: TypeError: data is undefined in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 70\n\t\t\tif ( !data ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlen = data.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\titem = data[i];\n\t\t\t\tif ( item.status_id == 10 ) {\n\t\t\t\t\t$( this.el ).find( 'tr[id=\\'' + item.id + '\\'] td' ).css( 'font-weight', 'bold' );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( this.data.data.dashlet_type === 'request_summary' ) {\n\t\t\t//Error: TypeError: data is undefined in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 70\n\t\t\tif ( !data ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlen = data.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\titem = data[i];\n\t\t\t\tif ( item.status_id == 30 ) {\n\t\t\t\t\t$( this.el ).find( 'tr[id=\\'' + item.id + '\\']' ).addClass( 'bolder-request' );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( this.data.data.dashlet_type === 'user_active_shift_summary' ) {\n\t\t\t//Error: TypeError: data is undefined in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 70\n\t\t\tif ( !data ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlen = data.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\titem = data[i];\n\t\t\t\tif ( item._status_id == 10 ) {\n\t\t\t\t\t$( this.el ).find( 'tr[id=\\'' + item.id + '\\']' ).addClass( 'light-green' );\n\t\t\t\t} else if ( item.status === 'Out' ) {\n\t\t\t\t\t$( this.el ).find( 'tr[id=\\'' + item.id + '\\']' ).addClass( 'light-red' );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( this.data.data.dashlet_type === 'schedule_summary' ||\n\t\t\tthis.data.data.dashlet_type === 'schedule_summary_child' ) {\n\t\t\t//Error: TypeError: data is undefined in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 70\n\t\t\tif ( !data ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlen = data.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\titem = data[i];\n\t\t\t\tif ( item.status_id == 20 ) {\n\t\t\t\t\t$( this.el ).find( 'tr[id=\\'' + item.id + '\\']' ).addClass( 'red-absence' ); //Do not use ids or coloring gets broken by recurring schedules without ids\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstartCustomViewAutoRefresh() {\n\t\tvar $this = this;\n\t\tvar auto_refresh = this.data.data.auto_refresh;\n\t\tif ( auto_refresh > 0 ) {\n\t\t\tthis.refresh_timer = setInterval( function() {\n\t\t\t\tif ( LocalCacheData.current_open_primary_controller.viewId !== 'Home' ) {\n\t\t\t\t\tclearInterval( $this.refresh_timer );\n\t\t\t\t}\n\t\t\t\t$this.initCustomViewData();\n\t\t\t}, ( auto_refresh * 1000 ) );\n\t\t}\n\t}\n\n\tinitCustomViewData() {\n\t\tvar $this = this;\n\t\t$this.getCustomListDashboardData( function() {\n\t\t\t$this.getAllColumns( function() {\n\t\t\t\t$this.setSelectLayout();\n\t\t\t\t$this.grid.setData( Global.formatGridData( $this.dashboard_data.data ) );\n\t\t\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\t\t\t\tif ( !Global.isArray( $this.dashboard_data.data ) ) {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t} else {\n\t\t\t\t\t$this.removeNoResultCover();\n\t\t\t\t}\n\t\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t\t$this.setGridCellBackGround();\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t}\n\n\tgetCustomListDashboardData( callback ) {\n\t\tvar $this = this;\n\t\tif ( !this.data.data.rows_per_page ) {\n\t\t\tthis.data.data.rows_per_page = 0;\n\t\t}\n\t\tthis.api_dashboard.getDashletData( this.data.data.dashlet_type, {\n\t\t\t'class': this.data.data.view_name,\n\t\t\t'user_generic_data_id': this.data.data.layout_id.toString(),\n\t\t\t'rows_per_page': this.data.data.rows_per_page.toString()\n\t\t}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t$this.dashboard_data = result_data;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetDefaultDashletData( callback ) {\n\t\tvar $this = this;\n\t\tif ( !this.data.data.rows_per_page ) {\n\t\t\tthis.data.data.rows_per_page = 0;\n\t\t}\n\t\tthis.api_dashboard.getDashletData( this.data.data.dashlet_type, {\n\t\t\t'rows_per_page': this.data.data.rows_per_page.toString()\n\t\t}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t$this.dashboard_data = result_data;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildDisplayColumns( apiDisplayColumnsArray ) {\n\t\tvar len = this.all_columns.length;\n\t\tvar len1 = apiDisplayColumnsArray ? apiDisplayColumnsArray.length : 0;\n\t\tvar display_columns = [];\n\t\tfor ( var j = 0; j < len1; j++ ) {\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tif ( apiDisplayColumnsArray[j] === this.all_columns[i].value ) {\n\t\t\t\t\tdisplay_columns.push( this.all_columns[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn display_columns;\n\t}\n\n\tonGridDblClickRow() {\n\t\tthis.onViewClick();\n\t}\n\n\tsetSelectLayout() {\n\t\tvar $this = this;\n\t\tvar grid_id;\n\t\tif ( !Global.isSet( this.grid ) ) {\n\t\t\tgrid_id = 'dashlet_' + this.data.id + '_grid';\n\t\t\tif ( $( '#' + grid_id ).length > 0 ) {\n\t\t\t\t$( '#' + grid_id ).jqGrid( 'GridUnload' ); // prevent js exception where grid gets detached\n\t\t\t}\n\t\t}\n\t\tvar display_columns = this.buildDisplayColumns( this.dashboard_data.display_columns );\n\t\t//Set Data Grid on List view\n\t\tvar column_info_array = [];\n\t\tvar len = display_columns.length;\n\t\tvar start_from = 0;\n\t\tfor ( var i = start_from; i < len; i++ ) {\n\t\t\tvar view_column_data = display_columns[i];\n\t\t\tvar column_info = {\n\t\t\t\tname: view_column_data.value,\n\t\t\t\tindex: view_column_data.value,\n\t\t\t\tlabel: view_column_data.label,\n\t\t\t\twidth: 100,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\t\t}\n\n\t\tif ( !this.grid ) { // #2571 -this.grid.jqGrid is not a function\n\t\t\tvar grid_data = {\n\t\t\t\tmultiselectPosition: 'none',\n\t\t\t\tonSelectRow: $.proxy( this.onGridSelectRow, this ),\n\t\t\t\tondblClickRow: function() {\n\t\t\t\t\t$this.onGridDblClickRow();\n\t\t\t\t},\n\t\t\t\tgridComplete: function() {\n\t\t\t\t\tif ( $( this ).jqGrid( 'getGridParam', 'data' ).length > 0 ) {\n\t\t\t\t\t\t$this.setGridColumnsWidth();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tgrid_data.onResizeGrid = false; //we take care of dashlet grid sizing here.\n\t\t\tthis.grid = new TTGrid( grid_id, grid_data, column_info_array );\n\t\t}\n\t\t$this.setGridSize();\n\t}\n\n\tshowNoResultCover() {\n\t\tthis.removeNoResultCover();\n\t\tthis.no_result_box = Global.loadWidgetByName( WidgetNamesDic.NO_RESULT_BOX );\n\t\tif ( this.no_result_box ) {\n\t\t\tthis.no_result_box.NoResultBox( {\n\t\t\t\trelated_view_controller: this,\n\t\t\t\tis_new: false,\n\t\t\t\tmessage: this.getNoResultMessage()\n\t\t\t} );\n\t\t\tthis.no_result_box.attr( 'id', 'dashlet_' + this.data.id + '_no_result_box' );\n\t\t\t$( '#dashlet_' + this.data.id + '_no_result_box' ).remove(); //prevent doubleups\n\t\t\tvar grid_div = $( this.el ).find( '.content' );\n\t\t\tgrid_div.append( this.no_result_box );\n\t\t}\n\t}\n\n\tgetNoResultMessage() {\n\t\t//Show result message base on different dashlet type\n\t\tvar result = $.i18n._( 'No Results Found' );\n\t\tswitch ( this.data.data.dashlet_type ) {\n\t\t\tcase 'schedule_summary':\n\t\t\t\tresult = $.i18n._( 'Perhaps if you ask nicely, your supervisor will add a schedule for you?' );\n\t\t\t\tbreak;\n\t\t\tcase 'exception_summary':\n\t\t\t\tresult = $.i18n._( 'No exceptions to correct, great job!' );\n\t\t\t\tbreak;\n\t\t\tcase 'message_summary':\n\t\t\t\tresult = $.i18n._( 'All messages are read, nicely done!' );\n\t\t\t\tbreak;\n\t\t\tcase 'request_summary':\n\t\t\t\tresult = $.i18n._( 'Send a request to your supervisor by clicking MyAccount -> Requests.' );\n\t\t\t\tbreak;\n\t\t\tcase 'accrual_balance_summary':\n\t\t\t\tresult = $.i18n._( 'No accrual balances at this time.' );\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet_summary':\n\t\t\t\tresult = $.i18n._( 'Timesheet not available.' );\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet_verification_summary':\n\t\t\tcase 'timesheet_verification_summary_child':\n\t\t\t\tresult = $.i18n._( 'No timesheets to verify yet.' );\n\t\t\t\tbreak;\n\t\t\tcase 'schedule_summary_child':\n\t\t\t\tresult = $.i18n._( 'Schedules can be added by clicking Attendance -> Schedules.' );\n\t\t\t\tbreak;\n\t\t\tcase 'exception_summary_child':\n\t\t\t\tresult = $.i18n._( 'All exceptions are corrected... You can relax now!' );\n\t\t\t\tbreak;\n\t\t\tcase 'user_active_shift_summary':\n\t\t\t\tresult = $.i18n._( 'No active shifts at this moment.' );\n\t\t\t\tbreak;\n\t\t\tcase 'request_authorize_summary':\n\t\t\t\tresult = $.i18n._( 'All requests are authorized, excellent work!' );\n\t\t\t\tbreak;\n\t\t\tcase 'news':\n\t\t\t\tresult = $.i18n._( 'Slow news day, nothing to see here yet...' );\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tremoveNoResultCover() {\n\t\tif ( this.no_result_box && this.no_result_box.length > 0 ) {\n\t\t\tthis.no_result_box.remove();\n\t\t}\n\t\tthis.no_result_box = null;\n\t}\n\n\tgetAllColumns( callBack ) {\n\t\tvar $this = this;\n\n\t\tif ( this.api ) { // #2571 - Cannot read property 'getOptions' of null\n\t\t\tthis.api.getOptions( 'columns', {\n\t\t\t\tonResult: function( columns_result ) {\n\t\t\t\t\tvar columns_result_data = columns_result.getResult();\n\t\t\t\t\t$this.all_columns = Global.buildColumnArray( columns_result_data );\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetDefaultDisplayColumns( callBack ) {\n\t\tvar $this = this;\n\t\tthis.api.getOptions( 'default_display_columns', {\n\t\t\tonResult: function( columns_result ) {\n\t\t\t\tvar columns_result_data = columns_result.getResult();\n\t\t\t\t$this.default_display_columns = columns_result_data;\n\t\t\t\tif ( callBack ) {\n\t\t\t\t\tcallBack();\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetTitle() {\n\t\t$( this.el ).find( '.title' ).text( this.data.name );\n\t}\n\n\tgetAPIByViewName( view_name ) {\n\t\tvar api = null;\n\t\tswitch ( view_name.toLowerCase() ) { //Lower case the view_name to avoid case sensitivity mismatches.\n\t\t\tcase 'message_summary':\n\t\t\t\tapi = TTAPI.APIMessageControl;\n\t\t\t\tbreak;\n\t\t\tcase 'schedule_summary':\n\t\t\tcase 'schedule_summary_child':\n\t\t\tcase 'schedule':\n\t\t\t\tapi = TTAPI.APISchedule;\n\t\t\t\tbreak;\n\t\t\tcase 'exception':\n\t\t\tcase 'exception_summary':\n\t\t\tcase 'exception_summary_child':\n\t\t\t\tapi = TTAPI.APIException;\n\t\t\t\tbreak;\n\t\t\tcase 'invoice':\n\t\t\t\tapi = TTAPI.APIInvoice;\n\t\t\t\tbreak;\n\t\t\tcase 'user':\n\t\t\t\tapi = TTAPI.APIUser;\n\t\t\t\tbreak;\n\t\t\tcase 'request_summary':\n\t\t\tcase 'request':\n\t\t\tcase 'request-authorization':\n\t\t\tcase 'request_authorize_summary':\n\t\t\t\tapi = TTAPI.APIRequest;\n\t\t\t\tbreak;\n\t\t\tcase 'accrual_balance_summary':\n\t\t\t\tapi = TTAPI.APIAccrualBalance;\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet_verification_summary':\n\t\t\tcase 'timesheet_verification_summary_child':\n\t\t\t\tapi = TTAPI.APITimesheetSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet_summary':\n\t\t\t\tapi = TTAPI.APITimeSheet;\n\t\t\t\tbreak;\n\t\t\tcase 'user_active_shift_summary':\n\t\t\t\tapi = TTAPI.APIActiveShiftReport;\n\t\t\t\tbreak;\n\t\t\tcase 'payperiodtimesheetverify':\n\t\t\t\tapi = TTAPI.APIPayPeriodTimeSheetVerify;\n\t\t\t\tbreak;\n\t\t\tcase 'userexpense':\n\t\t\tcase 'userexpense-authorization':\n\t\t\t\tapi = TTAPI.APIUserExpense;\n\t\t\t\tbreak;\n\t\t\tcase 'timesheetsummaryreport':\n\t\t\t\tapi = TTAPI.APITimesheetSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'timesheetdetailreport':\n\t\t\t\tapi = TTAPI.APITimesheetDetailReport;\n\t\t\t\tbreak;\n\t\t\tcase 'accrualbalance':\n\t\t\t\tapi = TTAPI.APIAccrualBalance;\n\t\t\t\tbreak;\n\t\t\tcase 'accrual':\n\t\t\t\tapi = TTAPI.APIAccrual;\n\t\t\t\tbreak;\n\t\t\tcase 'recurringschedulecontrol':\n\t\t\t\tapi = TTAPI.APIRecurringScheduleControl;\n\t\t\t\tbreak;\n\t\t\tcase 'recurringscheduletemplatecontrol':\n\t\t\t\tapi = TTAPI.APIRecurringScheduleTemplateControl;\n\t\t\t\tbreak;\n\t\t\tcase 'job':\n\t\t\t\tapi = TTAPI.APIJob;\n\t\t\t\tbreak;\n\t\t\tcase 'jobitem':\n\t\t\t\tapi = TTAPI.APIJobItem;\n\t\t\t\tbreak;\n\t\t\tcase 'usercontact':\n\t\t\t\tapi = TTAPI.APIUserContact;\n\t\t\t\tbreak;\n\t\t\tcase 'userwage':\n\t\t\t\tapi = TTAPI.APIUserWage;\n\t\t\t\tbreak;\n\t\t\tcase 'paystub':\n\t\t\t\tapi = TTAPI.APIPayStub;\n\t\t\t\tbreak;\n\t\t\tcase 'payperiod':\n\t\t\t\tapi = TTAPI.APIPayPeriod;\n\t\t\t\tbreak;\n\t\t\tcase 'paystubamendment':\n\t\t\t\tapi = TTAPI.APIPayStubAmendment;\n\t\t\t\tbreak;\n\t\t\tcase 'client':\n\t\t\t\tapi = TTAPI.APIClient;\n\t\t\t\tbreak;\n\t\t\tcase 'clientcontact':\n\t\t\t\tapi = TTAPI.APIClientContact;\n\t\t\t\tbreak;\n\t\t\tcase 'transaction':\n\t\t\t\tapi = TTAPI.APITransaction;\n\t\t\t\tbreak;\n\t\t\tcase 'userreviewcontrol':\n\t\t\t\tapi = TTAPI.APIUserReviewControl;\n\t\t\t\tbreak;\n\t\t\tcase 'jobvacancy':\n\t\t\t\tapi = TTAPI.APIJobVacancy;\n\t\t\t\tbreak;\n\t\t\tcase 'jobapplicant':\n\t\t\t\tapi = TTAPI.APIJobApplicant;\n\t\t\t\tbreak;\n\t\t\tcase 'jobapplication':\n\t\t\t\tapi = TTAPI.APIJobApplication;\n\t\t\t\tbreak;\n\t\t\tcase 'accrualbalancesummaryreport':\n\t\t\t\tapi = TTAPI.APIAccrualBalanceSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'usersummaryreport':\n\t\t\t\tapi = TTAPI.APIUserSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'activeshiftreport':\n\t\t\t\tapi = TTAPI.APIActiveShiftReport;\n\t\t\t\tbreak;\n\t\t\tcase 'audittrailreport':\n\t\t\t\tapi = TTAPI.APIAuditTrailReport;\n\t\t\t\tbreak;\n\t\t\tcase 'schedulesummaryreport':\n\t\t\t\tapi = TTAPI.APIScheduleSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'punchsummaryreport':\n\t\t\t\tapi = TTAPI.APIPunchSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'exceptionreport':\n\t\t\t\tapi = TTAPI.APIExceptionReport;\n\t\t\t\tbreak;\n\t\t\tcase 'paystubsummaryreport':\n\t\t\t\tapi = TTAPI.APIPayStubSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'userexpensereport':\n\t\t\t\tapi = TTAPI.APIUserExpenseReport;\n\t\t\t\tbreak;\n\t\t\tcase 'jobsummaryreport':\n\t\t\t\tapi = TTAPI.APIJobSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'jobdetailreport':\n\t\t\t\tapi = TTAPI.APIJobDetailReport;\n\t\t\t\tbreak;\n\t\t\tcase 'jobinformationreport':\n\t\t\t\tapi = TTAPI.APIJobInformationReport;\n\t\t\t\tbreak;\n\t\t\tcase 'jobiteminformationreport':\n\t\t\t\tapi = TTAPI.APIJobItemInformationReport;\n\t\t\t\tbreak;\n\t\t\tcase 'invoicetransactionsummaryreport':\n\t\t\t\tapi = TTAPI.APIInvoiceTransactionSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'userqualificationreport':\n\t\t\t\tapi = TTAPI.APIUserQualificationReport;\n\t\t\t\tbreak;\n\t\t\tcase 'kpireport':\n\t\t\t\tapi = TTAPI.APIKPIReport;\n\t\t\t\tbreak;\n\t\t\tcase 'userrecruitmentsummaryreport':\n\t\t\t\tapi = TTAPI.APIUserRecruitmentSummaryReport;\n\t\t\t\tbreak;\n\t\t\tcase 'userrecruitmentdetailreport':\n\t\t\t\tapi = TTAPI.APIUserRecruitmentDetailReport;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn api;\n\t}\n\n\tsetGridColumnsWidth() {\n\t\tvar col_model = this.grid.getGridParam( 'colModel' );\n\t\tvar grid_data = this.grid.getGridParam( 'data' );\n\t\tthis.grid_total_width = 0;\n\t\t//Possible exception\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=TimeSheet&date=20141102&user_id=53130 line 4288\n\t\tif ( !col_model ) {\n\t\t\treturn;\n\t\t}\n\t\tfor ( var i = 0; i < col_model.length; i++ ) {\n\t\t\tvar col = col_model[i];\n\t\t\tvar field = col.name;\n\t\t\tvar longest_words = '';\n\t\t\tfor ( var j = 0; j < grid_data.length; j++ ) {\n\t\t\t\tvar row_data = grid_data[j];\n\t\t\t\tif ( !row_data.hasOwnProperty( field ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar current_words = row_data[field];\n\t\t\t\tif ( !current_words ) {\n\t\t\t\t\tcurrent_words = '';\n\t\t\t\t}\n\t\t\t\tif ( !longest_words ) {\n\t\t\t\t\tlongest_words = current_words.toString();\n\t\t\t\t} else {\n\t\t\t\t\tif ( current_words && current_words.toString().length > longest_words.length ) {\n\t\t\t\t\t\tlongest_words = current_words.toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( longest_words ) {\n\t\t\t\tvar width_test = $( '<span id=\"width_test\"></span>' );\n\t\t\t\twidth_test.css( 'font-size', '11' );\n\t\t\t\twidth_test.css( 'font-weight', 'normal' );\n\t\t\t\t$( 'body' ).append( width_test );\n\t\t\t\twidth_test.text( longest_words );\n\t\t\t\tvar width = width_test.width();\n\t\t\t\twidth_test.text( col.label );\n\t\t\t\tvar header_width = width_test.width();\n\t\t\t\tif ( header_width > width ) {\n\t\t\t\t\twidth = header_width + 20;\n\t\t\t\t}\n\t\t\t\tthis.grid_total_width += width + 5;\n\t\t\t\tthis.grid.grid.setColProp( field, { widthOrg: width } );\n\t\t\t\twidth_test.remove();\n\t\t\t}\n\t\t}\n\t\tvar gw = this.grid.getGridParam( 'width' );\n\t\tthis.grid.setGridWidth( gw );\n\t}\n\n}\n\nDashletController.TOTAL_ROW = 4;\nDashletController.REGULAR_ROW = 5;\nDashletController.ABSENCE_ROW = 6;\nDashletController.ACCUMULATED_TIME_ROW = 7;\nDashletController.PREMIUM_ROW = 8;\n"],"sourceRoot":""}