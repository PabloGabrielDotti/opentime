(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["reports-payroll_export-PayrollExportReportViewController"],{5613:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"PayrollExportReportViewController":()=>o});class o extends ReportBaseViewController{constructor(e={}){_.defaults(e,{export_type_array:null,export_policy_array:null,export_setup_ui_dic:null,export_setup_data:null,export_grid:null,select_grid_last_row:null,save_export_setup_data:{}}),super(e)}initReport(e){this.script_name="PayrollExportReport",this.viewId="PayrollExportReport",this.context_menu_name=$.i18n._("Payroll Export"),this.navigation_label=$.i18n._("Saved Report")+":",this.view_file="PayrollExportReportView.html",this.api=TTAPI.APIPayrollExportReport,this.include_form_setup=!0,this.export_setup_data={}}initOptions(e){this.initDropDownOptions([{option_name:"page_orientation"},{option_name:"font_size"},{option_name:"chart_display_mode"},{option_name:"chart_type"},{option_name:"templates"},{option_name:"setup_fields"},{option_name:"export_type"},{option_name:"auto_refresh"}],(function(t){e(t)}))}getCustomContextMenuModel(){return{groups:{form:{label:$.i18n._("Export"),id:this.viewId+"Form"}},exclude:[],include:[{label:$.i18n._("Export"),id:ContextMenuIconName.export_export,group:"editor",icon:Icons.export_export,sort_order:1790},{label:$.i18n._("Save Setup"),id:ContextMenuIconName.save_setup,group:"form",icon:Icons.save_setup}]}}onTabIndexChange(){}setEditMenuViewIcon(){}onContextMenuClick(e,t){var i;if(Global.isSet(t))i=t;else if(e=$(e),i=$(e.find(".ribbon-sub-menu-icon")).attr("id"),e.hasClass("disable-image"))return;this.select_grid_last_row&&(this.export_grid.grid.jqGrid("saveRow",this.select_grid_last_row),this.select_grid_last_row=null);var o=$.i18n._("Setup data for this report has not been configured yet. Please click on the Export Setup tab to do so now.");switch(i){case ContextMenuIconName.view:ProgressBar.showOverlay(),this.onViewClick(null,!1,o);break;case ContextMenuIconName.view_html:ProgressBar.showOverlay(),this.onViewClick("html",!1,o);break;case ContextMenuIconName.view_html_new_window:this.onViewClick("html",!1,o);break;case ContextMenuIconName.export_excel:this.onViewExcelClick(o);break;case ContextMenuIconName.export_export:ProgressBar.showOverlay(),this.onViewClick("payroll_export",!1,o);break;case ContextMenuIconName.cancel:this.onCancelClick();break;case ContextMenuIconName.save_existed_report:this.onSaveExistedReportClick();break;case ContextMenuIconName.save_new_report:this.onSaveNewReportClick();break;case ContextMenuIconName.save_setup:this.onSaveSetup($.i18n._("Export setup"))}Global.triggerAnalyticsContextMenuClick(e,t)}buildFormSetupUI(){var e=this,t=this.edit_view_tab.find("#tab_form_setup").find(".first-column");this.edit_view_tabs[3]=[],this.edit_view_tabs[3].push(t);var i=Global.loadWidgetByName(FormItemType.COMBO_BOX);i.TComboBox({field:"export_type",set_empty:!1}),i.setSourceData(e.export_type_array),this.addEditFieldToColumn($.i18n._("Export Format"),i,t,""),i.bind("formItemChange",(function(t,i){e.onExportChange(i.getValue())}))}onExportChange(e){var t=this;this.removeCurrentExportUI(),ProgressBar.showOverlay(),this.api.getOptions("export_policy",{noCache:!0,onResult:function(i){switch(t.export_policy_array=i.getResult(),e){case"adp":case"adp_advanced":t.api.getOptions("adp_hour_column_options",{onResult:function(i){t.buildAdditionalInputBox(e),t.buildGrid(e,i.getResult())}});break;case"adp_resource":t.api.getOptions("adp_resource_hour_column_options",{onResult:function(i){t.buildAdditionalInputBox(e),t.buildGrid(e,i.getResult())}});break;case"accero":t.api.getOptions("accero_hour_column_options",{onResult:function(i){t.buildAdditionalInputBox(e),t.buildGrid(e,i.getResult())}});break;case"va_munis":t.api.getOptions("export_columns",!0,{onResult:function(i){var o=i.getResult();o.hasOwnProperty("0")||(o[0]="-- Custom --"),t.buildAdditionalInputBox(e),t.buildGrid(e,o)}});break;case"ceridian_insync":case"paychex_preview_advanced_job":case"paychex_preview":case"quickbooks":case"quickbooks_advanced":case"csv":case"csv_advanced":case"sage_50":case"meditech":t.buildAdditionalInputBox(e),t.buildGrid(e);break;case"cms_pbj":t.api.getOptions("cms_pbj_hour_column_options",{onResult:function(i){t.buildAdditionalInputBox(e),t.buildGrid(e,i.getResult())}});break;default:t.buildGrid(e)}}})}buildGrid(e,t){if(void 0!==e&&0!=e){var i=this,o=[],a="",s={name:"column_id",index:"column_id",label:$.i18n._("Hours"),width:100,sortable:!1,title:!1};o.push(s);var d="";switch(e){case"adp":case"adp_advanced":t=Global.buildRecordArray(t.adp_hour_column_options);for(var _=0;_<t.length;_++)_!==t.length-1?a+=t[_].fullValue+":"+t[_].label+";":a+=t[_].fullValue+":"+t[_].label;s={name:"hour_column",index:"hour_column",label:$.i18n._("ADP Hours"),width:100,sortable:!1,formatter:"select",editable:!0,title:!1,edittype:"select",editoptions:{value:a}},o.push(s),d=$.i18n._("ADP Hours Code");break;case"adp_resource":t=Global.buildRecordArray(t.adp_resource_hour_column_options);for(_=0;_<t.length;_++)_!==t.length-1?a+=t[_].fullValue+":"+t[_].label+";":a+=t[_].fullValue+":"+t[_].label;s={name:"hour_column",index:"hour_column",label:$.i18n._("ADP Hours"),width:100,sortable:!1,formatter:"select",editable:!0,title:!1,edittype:"select",editoptions:{value:a}},o.push(s),d=$.i18n._("ADP Hours Code");break;case"accero":t=Global.buildRecordArray(t.accero_hour_column_options);for(_=0;_<t.length;_++)_!==t.length-1?a+=t[_].fullValue+":"+t[_].label+";":a+=t[_].fullValue+":"+t[_].label;s={name:"hour_column",index:"hour_column",label:$.i18n._("Hour Type"),width:100,sortable:!1,formatter:"select",editable:!0,title:!1,edittype:"select",editoptions:{value:a}},o.push(s),d=$.i18n._("HED Override #");break;case"paychex_preview_advanced_job":case"paychex_preview":d=$.i18n._("Paychex Hours Code");break;case"paychex_online":d=$.i18n._("Earning Code");break;case"ceridian_insync":d=$.i18n._("Ceridian Hours Code");break;case"millenium":d=$.i18n._("Millenium Hours Code");break;case"quickbooks_advanced":case"quickbooks":d=$.i18n._("Quickbooks Payroll Item Name");break;case"surepayroll":d=$.i18n._("Payroll Code");break;case"chris21":d=$.i18n._("Chris21 Hours Code");break;case"va_munis":t=Global.buildRecordArray(t);for(_=0;_<t.length;_++)_!==t.length-1?a+=t[_].fullValue+":"+t[_].label+";":a+=t[_].fullValue+":"+t[_].label;s={name:"hour_column",index:"hour_column",label:$.i18n._("Columns"),width:100,sortable:!1,formatter:"select",editable:!0,title:!1,edittype:"select",editoptions:{value:a}},o.push(s),d=$.i18n._("Hours Code");break;case"compupay":d=$.i18n._("DET Code");break;case"sage_50":d=$.i18n._("Item Number");break;case"cms_pbj":t=Global.buildRecordArray(t.cms_pbj_hour_column_options);for(_=0;_<t.length;_++)_!==t.length-1?a+=t[_].fullValue+":"+t[_].label+";":a+=t[_].fullValue+":"+t[_].label;s={name:"hour_column",index:"hour_column",label:$.i18n._("Export"),width:100,sortable:!1,formatter:"select",editable:!0,title:!1,edittype:"select",editoptions:{value:a}},o.push(s),d=!1;break;case"meditech":d=$.i18n._("Earning Number");break;case"csv":case"csv_advanced":d=$.i18n._("Hours Code")}!1!==d&&(s={name:"hour_code",index:"hour_code",label:d,width:100,sortable:!1,title:!1,editable:!0,edittype:"text"},o.push(s)),this.export_grid&&(this.export_grid.grid.jqGrid("GridUnload"),this.export_grid=null),this.export_grid=new TTGrid("export_grid",{container_selector:".inside-editor-div .grid-div",multiselect:!1,winMultiSelect:!1,sortable:!1,editurl:"clientArray",onSelectRow:function(e){e&&(i.select_grid_last_row&&i.export_grid.grid.jqGrid("saveRow",i.select_grid_last_row),i.export_grid.grid.jqGrid("editRow",e,!0),i.select_grid_last_row=e,i.export_grid.setGridColumnsWidth())},onResizeGrid:!1},o),i.setExportGridData(e)}else if(this.export_grid){var l=$("<table id='export_grid'>");this.export_grid.grid.jqGrid("GridUnload"),this.export_grid.grid.replaceWith(l),this.export_grid=null}}setExportGridData(e){var t=this,i=Global.buildRecordArray(this.export_policy_array),o=i.length,a=[];function s(s,d){for(var _,l,r=0;r<o;r++){var p=i[r],n=p.label,u=s[p.value];switch(0==Global.isSet(u)&&(u=d&&p.value&&d[p.value]?d[p.value]:{}),l=u.hour_column,_=u.hour_code,e){case"adp":case"adp_advanced":case"adp_resource":case"accero":case"va_munis":case"sage_50":case"cms_pbj":l||(l="0");var c={id:r+200,column_id:n,hour_column:l,hour_code:_,column_id_key:p.value};break;default:c={id:r+200,column_id:n,hour_code:_,column_id_key:p.value}}a.push(c)}t.export_grid.setData(a),ProgressBar.closeOverlay()}this.api.getOptions("default_hour_codes",{noCache:!0,onResult:function(i){var o=i.getResult(),a=[];o[e]&&o[e].columns&&(a=o[e].columns),t.save_export_setup_data&&t.save_export_setup_data[e]&&t.save_export_setup_data[e].columns?s(t.save_export_setup_data[e].columns,a):t.export_setup_data&&t.export_setup_data[e]&&t.export_setup_data[e].columns?s(t.export_setup_data[e].columns,a):o[e]&&o[e].columns&&s(a),t.setExportGridSize()}})}setExportGridSize(){if(this.export_grid&&this.export_grid.grid.is(":visible")){var e=this.edit_view.find("#form_setup_content_div"),t=this.edit_view.find(".first-row");this.export_grid.grid.setGridWidth(this.edit_view.find(".inside-editor-div ").width()+14),$("#gbox_export_grid").css("overflow","hidden"),this.export_grid.grid.setGridHeight(e.height()-t.height())}}onTabShow(e,t){var i=$(e.target).tabs("option","active");if($(".edit-view-form-item-label").css("width","auto"),this.editFieldResize(i),this.current_edit_record){var o=this.getEditViewTabIndex();1!==o&&!this.need_refresh_display_columns||0!==i?1===i?(this.edit_view_ui_dic.setup_field.setValue(this.current_edit_record.setup_field),10==Global.getProductEdition()&&this.edit_view_ui_dic.auto_refresh.parent().parent().css("display","none"),this.buildContextMenu(!0),this.setEditMenu()):2===i?Global.getProductEdition()>=15?(this.edit_view_tab.find("#tab_chart").find(".first-column").css("display","block"),this.edit_view.find(".permission-defined-div").css("display","none")):(this.edit_view_tab.find("#tab_chart").find(".first-column").css("display","none"),this.edit_view.find(".permission-defined-div").css("display","block"),this.edit_view.find(".permission-message").html(Global.getUpgradeMessage())):3===i?(this.setExportGridSize(),this.buildContextMenu(!0),this.setEditMenu()):4===i?Global.getProductEdition()>=15?(this.edit_view_tab.find("#tab4").find(".first-column-sub-view").css("display","block"),this.edit_view.find(".permission-defined-div").css("display","none"),this.initSubCustomColumnView()):(this.edit_view_tab.find("#tab4").find(".first-column-sub-view").css("display","none"),this.edit_view.find(".permission-defined-div").css("display","block"),this.edit_view.find(".permission-message").html(Global.getUpgradeMessage())):5===i?this.initSubSavedReportView():(this.buildContextMenu(!0),this.setEditMenu()):(this.buildReportUIBaseOnSetupFields(),this.buildContextMenu(!0),this.setEditMenu()),this.checkFormSetupSaved(o,$.i18n._("Export Setup"))}}buildAdditionalInputBox(e){this.save_export_setup_data[e]?(this.export_setup_data=this.save_export_setup_data[e],!this.export_setup_data.columns&&this.export_setup_data[e]&&(this.export_setup_data=this.export_setup_data[e],this.export_setup_data.export_type=e)):this.export_setup_data={};var t=this;this.export_setup_ui_dic={};var i=this.edit_view_tab.find("#tab_form_setup").find(".first-column");switch(this.edit_view_tabs[3]=[],this.edit_view_tabs[3].push(i),e){case"adp":var o="company_code";(b=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:o});var a=$("<div class='h-box'></div>");(h=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),h.TTextInput({field:o+"_text"}),a.append(b),a.append(h),this.addEditFieldToColumn($.i18n._("Company Code"),[b,h],i,"",a,!0),this.setWidgetVisible([b,h]),b.bind("formItemChange",(function(e,i){0===i.getValue()?(h.css("display","inline"),h.setValue(t.export_setup_data[o])):h.css("display","none")})),t.api.getOptions("adp_company_code_options",{onResult:function(e){var i=e.getResult();b.setSourceData(Global.buildRecordArray(i)),b.setValue(t.export_setup_data[o]),b.trigger("formItemChange",[b,!0])}}),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];var s="batch_id";(m=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:s}),a=$("<div class='h-box'></div>"),(x=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),x.TTextInput({field:s+"_text"}),a.append(m),a.append(x),this.addEditFieldToColumn($.i18n._("Batch ID"),[m,x],i,"",a,!0),this.setWidgetVisible([m,x]),m.bind("formItemChange",(function(e,i){0===i.getValue()?(x.css("display","inline"),x.setValue(t.export_setup_data[s])):x.css("display","none")})),t.api.getOptions("adp_batch_options",{onResult:function(e){var i=e.getResult();m.setSourceData(Global.buildRecordArray(i)),m.setValue(t.export_setup_data[s]),m.trigger("formItemChange",[m,!0])}}),t.export_setup_ui_dic[s]=t.edit_view_form_item_dic[s],delete t.edit_view_form_item_dic[s];var d="temp_dept";(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d}),a=$("<div class='h-box'></div>"),(v=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),v.TTextInput({field:d+"_text"}),a.append(g),a.append(v),this.addEditFieldToColumn($.i18n._("Temp Department"),[g,v],i,"",a,!0),this.setWidgetVisible([g,v]),g.bind("formItemChange",(function(e,i){0===i.getValue()?(v.css("display","inline"),v.setValue(t.export_setup_data[d])):v.css("display","none")})),t.api.getOptions("adp_temp_dept_options",{onResult:function(e){var i=e.getResult();g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d]),g.trigger("formItemChange",[g,!0])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d];break;case"adp_advanced":case"adp_resource":o="company_code";(b=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:o});a=$("<div class='h-box'></div>");(h=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),h.TTextInput({field:o+"_text"}),a.append(b),a.append(h),this.addEditFieldToColumn($.i18n._("Company Code"),[b,h],i,"",a,!0),this.setWidgetVisible([b,h]),b.bind("formItemChange",(function(e,i){0===i.getValue()?(h.css("display","inline"),h.setValue(t.export_setup_data[o])):h.css("display","none")})),t.api.getOptions("adp_company_code_options",{onResult:function(e){var i=e.getResult();b.setSourceData(Global.buildRecordArray(i)),b.setValue(t.export_setup_data[o]),b.trigger("formItemChange",[b,!0])}}),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];s="batch_id";(m=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:s}),a=$("<div class='h-box'></div>"),(x=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),x.TTextInput({field:s+"_text"}),a.append(m),a.append(x),this.addEditFieldToColumn($.i18n._("Batch ID"),[m,x],i,"",a,!0),this.setWidgetVisible([m,x]),m.bind("formItemChange",(function(e,i){0===i.getValue()?(x.css("display","inline"),x.setValue(t.export_setup_data[s])):x.css("display","none")})),t.api.getOptions("adp_batch_options",{onResult:function(e){var i=e.getResult();m.setSourceData(Global.buildRecordArray(i)),m.setValue(t.export_setup_data[s]),m.trigger("formItemChange",[m,!0])}}),t.export_setup_ui_dic[s]=t.edit_view_form_item_dic[s],delete t.edit_view_form_item_dic[s];d="temp_dept";(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d}),a=$("<div class='h-box'></div>"),(v=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),v.TTextInput({field:d+"_text"}),a.append(g),a.append(v),this.addEditFieldToColumn($.i18n._("Temp Department"),[g,v],i,"",a,!0),this.setWidgetVisible([g,v]),g.bind("formItemChange",(function(e,i){0===i.getValue()?(v.css("display","inline"),v.setValue(t.export_setup_data[d])):v.css("display","none")})),t.api.getOptions("adp_temp_dept_options",{onResult:function(e){var i=e.getResult();g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d]),g.trigger("formItemChange",[g,!0])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d];var _="job_cost";(y=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:_}),a=$("<div class='h-box'></div>"),(f=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),f.TTextInput({field:_+"_text"}),a.append(y),a.append(f),this.addEditFieldToColumn($.i18n._("Job Cost #"),[y,f],i,"",a,!0),this.setWidgetVisible([y,f]),y.bind("formItemChange",(function(e,i){0===i.getValue()?(f.css("display","inline"),f.setValue(t.export_setup_data[_])):f.css("display","none")})),t.api.getOptions("adp_job_cost_options",{onResult:function(e){var i=e.getResult();y.setSourceData(Global.buildRecordArray(i)),y.setValue(t.export_setup_data[_]),y.trigger("formItemChange",[y,!0])}}),t.export_setup_ui_dic[_]=t.edit_view_form_item_dic[_],delete t.edit_view_form_item_dic[_];var l="work_class",r=Global.loadWidgetByName(FormItemType.COMBO_BOX);r.TComboBox({field:l}),a=$("<div class='h-box'></div>");var p=Global.loadWidgetByName(FormItemType.TEXT_INPUT);p.css("margin-left","10px"),p.TTextInput({field:l+"_text"}),a.append(r),a.append(p),this.addEditFieldToColumn($.i18n._("Work Class"),[r,p],i,"",a,!0),this.setWidgetVisible([r,p]),r.bind("formItemChange",(function(e,i){0===i.getValue()?(p.css("display","inline"),p.setValue(t.export_setup_data[l])):p.css("display","none")})),t.api.getOptions("adp_work_class_options",{onResult:function(e){var i=e.getResult();r.setSourceData(Global.buildRecordArray(i)),r.setValue(t.export_setup_data[l]),r.trigger("formItemChange",[r,!0])}}),t.export_setup_ui_dic[l]=t.edit_view_form_item_dic[l],delete t.edit_view_form_item_dic[l];var n="state_columns",u=Global.loadWidgetByName(FormItemType.COMBO_BOX);u.TComboBox({field:n,set_empty:!0}),this.addEditFieldToColumn($.i18n._("State"),u,i,"",null,!0),this.setWidgetVisible([u]),TTAPI.APIJobDetailReport.getOptions("static_columns",{onResult:function(e){var i=e.getResult();u.setSourceData(Global.buildRecordArray(i)),u.setValue(t.export_setup_data[n])}}),t.export_setup_ui_dic[n]=t.edit_view_form_item_dic[n],delete t.edit_view_form_item_dic[n];break;case"accero":d="temp_dept";(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d}),a=$("<div class='h-box'></div>"),(v=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),v.TTextInput({field:d+"_text"}),a.append(g),a.append(v),this.addEditFieldToColumn($.i18n._("Department Override Code"),[g,v],i,"",a,!0),this.setWidgetVisible([g,v]),g.bind("formItemChange",(function(e,i){0===i.getValue()?(v.css("display","inline"),v.setValue(t.export_setup_data[d])):v.css("display","none")})),t.api.getOptions("accero_temp_dept_options",{onResult:function(e){var i=e.getResult();g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d]),g.trigger("formItemChange",[g,!0])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d];break;case"va_munis":o="department",(b=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:o}),a=$("<div class='h-box'></div>"),(h=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),h.TTextInput({field:o+"_text"}),a.append(b),a.append(h),this.addEditFieldToColumn($.i18n._("Department"),[b,h],i,"",a,!0),this.setWidgetVisible([b,h]),b.bind("formItemChange",(function(e,i){0===i.getValue()?(h.css("display","inline"),h.setValue(t.export_setup_data[o])):h.css("display","none")})),t.api.getOptions("export_columns",{onResult:function(e){var i=e.getResult();i.hasOwnProperty("0")||(i[0]="-- Custom --"),b.setSourceData(Global.buildRecordArray(i)),b.setValue(t.export_setup_data[o]),b.trigger("formItemChange",[b,!0])}}),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o],s="employee_number",(m=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:s}),a=$("<div class='h-box'></div>"),(x=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),x.TTextInput({field:s+"_text"}),a.append(m),a.append(x),this.addEditFieldToColumn($.i18n._("Employee Number"),[m,x],i,"",a,!0),this.setWidgetVisible([m,x]),m.bind("formItemChange",(function(e,i){0===i.getValue()?(x.css("display","inline"),x.setValue(t.export_setup_data[s])):x.css("display","none")})),t.api.getOptions("export_columns",{onResult:function(e){var i=e.getResult();i.hasOwnProperty("0")||(i[0]="-- Custom --"),m.setSourceData(Global.buildRecordArray(i)),m.setValue(t.export_setup_data[s]),m.trigger("formItemChange",[m,!0])}}),t.export_setup_ui_dic[s]=t.edit_view_form_item_dic[s],delete t.edit_view_form_item_dic[s],d="gl_account",(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d}),a=$("<div class='h-box'></div>"),(v=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),v.TTextInput({field:d+"_text"}),a.append(g),a.append(v),this.addEditFieldToColumn($.i18n._("Long GL Account"),[g,v],i,"",a,!0),this.setWidgetVisible([g,v]),g.bind("formItemChange",(function(e,i){0===i.getValue()?(v.css("display","inline"),v.setValue(t.export_setup_data[d])):v.css("display","none")})),t.api.getOptions("export_columns",{onResult:function(e){var i=e.getResult();i.hasOwnProperty("0")||(i[0]="-- Custom --"),g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d]),g.trigger("formItemChange",[g,!0])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d];break;case"ceridian_insync":o="employer_number",(b=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:o}),this.addEditFieldToColumn($.i18n._("Employer Number"),b,i,"",null,!0),this.setWidgetVisible([b]),b.setValue(t.export_setup_data[o]),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];break;case"paychex_preview":o="client_number",(b=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:o}),this.addEditFieldToColumn($.i18n._("Client Number"),b,i,"",null,!0),this.setWidgetVisible([b]),b.setValue(t.export_setup_data[o]),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];break;case"paychex_preview_advanced_job":o="client_number_adv",(b=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:o}),this.addEditFieldToColumn($.i18n._("Client Number"),b,i,"",null,!0),this.setWidgetVisible([b]),b.setValue(t.export_setup_data.client_number),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o],s="job_columns",(m=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:s,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value",set_empty:!0}),this.addEditFieldToColumn($.i18n._("Job"),m,i,"",null,!0),this.setWidgetVisible([m]),TTAPI.APIJobDetailReport.getOptions("static_columns",{onResult:function(e){var i=e.getResult();m.setSourceData(Global.buildRecordArray(i)),m.setValue(t.export_setup_data[s])}}),t.export_setup_ui_dic[s]=t.edit_view_form_item_dic[s],delete t.edit_view_form_item_dic[s],d="state_columns",(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d,set_empty:!0}),this.addEditFieldToColumn($.i18n._("State"),g,i,"",null,!0),this.setWidgetVisible([g]),TTAPI.APIJobDetailReport.getOptions("static_columns",{onResult:function(e){var i=e.getResult();g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d],o="include_hourly_rate",(b=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:o}),this.addEditFieldToColumn($.i18n._("Include Override Rates"),b,i,"",null,!0),this.setWidgetVisible([b]),b.setValue(t.export_setup_data[o]),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];break;case"quickbooks":case"quickbooks_advanced":o="company_name",(b=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:o});var c=this.buildWidgetContainerWithTextTip(b,"(Exactly as shown in Quickbooks)");this.addEditFieldToColumn($.i18n._("Company Name"),b,i,"",c,!0),this.setWidgetVisible([b]),b.setValue(t.export_setup_data[o]),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o],o="company_created_date",(b=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:o}),c=this.buildWidgetContainerWithTextTip(b,"(Exactly as shown in exported timer list)"),this.addEditFieldToColumn($.i18n._("Company Created Time"),b,i,"",c,!0),this.setWidgetVisible([b]),b.setValue(t.export_setup_data[o]),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o],s="proj",(m=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:s}),this.addEditFieldToColumn($.i18n._("Map PROJ Field To"),m,i,"",null,!0),this.setWidgetVisible([m]),this.api.getOptions("quickbooks_proj_options",{onResult:function(e){var i=e.getResult();m.setSourceData(Global.buildRecordArray(i)),m.setValue(t.export_setup_data[s])}}),t.export_setup_ui_dic[s]=t.edit_view_form_item_dic[s],delete t.edit_view_form_item_dic[s],d="item",(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d}),this.addEditFieldToColumn($.i18n._("Map ITEM Field To"),g,i,"",null,!0),this.setWidgetVisible([g]),this.api.getOptions("quickbooks_proj_options",{onResult:function(e){var i=e.getResult();g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d];_="job";(y=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:_}),this.addEditFieldToColumn($.i18n._("Map JOB Field To"),y,i,"",null,!0),this.setWidgetVisible([y]),this.api.getOptions("quickbooks_proj_options",{onResult:function(e){var i=e.getResult();y.setSourceData(Global.buildRecordArray(i)),y.setValue(t.export_setup_data[_])}}),t.export_setup_ui_dic[_]=t.edit_view_form_item_dic[_],delete t.edit_view_form_item_dic[_];break;case"sage_50":o="customer_name";(b=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:o});a=$("<div class='h-box'></div>");(h=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),h.TTextInput({field:o+"_text"}),a.append(b),a.append(h),this.addEditFieldToColumn($.i18n._("Customer Name"),[b,h],i,"",a,!0),this.setWidgetVisible([b,h]),b.bind("formItemChange",(function(e,i){0===i.getValue()?(h.css("display","inline"),h.setValue(t.export_setup_data[o])):h.css("display","none")})),t.api.getOptions("sage_50_customer_name_options",{onResult:function(e){var i=e.getResult();b.setSourceData(Global.buildRecordArray(i)),b.setValue(t.export_setup_data[o]),b.trigger("formItemChange",[b,!0])}}),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];break;case"cms_pbj":o="facility_code";(b=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:o});a=$("<div class='h-box'></div>");(h=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),h.TTextInput({field:o+"_text"}),a.append(b),a.append(h),this.addEditFieldToColumn($.i18n._("Facility ID"),[b,h],i,"",a,!0),this.setWidgetVisible([b,h]),b.bind("formItemChange",(function(e,i){0===i.getValue()?(h.css("display","inline"),h.setValue(t.export_setup_data[o])):h.css("display","none")})),t.api.getOptions("cms_pbj_facility_code_options",{onResult:function(e){var i=e.getResult();b.setSourceData(Global.buildRecordArray(i)),b.setValue(t.export_setup_data[o]),b.trigger("formItemChange",[b,!0])}}),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];var m,x;s="state_code";(m=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:s}),a=$("<div class='h-box'></div>"),(x=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),x.TTextInput({field:s+"_text"}),a.append(m),a.append(x),this.addEditFieldToColumn($.i18n._("State"),[m,x],i,"",a,!0),this.setWidgetVisible([m,x]),m.bind("formItemChange",(function(e,i){0===i.getValue()?(x.css("display","inline"),x.setValue(t.export_setup_data[s])):x.css("display","none")})),t.api.getOptions("cms_obj_state_code_options",{onResult:function(e){var i=e.getResult();m.setSourceData(Global.buildRecordArray(i)),m.setValue(t.export_setup_data[s]),m.trigger("formItemChange",[m,!0])}}),t.export_setup_ui_dic[s]=t.edit_view_form_item_dic[s],delete t.edit_view_form_item_dic[s];d="pay_type_code";(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d}),a=$("<div class='h-box'></div>"),(v=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),v.TTextInput({field:d+"_text"}),a.append(g),a.append(v),this.addEditFieldToColumn($.i18n._("Pay Type Code"),[g,v],i,"",a,!0),this.setWidgetVisible([g,v]),g.bind("formItemChange",(function(e,i){0===i.getValue()?(v.css("display","inline"),v.setValue(t.export_setup_data[d])):v.css("display","none")})),t.api.getOptions("cms_pbj_pay_type_code_options",{onResult:function(e){var i=e.getResult();g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d]),g.trigger("formItemChange",[g,!0])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d];_="job_title_code";(y=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:_}),a=$("<div class='h-box'></div>"),(f=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),f.TTextInput({field:_+"_text"}),a.append(y),a.append(f),this.addEditFieldToColumn($.i18n._("Job Title Code"),[y,f],i,"",a,!0),this.setWidgetVisible([y,f]),y.bind("formItemChange",(function(e,i){0===i.getValue()?(f.css("display","inline"),f.setValue(t.export_setup_data[_])):f.css("display","none")})),t.api.getOptions("cms_pbj_job_title_code_options",{onResult:function(e){var i=e.getResult();y.setSourceData(Global.buildRecordArray(i)),y.setValue(t.export_setup_data[_]),y.trigger("formItemChange",[y,!0])}}),t.export_setup_ui_dic[_]=t.edit_view_form_item_dic[_],delete t.edit_view_form_item_dic[_];break;case"meditech":l="payroll",(b=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:l}),this.addEditFieldToColumn($.i18n._("Payroll"),b,i,"",null,!0),this.setWidgetVisible([b]),b.setValue(t.export_setup_data[l]),t.export_setup_ui_dic[l]=t.edit_view_form_item_dic[l],delete t.edit_view_form_item_dic[l];var b;o="employee_number";(b=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:o});var h;a=$("<div class='h-box'></div>");(h=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),h.TTextInput({field:o+"_text"}),a.append(b),a.append(h),this.addEditFieldToColumn($.i18n._("Employee Number"),[b,h],i,"",a,!0),this.setWidgetVisible([b,h]),b.bind("formItemChange",(function(e,i){0===i.getValue()?(h.css("display","inline"),h.setValue(t.export_setup_data[o])):h.css("display","none")})),t.api.getOptions("export_columns","meditech",{onResult:function(e){var i=e.getResult();b.setSourceData(Global.buildRecordArray(i)),b.setValue(t.export_setup_data[o]),b.trigger("formItemChange",[b,!0])}}),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o];var g,v;d="department";(g=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:d}),a=$("<div class='h-box'></div>"),(v=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),v.TTextInput({field:d+"_text"}),a.append(g),a.append(v),this.addEditFieldToColumn($.i18n._("Department"),[g,v],i,"",a,!0),this.setWidgetVisible([g,v]),g.bind("formItemChange",(function(e,i){0===i.getValue()?(v.css("display","inline"),v.setValue(t.export_setup_data[d])):v.css("display","none")})),t.api.getOptions("meditech_department_options",{onResult:function(e){var i=e.getResult();g.setSourceData(Global.buildRecordArray(i)),g.setValue(t.export_setup_data[d]),g.trigger("formItemChange",[g,!0])}}),t.export_setup_ui_dic[d]=t.edit_view_form_item_dic[d],delete t.edit_view_form_item_dic[d];var y,f;_="job_code";(y=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:_}),a=$("<div class='h-box'></div>"),(f=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).css("margin-left","10px"),f.TTextInput({field:_+"_text"}),a.append(y),a.append(f),this.addEditFieldToColumn($.i18n._("Job Code"),[y,f],i,"",a,!0),this.setWidgetVisible([y,f]),y.bind("formItemChange",(function(e,i){0===i.getValue()?(f.css("display","inline"),f.setValue(t.export_setup_data[_])):f.css("display","none")})),t.api.getOptions("meditech_job_code_options",{onResult:function(e){var i=e.getResult();y.setSourceData(Global.buildRecordArray(i)),y.setValue(t.export_setup_data[_]),y.trigger("formItemChange",[y,!0])}}),t.export_setup_ui_dic[_]=t.edit_view_form_item_dic[_],delete t.edit_view_form_item_dic[_];break;case"csv_advanced":o="csv_export_columns",(b=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:o,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value",set_empty:!0}),this.addEditFieldToColumn($.i18n._("Export Columns"),b,i,"",null,!0),this.setWidgetVisible([b]),this.api.getOptions("export_columns","csv_advanced",{onResult:function(e){var i=e.getResult();b.setSourceData(Global.buildRecordArray(i)),b.setValue(t.export_setup_data[o])}}),t.export_setup_ui_dic[o]=t.edit_view_form_item_dic[o],delete t.edit_view_form_item_dic[o]}this.editFieldResize(3)}buildEditViewUI(){super.buildEditViewUI(),this.edit_view.find("a[ref=tab_form_setup]").text($.i18n._("Export Setup"))}removeCurrentExportUI(){for(var e in this.export_setup_ui_dic){this.export_setup_ui_dic[e].remove()}this.edit_view_tab&&this.edit_view_tab.find("#tab_form_setup").find(".first-column").find(".clear-both-div").remove()}getExportColumns(e){var t={};if(this.export_grid)for(var i=this.export_grid.getData(),o=i.length,a=0;a<o;a++){var s=i[a];t[s.column_id_key]={},t[s.column_id_key].hour_code=s.hour_code,"adp"!==e&&"adp_advanced"!==e&&"adp_resource"!==e&&"accero"!==e&&"va_munis"!==e&&"cms_pbj"!==e||(t[s.column_id_key].hour_column=s.hour_column)}return t}getFormSetupFieldValues(e){for(var t={},i=0;i<e.length;i++)this.edit_view_ui_dic[e[i]]&&!this.edit_view_ui_dic[e[i]].getValue()?(t[e[i]]=this.edit_view_ui_dic[e[i]+"_text"].getValue(),t[e[i]+"_value"]=this.edit_view_ui_dic[e[i]+"_text"].getValue()):this.edit_view_ui_dic[e[i]]?t[e[i]]=this.edit_view_ui_dic[e[i]].getValue():t[e[i]]="";return t}getFormData(e,t){if(!e||!e.export_type)return!1;switch(e.export_type){case"adp":e[e.export_type]=this.getFormSetupFieldValues(["company_code","batch_id","temp_dept"]);break;case"adp_advanced":case"adp_resource":e[e.export_type]=this.getFormSetupFieldValues(["company_code","batch_id","temp_dept","job_cost","work_class"]),e[e.export_type].state_columns=this.edit_view_ui_dic.state_columns.getValue();break;case"accero":e[e.export_type]=this.getFormSetupFieldValues(["temp_dept"]);break;case"paychex_preview":e[e.export_type].client_number=this.edit_view_ui_dic.client_number.getValue();break;case"paychex_preview_advanced_job":e[e.export_type].client_number=this.edit_view_ui_dic.client_number_adv.getValue(),e[e.export_type].job_columns=this.edit_view_ui_dic.job_columns.getValue(),e[e.export_type].state_columns=this.edit_view_ui_dic.state_columns.getValue(),e[e.export_type].include_hourly_rate=this.edit_view_ui_dic.include_hourly_rate.getValue();break;case"ceridian_insync":e[e.export_type].employer_number=this.edit_view_ui_dic.employer_number.getValue();break;case"quickbooks":case"quickbooks_advanced":e[e.export_type].company_name=this.edit_view_ui_dic.company_name.getValue(),e[e.export_type].company_created_date=this.edit_view_ui_dic.company_created_date.getValue(),e[e.export_type].proj=this.edit_view_ui_dic.proj.getValue(),e[e.export_type].item=this.edit_view_ui_dic.item.getValue(),e[e.export_type].job=this.edit_view_ui_dic.job.getValue();break;case"sage_50":e[e.export_type]=this.getFormSetupFieldValues(["customer_name"]);break;case"va_munis":e[e.export_type]=this.getFormSetupFieldValues(["department","employee_number","gl_account","customer_name","facility_code","state_code","pay_type_code","job_title_code",""]);break;case"meditech":e[e.export_type]=this.getFormSetupFieldValues(["employee_number","department","job_code"]),e[e.export_type].payroll=this.edit_view_ui_dic.payroll.getValue();break;case"csv_advanced":e[e.export_type].export_columns=this.edit_view_ui_dic.csv_export_columns.getValue();break;case"cms_pbj":e[e.export_type]=this.getFormSetupFieldValues(["facility_code","state_code","pay_type_code","job_title_code"])}if(this.save_export_setup_data||(this.save_export_setup_data={}),this.save_export_setup_data[e.export_type]=e[e.export_type],this.save_export_setup_data[e.export_type].columns=this.getExportColumns(e.export_type),this.save_export_setup_data.export_type=e.export_type,t)for(var i in this.save_export_setup_data)!1!==i&&"string"!=typeof this.save_export_setup_data[i]&&(this.save_export_setup_data[i]=this.convertExportSetupValues(this.save_export_setup_data[i]));return e}getFormSetupData(e){var t={};if(t.export_type=this.edit_view_ui_dic.export_type.getValue(),t[t.export_type]={},t[t.export_type].columns=this.getExportColumns(t.export_type),t=this.getFormData(t,!0),!e&&t.export_type){var i=t.export_type;(t=t[i]).export_type=i,t[i]={},t[i].columns=this.getExportColumns(t.export_type)}return t}convertExportSetupValues(e){for(var t in e){var i=t.substr(0,t.indexOf("_value"));t.search("_value")>0&&(e[i]=e[t])}return e.export_columns&&!e.columns&&0!=e.export_type&&e.export_columns[e.export_type]&&(e.columns={},e.columns=e.export_columns[e.export_type].columns),e}setFormSetupData(e){if(this.edit_view_ui_dic.export_type&&this.edit_view_ui_dic.export_type.getValue()&&(e.export_type=this.edit_view_ui_dic.export_type.getValue()),e.export_columns)e=this.convertExportSetupValues(e),this.save_export_setup_data[e.export_type]=e,this.save_export_setup_data.export_type=e.export_type;else{for(var t in e)!1!==t&&"string"!=typeof e[t]&&(e[t]=this.convertExportSetupValues(e[t]));this.save_export_setup_data=e}e||(this.show_empty_message=!0),e&&e.export_type&&(this.edit_view_ui_dic.export_type.setValue(e.export_type),this.current_edit_record.export_type=e.export_type),this.save_export_setup_data.csv_advanced&&(this.save_export_setup_data.csv_advanced.csv_export_columns?this.save_export_setup_data.csv_advanced.export_columns=this.save_export_setup_data.csv_advanced.csv_export_columns:this.save_export_setup_data.csv_advanced.csv_export_columns=this.save_export_setup_data.csv_advanced.export_columns),this.onExportChange(e.export_type)}onFormItemChange(e,t){var i=$("#export_grid").getGridParam("selrow");if($("#export_grid").saveRow(i),e&&e.getField&&"export_type"==e.getField()){var o={};return o.export_type=this.current_edit_record.export_type,o[o.export_type]={},o[o.export_type].export_columns={columns:this.getExportColumns(o.export_type)},this.export_setup_data.export_columns&&0!=Global.isObject(this.export_setup_data.export_columns)||(this.export_setup_data.export_columns={},this.export_setup_data.export_columns[o.export_type]={}),this.export_setup_data.export_columns[o.export_type]={columns:this.getExportColumns(o.export_type)},void(this.form_setup_changed=!0)}super.onFormItemChange(e,t)}}}}]);
//# sourceMappingURL=reports-payroll_export-PayrollExportReportViewController.bundle.js.map?v=49138b8de8a35dac7de3