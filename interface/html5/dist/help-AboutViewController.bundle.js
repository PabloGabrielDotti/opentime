(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["help-AboutViewController","filebrowser-TImageAdvBrowser","filebrowser-TImageBrowser"],{8243:()=>{!function(e){e.fn.TImageAdvBrowser=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var i,a,r,o=e.extend({},e.fn.TImageAdvBrowser.defaults,t),n=this,d="",l=177,s=42,c=null;return this.setEnable=function(e){e;var t=this.children().eq(1);e?t.show():t.hide()},this.clearErrorStyle=function(){},this.getField=function(){return i},this.getValue=function(){return r},this.setImage=function(e){if(!e)return a.attr("src",""),void a.hide();var t=new Date;a.hide(),a.attr("src",e+"&t="+t.getTime()+"&X-CSRF-Token="+getCookie("CSRF-Token")),a.css("height","auto"),a.css("width","auto")},this.onImageLoad=function(t){var i=e(t).height()>0?e(t).height():t.naturalHeight,a=e(t).width()>0?e(t).width():t.naturalWidth;i>s&&e(t).css("height",s),a>l&&(e(t).css("width",l),e(t).css("height","auto")),n.trigger("setSize"),i<5?e(t).hide():e(t).show()},this.setValue=function(e){e||(e="")},this.setEnableDelete=function(e){var t=n.find(".image");e?t.attr("enable-delete",1):t.removeAttr("enable-delete")},this.each((function(){var t=e.meta?e.extend({},o,e(this).data()):o;i=t.field;e(this).find("#upload_image").text(e.i18n._("Upload Image")),t.callBack&&(c=t.callBack),!1===t.show_browser&&e(this).children().eq(1).hide(),t.default_width>0&&(l=t.default_width),t.default_height>0&&(s=t.default_height),Global.isSet(t.name)&&t.name,Global.isSet(d)&&(d=t.accept_filter),Global.isSet(t.deleteImageHandler)&&n.find(".file-browser").on("deleteClick",(function(){t.deleteImageHandler()})),e(this).children().eq(1).bind("click",(function(){IndexViewController.openWizard("UserPhotoWizard",null,(function(e){c&&c(e),r=e}))})),(a=e(this).children().eq(0)).on("load",(function(){n.onImageLoad(this)})),a.hide()})),this},e.fn.TImageAdvBrowser.defaults={}}(jQuery)},3536:()=>{!function(e){e.fn.TImageBrowser=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var i,a,r=e.extend({},e.fn.TImageBrowser.defaults,t),o=this,n="filedata",d="",l=177,s=42;this.setEnabled=function(e){e;var t=this.find(".browser-form input");e?(t.removeAttr("disabled"),t.removeClass("disable-element")):(t.attr("disabled",!0),t.removeClass("disable-element").addClass("disable-element"))},this.clearErrorStyle=function(){},this.getFileName=function(){return a.val()},this.getField=function(){return i},this.setEnableDelete=function(e){var t=o.find(".image");e?t.attr("enable-delete",1):t.removeAttr("enable-delete")},this.getValue=function(){return a&&a.val()?"undefined"==typeof FormData?o.find(".browser-form"):new FormData(e(o.find(".browser-form"))[0]):null},this.getImageSrc=function(){return o.find(".image").attr("src")},this.setImage=function(e){var t=o.find(".image");if(!e)return t.attr("src",""),void t.hide();var i=new Date;t.hide(),t.attr("src",e+"&t="+i.getTime()),t.css("height","auto"),t.css("width","auto")};return this.setValue=function(e){e||(e="")},this.each((function(){var t=e.meta?e.extend({},r,e(this).data()):r;i=t.field,t.default_width>0&&(l=t.default_width),t.default_height>0&&(s=t.default_height),Global.isSet(t.name)&&(n=t.name),Global.isSet(d)&&(d=t.accept_filter),a=e(this).find(".browser");var c=e(this).find(".image");c.hide(),c.on("load",(function(){!function(t){var i=e(t).height()>0?e(t).height():t.naturalHeight,a=e(t).width()>0?e(t).width():t.naturalWidth;i>s&&e(t).css("height",s),a>l&&(e(t).css("width",l),e(t).css("height","auto")),o.trigger("setSize"),i<5?e(t).hide():e(t).show()}(this)})),d?a.attr("accept",d):(d="image/*",a.attr("accept","image/*")),a.attr("id","file_browser"),a.attr("name",n),Global.isSet(t.changeHandler)&&o.bind("imageChange",t.changeHandler),Global.isSet(t.deleteImageHandler)&&this.find(".file-browser").on("deleteClick",(function(){t.deleteImageHandler()})),a.bind("change",(function(){if(c.hide(),"undefined"!=typeof FileReader){var e=this.files?this.files:[];if(!e.length||!window.FileReader)return;if("image/*"===d){var t=new FileReader;t.readAsDataURL(e[0]),t.onloadend=function(){var e=this.result;c.attr("src",e)}}}o.trigger("imageChange",[o])}))})),this},e.fn.TImageBrowser.defaults={}}(jQuery)},78:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"AboutViewController":()=>a});i(3536),i(8243);class a extends BaseViewController{constructor(e={}){_.defaults(e,{date_api:null,employeeActive:[]}),super(e)}init(e){this.viewId="About",this.script_name="AboutView",this.context_menu_name=$.i18n._("About"),this.api=TTAPI.APIAbout,this.date_api=TTAPI.APITTDate,this.render(),this.initData()}getCustomContextMenuModel(){return{exclude:["default"],include:[{label:$.i18n._("Check For<br>Updates"),id:ContextMenuIconName.check_updates,group:"editor",icon:Icons.check_updates},ContextMenuIconName.cancel]}}onCustomContextClick(e){switch(e){case ContextMenuIconName.check_updates:this.onCheckClick()}}onCheckClick(){var e=this;this.api.isNewVersionAvailable({onResult:function(t){e.current_edit_record=t.getResult(),e.initEditView()}})}getAboutData(e){this.api.getAboutData({onResult:function(t){var i=t.getResult();Global.isSet(i)&&e(i)}})}openEditView(){var e=this;e.edit_only_mode&&(this.buildContextMenu(),e.edit_view||e.initEditViewUI("About","AboutEditView.html"),e.getAboutData((function(t){e.current_edit_record=t,e.initEditView()})))}setUIWidgetFieldsToCurrentEditRecord(){}setCurrentEditRecordData(){for(var e in Global.isSet(this.current_edit_record.license_data)||(this.current_edit_record.license_data={}),this.edit_view_form_item_dic)this.detachElement(e);for(var t in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(t)){var i=this.edit_view_ui_dic[t];switch(t){case"new_version":if(!0===this.current_edit_record[t]){this.attachElement("notice");var a="<br><b>"+$.i18n._("NOTICE")+":</b> "+$.i18n._("There is a new version of")+" ";a+="<b>"+$.i18n._(this.current_edit_record.application_name)+"</b> "+$.i18n._("available")+".",a+="<br>"+$.i18n._("This version may contain tax table updates necessary for accurate payroll calculation, we recommend that you upgrade as soon as possible.")+"<br>",a+=$.i18n._("The latest version can be downloaded from")+": <a href='https://"+this.current_edit_record.organization_url+"/?upgrade=1' target='_blank'>",a+="<b>"+this.current_edit_record.organization_url+"</b></a><br><br>",$(this.edit_view_form_item_dic.notice.find(".tblDataWarning")).html(a)}break;case"registration_key":case"hardware_id":Global.isSet(i)&&(""===this.current_edit_record[t]||Global.isFalseOrNull(this.current_edit_record[t])?i.setValue($.i18n._("N/A")):i.setValue(this.current_edit_record[t]));break;case"cron":Global.isSet(i)&&(""!==this.current_edit_record[t].last_run_date?i.setValue(this.current_edit_record[t].last_run_date):i.setValue($.i18n._("Never")));break;case"license_data":if(Global.isSet(this.current_edit_record[t])){this.attachElement("license_info"),this.attachElement("license_browser");var r=$(this.edit_view_form_item_dic.license_info.find(".separated-box"));if(this.current_edit_record[t].message?(r.css({"font-weight":"bold","background-color":"red","height":"auto","color":"#000000"}),r.html($.i18n._("License Information")+"<br>"+$.i18n._("WARNING")+": "+this.current_edit_record[t].message),$(r.find("span")).removeClass("label").css({"font-size":"normal","font-weight":"bold"})):r.html('<span class="label">'+$.i18n._("License Information")+"</span>"),this.current_edit_record[t].organization_name)for(var o in this.current_edit_record[t])switch(o){case"major_version":case"minor_version":this.attachElement("_version"),this.edit_view_ui_dic._version.setValue(this.current_edit_record[t].major_version+"."+this.current_edit_record[t].minor_version+".X");break;default:Global.isSet(this.edit_view_ui_dic[o])&&Global.isSet(this.edit_view_form_item_dic[o])&&(this.attachElement(o),this.edit_view_ui_dic[o].setValue(this.current_edit_record[t][o]))}}break;case"user_counts":this.current_edit_record[t].length>0&&this.attachElement("user_active_inactive");break;case"schema_version_group_A":case"schema_version_group_B":case"schema_version_group_C":case"schema_version_group_D":Global.isSet(i)&&this.current_edit_record[t]&&i.setValue(this.current_edit_record[t]);break;default:Global.isSet(i)&&i.setValue(this.current_edit_record[t])}Global.isSet(i)&&0==this.current_edit_record[t]&&i.parents(".edit-view-form-item-div").detach()}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}setEditViewDataDone(){super.setEditViewDataDone(),this.setActiveEmployees()}setActiveEmployees(){if(this.employeeActive.length>0){for(var e in this.employeeActive){var t=this.employeeActive[e].getField();Global.isSet(this.edit_view_form_item_dic[t])&&this.edit_view_form_item_dic[t].remove()}this.employeeActive=[]}if(Global.isSet(this.current_edit_record.user_counts)&&this.current_edit_record.user_counts.length>0){var i=this.edit_view_tab.find("#tab_about").find(".first-column");for(var a in this.current_edit_record.user_counts){var r=this.current_edit_record.user_counts[a],o=Global.loadWidgetByName(FormItemType.TEXT);o.TText({field:"active_"+a}),o.setValue(r.max_active_users+" / "+r.max_inactive_users),this.addEditFieldToColumn($.i18n._(r.label),o,i,"",null,!0),this.employeeActive.push(o),this.edit_view_ui_dic["active_"+a].css("opacity",1)}this.editFieldResize(0)}}buildEditViewUI(){var e=this;super.buildEditViewUI();var t={"tab_about":{"label":$.i18n._("About")}};this.setTabModel(t);var i=this.edit_view_tab.find("#tab_about").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var a=$("<div class='tblDataWarning'></div>");this.addEditFieldToColumn(null,a,i,"",null,!0,!1,"notice"),(a=Global.loadWidgetByName(FormItemType.SEPARATED_BOX)).SeparatedBox({label:$.i18n._("System Information")}),this.addEditFieldToColumn(null,a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"product_edition"}),this.addEditFieldToColumn($.i18n._("Product Edition"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"system_version"}),this.addEditFieldToColumn($.i18n._("Version"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"operating_system"}),this.addEditFieldToColumn($.i18n._("Operating System"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"php_version"}),this.addEditFieldToColumn($.i18n._("PHP Version"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"tax_engine_version"}),this.addEditFieldToColumn($.i18n._("Tax Engine Version"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"tax_data_version"}),this.addEditFieldToColumn($.i18n._("Tax Data Version"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"registration_key"}),this.addEditFieldToColumn($.i18n._("Registration Key"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"hardware_id"}),this.addEditFieldToColumn($.i18n._("Hardware ID"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"cron"}),this.addEditFieldToColumn($.i18n._("Maintenance Jobs Last Ran"),a,i),(a=Global.loadWidgetByName(FormItemType.SEPARATED_BOX)).SeparatedBox({label:$.i18n._("License Information")}),this.addEditFieldToColumn(null,a,i,"",null,!0,!1,"license_info"),LocalCacheData.productEditionId>10&&APIGlobal.pre_login_data.primary_company_id==LocalCacheData.getCurrentCompany().id&&(a=Global.loadWidgetByName(FormItemType.IMAGE_BROWSER),this.file_browser=a.TImageBrowser({field:"license_browser",id:"license_browser",name:"filedata",accept_filter:"*",changeHandler:function(t){e.uploadLicense(this)}})),this.addEditFieldToColumn($.i18n._("Upload License"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"product_name"}),this.addEditFieldToColumn($.i18n._("Product"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"organization_name"}),this.addEditFieldToColumn($.i18n._("Company"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"_version"}),this.addEditFieldToColumn($.i18n._("Version"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"active_employee_licenses"}),this.addEditFieldToColumn($.i18n._("Active Employee Licenses"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"issue_date"}),this.addEditFieldToColumn($.i18n._("Issue Date"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"expire_date_display"}),this.addEditFieldToColumn($.i18n._("Expire Date"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.SEPARATED_BOX)).SeparatedBox({label:$.i18n._("Schema Version")}),this.addEditFieldToColumn(null,a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"schema_version_group_A"}),this.addEditFieldToColumn($.i18n._("Group A"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"schema_version_group_B"}),this.addEditFieldToColumn($.i18n._("Group B"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"schema_version_group_C"}),this.addEditFieldToColumn($.i18n._("Group C"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"schema_version_group_D"}),this.addEditFieldToColumn($.i18n._("Group D"),a,i),(a=Global.loadWidgetByName(FormItemType.SEPARATED_BOX)).SeparatedBox({label:$.i18n._("Employees (Active / InActive)")}),this.addEditFieldToColumn(null,a,i,"",null,!0,!1,"user_active_inactive")}uploadLicense(e){var t=this.edit_view_ui_dic.license_browser.getValue();this.api.uploadFile(t,"object_type=license&object_id=",{onResult:function(e){"TRUE"==e?(ProgressBar.showProgressBar(),IndexViewController.setNotificationBar("login"),window.setTimeout((function(){window.location.reload()}),3e3)):(TAlertManager.showAlert(e),$("#file_browser").val(""))}})}}}}]);
//# sourceMappingURL=help-AboutViewController.bundle.js.map?v=e63ce7111125ef403461