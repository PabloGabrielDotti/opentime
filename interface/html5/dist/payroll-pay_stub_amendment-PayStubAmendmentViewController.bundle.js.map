{"version":3,"sources":["webpack://timetrex/./interface/html5/views/payroll/pay_stub_amendment/PayStubAmendmentViewController.js"],"names":["PayStubAmendmentViewController","BaseViewController","options","_","defaults","el","user_status_array","filtered_status_array","type_array","is_mass_adding","user_api","user_group_api","user_wage_api","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIPayStubAmendment","APIUser","APIUserGroup","currency_api","APICurrency","APIUserWage","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","$this","initDropDownOption","getUserGroup","onResult","res","getResult","Global","buildTreeRecord","user_group_array","sub_view_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","getOptions","status_array","buildRecordArray","user_id","current_edit_record","TTUUID","isUUID","isArray","length","zero_id","getUserWage","filter_data","wage_group_id","result","rate","result_data","hourly_rate","edit_view_ui_dic","setValue","calcAmount","column_filter","display_columns","grid","getGridParam","len","i","name","key","grid_selected_id_array","ids","user_ids","pay_period_ids","edit_view","id","push","pay_period_id","start_date","getGridSelectIdArray","each","index","value","grid_selected_row","getRecordFromGridById","post_data","0","1","2","doFormIFrameCall","exclude","include","label","ContextMenuIconName","timesheet","group","icon","Icons","pay_stub","pay_stubs","edit_employee","employee","import_icon","permission_result","PermissionManager","checkTopLevelPermission","sort_order","doNotSetFocus","context_menu_array","isSet","selectContextMenu","setTotalDisplaySpan","grid_selected_length","context_btn","find","attr","removeClass","add","setDefaultMenuAddIcon","edit","setDefaultMenuEditIcon","view","setDefaultMenuViewIcon","mass_edit","setDefaultMenuMassEditIcon","copy","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","login","setDefaultMenuLoginIcon","cancel","setDefaultMenuCancelIcon","setDefaultMenuImportIcon","print_checks","setDefaultMenuPrintChecksIcon","direct_deposit","setDefaultMenuDirectDepositIcon","export_excel","setDefaultMenuExportIcon","setContextMenuGroupVisibility","pId","addClass","viewPermissionValidate","edit_only_mode","viewOwnerOrChildPermissionValidate","is_mass_editing","setEditMenuSaveIcon","setEditMenuAddIcon","setEditMenuEditIcon","setEditMenuViewIcon","setEditMenuMassEditIcon","setEditMenuCopyIcon","setEditMenuDeleteIcon","setEditMenuDeleteAndNextIcon","setEditMenuSaveAndContinueIcon","setEditMenuSaveAndAddIcon","setEditMenuSaveAndNextIcon","setEditMenuSaveAndCopyIcon","setEditMenuCopyAndAddIcon","setEditMenuImportIcon","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","getField","c_value","getValue","setCurrency","setEditMenu","onTypeChange","isChecked","setCheckBox","validate","type_id","detachElement","attachElement","editFieldResize","widget_rate","widget_units","widget_amount","round_decimal_places","calc_amount","parseFloat","mul","toFixed","Debug","Text","currency_array","MoneyRound","setReadOnly","onRateOrUnitChange","onImportClick","onNavigationClick","IndexViewController","openWizard","search","iconName","base_date","filter","effective_date","addViewTab","window","location","href","goToView","openEditView","onReportPrintClick","postData","APIFileDownload","className","key_name","getCurrency","setDefaultData","setCurrentEditRecordData","setEditViewDataDone","record","widget","getEnabled","uniformVariable","buildMassAddRecord","validateResult","removeEditView","records_data","record_data","clone","toString","ignoreWarning","is_changed","is_add","LocalCacheData","current_doing_context_action","onSaveAndContinueResult","doSaveAPICall","clearNavigationData","isValid","refresh_id","not_exist_id","onCopyAsNewClick","setErrorTips","setErrorMenu","onAddClick","saveAndContinueValidate","is_viewing","buildEditViewUI","allow_multiple_selection","tab_model","setTabModel","navigation","AComboBox","api_class","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_pay_stub_amendment_column1","edit_view_tab","edit_view_tabs","form_item_input","loadWidgetByName","FormItemType","AWESOME_BOX","set_empty","field","default_args","setDefaultArgs","addEditFieldToColumn","args","APIPayStubEntryAccount","validation_field","COMBO_BOX","TComboBox","TEXT_INPUT","TTextInput","width","hasKeyEvent","widgetContainer","append","get_hourly_rate_btn","click","getUserHourlyRate","parent","TEXT_AREA","TTextArea","DATE_PICKER","TDatePicker","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIPayPeriod","APIUserTitle","tree_mode","APIBranch","APIDepartment","data","status_id","Date","format","getLoginUserDateFormat"],"mappings":"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","file":"payroll-pay_stub_amendment-PayStubAmendmentViewController.bundle.js?v=24fd6d54c4da641469e0","sourcesContent":["import Decimal from 'decimal.js';\n\nexport class PayStubAmendmentViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_stub_amendment_view_container',\n\n\t\t\tuser_status_array: null,\n\t\t\tfiltered_status_array: null,\n\t\t\ttype_array: null,\n\t\t\tis_mass_adding: false,\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tuser_wage_api: null,\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PayStubAmendmentEditView.html';\n\t\tthis.permission_id = 'pay_stub_amendment';\n\t\tthis.viewId = 'PayStubAmendment';\n\t\tthis.script_name = 'PayStubAmendmentView';\n\t\tthis.table_name_key = 'pay_stub_amendment';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Stub Amendment' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Stub Amendment' ) + ':';\n\t\tthis.api = TTAPI.APIPayStubAmendment;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.currency_api = TTAPI.APICurrency;\n\t\tthis.user_wage_api = TTAPI.APIUserWage;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'PayStubAmendment' );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'type' );\n\t\tthis.initDropDownOption( 'status', 'user_status_id', this.user_api );\n\t\tthis.initDropDownOption( 'filtered_status', 'status_id' );\n\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\n\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\n\t\tthis.api.getOptions( 'status', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tvar status_array = Global.buildRecordArray( res.getResult() );\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['status_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['status_id'].setSourceData( status_array );\n\t\t\t\t\tif ( $this.adv_search_field_ui_dic['status_id'] ) {\n\t\t\t\t\t\t$this.adv_search_field_ui_dic['status_id'].setSourceData( status_array );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetUserHourlyRate( user_id ) {\n\t\tvar $this = this;\n\n\t\tif ( !user_id ) {\n\t\t\tuser_id = this.current_edit_record['user_id'];\n\t\t}\n\n\t\tif ( TTUUID.isUUID( user_id ) == false || ( $.isArray( user_id ) && user_id.length != 1 ) ) {\n\t\t\tuser_id = TTUUID.zero_id;\n\t\t}\n\n\t\t//Last Wage record only.\n\t\tthis.user_wage_api.getUserWage( {\n\t\t\tfilter_data: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\twage_group_id: TTUUID.zero_id\n\t\t\t}\n\t\t}, false, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar rate = '0.00';\n\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\trate = result_data.hourly_rate;\n\t\t\t\t}\n\n\t\t\t\t$this.edit_view_ui_dic['rate'].setValue( rate );\n\t\t\t\t$this.current_edit_record['rate'] = rate;\n\t\t\t\t$this.calcAmount();\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\n\t\tvar column_filter = {};\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.user_id = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.in_use = true;\n\t\tcolumn_filter.first_name = true;\n\t\tcolumn_filter.last_name = true;\n\t\tcolumn_filter.effective_date = true;\n\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tonReportPrintClick( key ) {\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar ids = [];\n\n\t\tvar user_ids = [];\n\n\t\tvar base_date;\n\n\t\tvar pay_period_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tpay_period_ids.push( $this.current_edit_record.pay_period_id );\n\t\t\tbase_date = $this.current_edit_record.start_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tpay_period_ids.push( grid_selected_row.pay_period_id );\n\t\t\t\tbase_date = grid_selected_row.start_date;\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { filter_data: { id: ids } };\n\t\tvar post_data = { 0: args, 1: true, 2: key };\n\n\t\tthis.doFormIFrameCall( post_data );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.timesheet\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stubs' ),\n\t\t\t\t\tid: ContextMenuIconName.pay_stub,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_stubs\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit<br>Employee' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\t\tid: ContextMenuIconName.import_icon,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.import_icon,\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ImportCSVPayStubAmendment' ),\n\t\t\t\t\tsort_order: 8000\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\t/* jshint ignore:start */\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.login:\n\t\t\t\t\tthis.setDefaultMenuLoginIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\t\tthis.setDefaultMenuImportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'pay_stub' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.print_checks:\n\t\t\t\t\tthis.setDefaultMenuPrintChecksIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.direct_deposit:\n\t\t\t\t\tthis.setDefaultMenuDirectDepositIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\t//Remove the copy button as it can never work due to API unique constraints.\n\tsetDefaultMenuCopyIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.addClass( 'invisible-image' );\n\t}\n\n\tsetEditMenuCopyIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.addClass( 'invisible-image' );\n\t}\n\n\t/* jshint ignore:end */\n\tsetDefaultMenuViewIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( pId === 'punch' || pId === 'schedule' || pId === 'pay_stub' ) {\n\t\t\tsuper.setDefaultMenuViewIcon( context_btn, grid_selected_length, pId );\n\t\t} else {\n\n\t\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t\t}\n\n\t\t\tif ( grid_selected_length > 0 && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t\t} else {\n\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tsetDefaultMenuPrintChecksIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuDirectDepositIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\t/* jshint ignore:start */\n\tsetEditMenu() {\n\t\tthis.selectContextMenu();\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\tswitch ( id ) {\n\t\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\n\t\t\t\t\tthis.setEditMenuAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setEditMenuMassEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setEditMenuCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setEditMenuDeleteIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setEditMenuDeleteAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setEditMenuSaveAndContinueIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setEditMenuSaveAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setEditMenuSaveAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setEditMenuSaveAndCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setEditMenuCopyAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\t\tthis.setEditMenuImportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_stub' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.print_checks:\n\t\t\t\tcase ContextMenuIconName.direct_deposit:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\t/* jshint ignore:end */\n\tsetEditMenuViewIcon( context_btn, pId ) {\n\n\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tswitch ( key ) {\n\t\t\tcase 'user_id':\n\t\t\t\tif ( $.isArray( this.current_edit_record.user_id ) && this.current_edit_record.user_id.length > 1 ) {\n\t\t\t\t\tthis.is_mass_adding = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.is_mass_adding = false;\n\t\t\t\t}\n\t\t\t\tdoNotValidate = true; //Don't validate since setCurrency() triggers calcAmount(), which changes the amount field asynchronously, only then should we validate.\n\t\t\t\tthis.setCurrency();\n\t\t\t\tthis.setEditMenu();\n\t\t\t\tbreak;\n\t\t\tcase 'type_id':\n\t\t\t\tthis.onTypeChange();\n\t\t\t\tbreak;\n\t\t\tcase 'rate':\n\t\t\tcase 'units':\n\t\t\tcase 'amount':\n\t\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\t\tif ( target.isChecked() ) {\n\t\t\t\t\t\tthis.edit_view_ui_dic['rate'].setCheckBox( true );\n\t\t\t\t\t\tthis.edit_view_ui_dic['units'].setCheckBox( true );\n\t\t\t\t\t\tthis.edit_view_ui_dic['amount'].setCheckBox( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.edit_view_ui_dic['rate'].setCheckBox( false );\n\t\t\t\t\t\tthis.edit_view_ui_dic['units'].setCheckBox( false );\n\t\t\t\t\t\tthis.edit_view_ui_dic['amount'].setCheckBox( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.current_edit_record['amount'] = this.edit_view_ui_dic['amount'].getValue();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tonTypeChange() {\n\t\tif ( this.current_edit_record.type_id == 10 ) {\n\t\t\tthis.detachElement( 'percent_amount' );\n\t\t\tthis.detachElement( 'percent_amount_entry_name_id' );\n\t\t\tthis.attachElement( 'rate' );\n\t\t\tthis.attachElement( 'units' );\n\t\t\tthis.attachElement( 'amount' );\n\n\t\t} else if ( this.current_edit_record.type_id == 20 ) {\n\t\t\tthis.attachElement( 'percent_amount' );\n\t\t\tthis.attachElement( 'percent_amount_entry_name_id' );\n\t\t\tthis.detachElement( 'rate' );\n\t\t\tthis.detachElement( 'units' );\n\t\t\tthis.detachElement( 'amount' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tcalcAmount() {\n\t\tvar widget_rate = this.edit_view_ui_dic['rate'];\n\t\tvar widget_units = this.edit_view_ui_dic['units'];\n\t\tvar widget_amount = this.edit_view_ui_dic['amount'];\n\n\t\tif ( widget_rate && widget_rate.getValue().length > 0 && widget_units && widget_units.getValue().length > 0 ) {\n\t\t\t//widget_amount.setValue( ( parseFloat( widget_rate.getValue() ) * parseFloat( widget_units.getValue() ) ).toFixed( 2 ) ); //This fails on 17.07 * 9.50 as it rounds to 162.16 rather than 162.17\n\t\t\t//calc_amount = ( parseFloat( widget_rate.getValue() ) * parseFloat( widget_units.getValue() ) ); //This fails on 16.5 * 130.23\n\t\t\tvar calc_amount = new Decimal( parseFloat( widget_rate.getValue() ) ).mul( parseFloat( widget_units.getValue() ) ).toFixed( 4 ); //Need to use Decimal() class for proper money math operations\n\t\t\tDebug.Text( 'Calculate Amount before rounding: ' + calc_amount, 'PayStubAmendmentViewController.js', 'PayStubAmendmentViewController', 'onFormItemKeyUp', 10 );\n\n\t\t\tvar round_decimal_places;\n\t\t\tif ( this.currency_array && this.currency_array.round_decimal_places ) {\n\t\t\t\tround_decimal_places = this.currency_array.round_decimal_places;\n\t\t\t} else {\n\t\t\t\tround_decimal_places = 2;\n\t\t\t}\n\t\t\twidget_amount.setValue( Global.MoneyRound( calc_amount, round_decimal_places ) );\n\t\t} else {\n\t\t\tif ( widget_amount && widget_amount.getValue() == '' ) {\n\t\t\t\twidget_amount.setValue( '0.00' );\n\t\t\t}\n\t\t}\n\n\t\tif ( !this.is_mass_editing && this.edit_view_ui_dic['amount'] && this.current_edit_record ) { //Make sure this is only done when editing a single record otherwise Mass Edit will default to changing the amount to 0.00.\n\t\t\tthis.current_edit_record['amount'] = this.edit_view_ui_dic['amount'].getValue(); //Update current record Amount, otherwise edit/save (without any changes) won't save the rounded value.\n\t\t}\n\t}\n\n\tonRateOrUnitChange() {\n\t\tvar widget_rate = this.edit_view_ui_dic['rate'];\n\t\tvar widget_units = this.edit_view_ui_dic['units'];\n\t\tvar widget_amount = this.edit_view_ui_dic['amount'];\n\n\t\tif ( widget_rate.getValue().length > 0 || widget_units.getValue().length > 0 ) {\n\t\t\twidget_amount.setReadOnly( true );\n\t\t} else {\n\t\t\twidget_amount.setReadOnly( false );\n\t\t}\n\t}\n\n\tonFormItemKeyUp( target ) {\n\t\tthis.onRateOrUnitChange();\n\t\tthis.calcAmount();\n\t}\n\n\tonFormItemKeyDown( target ) {\n\t\tthis.onRateOrUnitChange();\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonImportClick() {\n\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'PayStubAmendment', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\t/* jshint ignore:start */\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar user_ids = [];\n\n\t\tvar ids = [];\n\n\t\tvar base_date;\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tbase_date = $this.current_edit_record.effective_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tbase_date = grid_selected_row.effective_date;\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { filter_data: { id: ids } };\n\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t\tfilter.base_date = base_date;\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Pay Stub Amendments' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.filter_data = {};\n\t\t\t\t\tfilter.filter_data.user_id = user_ids[0];\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Pay Stub Amendments' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'PayStub', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Employee', user_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\tonReportMenuClick( id ) {\n\t\tthis.onReportPrintClick( id );\n\t}\n\n\t//not currently called. are we reimplementing the eft code commented out above in this class?\n\tdoFormIFrameCall( postData ) {\n\t\tGlobal.APIFileDownload( this.api.className, 'get' + this.api.key_name, postData );\n\t}\n\n\tsetCurrency() {\n\t\tvar $this = this;\n\t\tif ( Global.isSet( this.current_edit_record.user_id ) ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.filter_data = { user_id: this.current_edit_record.user_id };\n\n\t\t\tthis.currency_api.getCurrency( filter, false, false, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( Global.isArray( res ) ) {\n\t\t\t\t\t\t$this.currency_array = res[0];\n\t\t\t\t\t\t$this.calcAmount();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.currency_array = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\t// When mass editing, these fields may not be the common data, so their value will be undefined, so this will cause their change event cannot work properly.\n\t\tthis.setDefaultData( {\n\t\t\t'type_id': 10\n\t\t} );\n\n\t\tsuper.setCurrentEditRecordData();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.setCurrency();\n\t\tthis.onTypeChange();\n\t\tthis.onRateOrUnitChange();\n\t}\n\n\tvalidate() {\n\n\t\tvar $this = this;\n\n\t\tvar record = {};\n\n\t\tvar records_data = null;\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\t\t//#2536 - Never send status_id to the API.\n\t\t\t\tif ( key != 'status_id' ) {\n\t\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\trecord = this.uniformVariable( this.current_edit_record );\n\t\t}\n\n\t\tvar record = this.buildMassAddRecord( record );\n\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tremoveEditView() {\n\t\tthis.is_mass_adding = false;\n\t\tsuper.removeEditView();\n\t}\n\n\tbuildMassAddRecord( record ) {\n\t\tif ( $.isArray( record.user_id ) ) {\n\t\t\tvar records_data = [];\n\t\t\tvar length = record.user_id.length;\n\t\t\tif ( length > 0 ) {\n\t\t\t\tfor ( var i = 0; i < length; i++ ) {\n\t\t\t\t\tvar record_data = Global.clone( record );\n\t\t\t\t\trecord_data.user_id = record.user_id[i];\n\t\t\t\t\trecords_data.push( record_data );\n\t\t\t\t}\n\t\t\t\tthis.setEditMenu();\n\n\t\t\t\treturn this.uniformVariable( records_data );\n\n\t\t\t} else {\n\t\t\t\trecord.user_id = record.user_id.toString();\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.uniformVariable( record );\n\t}\n\n\tonSaveAndContinue( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_changed = false;\n\t\tthis.is_add = false;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_continue';\n\n\t\tvar record = this.buildMassAddRecord( this.current_edit_record );\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onSaveAndContinueResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tdoSaveAPICall( record, ignoreWarning ) {\n\t\t// #2644: We have to handle the record as though its a mass_add, as the awesomebox will always return an array of user_id's. Cannot force is_mass_adding, as this affects the save&continue button disabling.\n\t\trecord = this.buildMassAddRecord( record );\n\t\tsuper.doSaveAPICall( record, ignoreWarning );\n\t}\n\n\tonSaveAndCopy( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_add = true;\n\t\tthis.is_changed = false;\n\t\tvar record = this.current_edit_record;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_copy';\n\t\tvar records_data = null;\n\t\tthis.clearNavigationData();\n\n\t\tvar record = this.buildMassAddRecord( record );\n\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data === true ) {\n\t\t\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.refresh_id = result_data;\n\t\t\t\t\t}\n\t\t\t\t\t$this.search( false );\n\t\t\t\t\t$this.onCopyAsNewClick();\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t\t$this.setErrorMenu();\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveAndNewClick( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_add = true;\n\t\tvar record = this.current_edit_record;\n\t\tLocalCacheData.current_doing_context_action = 'new';\n\n\t\tvar records_data = null;\n\n\t\tvar record = this.buildMassAddRecord( record );\n\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data === true ) {\n\t\t\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.refresh_id = result_data;\n\t\t\t\t\t}\n\t\t\t\t\t$this.search( false );\n\t\t\t\t\t$this.onAddClick( true );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t\t$this.setErrorMenu();\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetEditMenuSaveAndContinueIcon( context_btn, pId ) {\n\t\tthis.saveAndContinueValidate( context_btn, pId );\n\n\t\tif ( this.is_mass_adding || this.is_mass_editing || this.is_viewing || ( this.current_edit_record && Global.isArray( this.current_edit_record.user_id ) && this.current_edit_record.user_id.length > 1 ) ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\t\tvar allow_multiple_selection = false;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_stub_amendment': { 'label': $.i18n._( 'Pay Stub Amendment' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubAmendment,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_stub_amendment',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_pay_stub_amendment = this.edit_view_tab.find( '#tab_pay_stub_amendment' );\n\n\t\tvar tab_pay_stub_amendment_column1 = tab_pay_stub_amendment.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_pay_stub_amendment_column1 );\n\n\t\tif ( this.is_add ) {\n\t\t\tallow_multiple_selection = true;\n\t\t}\n\n\t\t//Employee\n\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: allow_multiple_selection,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'user_id'\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'pay_stub_amendment';\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee(s)' ), form_item_input, tab_pay_stub_amendment_column1, '' );\n\n\t\tvar args = {};\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [10, 20, 30, 50, 60, 65, 80];\n\t\targs.filter_data = filter_data;\n\n\t\t// Pay Stub Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_stub_entry_name_id',\n\t\t\tvalidation_field: 'pay_stub_entry_name'\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Stub Account' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\t\t// Amount Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Amount Type' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\t\t// Fixed\n\n\t\t// Units\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'units', width: 114, hasKeyEvent: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Units' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true, null, null, true );\n\n\t\t// Rate\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'rate', width: 114, hasKeyEvent: true } );\n\n\t\tvar widgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\twidgetContainer.append( form_item_input );\n\n\t\tif ( !this.is_viewing ) {\n\t\t\tvar get_hourly_rate_btn = $( '<input class=\\'t-button\\' style=\\'margin-left: 5px; height: 25px;\\' type=\\'button\\' value=\\'' + $.i18n._( 'Get Hourly Rate' ) + '\\'></input>' );\n\t\t\tget_hourly_rate_btn.click( function() {\n\t\t\t\t$this.getUserHourlyRate();\n\t\t\t} );\n\t\t\twidgetContainer.append( get_hourly_rate_btn );\n\t\t}\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Rate' ), form_item_input, tab_pay_stub_amendment_column1, '', widgetContainer, true, null, null, true );\n\n\t\t// Amount\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'amount', width: 114 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Amount' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true );\n\n\t\t// Percent\n\n\t\t//Percent\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'percent_amount', width: 79 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Percent' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true );\n\n\t\targs = {};\n\t\tfilter_data = {};\n\t\tfilter_data.type_id = [10, 20, 30, 40, 50, 60, 65];\n\t\targs.filter_data = filter_data;\n\n\t\t// Percent of\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'percent_amount_entry_name_id'\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Percent of' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true );\n\n\t\t// Pay Stub Note (Public)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Stub Note (Public)' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\t\t// Description (Private)\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'private_description' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description (Private)' ), form_item_input, tab_pay_stub_amendment_column1, '', null, null, true );\n\n\t\t// Effective Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'effective_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Effective Date' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\t\t// Year to Date (YTD) Adjustment -- DISABLED\n\t\t//form_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t//form_item_input.TCheckbox( {field: 'ytd_adjustment'} );\n\t\t//this.addEditFieldToColumn( $.i18n._( 'Year to Date (YTD) Adjustment' ), form_item_input, tab_pay_stub_amendment_column1, '' );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'pay_stub_amendment';\n\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_id',\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Stub Account' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_stub_entry_name_id',\n\t\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 1,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Status' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'user_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tuniformVariable( data ) {\n\t\tif ( data.status_id ) {\n\t\t\tdelete data.status_id;\n\t\t}\n\t\treturn super.uniformVariable( data );\n\t}\n\n\tcopyAsNewResetIds( data ) {\n\t\tdata = this.uniformVariable( data );\n\t\tdata.id = null;\n\t\tdata.effective_date = ( new Date ).format( Global.getLoginUserDateFormat() );\n\t\treturn data;\n\t}\n\n}\n"],"sourceRoot":""}