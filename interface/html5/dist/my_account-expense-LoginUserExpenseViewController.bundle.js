(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["my_account-expense-LoginUserExpenseViewController","filebrowser-TImageBrowser"],{3536:()=>{!function(e){e.fn.TImageBrowser=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var i,a,r=e.extend({},e.fn.TImageBrowser.defaults,t),s=this,o="filedata",n="",d=177,l=42;this.setEnabled=function(e){e;var t=this.find(".browser-form input");e?(t.removeAttr("disabled"),t.removeClass("disable-element")):(t.attr("disabled",!0),t.removeClass("disable-element").addClass("disable-element"))},this.clearErrorStyle=function(){},this.getFileName=function(){return a.val()},this.getField=function(){return i},this.setEnableDelete=function(e){var t=s.find(".image");e?t.attr("enable-delete",1):t.removeAttr("enable-delete")},this.getValue=function(){return a&&a.val()?"undefined"==typeof FormData?s.find(".browser-form"):new FormData(e(s.find(".browser-form"))[0]):null},this.getImageSrc=function(){return s.find(".image").attr("src")},this.setImage=function(e){var t=s.find(".image");if(!e)return t.attr("src",""),void t.hide();var i=new Date;t.hide(),t.attr("src",e+"&t="+i.getTime()),t.css("height","auto"),t.css("width","auto")};return this.setValue=function(e){e||(e="")},this.each((function(){var t=e.meta?e.extend({},r,e(this).data()):r;i=t.field,t.default_width>0&&(d=t.default_width),t.default_height>0&&(l=t.default_height),Global.isSet(t.name)&&(o=t.name),Global.isSet(n)&&(n=t.accept_filter),a=e(this).find(".browser");var _=e(this).find(".image");_.hide(),_.on("load",(function(){!function(t){var i=e(t).height()>0?e(t).height():t.naturalHeight,a=e(t).width()>0?e(t).width():t.naturalWidth;i>l&&e(t).css("height",l),a>d&&(e(t).css("width",d),e(t).css("height","auto")),s.trigger("setSize"),i<5?e(t).hide():e(t).show()}(this)})),n?a.attr("accept",n):(n="image/*",a.attr("accept","image/*")),a.attr("id","file_browser"),a.attr("name",o),Global.isSet(t.changeHandler)&&s.bind("imageChange",t.changeHandler),Global.isSet(t.deleteImageHandler)&&this.find(".file-browser").on("deleteClick",(function(){t.deleteImageHandler()})),a.bind("change",(function(){if(_.hide(),"undefined"!=typeof FileReader){var e=this.files?this.files:[];if(!e.length||!window.FileReader)return;if("image/*"===n){var t=new FileReader;t.readAsDataURL(e[0]),t.onloadend=function(){var e=this.result;_.attr("src",e)}}}s.trigger("imageChange",[s])}))})),this},e.fn.TImageBrowser.defaults={}}(jQuery)},2340:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"LoginUserExpenseViewController":()=>a});i(3536);class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#login_user_expense_view_container",hierarchy_level_array:null,status_array:null,payment_method_array:null,sub_document_view_controller:null,document_object_type_id:null,relatedExpenseArray:null,document_api:null}),super(e)}init(e){this.edit_view_tpl="LoginUserExpenseEditView.html",this.permission_id="user_expense",this.viewId="LoginUserExpense",this.script_name="LoginUserExpenseView",this.table_name_key="user_expense",this.context_menu_name=$.i18n._("Expenses"),this.navigation_label=$.i18n._("Expense")+":",this.api=TTAPI.APIUserExpense,Global.getProductEdition()>=20&&(this.job_api=TTAPI.APIJob,this.job_item_api=TTAPI.APIJobItem),this.document_api=TTAPI.APIDocument,this.document_object_type_id=400,this.hierarchy_type_id=200,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary("LoginUserExpense")}getCustomContextMenuModel(){return{exclude:[ContextMenuIconName.copy,ContextMenuIconName.mass_edit],include:[]}}onFormItemChange(e,t){var i=this;this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var a=e.getField(),r=e.getValue();this.current_edit_record[a]=r;var s=!1;switch(a){case"expense_policy_id":this.onExpensePolicyChange();break;case"gross_amount1":this.current_edit_record.gross_amount1=this.current_edit_record.gross_amount1?this.current_edit_record.gross_amount1:this.current_edit_record.gross_amount,this.current_edit_record.expense_policy_id&&this.current_edit_record.gross_amount1&&this.api.calcRelatedExpenses(this.current_edit_record.expense_policy_id,this.current_edit_record.gross_amount1,s,this.current_edit_record.is_reimbursable,{onResult:function(e){i.relatedExpenseArray=e.getResult(),i.setRelatedExpense(i.relatedExpenseArray)}});break;case"is_reimbursable":this.current_edit_record.gross_amount1=this.current_edit_record.gross_amount1?this.current_edit_record.gross_amount1:this.current_edit_record.gross_amount,s=!!this.relatedExpenseArray&&this.relatedExpenseArray,this.current_edit_record.expense_policy_id&&this.current_edit_record.gross_amount1&&this.api.calcRelatedExpenses(this.current_edit_record.expense_policy_id,this.current_edit_record.gross_amount1,s,this.current_edit_record.is_reimbursable,{onResult:function(e){i.relatedExpenseArray=e.getResult(),i.setRelatedExpense(i.relatedExpenseArray)}});break;case"amount":var o=e.attr("id");this.current_edit_record.gross_amount1=this.current_edit_record.gross_amount1?this.current_edit_record.gross_amount1:this.current_edit_record.gross_amount,this.relatedExpenseArray.taxes[o].amount=r,this.current_edit_record.expense_policy_id&&this.current_edit_record.gross_amount1&&this.api.calcRelatedExpenses(this.current_edit_record.expense_policy_id,this.current_edit_record.gross_amount1,this.relatedExpenseArray,this.current_edit_record.is_reimbursable,{onResult:function(e){i.relatedExpenseArray=e.getResult(),i.setRelatedExpenseData(i.relatedExpenseArray)}});break;case"job_id":Global.getProductEdition()>=20&&(this.edit_view_ui_dic.job_quick_search.setValue(e.getValue(!0)&&e.getValue(!0).manual_id?e.getValue(!0).manual_id:""),this.setJobItemValueWhenJobChanged(e.getValue(!0),"job_item_id",{job_id:this.current_edit_record.job_id}),this.edit_view_ui_dic.job_quick_search.setCheckBox(!0));break;case"job_item_id":Global.getProductEdition()>=20&&(this.edit_view_ui_dic.job_item_quick_search.setValue(e.getValue(!0)&&e.getValue(!0).manual_id?e.getValue(!0).manual_id:""),this.edit_view_ui_dic.job_item_quick_search.setCheckBox(!0));break;case"job_quick_search":case"job_item_quick_search":Global.getProductEdition()>=20&&(this.onJobQuickSearch(a,r),t=!0)}t||this.validate()}onExpensePolicyChange(){var e=this.edit_view_ui_dic.expense_policy_id.getSourceData(),t=$.i18n._("Amount");for(var i in e)30==e[i].type_id&&e[i].id==this.edit_view_ui_dic.expense_policy_id.getValue()&&e[i].unit_name&&e[i].unit_name.length>0&&(t=e[i].unit_name);this.edit_view_ui_dic.gross_amount1.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html(t+":")}setCurrentEditRecordData(){for(var e in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(e)){var t=this.edit_view_ui_dic[e];if(Global.isSet(t))switch(e){case"gross_amount1":t.setValue(this.current_edit_record.gross_amount);break;case"gross_amount":case"reimburse_amount":case"net_amount":break;case"job_id":Global.getProductEdition()>=20&&t.setValue(this.current_edit_record[e]);break;case"job_item_id":if(Global.getProductEdition()>=20){var i={};i.filter_data={job_id:this.current_edit_record.job_id},t.setDefaultArgs(i),t.setValue(this.current_edit_record[e])}break;case"job_quick_search":case"job_item_quick_search":break;default:t.setValue(this.current_edit_record[e])}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}initOptions(){var e=this,t={},i={type_id:[10,20,30]};i.user_id=[LocalCacheData.getLoginUser().id],this.initDropDownOption("status"),this.initDropDownOption("payment_method"),t.filter_data=i,Global.isSet(e.basic_search_field_ui_dic.expense_policy_id)&&e.basic_search_field_ui_dic.expense_policy_id.setDefaultArgs(t);var a=this.api.getHierarchyLevelOptions([-1],{async:!1}).getResult();e.hierarchy_level_array=Global.buildRecordArray(a),Global.isSet(e.basic_search_field_ui_dic.hierarchy_level)&&e.basic_search_field_ui_dic.hierarchy_level.setSourceData(Global.buildRecordArray(a))}buildEditViewUI(){super.buildEditViewUI();var e={"tab_expense":{"label":$.i18n._("Expense")},"tab_attachment":!0,"tab_audit":!0};this.setTabModel(e),this.navigation.AComboBox({api_class:TTAPI.APIUserExpense,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_expense",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var t,i,a,r=this.edit_view_tab.find("#tab_expense"),s=r.find(".first-column"),o=r.find(".second-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(s),this.edit_view_tabs[0].push(o),(t=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"incurred_date"}),this.addEditFieldToColumn($.i18n._("Date Incurred"),t,s,"",null),(t=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),t,s,"",null,null,!0),t.parent().width("45%"),(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"payment_method_id"}),t.setSourceData(this.payment_method_array),this.addEditFieldToColumn($.i18n._("Payment Method"),t,s);var n={},d={type_id:[10,20,30]};d.user_id=[LocalCacheData.getLoginUser().id],n.filter_data=d,(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIExpensePolicy,allow_multiple_selection:!1,layout_name:"global_expense_policy",show_search_inputs:!0,set_empty:!0,field:"expense_policy_id",always_include_columns:["type_id","unit_name"],init_data_immediately:!1}),t.setDefaultArgs(n),this.addEditFieldToColumn($.i18n._("Type"),t,s),(t=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"gross_amount1"}),i=$("<div class='widget-h-box '></div>"),a=$("<span class='widget-right-label'> "+$.i18n._("Reimburse")+": </span>");var l=Global.loadWidgetByName(FormItemType.CHECKBOX);if(l.TCheckbox({field:"is_reimbursable"}),i.append(t),i.append(a),i.append(l),this.addEditFieldToColumn($.i18n._("Amount"),[t,l],s,"",i),(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APICurrency,allow_multiple_selection:!1,layout_name:"global_currency",show_search_inputs:!0,set_empty:!0,field:"currency_id"}),this.addEditFieldToColumn($.i18n._("Currency"),t,o,""),(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIBranch,allow_multiple_selection:!1,layout_name:"global_branch",show_search_inputs:!0,set_empty:!0,field:"branch_id"}),this.addEditFieldToColumn($.i18n._("Branch"),t,o),(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIDepartment,allow_multiple_selection:!1,layout_name:"global_department",show_search_inputs:!0,set_empty:!0,field:"department_id"}),this.addEditFieldToColumn($.i18n._("Department"),t,o),Global.getProductEdition()>=20){(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJob,allow_multiple_selection:!1,layout_name:"global_job",show_search_inputs:!0,set_empty:!0,setRealValueCallBack:function(e){e&&_.setValue(e.manual_id)},field:"job_id"}),i=$("<div class='widget-h-box'></div>");var _=Global.loadWidgetByName(FormItemType.TEXT_INPUT);_.TTextInput({field:"job_quick_search",disable_keyup_event:!0}),_.addClass("job-coder"),i.append(_),i.append(t),this.addEditFieldToColumn($.i18n._("Job"),[t,_],o,"",i),(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!1,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,setRealValueCallBack:function(e){e&&u.setValue(e.manual_id)},field:"job_item_id"}),i=$("<div class='widget-h-box'></div>");var u=Global.loadWidgetByName(FormItemType.TEXT_INPUT);u.TTextInput({field:"job_item_quick_search",disable_keyup_event:!0}),u.addClass("job-coder"),i.append(u),i.append(t),this.addEditFieldToColumn($.i18n._("Task"),[t,u],o,"",i)}(t=Global.loadWidgetByName(FormItemType.TAG_INPUT)).TTagInput({field:"tag",object_type_id:930}),this.addEditFieldToColumn($.i18n._("Tags"),t,o,"",null,null,!0);var c=r.find(".inside-editor-div"),m={name:$.i18n._("Attachment  Name"),action:$.i18n._("Action")};this.editor=Global.loadWidgetByName(FormItemType.INSIDE_EDITOR),this.editor.InsideEditor({addRow:this.insideEditorAddRow,removeRow:this.insideEditorRemoveRow,getValue:this.insideEditorGetValue,setValue:this.insideEditorSetValue,parent_controller:this,api:this.document_api,render:"views/my_account/expense/DocumentViewInsideEditorRender.html",render_args:m,row_render:"views/my_account/expense/DocumentViewInsideEditorRow.html"}),c.append(this.editor)}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Type"),in_column:1,field:"expense_policy_id",layout_name:"global_expense_policy",api_class:TTAPI.APIExpensePolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Tags"),field:"tag",basic_search:!0,adv_search:!1,in_column:1,object_type_id:930,form_item_type:FormItemType.TAG_INPUT}),new SearchField({label:$.i18n._("Status"),in_column:2,field:"status_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX})]}getSubViewFilter(e){return 0===e.length&&(e={}),e.parent_id=0,e.user_id=LocalCacheData.loginUser.id,e}setEditViewDataDone(){if(super.setEditViewDataDone(),this.current_edit_record.related_expenses)this.relatedExpenseArray=this.current_edit_record.related_expenses;else{var e=this,t=!!this.relatedExpenseArray&&this.relatedExpenseArray;this.api.calcRelatedExpenses(this.current_edit_record.expense_policy_id,this.current_edit_record.gross_amount,t,this.current_edit_record.is_reimbursable,{onResult:function(t){e.relatedExpenseArray=t.getResult(),e.setRelatedExpense(e.relatedExpenseArray)}})}this.setRelatedExpense(this.relatedExpenseArray),this.initInsideEditorData(),AuthorizationHistory.init(this),this.onExpensePolicyChange()}initInsideEditorData(){var e=this,t={filter_data:{}};this.current_edit_record&&this.current_edit_record.id?(t.filter_data.object_type_id=this.document_object_type_id,t.filter_data.object_id=this.current_edit_record.id,e.api.getAttachment(t,{onResult:function(t){if(e.edit_view){var i=t.getResult();e.editor.setValue(i)}}})):(e.editor.removeAllRows(),e.editor.getDefaultData())}insideEditorSetValue(e){var t=e.length;if(this.removeAllRows(),t>0){for(var i=0;i<e.length;i++)if(Global.isSet(e[i])){var a=e[i];this.addRow(a)}}else this.getDefaultData()}insideEditorGetValue(){for(var e=this.rows_widgets_array.length,t=[],i=0;i<e;i++){var a=this.rows_widgets_array[i];if(Global.isSet(a.file)){var r={name:a.name.getValue(),file:a.file.getValue()};if("No File Selected"===r.name)continue;t.push(r)}}return t}insideEditorAddRow(e,t){if(e){var i=this.getRowRender(),a=this.getRender(),r={},s=Global.loadWidgetByName(FormItemType.TEXT);if(s.TText({field:"name",width:400}),s.setValue(e.name?e.name:$.i18n._("No File Selected")),s.setClassStyle(e.name?{"font-weight":"bold"}:null),r[s.getField()]=s,i.children().eq(0).append(s),s.attr("document_id",e.id&&this.parent_controller.current_edit_record.id?e.id:""),s.attr("document_revision_id",e.document_revision_id&&this.parent_controller.current_edit_record.id?e.document_revision_id:""),e.name){var o=$("<div class='widget-h-box'></div>"),n=$("<button type='button' class=' download-button t-button widget-right-label'>"+$.i18n._("Download")+"</button>"),d=$("<button type='button' class=' view-button t-button widget-right-label'>"+$.i18n._("View")+"</button>");n.attr({document_id:e.id,document_revision_id:e.document_revision_id,object_type_id:this.parent_controller.document_object_type_id}),d.attr({document_id:e.id,document_revision_id:e.document_revision_id,object_type_id:this.parent_controller.document_object_type_id}),n.bind("click",this.parent_controller.downloadFile),d.bind("click",this.parent_controller.downloadFile),o.append(n),o.append(d),i.children().eq(1).append(o)}else{var l=Global.loadWidgetByName(FormItemType.IMAGE_BROWSER);this.file_browser=l.TImageBrowser({field:"file",name:"filedata",accept_filter:"*",changeHandler:function(e){var t=$(this).find(".browser")[0].files[0].name;s.setValue(t)}});r[l.getField()]=l,i.children().eq(1).append(l)}void 0!==t?(i.insertAfter($(a).find("tr").eq(t)),this.rows_widgets_array.splice(t,0,r)):($(a).append(i),this.rows_widgets_array.push(r)),this.parent_controller.is_viewing&&i.find(".control-icon").hide(),this.addIconsEvent(i),this.removeLastRowLine()}else this.getDefaultData(t)}downloadFile(){var e=$(this),t=e.attr("document_id"),i=e.attr("document_revision_id"),a=e.attr("object_type_id"),r=ServiceCaller.getURLByObjectType("file_download")+"&object_type=document&parent_id="+t+"&parent_object_type_id="+a+"&object_id="+i;Global.APIFileDownload(null,null,null,r)}insideEditorRemoveRow(e){var t=this,i=e[0].rowIndex-1,a=this.rows_widgets_array[i].name.attr("document_id");TTUUID.isUUID(a)&&a!=TTUUID.zero_id&&a!=TTUUID.not_exist_id?TAlertManager.showConfirmAlert("Are you sure to "+this.rows_widgets_array[i].name.text()+"?",null,(function(r){r&&(ProgressBar.showOverlay(),t.api["delete"+t.api.key_name](a,t.parent_controller.document_object_type_id,{onResult:function(a){ProgressBar.closeOverlay(),a.isValid()&&(e.remove(),t.rows_widgets_array.splice(i,1),0===t.rows_widgets_array.length&&t.getDefaultData())}}))})):(e.remove(),t.rows_widgets_array.splice(i,1)),this.removeLastRowLine()}setRelatedExpenseData(e,t){var i=this.edit_view_tab.find("#tab_expense").find(".third-column");i.find("#net_amount").val(e.net_amount),i.find("#gross_amount").val(e.gross_amount),i.find("#reimburse_amount").val(e.reimburse_amount);for(var a=i.find(".tax_input"),r=0;r<a.length;r++){var s=$(a[r]);if(s.length>0){var o=s.attr("id");t&&t==o||s.val(e.taxes[o].amount)}}}setRelatedExpense(e){if(this.edit_view_tab){var t=this.edit_view_tab.find("#tab_expense").find(".third-column").empty();if(this.edit_view_tabs[0].length<3&&this.edit_view_tabs[0].push(t),e||(e={net_amount:0,gross_amount:0,reimburse_amount:this.current_edit_record.reimburse_amount}),e&&e.taxes&&Object.keys(e.taxes).length>0){var i=Global.loadWidgetByName(FormItemType.TEXT_INPUT);for(var a in i.TTextInput({field:"net_amount"}),i.setValue(e.net_amount),i.setEnabled(!this.is_viewing),i.attr("id","net_amount"),i.setEnabled(!1),this.addEditFieldToColumn($.i18n._("Net Amount"),i,t,"",null,!0),this.edit_view_ui_dic.net_amount.css("opacity",1),e.taxes){var r=e.taxes[a];(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"amount"}),i.setValue(r.amount),i.attr("id",r.expense_policy_id),i.addClass("tax_input"),i.setEnabled(!this.is_viewing),this.addEditFieldToColumn($.i18n._(r.expense_policy_name),i,t,"",null,!0),this.edit_view_ui_dic.amount.css("opacity",1)}(i=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"gross_amount"}),i.setValue(e.gross_amount),i.attr("id","gross_amount"),this.addEditFieldToColumn($.i18n._("Amount"),i,t,"",null,!0),this.edit_view_ui_dic.gross_amount.css("opacity",1)}(i=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"reimburse_amount"}),e&&e.reimburse_amount&&e.unit_amount&&e.unit_name?i.setValue(e.reimburse_amount+" ("+e.unit_amount+"/"+e.unit_name+")"):i.setValue(e.reimburse_amount),i.attr("id","reimburse_amount"),this.addEditFieldToColumn($.i18n._("Reimburse Amount"),i,t,"",null,!0),this.edit_view_ui_dic.reimburse_amount.css("opacity",1),this.editFieldResize(0)}}uniformVariable(e){return this.relatedExpenseArray&&(e.related_expenses=this.relatedExpenseArray,e.gross_amount=this.relatedExpenseArray.gross_amount,e.net_amount=this.relatedExpenseArray.net_amount,e.reimburse_amount=this.relatedExpenseArray.reimburse_amount),e}_continueDoCopyAsNew(){this.setCurrentEditViewState("new"),LocalCacheData.current_doing_context_action="copy_as_new",Global.isSet(this.edit_view)&&(this.editor.removeAllRows(),this.editor.getDefaultData()),super._continueDoCopyAsNew()}onSaveAndCopyResult(e){var t=this;if(e.isValid()){var i=e.getResult();!0===i?t.refresh_id=t.current_edit_record.id:TTUUID.isUUID(i)&&i!=TTUUID.zero_id&&i!=TTUUID.not_exist_id&&(t.refresh_id=i),t.saveInsideEditorData((function(){t.search(!1),t.onCopyAsNewClick()}))}else t.setErrorTips(e),t.setErrorMenu()}onSaveResult(e){var t=this;if(e.isValid()){var i=e.getResult();!0===i?t.refresh_id=t.current_edit_record.id:TTUUID.isUUID(i)&&i!=TTUUID.zero_id&&i!=TTUUID.not_exist_id&&(t.refresh_id=i),t.saveInsideEditorData((function(){t.search(),t.onSaveDone(e),t.removeEditView()}))}else t.setErrorMenu(),t.setErrorTips(e)}saveInsideEditorData(e){var t=this.editor.getValue(),i=t.length;if(i>0){var a=0;for(var r in t){var s=t[r];if(Global.isSet(s.file)){var o=this.api.addAttachment(s.name,this.document_object_type_id,this.refresh_id,{async:!1}).getResult();this.api.uploadFile(s.file,"object_type=document_revision&object_id="+o+"&parent_object_type_id="+this.document_object_type_id,{}),a++}else e()}a===i&&e()}else e()}uploadFile(e,t){var i=e.getResult();this.api.uploadFile(t,"object_type=document_revision&object_id="+i,{onResult:function(e){}})}onExportClick(e){var t={};t.filter_columns=this._getFilterColumnsFromDisplayColumns(null,!1),t.filter_data={},t.filter_data.type_id=[10,20,30],t.filter_data.user_id=[LocalCacheData.getLoginUser().id],t.filter_sort=this.getSearchPanelSortFilter();var i={0:"csv",1:t,2:!0};null==e&&(e=this.api["export"+this.api.key_name]),Global.APIFileDownload(this.api.className,e,i)}onAddClick(){this.relatedExpenseArray=null,super.onAddClick()}}}}]);
//# sourceMappingURL=my_account-expense-LoginUserExpenseViewController.bundle.js.map?v=2bb677567417a9284fa5