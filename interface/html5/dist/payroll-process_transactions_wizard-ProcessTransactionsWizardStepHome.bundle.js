(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["payroll-process_transactions_wizard-ProcessTransactionsWizardStepHome","wizard-WizardStep"],{8880:(t,e,i)=>{"use strict";i.r(e),i.d(e,{"WizardStep":()=>a});var n=i(6739);class a extends n.TTBackboneView{constructor(t={}){_.defaults(t,{previous_step_name:null,next_step_name:null,buttons:null,wizard_obj:null,clicked_buttons:{},reload:!1,api:null,name:"undefined",title:$.i18n._("Undefined Step"),instructions:$.i18n._("Undefined step data")}),super(t)}initialize(t){super.initialize(t),this.buttons={},this.reload=!1,this.setWizardObject(t);this.init()}init(){this.render()}initCardsBlock(){$(this.wizard_obj.el).find("#cards").html("")}setTitle(t){$(this.wizard_obj.el).find(".title-1").html(t)}setInstructions(t,e){0==$(this.el).find(".instructions").length&&$(this.el).find(".progress-bar").append('<p class="instructions"></p>'),$(this.el).find(".progress-bar .instructions").html(t),"function"==typeof e&&e()}setWizardObject(t){this.wizard_obj=t,this.el=this.wizard_obj.el}getWizardObject(){return this.wizard_obj}setNextStepName(t){this.next_step_name=t}getNextStepName(){return!1}setPreviousStepName(t){this.previous_step_name=t}getPreviousStepName(){return!1}render(){return this.initCardsBlock(),this._render()}_render(){}append(t){$(this.wizard_obj.el).find(".content").append(t)}appendButton(t){$(this.wizard_obj.el).find("#cards").append(t)}setGrid(t,e,i){i||(i=!1),$("#"+t).remove(),this.append(e);var n=$("#"+t),a=this.getGridColumns(t),r=this;return n=new TTGrid(t,{onSelectRow:function(t){r.onGridSelectRow(t)},onSelectAll:function(t){for(var e in t)r.onGridSelectRow(t[e])},ondblClickRow:function(){r.onGridDblClickRow()},multiselect:!1,winMultiSelect:!1},a),this.setGridSize(n),this.setGridGroupColumns(t),n}getGridColumns(t,e){}setGridAutoHeight(t,e){e>0&&e<10?t.grid.setGridHeight(23*e):e>10&&t.grid.setGridHeight(400)}setGridSize(t){t.grid.setGridWidth($(this.wizard_obj.el).find(".content .grid-div").width()-11),t.grid.setGridHeight($(this.wizard_obj.el).find(".content").height()-150)}getRibbonButtonBox(){var t=$('<div class="menu ribbon-button-bar"></div>'),e=$("<ul></ul>");return t.append(e),t}getRibbonButton(t,e,i,n){if($("<img></img>")[0].src=e,void 0===n)return $('<li><div class="ribbon-sub-menu-icon" id="'+t+'"><img src="'+e+'" >'+i+"</div></li>");var a=$('<div class="wizard_icon_card" id="'+t+'"></div>'),r=$('<img src="'+e+'"></img>'),s=$('<div class="right_container"></div>'),o=$('<h3 class="button_title"></h3>');o.html(i||"");var d=$('<div class="description"></div>');return d.html(n||""),a.append(r),s.append(o),s.append(d),a.append(s),a}onGridSelectRow(t){}onGridDblClickRow(t){}onNavigationClick(t,e){t&&this.addButtonClick(t,e),ProgressBar.showOverlay(),1!=window.clickProcessing&&(window.clickProcessing=!0,window.clickProcessingHandle=window.setTimeout((function(){1==window.clickProcessing&&(window.clickProcessing=!1,ProgressBar.closeOverlay())}),1e3),this._onNavigationClick(e))}_onNavigationClick(t){}isRequiredButtonsClicked(){return!0}addButtonClick(t,e){var i=$(t.target);i.hasClass("wizard_icon_card")||(i=$(t.target).parents(".wizard_icon_card")),i.addClass("clicked_wizard_icon"),i.addClass("disable-image"),this.clicked_buttons[e]=!0}isButtonClicked(t){return!(!this.clicked_buttons.hasOwnProperty(t)||void 0===this.clicked_buttons[t])}addButton(t,e,i,n,a){void 0===a&&(a=t);var r=this.getRibbonButton(t,Global.getRibbonIconRealPath(e),i,n),s=this;return r.unbind("click").bind("click",(function(t){s.onNavigationClick(t,a)})),this.isButtonClicked(a)&&(r.addClass("clicked_wizard_icon"),r.addClass("disable-image")),this.buttons[e]=r,this.appendButton(r),r}setGridGroupColumns(t){}urlClick(t){this.api.getMakePaymentData(this.getWizardObject().selected_remittance_agency_event_id,t,{onResult:function(t){var e=t.getResult();window.open(e)}})}paymentServicesClick(t){this.api.getFileAndPayWithPaymentServicesData(this.getWizardObject().selected_remittance_agency_event_id,t,{onResult:function(t){var e=t.getResult();e.user_message&&""!=e.user_message?TAlertManager.showAlert(e.user_message):0==e&&TAlertManager.showAlert($.i18n._("ERROR! Something went wrong, please contact customer service immediately!"))}})}}},3267:(t,e,i)=>{"use strict";i.r(e),i.d(e,{"ProcessTransactionsWizardStepHome":()=>a});var n=i(8880);class a extends n.WizardStep{constructor(t={}){_.defaults(t,{name:"home",source_accounts:[],pay_periods:[],types:[],filter_data:null}),super(t)}init(){var t=this,e=t.getWizardObject().getExternalData();if(e.transaction_source_data)return t.source_accounts=[],t.normalizeSourceAccounts(e.transaction_source_data),delete e.transaction_source_data,void t.render();var i=TTAPI.APIPayStubTransaction,n={};if(e){var a=e.filter_data,r=["chart","columns","sort","sort_","order","other","template","sub_total"];for(var s in a)-1==r.indexOf(s)&&(n[s]=a[s])}i.getPayPeriodTransactionSummary(n,{onResult:function(e){var i=e.getResult();t.normalizeSourceAccounts(i),t.render()}})}normalizeSourceAccounts(t){this.source_accounts=[];var e=this.getWizardObject().getExternalData();for(var i in e.filter_data.pay_period_id||(e.filter_data.pay_period_id=[]),t){var n=t[i],a={id:n.remittance_source_account_id,name:n.remittance_source_account,type:n.remittance_source_account_type,last_transaction_number:n.remittance_source_account_last_transaction_number,total_amount:n.total_amount,total_transactions:n.total_transactions};this.source_accounts.push(a),n.pay_period_id&&-1==e.filter_data.pay_period_id.indexOf(n.pay_period_id)&&n.pay_period_id!=TTUUID.zero_id&&e.filter_data.pay_period_id.push(n.pay_period_id)}this.getWizardObject().setExternalData(e)}initCardsBlock(){$(this.wizard_obj.el).find(".download_warning").html('Click the <button class="done-btn"></button> icon to download the transaction file. Be sure to save it to your computer rather than open it')}getNextStepName(){return!1}_render(){this.setTitle(this.getWizardObject().wizard_name),this.getWizardObject().setCurrentStepName("home"),TTPromise.add("processTransactionsWizard","render");var t=this;TTPromise.wait("processTransactionsWizard","render",(function(){$(t.el).show(),$(".process_transactions_wizard input")[1].focus()})),this.buildForm()}buildForm(){if(this.source_accounts.length>0){var t=1050,e=$.i18n._("Select source accounts to processs transactions for"),i=this,n=$("<div></div>"),a=$('<form id="process_transactions_wizard_select_accounts_form"></form>').appendTo(n),r=$('<table id="process_transactions_wizard_source_account_table"></table>'),s=$("<tr></tr>");s.html('<th colspan="7">'+e+"<br><br></th>");var o=$("<tr></tr>");$("<th></th>").appendTo(o),$("<th></th>").html($.i18n._("Source Account")).appendTo(o),$("<th></th>").html($.i18n._("Type")).appendTo(o),$("<th></th>").html($.i18n._("Last #")).appendTo(o),$("<th></th>").html($.i18n._("Next #")).appendTo(o),$("<th></th>").html($.i18n._("Amount")).appendTo(o),$("<th></th>").html($.i18n._("Transactions")).appendTo(o);for(var d in r.append(s),r.append(o),this.source_accounts){var c=this.source_accounts[d],l=$("<tr></tr>"),u=$('<input type="checkbox" value="'+c.id+'" tabIndex="'+t+'" checked></input>');t++,u.on("change",(function(t){t.preventDefault(),i.onCheck()}));$("<td></td>").append(u).appendTo(l),$("<td></td>").html(c.name).appendTo(l),$("<td></td>").html($.i18n._(c.type)).appendTo(l);var p=$('<input value="'+c.last_transaction_number+'" class="last_transaction_number" type="text" style="width:50px" tabIndex="'+t+'">');t++,p.on("keydown",(function(t){i.onCheckNoKeyDown(t)})),p.on("keyup",(function(t){$(t.target).parents("tr").find(".next_transaction_number").val(parseInt($(t.target).val())+1)}));var h=$('<input value="'+(parseInt(c.last_transaction_number)+1)+'" class="next_transaction_number" type="text" style="width:50px" tabIndex="'+t+'">');t++,h.on("keydown",(function(t){i.onCheckNoKeyDown(t)})),h.on("keyup",(function(t){$(t.target).parents("tr").find(".last_transaction_number").val(parseInt($(t.target).val())-1)}));$("<td></td>").append(p).appendTo(l),$("<td></td>").append(h).appendTo(l),$("<td></td>").html(c.total_amount).appendTo(l),$("<td></td>").html(c.total_transactions).appendTo(l);l.appendTo(r)}a.append(r),$(this.getWizardObject().el).find(".content").html(n),$(this.getWizardObject().el).find(".done-btn").removeClass("disable-image"),this.source_accounts=null,this.filter=null}else $(this.getWizardObject().el).find(".content").html("No transactions to process."),$(this.getWizardObject().el).find(".done-btn").addClass("disable-image");this.onCheck(),TTPromise.resolve("processTransactionsWizard","render")}onCheckNoKeyDown(t){if(isNaN(t.key)&&-1==[9,8,46,37,39].indexOf(t.keyCode))return t.preventDefault(),!1}onCheck(){var t=$(this.getWizardObject().el).find('.content input[type="checkbox"]').filter(":checked");if(t.length>0){var e=[];t.each((function(){e.push($(this).val())})),this.getWizardObject().setTransactionIds(e),$(this.getWizardObject().el).find(".done-btn").removeClass("disable-image")}else this.getWizardObject().setTransactionIds([]),$(this.getWizardObject().el).find(".done-btn").addClass("disable-image")}setFilterData(t){this.filter_data=t,TTPromise.resolve("ProcessTransactionsWizardStepHome","init_filter")}getFilterData(){return this.filter_data}}}}]);
//# sourceMappingURL=payroll-process_transactions_wizard-ProcessTransactionsWizardStepHome.bundle.js.map?v=ccde891642e85f1db5c3