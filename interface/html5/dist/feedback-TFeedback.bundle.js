(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["feedback-TFeedback"],{8218:()=>{var e;(e=jQuery).fn.TFeedback=function(a){var t,n=e.extend({source:"",force_source:!1,delay:0,manual_trigger:!1,prompt_for_feedback:!1,review_link:"https://www.timetrex.com/r?id=review&product_edition_id="+Global.getProductEdition()},a),c=Global.loadWidgetByName(FormItemType.FEEDBACK_BOX),i=c.find(".top-bar-title"),o=c.find(".feedback-page"),l=c.find(".feedback-page.default"),d=c.find(".feedback-page.positive"),b=c.find(".feedback-page.negative"),r=TTAPI.APIUser,s="postitive",k="neutral",u="negative";function f(){return n.manual_trigger?"click":"popup"}function g(){0==e(".feedback-container").length?e("body").append(c):Debug.Text("ERROR: Feedback container already exists, halting to prevent duplicate popups.","TFeedback.js","TFeedback","initDefaultPage",1)}function h(){Global.isSet(c)&&c.remove()}function m(){var a,t,c,o=u,l=(0!=(c=(c=TTAPI.APIAuthentication.getCurrentUser({async:!1})).getResult()).work_email&&""!=c.work_email?a=c.work_email:0!=c.home_email&&(a=c.home_email),0!=c.work_phone&&""!=c.work_phone?t=c.work_phone:0!=c.home_phone&&(t=c.home_phone),{user_email:a,user_phone:t}),d=b.find(".feedback-messagebox"),r=b.find(".feedback-email"),s=b.find(".feedback-phone");i.html(e.i18n._("Feedback")),b.find(".page-text").html(e.i18n._("We're all ears!<br>What improvements do you think we should make?")),b.find(".contact-notice-text").html(e.i18n._("What is the best way to contact you?")),b.find(".email-label-text").html(e.i18n._("Email")),b.find(".phone-label-text").html(e.i18n._("Phone")),r.val(l.user_email),s.val(l.user_phone),b.find(".sendButton").html(e.i18n._("Send")).click((function(){var e="";d.val().length>0&&(e=d.val()+"\nEmail: "+r.val()+"\nPhone: "+s.val()),Debug.Text("Feedback Analytics: Category: feedback, Action: submit, Label: submit:feedback:"+n.source+":"+o,"TFeedback.js","TFeedback","initNegativePage._sendForm",10),Global.sendAnalyticsEvent("feedback","submit","submit:feedback:"+n.source+":"+o),p(o,e,!0)})),b.find(".cancel-button").html(e.i18n._("Back")).click((function(){_("default"),Debug.Text("Feedback: Category: feedback, Action: cancel, Label: cancel:feedback:"+n.source+":"+o,"TFeedback.js","TFeedback","cancelButtonClick",10),Global.sendAnalyticsEvent("feedback","cancel","cancel:feedback:"+n.source+":"+o)}))}function _(a){switch(a){case"positive":t=s,i.html(e.i18n._("Feedback")),d.find(".page-text.block1").text(e.i18n._("It thrills us to hear you think TimeTrex is great!")),d.find(".page-text.block2").text(e.i18n._("Share your experience and WIN a tasty lunch for your team!")),d.find(".page-text.block3").text(e.i18n._("We'll select one winner each month.")),d.find(".openReviewPageButton").html(e.i18n._("Share experience")).bind("click",(function(){Debug.Text("Feedback Analytics: Category: feedback, Action: "+f()+"-Link, Label: submit:feedback:"+n.source+":"+t,"TFeedback.js","TFeedback","initPositivePage",10),Global.sendAnalyticsEvent("feedback",f()+"-link","submit:"+f()+":feedback:"+n.source+":"+t),p(t,"",!1),T(1,!0),window.open(n.review_link,"_blank","review_link")})),d.find(".cancel-button").html(e.i18n._("I'm not hungry")).click((function(){T(0,!0),Debug.Text("Feedback: Category: feedback, Action: cancel, Label: cancel:feedback:"+n.source+":"+t,"TFeedback.js","TFeedback","cancelButtonClick",10),Global.sendAnalyticsEvent("feedback","cancel","cancel:feedback:"+n.source+":"+t)})),o.hide(),d.show();break;case"negative":m(),o.hide(),b.show();break;default:!function(){if(i.html(e.i18n._("Feedback")),l.find(".page-text").text(e.i18n._("Tell us what you think about TimeTrex?")),l.find(".positive-button").html(e.i18n._("It's great!")).bind("click",(function(){_("positive"),Debug.Text("Feedback Analytics: Category: feedback, Action: "+f()+", Label: "+f()+":feedback:"+n.source+":"+s,"TFeedback.js","TFeedback","initDefaultPage",10),Global.sendAnalyticsEvent("feedback",f(),f()+":feedback:"+n.source+":"+s),p(s,"")})),l.find(".negative-button").html(e.i18n._("Not so great")).bind("click",(function(){_("negative"),Debug.Text("Feedback Analytics: Category: feedback, Action: "+f()+", Label: "+f()+":feedback:"+n.source+":"+u,"TFeedback.js","TFeedback","initDefaultPage",10),Global.sendAnalyticsEvent("feedback",f(),f()+":feedback:"+n.source+":"+u),p(u,"")})),n.manual_trigger)a=e.i18n._("Close");else var a=e.i18n._("Ask me later");l.find(".cancel-button").html(a).click((function(){h(),Debug.Text("Feedback Analytics: Category: feedback, Action: "+f()+", Label: "+f()+":feedback:"+n.source+":"+k,"TFeedback.js","TFeedback","initDefaultPage",10),Global.sendAnalyticsEvent("feedback",f(),f()+":feedback:"+n.source+":"+k),p(k,"")})),Debug.Text("Feedback Analytics: Category: feedback, Action: "+f()+", Label: "+f()+":feedback:"+n.source,"TFeedback.js","TFeedback","initDefaultPage",10),Global.sendAnalyticsEvent("feedback",f(),f()+":feedback:"+n.source)}(),o.hide(),l.show()}var t}function p(e,a,t){n.source&&(a+="\n\nFeedback source: "+n.source),r.setUserFeedbackRating(e,a,{onResult:function(e){e.isValid()&&t&&h()}})}function T(e,a){r.setUserFeedbackReview(e,{onResult:function(e){e.isValid()&&a&&h()}})}return LocalCacheData.getLoginUser()&&1==LocalCacheData.getLoginUser().prompt_for_feedback&&(n.prompt_for_feedback=!0,LocalCacheData.getLoginUser().prompt_for_feedback=!1),n.prompt_for_feedback&&(n.force_source||(n.source=LocalCacheData.current_open_view_id+"@"+n.source),_("default"),n.delay&&n.delay>0?(t=(t=n.delay)||0,Debug.Text("Setting feedback display delay to "+t,"TFeedback.js","TFeedback","initDefaultPage",10),setTimeout((function(){Debug.Text("Triggering delayed feedback display","TFeedback.js","TFeedback","initDefaultPage",10),g()}),t)):g()),this}}}]);
//# sourceMappingURL=feedback-TFeedback.bundle.js.map?v=a77ec5c9450bc12d781a