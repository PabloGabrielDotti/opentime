{"version":3,"sources":["webpack://timetrex/./interface/html5/views/policy/absence_policy/AbsencePolicyViewController.js"],"names":["AbsencePolicyViewController","BaseViewController","options","_","defaults","el","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIAbsencePolicy","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","id","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_absence_policy_column1","edit_view_tab","find","edit_view_tabs","push","form_item_input","Global","loadWidgetByName","FormItemType","TEXT_INPUT","TTextInput","field","width","addEditFieldToColumn","parent","TEXT_AREA","TTextArea","AWESOME_BOX","APIPayCode","set_empty","APIPayFormulaPolicy","custom_first_label","added_items","value","TTUUID","zero_id","label","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","c_value","getValue","current_edit_record","validate","setEditViewDataDone","collectUIDataToCurrentEditRecord","onTypeChange","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser"],"mappings":"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","file":"policy-absence_policy-AbsencePolicyViewController.bundle.js?v=d9de638583d2a954c79b","sourcesContent":["export class AbsencePolicyViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#absence_policy_view_container',\n\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'AbsencePolicyEditView.html';\n\t\tthis.permission_id = 'absence_policy';\n\t\tthis.viewId = 'AbsencePolicy';\n\t\tthis.script_name = 'AbsencePolicyView';\n\t\tthis.table_name_key = 'absence_policy';\n\t\tthis.context_menu_name = $.i18n._( 'Absence Policy' );\n\t\tthis.navigation_label = $.i18n._( 'Absence Policy' ) + ':';\n\t\tthis.api = TTAPI.APIAbsencePolicy;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\t//this.initDropDownOption( 'type' );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_absence_policy': { 'label': $.i18n._( 'Absence Policy' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAbsencePolicy,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_absences',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_absence_policy = this.edit_view_tab.find( '#tab_absence_policy' );\n\n\t\tvar tab_absence_policy_column1 = tab_absence_policy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_absence_policy_column1 );\n\n\t\t//Name\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_absence_policy_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_absence_policy_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Pay Code\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayCode,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_code',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_code_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Code' ), form_item_input, tab_absence_policy_column1 );\n\n\t\t//Pay Formula Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayFormulaPolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_formula_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_formula_policy_id',\n\t\t\tcustom_first_label: $.i18n._( '-- Defined By Pay Code --' ),\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.zero_id, label: $.i18n._( '-- Defined By Pay Code --' ) }\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Formula Policy' ), form_item_input, tab_absence_policy_column1 );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\t\t/*\n\t\t switch ( key ) {\n\t\t case 'type_id':\n\t\t case 'accrual_policy_id':\n\t\t this.onTypeChange();\n\t\t break;\n\n\t\t }\n\t\t */\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tsetEditViewDataDone() {\n\t\tvar $this = this;\n\t\tsuper.setEditViewDataDone();\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.onTypeChange();\n\t}\n\n\tonTypeChange() {\n\t\t/*\n\t\t if ( this.current_edit_record['type_id'] == 20 ) {\n\n\t\t this.edit_view_form_item_dic['rate'].css( 'display', 'none' );\n\t\t this.edit_view_form_item_dic['wage_group_id'].css( 'display', 'none' );\n\t\t this.edit_view_form_item_dic['pay_stub_entry_account_id'].css( 'display', 'none' );\n\n\t\t } else {\n\t\t this.edit_view_form_item_dic['rate'].css( 'display', 'block' );\n\t\t this.edit_view_form_item_dic['wage_group_id'].css( 'display', 'block' );\n\t\t this.edit_view_form_item_dic['pay_stub_entry_account_id'].css( 'display', 'block' );\n\t\t }\n\n\t\t if ( this.current_edit_record.accrual_policy_id ) {\n\t\t this.edit_view_form_item_dic['accrual_rate'].css( 'display', 'block' );\n\n\t\t } else {\n\t\t this.edit_view_form_item_dic['accrual_rate'].css( 'display', 'none' );\n\t\t }\n\t\t */\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Code' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_code_id',\n\t\t\t\tlayout_name: 'global_pay_code',\n\t\t\t\tapi_class: TTAPI.APIPayCode,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Formula Policy' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_formula_policy_id',\n\t\t\t\tlayout_name: 'global_pay_formula_policy',\n\t\t\t\tapi_class: TTAPI.APIPayFormulaPolicy,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n}\n"],"sourceRoot":""}