(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["wizard-reset_password-ResetPasswordWizardController"],{3097:(t,e,s)=>{"use strict";s.r(e),s.d(e,{"ResetPasswordWizardController":()=>i});class i extends BaseWizardController{constructor(t={}){_.defaults(t,{el:".wizard"}),super(t)}init(t){this.title=$.i18n._("Reset Password"),this.steps=1,this.current_step=1,this.default_data&&void 0!==this.default_data.api_class?this.api=this.default_data.api_class:this.api=TTAPI.APIAuthentication,this.render()}render(){super.render(),this.initCurrentStep()}buildCurrentStepUI(){switch(this.content_div.empty(),this.stepsWidgetDic[this.current_step]={},this.current_step){case 1:var t=this.getLabel();t.text(this.default_data?this.default_data.message:""),this.content_div.append(t);var e=$(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html")),s=e.find(".form-item-label"),i=e.find(".form-item-input-div"),r=this.getText();r.text(this.default_data?this.default_data.user_name:""),s.text($.i18n._("User Name")+":"),i.append(r),this.content_div.append(e),s=(e=$(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html"))).find(".form-item-label"),i=e.find(".form-item-input-div");var a=this.getPasswordInput("current_password");s.text($.i18n._("Current Password")+":"),i.append(a),this.content_div.append(e),s=(e=$(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html"))).find(".form-item-label"),i=e.find(".form-item-input-div");var d=this.getPasswordInput("new_password");s.text($.i18n._("New Password")+":"),i.append(d),this.content_div.append(e),s=(e=$(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html"))).find(".form-item-label"),i=e.find(".form-item-input-div");var n=this.getPasswordInput("confirm_password");s.text($.i18n._("New Password (Confirm)")+":"),i.append(n),this.content_div.append(e),this.stepsWidgetDic[this.current_step][a.getField()]=a,this.stepsWidgetDic[this.current_step][d.getField()]=d,this.stepsWidgetDic[this.current_step][n.getField()]=n,a.focus()}}saveCurrentStep(){this.stepsDataDic[this.current_step]={};var t=this.stepsDataDic[this.current_step],e=this.stepsWidgetDic[this.current_step];for(var s in this.current_step,e)e.hasOwnProperty(s)&&(t[s]=e[s].getValue())}buildCurrentStepData(){}onCloseClick(){$(this.el).remove(),LocalCacheData.current_open_wizard_controller=null,LocalCacheData.extra_filter_for_next_open_view=null}onDoneClick(){var t=this;super.onDoneClick(),this.saveCurrentStep();var e=this.stepsDataDic[1].current_password,s=this.stepsDataDic[1].new_password,i=this.stepsDataDic[1].confirm_password;if(this.stepsWidgetDic[1].current_password.clearErrorStyle(),this.stepsWidgetDic[1].new_password.clearErrorStyle(),this.stepsWidgetDic[1].confirm_password.clearErrorStyle(),e)if(s)if(s!==i)this.stepsWidgetDic[1].new_password.setErrorStyle($.i18n._("New password does not match"),!0);else{if(!this.default_data||!this.default_data.user_name)return void TAlertManager.showAlert($.i18n._("Invalid user name"));this.api.changePassword(this.default_data.user_name,e,s,i,{onResult:function(e){e.isValid()?(t.onCloseClick(),t.call_back&&t.call_back()):TAlertManager.showErrorAlert(e)}})}else this.stepsWidgetDic[1].new_password.setErrorStyle($.i18n._("New password can't be empty"),!0);else this.stepsWidgetDic[1].current_password.setErrorStyle($.i18n._("Current password can't be empty"),!0)}}i.type=""}}]);
//# sourceMappingURL=wizard-reset_password-ResetPasswordWizardController.bundle.js.map?v=63e9fb6441b7e1990107