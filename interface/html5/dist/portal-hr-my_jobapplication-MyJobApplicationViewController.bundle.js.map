{"version":3,"sources":["webpack://timetrex/./interface/html5/views/portal/hr/my_jobapplication/MyJobApplicationViewController.js"],"names":["MyJobApplicationViewController","BaseViewController","options","_","defaults","el","events","super","initialize","this","viewId","api","$","empty","search","window","location","Global","getBaseURL","LocalCacheData","getAllURLArgs","company_id","setAllURLArgs","column_filter","page_action","page_number","callBack","$this","filter","vacancy_list_panel","more_btn","unbind","bind","loadMore","filter_data","filter_sort","filter_columns","getFilterColumnsFromDisplayColumns","filter_items_per_page","pager_data","filter_page","next_page","onResult","result","result_data","getResult","isArray","i","length","row_data","row_template","loadWidget","args","job_vacancy","i18n","created_date","template","url","find","attr","append","getPagerData","is_last_page","hide","show","no_result_span","css","data_id","getPortalLoginUser"],"mappings":"0OAGO,MAAMA,UAAuC,EAAAC,mBACnD,YAAaC,EAAU,IACtBC,EAAEC,SAAUF,EAAS,CACpBG,GAAI,2BACJC,OAAQ,CACP,wBAAyB,qBAEzB,kBAAmB,qBAIrBC,MAAOL,GAGR,WAAYA,GACXK,MAAMC,WAAYN,GAElBO,KAAKC,OAAS,mBACdD,KAAKE,IAAM,0BACXF,KAAKG,EAAG,2BAA4BC,QACpCJ,KAAKK,SAGN,qBACCC,OAAOC,SAAWC,OAAOC,aAAe,mCAAqCC,eAAeC,gBAAgBC,WAC5GF,eAAeG,cAAe,IAG/B,qCACC,IAAIC,EAAgB,CACpB,IAAmB,EACnB,aAA4B,EAC5B,gBAA+B,EAC/B,gBAA+B,EAC/B,cAA6B,GAE7B,OAAOA,EAGR,OAAQC,EAAaC,EAAaC,GACjC,IAAIC,EAAQlB,KACRmB,EAAS,GAEbnB,KAAKoB,mBAAqBpB,KAAKG,EAAG,2BAClCH,KAAKqB,SAAWrB,KAAKG,EAAG,wBACxBH,KAAKqB,SAASC,OAAQ,SAAUC,KAAM,SAAS,WAC9CL,EAAMM,cAEPL,EAAOM,YAAc,GACrBN,EAAOO,YAAc,GACrBP,EAAOQ,eAAiB3B,KAAK4B,qCAC7BT,EAAOU,sBAAwB,EAC1B7B,KAAK8B,WAERX,EAAOY,YADa,SAAhBhB,EACiBf,KAAK8B,WAAWE,UAEhB,EAGtBb,EAAOY,YAAc,EAEtB/B,KAAKE,IAAuB,kBAAGiB,GAAQ,EAAO,CAC7Cc,SAAU,SAAUC,GACnB,IAAIC,EAAcD,EAAOE,YAIzB,GAAM5B,OAAO6B,QAASF,GAKf,CACN,IAAM,IAAIG,EAAI,EAAGA,EAAIH,EAAYI,OAAQD,IAAM,CAC9C,IAAIE,EAAWL,EAAYG,GACvBG,EAAejC,OAAOkC,WAAY,8DAClCC,EAAO,CACVC,YAAazC,EAAE0C,KAAKnD,EAAG8C,EAAsB,aAC7CM,aAAc3C,EAAE0C,KAAKnD,EAAG8C,EAAuB,eAEhDC,EAAetC,EAAGT,EAAEqD,SAAUN,EAAZ/C,CAA4BiD,IAC9C,IAAIK,EAAMxC,OAAOC,aAAe,iCAAmC+B,EAAyB,eAAI,eAAiB9B,eAAeC,gBAAgBC,WAChJT,EAAGsC,GAAeQ,KAAM,iCAAkCC,KAAM,OAAQF,GACxE9B,EAAME,mBAAmB+B,OAAQV,GAElCvB,EAAMY,WAAaI,EAAOkB,eAErBlC,EAAMY,WAAWuB,aACrBnC,EAAMG,SAASiC,OAEfpC,EAAMG,SAASkC,WAvBqB,CACrC,IAAIC,EAAiBrD,EAAG,wCAA0CA,EAAE0C,KAAKnD,EAAG,oBAAuB,WACnGwB,EAAME,mBAAmB+B,OAAQK,GACjCtC,EAAME,mBAAmBqC,IAAK,aAAc,UAC5CvC,EAAMG,SAASiC,WA0BnB,WACCtD,KAAKK,OAAQ,QAGd,gBAAiBqD,GAChB,GAAKhD,eAAeiD,qBAAuB,CAC1C,IAAIpD,EAAWC,OAAOC,aAAe,4BAA8BC,eAAeC,gBAA4B,WAC9GL,OAAOC,SAAWA","file":"portal-hr-my_jobapplication-MyJobApplicationViewController.bundle.js?v=e938e5adf2c5ac48c89b","sourcesContent":["import { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { BaseViewController } from '@/views/BaseViewController';\n\nexport class MyJobApplicationViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#my_job_application_view',\n\t\t\tevents: {\n\t\t\t\t'click #available_jobs': 'availableJobsClick',\n\t\t\t\t// 'click #applied_jobs': 'appliedJobsClick',\n\t\t\t\t'click #applyBtn': 'onApplyJobClick'\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitialize( options ) {\n\t\tsuper.initialize( options );\n\n\t\tthis.viewId = 'MyJobApplication';\n\t\tthis.api = TTAPI.APIJobApplicantPortal;\n\t\tthis.$( '.search-result .content' ).empty();\n\t\tthis.search();\n\t}\n\n\tavailableJobsClick() {\n\t\twindow.location = Global.getBaseURL() + '#!m=PortalJobVacancy&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\tLocalCacheData.setAllURLArgs( {} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.job_vacancy = true;\n\t\tcolumn_filter.job_vacancy_id = true;\n\t\tcolumn_filter.interview_date = true;\n\t\tcolumn_filter.created_date = true;\n\n\t\treturn column_filter;\n\t}\n\n\tsearch( page_action, page_number, callBack ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\t// this.addSearchResultPanel();\n\t\tthis.vacancy_list_panel = this.$( '.search-result .content' );\n\t\tthis.more_btn = this.$( '.search-result .more' );\n\t\tthis.more_btn.unbind( 'click' ).bind( 'click', function() {\n\t\t\t$this.loadMore();\n\t\t} );\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_columns = this.getFilterColumnsFromDisplayColumns();\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\t\tif ( this.pager_data ) {\n\t\t\tif ( page_action === 'next' ) {\n\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t} else {\n\t\t\t\tfilter.filter_page = 1;\n\t\t\t}\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\t\tthis.api['getJobApplication']( filter, false, { // paging or none\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t// if ( !$this.pager_data ) {\n\t\t\t\t// \t$this.vacancy_list_panel.empty();\n\t\t\t\t// }\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\tvar no_result_span = $( '<span class=\"vacancy-list-no-result\">' + $.i18n._( 'No Results Found' ) + '</span>' );\n\t\t\t\t\t$this.vacancy_list_panel.append( no_result_span );\n\t\t\t\t\t$this.vacancy_list_panel.css( 'text-align', 'center' );\n\t\t\t\t\t$this.more_btn.hide();\n\t\t\t\t} else {\n\t\t\t\t\tfor ( var i = 0; i < result_data.length; i++ ) {\n\t\t\t\t\t\tvar row_data = result_data[i];\n\t\t\t\t\t\tvar row_template = Global.loadWidget( 'views/portal/hr/my_jobapplication/MyJobApplicationRow.html' );\n\t\t\t\t\t\tvar args = {\n\t\t\t\t\t\t\tjob_vacancy: $.i18n._( row_data['job_vacancy'] ),\n\t\t\t\t\t\t\tcreated_date: $.i18n._( row_data['created_date'] )\n\t\t\t\t\t\t};\n\t\t\t\t\t\trow_template = $( _.template( row_template )( args ) );\n\t\t\t\t\t\tvar url = Global.getBaseURL() + '#!m=PortalJobVacancyDetail&id=' + row_data['job_vacancy_id'] + '&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\t\t\t\t\t$( row_template ).find( '.row-vacancy-title > span > a' ).attr( 'href', url );\n\t\t\t\t\t\t$this.vacancy_list_panel.append( row_template );\n\t\t\t\t\t}\n\t\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\t\tif ( $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t$this.more_btn.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.more_btn.show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tloadMore() {\n\t\tthis.search( 'next' );\n\t}\n\n\tonApplyJobClick( data_id ) {\n\t\tif ( LocalCacheData.getPortalLoginUser() ) {\n\t\t\tvar location = Global.getBaseURL() + '#!m=MyProfile&company_id=' + LocalCacheData.getAllURLArgs()['company_id'];\n\t\t\twindow.location = location;\n\t\t}\n\t}\n\n}\n"],"sourceRoot":""}