{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/text_input/TTextInput.js"],"names":["$","jQuery","fn","TTextInput","options","field","validation_field","error_tip_box","mode","is_static_width","static_width","opts","extend","defaults","$this","this","error_string","check_box","enabled","hasKeyEvent","need_parser_date","need_parser_sec","parsed_value","validate_timer","no_validate_timer","no_validate_timer_sec","disable_keyup_event","display_na","do_validate","setPlaceHolder","val","attr","setNeedParsDate","setNeedParseSec","Global","parseTimeUnit","getEnabled","setEnabled","addClass","hide","getValue","i18n","_","removeAttr","removeClass","show","setReadOnly","setCheckBox","children","eq","checked","isChecked","setMassEditMode","insertBefore","change","trigger","toString","indexOf","css","remove","setField","getField","getValidationField","getInputValue","setValue","getTimeUnit","autoResize","setErrorStyle","errStr","isWarning","showErrorTip","setWidth","width","sec","isSet","loadWidgetByName","WidgetNamesDic","ERROR_TOOLTIP","ErrorTipBox","cancelRemove","hasClass","hideErrorTip","clearErrorStyle","content_width","example_width","calculateTextWidth","min_width","max_width","LocalCacheData","getLoginUserPreference","time_format_display","time_unit_format_display","each","o","meta","data","autocomplete","hasOwnProperty","TTAPI","APITTDate","keydown","e","keyCode","keyup","validate_sec","isValidInputCodes","clearTimeout","length","setTimeout","mouseover","mouseout","is","focusin","current_open_sub_controller","edit_view","is_viewing","current_open_primary_controller","view_mode_message","focusout"],"mappings":"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","file":"text_input-TTextInput.bundle.js?v=5cf6e3f066fe2e7535a0","sourcesContent":["( function( $ ) {\n\n\t$.fn.TTextInput = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TTextInput.defaults, options );\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar validation_field;\n\t\tvar error_string = '';\n\t\tvar error_tip_box;\n\n\t\tvar mass_edit_mode = false;\n\t\tvar check_box = null;\n\n\t\tvar enabled = true;\n\n\t\tvar hasKeyEvent = null;\n\n\t\t//DONT USE THIS ANY MORE\n\t\tvar need_parser_date = false;\n\n\t\tvar need_parser_sec = false;\n\n\t\tvar parsed_value = false; //work with need_parser_date\n\n\t\tvar api_date = null;\n\n\t\tvar validate_timer = null;\n\n\t\tvar no_validate_timer = null;\n\n\t\tvar no_validate_timer_sec = 0;\n\n\t\tvar password_style = false;\n\n\t\tvar disable_keyup_event = false; //set to not send change event when mouseup\n\n\t\tvar mode;\n\n\t\tvar is_static_width;\n\n\t\tvar static_width;\n\n\t\tvar display_na = true; // Display N/A when no value\n\n\t\t// var cancel_date_parse = false;\n\n\t\tvar do_validate = true;\n\n\t\t// var parseDateAsync = function( callBack ) {\n\t\t// \tparsed_value = -1;\n\t\t// \tif ( !api_date ) {\n\t\t// \t\tapi_date = TTAPI.APITTDate;\n\t\t// \t}\n\t\t// \tapi_date.parseTimeUnit( $this.val(), {\n\t\t// \t\tonResult: function( result ) {\n\t\t// \t\t\tif ( cancel_date_parse ) {\n\t\t// \t\t\t\treturn;\n\t\t// \t\t\t}\n\t\t// \t\t\tparsed_value = result.getResult();\n\t\t// \t\t\tif ( callBack ) {\n\t\t// \t\t\t\tcallBack();\n\t\t// \t\t\t}\n\t\t// \t\t\tProgressBar.closeOverlay();\n\t\t// \t\t}\n\t\t// \t} );\n\t\t//\n\t\t// \t//parsed_value = Global.parseTimeUnit( $this.val() );\n\t\t// };\n\n\t\tthis.setPlaceHolder = function( val ) {\n\t\t\t$this.attr( 'placeholder', val );\n\t\t};\n\n\t\tthis.setNeedParsDate = function( val ) {\n\t\t\tneed_parser_date = val;\n\t\t};\n\n\t\tthis.setNeedParseSec = function( val ) {\n\t\t\tif ( val ) {\n\t\t\t\t//parsed_value = parseDateAsync();\n\t\t\t\tparsed_value = Global.parseTimeUnit( $this.val() );\n\t\t\t}\n\t\t\tneed_parser_sec = val;\n\n\t\t};\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\t$this.attr( 'readonly', 'true' );\n\t\t\t\t$this.addClass( 't-text-input-readonly' );\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.hide();\n\t\t\t\t}\n\t\t\t\tif ( !this.getValue() && display_na ) {\n\t\t\t\t\tthis.val( $.i18n._( 'N/A' ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$this.removeAttr( 'readonly' );\n\t\t\t\t$this.removeClass( 't-text-input-readonly' );\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.show();\n\t\t\t\t}\n\t\t\t\tif ( this.val() === $.i18n._( 'N/A' ) ) {\n\t\t\t\t\tthis.val( '' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setReadOnly = function( val ) {\n\t\t\tif ( val ) {\n\t\t\t\t$this.attr( 'disabled', 'true' );\n\t\t\t\t$this.addClass( 't-text-input-readonly-bg' );\n\t\t\t} else {\n\t\t\t\t$this.removeAttr( 'disabled' );\n\t\t\t\t$this.removeClass( 't-text-input-readonly-bg' );\n\t\t\t}\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tif ( check_box ) {\n\t\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t\t}\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\n\t\t\tmass_edit_mode = val;\n\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\tif ( need_parser_date || need_parser_sec ) {\n\t\t\t\t\t\tparsed_value = Global.parseTimeUnit( $this.val() );\n\t\t\t\t\t\t// parseDateAsync( function() {\n\t\t\t\t\t\t// \t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t\t\t// } );\n\t\t\t\t\t}\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\n\t\t\t\tif ( is_static_width && static_width.toString().indexOf( '%' ) > 0 ) {\n\t\t\t\t\t$this.css( 'width', 'calc(' + static_width + ' - 25px)' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setField = function( val ) {\n\t\t\tfield = val;\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValidationField = function() {\n\t\t\treturn validation_field;\n\t\t};\n\n\t\tthis.getInputValue = function() {\n\n\t\t\tvar val = $this.val();\n\t\t\treturn val;\n\n\t\t};\n\t\tthis.getValue = function() {\n\t\t\tvar val = $this.val();\n\t\t\tif ( val === $.i18n._( 'N/A' ) ) {\n\t\t\t\tval = '';\n\t\t\t}\n\t\t\tif ( need_parser_sec || need_parser_date || parsed_value ) {\n\t\t\t\tif ( parsed_value === -1 ) {\n\t\t\t\t\tparsed_value = Global.parseTimeUnit( val );\n\t\t\t\t\t// cancel_date_parse = true; // cancel orginal date parse process\n\t\t\t\t\t// parsed_value = api_date.parseTimeUnit( val, { async: false } ).getResult();\n\t\t\t\t}\n\t\t\t\treturn parsed_value;\n\t\t\t} else {\n\t\t\t\treturn val;\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\tif ( !val && val !== 0 ) {\n\t\t\t\tval = '';\n\t\t\t}\n\t\t\t$this.val( val );\n\t\t\tif ( need_parser_date ) {\n\t\t\t\t//parseDateAsync();\n\t\t\t\tparsed_value = Global.parseTimeUnit( $this.val() );\n\t\t\t} else if ( need_parser_sec ) {\n\t\t\t\tparsed_value = val;\n\t\t\t\t$this.val( Global.getTimeUnit( val ) );\n\t\t\t}\n\n\t\t\tthis.autoResize();\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\t$( this ).addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\t$( this ).addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.setWidth = function( val ) {\n\t\t\tif ( val && ( val > 0 || val.indexOf( '%' ) > 0 ) ) {\n\t\t\t\t$this.width( val );\n\t\t\t\tstatic_width = val;\n\t\t\t\tis_static_width = true;\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\terror_tip_box.cancelRemove();\n\n\t\t\tif ( $( this ).hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\t\t\t$( this ).removeClass( 'error-tip' );\n\t\t\t$( this ).removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.autoResize = function() {\n\t\t\tvar content_width, example_width;\n\t\t\tif ( !is_static_width ) {\n\t\t\t\tif ( mode === 'time' ) {\n\t\t\t\t\texample_width = Global.calculateTextWidth( LocalCacheData.getLoginUserPreference().time_format_display );\n\t\t\t\t} else if ( mode == 'time_unit' ) {\n\t\t\t\t\texample_width = Global.calculateTextWidth( LocalCacheData.getLoginUserPreference().time_unit_format_display );\n\t\t\t\t} else {\n\t\t\t\t\texample_width = 156;\n\t\t\t\t}\n\t\t\t\tcontent_width = Global.calculateTextWidth( $this.getValue(), {\n\t\t\t\t\tmin_width: example_width,\n\t\t\t\t\tmax_width: 200\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tif ( static_width.toString().indexOf( '%' ) > 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\texample_width = static_width;\n\t\t\t\tcontent_width = Global.calculateTextWidth( $this.getValue(), {\n\t\t\t\t\tmin_width: example_width,\n\t\t\t\t\tmax_width: static_width > 200 ? static_width : 200\n\t\t\t\t} );\n\t\t\t}\n\t\t\t$this.width( content_width + 'px' );\n\t\t};\n\n\t\tthis.each( function() {\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\t\t\tfield = o.field;\n\n\t\t\t//Set autocomplete widget option is defined, set it here.\n\t\t\tif ( o.autocomplete ) {\n\t\t\t\t$this.attr( 'autocomplete', o.autocomplete );\n\t\t\t}\n\n\t\t\tif ( o.hasOwnProperty( 'do_validate' ) ) {\n\t\t\t\tdo_validate = o.do_validate;\n\t\t\t}\n\n\t\t\tif ( o.validation_field ) {\n\t\t\t\tvalidation_field = o.validation_field;\n\t\t\t}\n\t\t\tif ( o.hasOwnProperty( 'display_na' ) ) {\n\t\t\t\tdisplay_na = o.display_na;\n\t\t\t}\n\t\t\tif ( o.hasOwnProperty( 'no_validate_timer_sec' ) && o.no_validate_timer_sec > 0 ) {\n\t\t\t\tno_validate_timer_sec = o.no_validate_timer_sec;\n\t\t\t}\n\t\t\thasKeyEvent = o.hasKeyEvent;\n\t\t\tneed_parser_date = o.need_parser_date;\n\t\t\tneed_parser_sec = o.need_parser_sec;\n\n\t\t\tif ( need_parser_date || need_parser_sec ) {\n\t\t\t\tapi_date = TTAPI.APITTDate;\n\t\t\t}\n\n\t\t\tif ( o.mode ) {\n\t\t\t\tmode = o.mode;\n\t\t\t}\n\n\t\t\tif ( o.width && ( o.width > 0 || o.width.indexOf( '%' ) > 0 ) ) {\n\t\t\t\t$this.width( o.width );\n\t\t\t\tstatic_width = o.width;\n\t\t\t\tis_static_width = true;\n\t\t\t}\n\n\t\t\tif ( o.disable_keyup_event ) {\n\t\t\t\tdisable_keyup_event = o.disable_keyup_event;\n\t\t\t}\n\n\t\t\tif ( mode === 'time' ) {\n\t\t\t\t$this.setPlaceHolder( LocalCacheData.getLoginUserPreference().time_format_display );\n\t\t\t} else if ( mode === 'time_unit' ) {\n\t\t\t\t$this.setPlaceHolder( LocalCacheData.getLoginUserPreference().time_unit_format_display );\n\t\t\t}\n\t\t\t$this.autoResize();\n\n\t\t\t$( this ).keydown( function( e ) {\n\t\t\t\t// key is not TAB and ENTER\n\t\t\t\tif ( hasKeyEvent && e.keyCode !== 9 && e.keyCode !== 13 ) {\n\t\t\t\t\t$this.trigger( 'formItemKeyDown', [$this] );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t$( this ).keyup( function( e ) {\n\t\t\t\tvar validate_sec = 1000;\n\t\t\t\tif ( e.keyCode === 9 || e.keyCode === 13 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar is_valid_input = Global.isValidInputCodes( e.keyCode );\n\t\t\t\tif ( !is_valid_input ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//don't clean event when click tab\n\t\t\t\tif ( validate_timer ) {\n\t\t\t\t\tclearTimeout( validate_timer );\n\t\t\t\t\tvalidate_timer = null;\n\t\t\t\t}\n\n\t\t\t\tif ( no_validate_timer ) {\n\t\t\t\t\tclearTimeout( no_validate_timer );\n\t\t\t\t\tno_validate_timer = null;\n\t\t\t\t}\n\t\t\t\tif ( hasKeyEvent ) {\n\t\t\t\t\t$this.trigger( 'formItemKeyUp', [$this] );\n\t\t\t\t}\n\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\tvalidate_sec = 500;\n\t\t\t\t}\n\t\t\t\tif ( do_validate ) {\n\t\t\t\t\tvalidate_timer = setTimeout( function() {\n\t\t\t\t\t\tif ( check_box ) {\n\t\t\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( need_parser_date || need_parser_sec ) {\n\t\t\t\t\t\t\tparsed_value = -1; // parse date when get value\n\t\t\t\t\t\t\tif ( !disable_keyup_event ) {\n\t\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this, true] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( !disable_keyup_event ) {\n\t\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, validate_sec );\n\t\t\t\t}\n\n\t\t\t\t// TO make sure the value is set to currentEditRecord when user typing it, but not trigger validate\n\t\t\t\t// Do this immediately instead wait for 300 ms.\n\t\t\t\tno_validate_timer = setTimeout( function() {\n\n\t\t\t\t\tif ( check_box ) {\n\t\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t\t}\n\t\t\t\t\tif ( need_parser_date || need_parser_sec ) {\n\t\t\t\t\t\tparsed_value = -1; // parse date when get value\n\t\t\t\t\t\tif ( !disable_keyup_event ) {\n\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this, true] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( !disable_keyup_event ) {\n\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this, true] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, no_validate_timer_sec );\n\t\t\t} );\n\n\t\t\t$( this ).mouseover( function() {\n\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t$( this ).mouseout( function() {\n\t\t\t\tif ( !$( $this ).is( ':focus' ) ) {\n\t\t\t\t\t$this.hideErrorTip();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).change( function() {\n\t\t\t\t$this.trigger( 'keyup', [$this] );\n\t\t\t\t//#2226 - When datetime or time unit fields specify need_parser_date or need_parser_sec it does not set disable_keyup_event == true. To validate those fields on change we need to check for those values.\n\t\t\t\tif ( disable_keyup_event || need_parser_date || need_parser_sec ) {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t}\n\t\t\t\tif ( !need_parser_date && !need_parser_sec ) {\n\t\t\t\t\t$this.autoResize();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).focusin( function() {\n\n\t\t\t\tif ( !enabled ) {\n\n\t\t\t\t\tif ( !check_box ) {\n\t\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t$( this ).focusout( function() {\n\t\t\t\t$this.hideErrorTip();\n\t\t\t} );\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TTextInput.defaults = {};\n\n} )( jQuery );"],"sourceRoot":""}