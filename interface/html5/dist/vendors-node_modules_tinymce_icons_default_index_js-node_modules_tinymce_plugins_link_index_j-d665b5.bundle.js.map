{"version":3,"sources":["webpack://timetrex/./node_modules/tinymce/icons/default/icons.js","webpack://timetrex/./node_modules/tinymce/icons/default/index.js","webpack://timetrex/./node_modules/tinymce/plugins/link/index.js","webpack://timetrex/./node_modules/tinymce/plugins/link/plugin.js","webpack://timetrex/./node_modules/tinymce/themes/silver/theme.js","webpack://timetrex/./node_modules/tinymce/tinymce.js"],"names":["tinymce","IconManager","add","icons","t","global","util","Tools","resolve","global$1","isType","type","value","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isNull","a","isBoolean","isFunction","assumeExternalTargets","editor","externalTargets","getParam","getDefaultLinkTarget","getTargetList","getRelList","shouldShowLinkTitle","allowUnsafeLinkTarget","getDefaultLinkProtocol","noop","constant","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","constant_a","self","me","f","s","v","elementEq","b","Optional","from","nativeIndexOf","indexOf","nativePush","push","contains","xs","ts","rawIndexOf","flatten","r","i","len","length","apply","findMap","arr","cat","someIf","global$2","getValue","item","sanitizeList","list","extractValue","out","text","title","getText","menu","items","sanitizeWith","extracter","ListOptions","sanitize","createUi","label","__assign","Object","assign","arguments","p","hasOwnProperty","this","keys","internalFilter","obj","pred","onTrue","onFalse","props","k","each$1","has","key","global$3","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","predicate","collapsed","contents","cloneContents","walker","firstChild","elements","current","next","hasProtocol","url","test","href","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","selection","getNode","isImageFigure","dom","select","getParent","getAnchorText","anchorElm","replace","trimCaretContainers","innerText","textContent","getContent","format","hasLinks","grep","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","getRng","nodeType","className","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","target","handleExternalTargets","linkDomMutation","attachState","data","acc","getLinkAttrs","undoManager","transact","attach","focus","setAttribs","updateLink","linkImageFigure","execCommand","insertContent","createHTML","encode","createLink","unwrapOptions","cls","class","_k","link","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","setEndAfter","setRng","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","isListGroup","findTextByValue","catalog","getDelta","persistentText","fieldName","hasPersistentText","meta","DialogChanges","initialData","linkCatalog","persistentData","onUrlChange","getTitleFromUrlChange","onCatalogChange","change","catalogs","anchor","onChange","getData","global$4","global$5","tryEmailTransform","message","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","DialogConfirms","transform","callback","setEditorTimeout","windowManager","confirm","state","delayedConfirm","AnchorListOptions","anchorNodes","anchors","ClassListOptions","getLinkClassList","global$6","LinkListOptions","extractor","convertURL","linkList","getLinkList","send","success","JSON","parse","err","parseJson","error","_","output","then","optItems","RelOptions","initialTarget","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","pData","handleSubmit","settings","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","buttons","primary","_a","newData","setData","makeDialog","spec","open$1","document","createElement","evt","createEvent","initMouseEvent","window","dispatchEvent","removeChild","appendClickRemove","getLink","getSelectedLink","getStart","gotoLink","targetEl","$","scrollIntoView","openDialog","gotoSelectedLink","toggleState","toggler","on","off","toggleActiveState","setActive","mode","isReadOnly","toggleEnabledState","updateState","setDisabled","toggleUnlinkState","hasLinks$1","parents","e","ui","registry","addToggleButton","icon","tooltip","onAction","onSetup","addButton","setupButtons","addMenuItem","shortcut","setupMenuItems","addContextMenu","update","element","setupContextMenu","onSetupLink","buttonApi","addContextForm","launch","hasContextToolbar","initValue","commands","formApi","setAttrib","collapse","collapseSelectionToEnd","hide","setupContextToolbars","metaKeyPressed","preventDefault","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setupGotoLinks","addCommand","useQuickLink","fire","toolbarKey","register","addShortcut","setup","compose","fa","fb","args","_i","identity","curry","fn","initialArgs","restArgs","all","not","die","__rest","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","j","jl","SimpleResultType","typeOf","isObject","isUndefined","isNonNullable","isNullable","isNumber","isArrayOf","nativeSlice","slice","range","num","chunk","array","partition","pass","fail","foldr","eachr","foldl","find","until","findUntil","findIndex","reverse","difference","a1","a2","comparator","copy","get","head","last","from$1","isValue","isError","_opt","_f","onValue","mapError","toOptional","opt","onError","Result","fromOption","res","stype","serror","svalue","Value","SimpleResult","results","values","errors","map$2","tupleMap","tuple","filter$1","objAcc","mapToArray","find$1","get$1","hasNonNullableKey","Adt","cases","constructors","adt","acase","count","keys$1","argLength","match","branches","branchKeys","reqKey","log","console","params","hasOwnProperty$1","baseMerge","merger","objects","ret","curObject","deepMerge","old","nu","merge","cached","called","strict","defaultedThunk","asOption","asDefaultedOptionThunk","mergeWithThunk","defaulted","fallback","mergeWith","base","wrap","bothErrors","firstError","secondError","bothValues","exclude$1","fields","exclude","wrap$1","wrapAll$1","keyvalues","kv","wrapAll","consolidate","objs","partitions","result","partition$2","mergeValues","mergeErrors$1","ResultCombine","mergeValues$1","formatObj","input","stringify","path","getErrorInfo","adt$1","field","strictAccess","missingStrict","fallbackAccess","fallbackThunk","cExtractOne","strength","okey","presence","prop","bundle","av","extract","bundleAsOption","optValue","outcome","ov","optionAccess","optionDefaultedAccess","baseThunk","instantiator","value$1","validator","custom","getSetKeys","objOfOnly","delegate","objOf","fieldNames","extra","unsupported","unsupportedFields","cExtract","_instantiator","arrOf","oneOf","props_1","setOf","validatedKeys","validateKeys","validKeys","vk","anyValue","arrOfObj","chooseFrom","ch","branch","missingBranch","vp","choose","missingKey","chosen","_anyValue","arrOfObj$1","objFields","valueThunkOf","getDelegate","valueOf","setOf$1","asRaw","errs","extraction","errInfo","formatError","asRawOrDie","es","chooseProcessor","choose$1","anyValue$1","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","iter","callbackFn","done","postMessageable","validateEnum","strict$1","strictOf","strictNumber","strictString","strictStringEnum","strictFunction","strictObjOf","objSchema","strictArrayOfObj","strictArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionObjOf","defaulted$1","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","state$1","Cell","initial","set","fromDom","SugarElement","fromHtml","html","scope","div","innerHTML","hasChildNodes","childNodes","fromTag","tag","fromText","createTextNode","fromPoint","docElm","y","elementFromPoint","unknown","nu$1","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$2","detect$1","candidates","userAgent","candidate","search","UaString","browsers","browser","version","oses","os","contains$1","str","substr","endsWith","suffix","start","checkRange","blank","normalVersionRegex","checkContains","uastring","PlatformInfo","edge","chrome","opera","firefox","safari","nu$2","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","ie","windows","android","linux","solaris","freebsd","chromeos","nu$3","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","ios","osx","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","matchMedia","matches","platform","navigator","detect$3","selector","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq$1","e1","e2","ieContains","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","documentPositionContainedBy","contains$2","d1","d2","regularContains","ensureIsRoot","isRoot","ancestor","stop","el","transformed","closest","isSource","component","simulatedEvent","event","nu$4","parts","fuse","handlers","can","handler","all$1","abort","any","run","constant$1","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","click","transitionend","selectstart","prefixName","alloy","tap","postBlur","postPaste","receive","execute","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight","dehighlight","emit","dispatchWith","emitWith","properties","emitExecute","dispatch","getSystem","triggerEvent","derive","configs","prevent","runActionExtra","action","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","c","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute","runOnName","Function","isType$1","isElement","isText","isDocument","isDocumentFragment","owner","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","offsetParent","children","child","index","cs","before","marker","after","nextSibling","append","prepend","append$1","empty","rogue","unwrap","wrapper","children$1","get$2","content","docDom","fragment","createDocumentFragment","contentElements","rawSet","setAttribute","set$1","get$3","getOpt","has$1","hasAttribute","remove$1","removeAttribute","shallow$1","isDeep","cloneNode","clone","getHtml","container","getOuter","events","originator","isRecursive","warn","DefaultEvents","freeze","__proto__","unique","generate$1","prefix","time","Date","getTime","Math","floor","random","idAttr","prefix$1","idAttr$1","writeOnly","defineProperty","writable","read$1","generate$2","make","NoContextApi","getComp","debugInfo","triggerFocus","triggerEscape","build","addToWorld","removeFromWorld","addToGui","removeFromGui","broadcast","broadcastOn","broadcastEvent","isConnected","singleton","cleanParameters","parameters","substring","markAsExtraApi","extraName","endIndex","openBracketIndex","toFunctionAnnotation","premadeTag","premade","comp","makeApi","apiFunction","markAsSketchApi","rest","getApis","NoState","init","nu$5","readState","byInnerKey","indexKey","chain","nu$6","attributes","styles","getCurried","descHandler","cHandler","behaviourTuple","groupByEvents","behaviours","behaviourEvents","behaviour","nameToHandlers","assemble","rawHandler","read","fuse$1","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","missingOrderError","combineGroups","byEventName","assembled","purpose","uncurried","baseBehaviour","toEvents","read$2","attr","supports","classList","add$1","clazz","remove$3","remove$2","add$2","cleanClass","get$4","remove$4","has$2","add$3","remove$5","isSupported","style","getPropertyValue","isShadowRoot","supported","Element","attachShadow","getRootNode","isSupported$1","getContentContainer","getShadowRoot","getShadowHost","host","isOpenShadowHost","shadowRoot","inBody","fbc","fab","doc","internalSet","property","setProperty","internalRemove","removeProperty","set$2","setAll$1","css","setOptions","get$5","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","isValidValue","remove$6","reflow","offsetWidth","get$6","set$3","renderToDom","definition","subject","setAll","innerHtml","domChildren","generateFrom$1","validated","optBlobThunk","blob","config","generateFrom","generate$3","getBehaviours$1","getDomDefinition","bList","bData","defnA","mod","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine","getEvents","baseEvents","combine$1","getMe","systemApi","toInfo","bBlob","getBehaviours","modDefinition","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","buildFromSpec","userSpec","specEvents","build$1","buildSubcomponents","completeSpec","external","extSpec","uids","getPremade","userSpecWithUid","prebuilt","premade$1","Dimension","getOffset","parseFloat","aggregate","parseInt","isNaN","h","max","cumulativeInclusions","getBoundingClientRect","height","offsetHeight","get$7","getOuter$1","left","top","translate","SugarPosition","firstDefinedOrZero","absolute","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","box","boxPosition","api$1","get$8","getOuter$2","fromRawEvent","rawEvent","composed","composedPath","getOriginalEventTarget","stopPropagation","kill","mkEvent","clientX","clientY","binder","useCapture","wrapped","handle","addEventListener","unbind","removeEventListener","get$9","_DOC","to","scrollTo","bounds","width","right","bottom","getBounds","_win","scroll","get$a","clientWidth","clientHeight","visualViewport","pageLeft","pageTop","walkUp","navigation","view","Navigation","frameElement","find$3","d","paths","pathTo","frames","offset","loc","bounds$1","xy","w","absolute$1","position","ClosestOrAncestor","EventConfiguration","ancestor$1","closest$1","closest$2","ancestor$2","descendant$1","querySelector","one","closest$3","manager","ariaId","isAriaPartOf","queryElem","dep","find$4","isPartOf","unknown$3","AttributeValue","eventConfig","processEvent","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","monitorEvent","menuFields","itemFields","itemSchema","_initSize","tieredMenuMarkers","markers","required","onPresenceHandler","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","snapshot","initSize","nu$7","bubble","direction","boundsRestriction","adt$2","southeast","southwest","northeast","northwest","south","north","east","west","restrictions","mapToObject","dir","restriction","getRestriction","eastX","middleX","westX","northY","southY","centreY","southeast$1","bubbles","southwest$1","northeast$1","northwest$1","north$1","south$1","east$1","eastEdgeX","west$1","westEdgeX","all$2","allRtl","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","wrapApi","bName","apiName","markAsBehaviourApi","revokeBehaviour","doCreate","configSchema","schemaSchema","active","getConfig","wrappedApis","apiF","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$1","modeSchema","createModes$1","modes","createModes","branchKey","Receiving","ActivePosition","posConfig","useFixed","focus$1","root","activeElement","preserve","refocus","focused","descend","hasFocus","child_1","oldFocus","newFocus","NuPositionCss","applyPositionCss","addPx","adt$3","relative","fixed","positionWithDirection","posName","decision","decisionX","decisionY","decisionRight","decisionBottom","cata","toBox","origin","viewport$1","pos","outerScroll","box$1","anchorBox","cycleBy","delta","min","clamp","adt$4","fit","nofit","attempt","candidateX","candidateY","bubbleOffsets","bubbleLeft","bubbleTop","adjustedBounds","boundsRestrictions","applyRestriction","bubbleOffset","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","boundsY","boundsBottom","boundsX","boundsRight","newY","newX","boundsWidth","boundsHeight","xInBounds","yInBounds","originInBounds","sizeInBounds","deltaW","abs","deltaH","maxX","maxY","limitX","limitY","calcReposition","upAvailable","downAvailable","maxHeight","middle","cataVertical","westAvailable","eastAvailable","reposition","maxWidth","cataHorizontal","classesOn","classesOff","candidateYforTest","layout","options","elementBox","panelWidth","panelHeight","attemptBestFit","newReposition","newDeltaW","newDeltaH","bestNext","attempts","preference","setMaxHeight","absMax","setMax","anchored","available","expandable","defaultOr","dephault","go","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$8","yoffset","getClasses","xDelta","yDelta","alignmentsOn","alignmentsOff","innerNorthwest","innerNortheast","innerNorth","innerSouthwest","innerSoutheast","innerSouth","innerWest","innerEast","onDirection","isLtr","isRtl","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$1","get$b","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","placer","MakeshiftAnchor","SimRange","soffset","finish","foffset","adt$5","Situ","situ","adt$6","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","relativeToNative","finishSitu","createRange","setStart","setStartAfter","setEndBefore","setEnd","setFinish","exactToNative","toRect","rect","adt$7","fromRange","startOffset","endOffset","diagnose","ranges","rev","doDiagnose","getRanges","api$2","getOption","nodeValue","NodeValue","elementsWithCursorPosition","isCursorPosition","descendantRtl","descendants","querySelectorAll","after$2","makeRange","same","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","focusNode","focus_1","anchorOffset","focusOffset","getExact","getSelection","getNativeSelection","sel","getFirstRect$1","rects","getClientRects","getFirstRect","asLtrRange","point","descendOnce","get$c","adt$8","screen","toFixed","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$2","getRootPoint","frame","frameOwner","compOwner","capRect","newLeft","newTop","newWidth","newHeight","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","descendOnce$1","getAnchorSelection","modStart","modFinish","SelectionAnchor","selectionBox","rawRect","NodeAnchor","nodeBox","eastX$1","westX$1","northY$1","southY$1","southeast$2","southwest$2","northeast$2","northwest$2","all$3","allRtl$1","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","place","anchoring","placee","overrideOptions","simple","positionWithin","posState","boxElement","boundsBox","positionWithinBounds","anchorage","oldVisibility","getRelativeOrigin","placement","doPlace","vis","PositionApis","getMode","pConfig","_pState","PositionSchema","Positioning","fireDetaching","fireAttaching","replaceChildren","newChildren","childComp","detachChildren","deleted","attach$1","attachWith","insertion","doDetach","detach","parent$1","detachChildren$1","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","newState","onOpen","onClose","clear","isOpen","_sandbox","_sConfig","cloak","_sState","sink","cssKey","newValue","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$2","receivingChannel","rawSpec","isExtraPart","fireEventInstead","fe","schema$3","receivingChannel$1","doReposition","onLoad","repConfig","repState","onUnload","RepresentApis","setValue","ActiveRepresenting","resetOnDom","_se","memory","isNotSet","dataset","dataByValue","dataByText","lookup","itemString","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","manual","setValue$1","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","field$1","forbidden","_v","get$d","dump","augment","SketchBehaviours","_placeholder","adt$9","single","multiple","isSubstituted","scan","compSpec","placeholders","uiType","newSpec","subPlaceholder","substitute","req","valueThunk","childSpecs","substituted","valuesThunk","preprocessor","substitutePlaces","ps","ph","replacements","used","substituteAll","placeholder","adt$a","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine$2","partSpec","partValidated","defaults","generate$4","np","g","doGenerateOne","pname","generateOne","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","asRawOrDie$1","partSchemas","partUidsSchemas","baseS","composite","specWithUid","supplyUid","partUidsSchema","hasUid","FocusInsideModes","singleSchema","compositeSchema","single$2","rawConfig","extraApis","configFields","single$1","composite$1","partFields","inside","ComposeApis","getCurrent","composeConfig","_composeState","ComposeSchema","Composing","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight$1","isHighlighted","onHighlight","queryTarget","getByIndex","itemClass","getFirst","_hState","getLast","selected","dest","getCandidates","HighlightApis","dehighlightAll","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","isControl","isNotShift","rule","classification","reportFocusShifting","prevFocus","focusee","highlights","initialState","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$3","cyclicField","isVisible","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","goFromTabstop","stopIndex","cycle","useTabstopAt","isTabstop","cyclic","findCurrent","tabstop","navigate","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$4","execute$1","executeConfig","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","useH","movement","move","use","west$2","moveLeft","moveRight","east$2","useV","north$2","south$2","isHidden","locateVisible","locate","findIndex$1","withGrid","numCols","address","newIndex","row","column","cycleHorizontal","oldRow","oldColumn","colsInRow","newColumn","cycleVertical","newRow","newCol","schema$5","gridConfig","_gridState","first","doMove","gridState","identified","handleTab","captureTab","moveNorth","moveSouth","getKeydownRules$1","getKeyupRules$1","FlatgridType","horizontal","tryCycle","schema$6","execute$3","flowConfig","findCurrent$1","focusIn$1","_state","getInitial","moveLeft$1","moveRight$1","doMove$1","flowState","executeOnMove","doEscape$1","getKeyupRules$2","FlowType","_flowState","westMovers","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal$1","startCol","deltaCol","newColIndex","cycleVertical$1","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$7","focusIn$2","matrixConfig","previousSelector","selectors","doMove$2","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","rows","toMatrix","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$3","getKeyupRules$3","MatrixType","schema$8","execute$5","menuConfig","focusIn$3","moveUp$1","moveDown$1","getKeydownRules$4","menuState","moveOnTab","getKeyupRules$4","MenuType","schema$9","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","flatgrid$1","execution","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","insert","replaceConfig","childSpec","remove$7","replaceState","removee","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","Replacing","appendee","prependee","replaceBy","replaceePred","eventHandlers","events$4","focus$2","focusConfig","ignore","onFocus","FocusApis","blur","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","ariaInfo","aria","updateClass","toggleClass","toggle","set$6","on$1","onLoad$4","ToggleApis","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$7","optAction","hoverEvent","focusEvent","onHover","hover","focus$3","schema$a","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$b","schema$c","components$1","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$1","separator","parts$1","itemInfo","builder","unit","fakeFocus","schema$d","grid","movementInfo","rowSelector","focus$4","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","generate$5","menus","expansions","menuItems","menuPaths","_triggerItem","extractPreparedMenu","prep","LayeredState","directory","getTriggerData","menuValue","getItemByValue","getPreparedMenu","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","expand","refresh","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","extraPath","revPath","menuIndex","collapseItem","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","componentMap","primaryName","makeSketch","nbMenu","buildMenus","toDirectory","getItemValue","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX$1","middleX$1","eastEdgeX$1","northY$2","southY$2","southeast$3","southwest$3","northeast$3","northwest$3","north$3","south$3","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","record","isSketchSpec","anyInSystem","asSpec","defaultIcon","get$e","getFirst$1","notificationIconMap","warning","Notification","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","text$1","banner","iconChoices","level","memButton","iconProvider","closeButton","NotificationManagerImpl","extras","uiMothership","backstage","closeCallback","hideCloseButton","timeout","notificationWrapper","notification","progressBar","shared","providers","getSink","header","isPositionedAtTop","setTimeout","moveTo","moveRel","layoutDirection_1","getLayoutDirection","nodeAnchor","nuText","getEl","notifications","prePositionNotifications","firstItem","positionNotifications","getArgs","ItemResponse","last$2","rate","timer","cancel","clearTimeout","throttle","repeatLeft","process","rootNode","isBlock","getContentEditable","isBoundary","backwards","create$4","detect$4","getDoc","extractContents","insertNode","normalize","last$1","setCursorLocation","getEnd","isWhitespace","chr","stripTriggerChar","triggerCh","findStart","initRange","minChars","getRoot","char","charAt","findChar","spot","lastIndexOf","triggerChar","getContext","createRng","selectNode","AutocompleterEditorEvents","onKeypress","redirectKeyToItem","getItem","getView","isActive","cancelIfNecessary","isMenuOpen","stopImmediatePropagation","isProcessingAction","point$1","toLast","isText$1","toLeaf","isElement$1","isStartOfWord","leaf","isPreviousCharContent","getDatabase","database","triggerChars","getTriggerContext","context","lookupWithContext","fetchOptions","startText","autocompleters","lookupByChar","autocompleter","lookupData","ac","fetch","maxResults","matchText","columns","highlightOn","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","popups","getAll","popup","stringArray","datasetValues","dv","ToolbarMode","ItemResponse$1","navClass","selectableClass","colorClass","presetClasses","normal","color","tickedClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","markers$1","menuClasses","dom$1","chunk$1","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$2","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","fancyMenuItemSchema","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","ceil","namedEvents","SimpleBehaviours","TooltippingSchema","TooltippingState","clearTimer","getTooltip","isShowing","setTooltip","clearTooltip","resetTimer","delay","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","Tooltipping","tooltipConfig","tooltipDom","tooltipComponents","show","nativeDisabled","onLoad$5","disableConfig","disableState","disabled","disable","enable","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","ActiveDisable","DisableSchema","Disabling","global$7","getHeightSetting","getElement","getWidthSetting","DOM","getStyle","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerElement","fixedContainerSelector","inline","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","setupReadonlyModeSwitch","setMode","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","global$8","convertText","mac","alt","ctrl","shift","access","updated","segment","renderIcon","iconHtml","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderItemDomStructure","rtlClass","ariaLabel","domTitle","rtlIcon","rtlTransform","renderItemStructure","providersBackstage","renderIcons","fallbackIcon","iconName","needRtlClass","iconContent","textRender","itemText","iconSvg","providerBackstage","baseDom","renderColorStructure","leftIcon","checkmark","checkMark","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","sharedBackstage","tooltipWorker","_tooltip","replaceText","encoded","encodeText","escapedMatchRegex","RegExp","escapeRegExp","parts$2","hexColour","shorthandRegex","longformRegex","isHexString","hex","extractValues","longForm","m","getLongForm","splitForm","exec","toHex","fromRgba","rgbaColour","red","green","blue","round","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","fromStringValues","rgba","fireResizeContent","global$9","storageName","choiceItem","defaultColors","colorCache","storageString","localstorage","cache","idx","splice","unshift","pop","setItem","ColorCache","hasCustomColors","getColors","unmapped","getColorMap","colorMap","colors","canvas","ctx","byteAsHex","colorByte","alphaByte","toUpperCase","asHexColor","clearRect","fillStyle","fillRect","getImageData","mapColors","addColor","getColorCols$1","defaultCols","getColorCols","sqrt","calcCols","applyColor","onChoice","colorPickerDialog","dialog","colorOpt","getColors$1","hasCustom","getAdditionalColors","getFetch","setIconColor","splitButtonApi","newColor","pathId","setIconFill","setIconStroke","registerTextColorButton","lastColor","addSplitButton","getCurrentColor","currentRgb","rgbaString","rgbMatch","rgbaMatch","fromString","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","colorpicker","submit","getOnSubmit","details","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","_api","renderChoiceItem","deriveMenuMovement","menuMarkers","FocusMode","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","se","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","inserttable","sizeLabelId","makeCells","memLabel","selectedRow","selectedColumn","selectCells","colorswatch","colorinput","widgetSpec","render","directionClass","alignClass","align","valign","getValignClass","renderContainer","src","renderImage","cardText","autocomplete","nested","downwardsCaret","renderSubmenuCaret","toggle$1","fancy","valueOpt","card","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","createToggleMenuItem","createSeparatorMenuItem","createFancyMenuItem","createAutocompleteItems","createCardMenuItem","createAutocompleterItem","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","hideIfNecessary","lastElement","getAutocompleters","display","matchLength","ld","focusMode","ContentFocus","createMenuFrom","newContext","doLookup","lookupInfo","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","autocompleterUiApi","filter$2","bind$3","bind$2","capture$1","capture","fromRawEvent$1","closest$4","DelayedFunction","fun","ref","schedule","getTouch","touches","monitor","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","settingsSchema","setup$1","rawSettings","tapEvent","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","stopBackspace","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive$2","rawTarget","adt$b","stopped","resume","complete","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","listeners","_logger","fromExternal","listener","triggerOnUntilStopped","EventRegistry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","Registry","readOrTag","unregister","tagId","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","destroy","schema$e","parts$3","excludeFactory","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","global$a","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderCollection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","htmlLines","mapItemName","encodeAllRaw","schema$f","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","dom$2","inputAttributes","inputStyles","inputClasses","Input","exports$1","module","exports","define","require","amd","EphoxContactWrapper","code","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","runClearTimeout","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","Promise","TypeError","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","finale","thisArg","_unhandledRejectionFn","Handler","reason","ex","prom","remaining","race","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","Global","boltExport","HighlightOnOpen","nu$a","baseFn","callbacks","nCallback","isReady","cbs","LazyValue","pure","errorReporter","make$3","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","validate","run$1","onValidate","valid","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","Coupling","coupled","partType","getAnchor","getHotspot","getAnchorOverrides","mapFetch","onOpenSync","highlightOnOpen","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","close$1","_onOpenSync","_highlightOnOpen","togglePopup","matchWidth","useMinWidth","buttonWidth","set$4","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox","ariaOwner","sandboxClasses","sandboxBehaviours","sandboxFields","schema$g","parts$4","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","colorButton","_field","hsvColour","fieldsUpdate","sliderUpdate","paletteUpdate","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","SliderParts","getValueFromEvent","spectrum","sliderChangeEvent","getEventSource","isTouchEvent","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","range$2","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xValue","yValue","xyValue","fireSliderChange","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue","maxOffset","centerMinEdge","centerMaxEdge","getBounds$1","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$1","sliderValue","findValueOfOffset","handleMovement","moveBy","findPositionOfValue","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","HorizontalModel","sliderVal","setToMin","setToMax","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$2","sliderValue$1","findValueOfOffset$1","handleMovement$1","moveBy$1","findPositionOfValue$1","findOffsetOfValue$2","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange$3","sliderValue$2","handleMovement$2","isVerticalMovement","moveBy$2","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","changeValue","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","getInitialValue","onInit","resetToMin","resetToMax","sliderFactory","getClass","_thumb","owner$3","schema$h","getPartName","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","onValidHexx","onInvalidHexx","invalidation","isValid","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","setValueRgb","onInvalidInput","onValidRgb","hexField","copyRgbToHex","onValidInput","isHexInputEvent","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","paletteFactory","_translate","spectrumPart","thumbPart","setColour","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_slider","setRgba","_apis","setSliderColour","makeFactory","updates","rgbForm","onInvalidHex","sbPalette","paletteRgba","memPalette","memRgb","updatePalette","palette","updateFields","runUpdates","hsvColour$1","minRGB","maxRGB","fromRgb","newHsvColour","nuHex","calcHex","sliderUpdates","ComposingConfigs","mem","english","translate$1","getEnglishText","global$b","global$c","processors","withComp","optInitialValue","getter","setter","withElement","RepresentingConfigs","rawProcessors","other","rawValue","postprocess","renderDropZone","actions","onDrop","transferEvent","handleFiles","dataTransfer","files","onSelect","allowedImageFileTypes","explode","getSetting","file","filterByExtension","memInput","accept","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","onFocus$1","targetComp","isPseudoStop","platformNeedsSandboxing","renderIFrame","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","contentWindow","getDynamicSource","create$5","resize","clone$1","tCanvas","get2dContext","drawImage","getWidth","image","naturalWidth","getHeight","naturalHeight","Promise$1","anyWindow","asap","immediateFn","catch","values_1","dataUriToBlob","uri","mimetype","base64","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlobSync","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","blobToCanvas","blobUrl","URL","createObjectURL","Image","removeListeners","loaded","blobToImage","revokeObjectURL","revokeImageUrl","create$6","getCanvas","initialType","toAdjustedDataURL","canvasToDataURL","getType","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","reader","FileReader","onloadend","readAsDataURL","blobToDataUri","fromCanvas","clamp$1","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","colorFilter","ir","applyMatrix","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","pixels","putImageData","applyColorFilter","convoluteFilter","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","pixelsIn","pixelsOut","applyConvoluteFilter","complexAdjustableColorFilter","matrixAdjustFn","adjust","kernel","colorFn","invert","basicColorFilter","contrast","colorize","adjustR","adjustG","adjustB","adjustColors","sharpen","gamma","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","rotate","angle","translateX","translateY","PI","applyRotate","flip","axis","applyFlip","crop","applyCrop","_a$1","invert$1","sharpen$1","gamma$1","brightness$1","contrast$1","flip$1","resize$2","newCanvas","resize$1","rotate$1","renderIcon$1","renderIconFromPack","iconsProvider","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayIcon","separator$1","unwrapReferences","realItems","isMenuItemReference","getFromItem","isExpandingMenuItem","submenuItems","getFromExpandingItem","itemWithValue","generateValueIfRequired","build$2","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch$1","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","renderDialogButton","schema$i","coupledPart","selfName","otherName","lock","onLockedChange","parts$5","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","makeRatioConverter","currentFieldText","otherFieldText","oa","ob","cValue","oValue","cSize","oSize","ratioSizeConversion","renderSizeInput","converter","ratioEvent","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","optCurrent","optOther","value1","value2","internal","undo","redo","zoom","back","swap","tempTransform","transformApply","saveState","disable$1","enable$1","external$2","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","button","createSpacer","createApplyButton","makeCropTransform","getRect","crop$1","cropPanelComponents","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","makeResizeTransform","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","colorize$1","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","global$d","global$e","global$f","global$g","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","startX","startY","handleElement","getElementById","drag","deltaX","screenX","deltaY","screenY","cursor","docSize","scrollWidth","scrollHeight","getDocumentSize","handleElm","runtimeStyle","zIndex","opacity","appendTo","CropRect","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","instance","setInnerRect","repaint","updateElementRect","setRect","relativeRect","blocker","activeHandle","moveAndBlock","SPACEBAR","extend","toggleVisibility","setClampRect","getInnerRect","setViewPortRect","helper","renderImagePanel","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","panelW","panelH","bg","cRect","updateSrc","aImg","lastViewRect","viewRect","inflate","zoomFit","newRect","currentZoom","newZoom","setButtonEnabled","enabled","Delimiter","makeState","blobState","tempState","undoStack","canUndo","canRedo","removed","UndoStack","setBlobState","createState","destroyState","destroyTempState","addBlobState","states","getBlobState","getTempState","temp","updateTempState","newTempState","addTempState","applyTempState","postApply","currentState","getHistoryStates","undoEnabled","redoEnabled","renderImageTools","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","block","unblock","editPanel","applyButton","blobManipulate","blobToImageResult","oImg","manipulate","currentUrl","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","attemptSelectOver","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","itemExecute","schema$j","parts$6","previewing","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap$2","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","nu$c","worker","FutureResult","separator$2","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","getLinkInformation","history","historyTargets","getHistory","errorId","make$6","factories","bar","interpreter","renderBar","collection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel$2","iframe","iframeSpec","makeIframe","checkbox","repBehaviour","toggleCheckboxHandler","makeIcon","memIcons","renderCheckbox","colourPickerFactory","memPicker","picker","dropzone","renderGrid","listbox","initialItem","listBoxWrap","sketchSpec","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","updateHistory","urlEntry","addToHistory","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","scriptUrl","ea","cvalue","ed","htmlpanel","imagetools","table","renderTh","renderTd","renderTr","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","hasCustomColors$1","getColors$2","getColorCols$2","ColorInputBackstage","isDraggableModal$1","isDraggableModal","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isInlineFormat","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","formatter","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$3","doEnrich","newItems_1","enrichMenu","getStyleItems","enrichSupported","formatName","customSpec","newItem","enrichCustom","init$7","parseStyle","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","trim$1","hasContentEditableState","contentEditable","isContentEditableTrue","isContentEditableFalse","create$8","getElementText","isValidAnchor","isEditable","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","getTargetElements","hasTitle","LinkTargets","elms","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","makeMap","getPicker","getFilePickerCallback","getPickerSetting","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","types","getPickerTypes","getTextSetting","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","entry","init$8","contextMenuState","getDockingMode","setDockingMode","HeaderBackstage","interpretWithoutForm","styleselect","isContextMenuOpen","setContextMenuState","expandable$1","setMax$1","hideContextToolbarEvent","schema$k","parts$7","Toolbar","getGroupContainer","shell","toolbarBehaviours","setGroups","groups","output$1","within","withinWidth","apportion","total","parray","toUnit","partition$3","overflower","divide","tryFit","fits","fitLast","overflow","fitAll","storedGroups","bGroups","setOverflow","overflowGroup","builtGroups","focusedComp","focusedElm","availableWidth","overflows","schema$l","schema$m","parts$8","schema$n","parts$9","toggledClass","toggle$2","toolbarSandbox","position$2","bounder","setGroups$1","FloatingToolbarButton","makeSandbox$1","getToolbar","schema$o","parts$a","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isCollapsed","isTransitioning","toggleGrow","ActiveSliding","propertyName","onGrown","SlidingSchema","Sliding","schema$p","parts$b","onClosed","onOpened","toggleToolbar","overf","refresh$3","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","isOpen$1","toolbarHeightChange","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","headerElem","moreDrawerData","lazyHeader","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","channel","rawData","ReflectingApis","reflectState","ReflectingSchema","Reflecting","optS","schema$q","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$c","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","rtlIcon$1","rtlTransform$1","renderCommonStructure","_d","getIconName","needsRtlClass","renderCommonToolbarButton","specialisation","itemApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","runOnExecute$1","getFormApi","generateOne$1","bridged","renderContextToggleButton","renderContextButton","buildInitGroups","findPrimary","mementos","asSpecs","compInSystem","generate$7","ContextForm","getContextToolbarBounds","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","contentBoxWidth","maxViewportWidth","getHorizontalBounds","_b","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","matchStartNode","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchAncestor","startNode","scopes","ancestorElem","inNodeScope","findPosition_1","filterByPositionForAncestorNode","categorise","forms","inEditorScope","formNavigators","lookupTable","registerForm","contextForm","registerToolbar","contextToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","generateSelectItems","_editor","generateItem","rawItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","setInitialValue","getComponent","nodeChangeHandler","decimalDigits","exponentPart","unsignedDecimalLiteral","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","command","getSpec","updateSelectMenuIcon","alignment","_format","canApply","systemStackFonts","splitFonts","fontFamily","fonts","font","getSpec$1","getMatchingValue","getFirstFont","queryCommandValue","matchOpt","isSystemFontStack","updateSelectMenuText","legacyFontSizes","keywordFontSizes","toPt","fontSize","precision","factor","round$1","getSpec$2","_loop_1","pt","legacy","toLegacy","Space","findNearest","getStyles","revocable","doRevoke","isSet","destroyable","unbindable","onSetupFormatToggle","boundCallback","formatChanged","initialized","onActionToggleFormat","getSpec$3","getSpec$4","getFormatItems","flattenedItems","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","buttonComp","_c","renderSplitButton","grouptoolbarbutton","TopToBottom","floating","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","createToolbar","toolbarConfig","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","lookupButton","toolbarItem","prefixes","extractFrom","toolbarGroups","bubbleAlignments$1","anchorOverrides","desktopAnchorSpecLayouts","mobileAnchorSpecLayouts","register$4","registryContextToolbars","contextbar","currentWidth","newContents","oldContents","forwardContents","shouldContextToolbarHide","nodeBounds","diffTop","aTop","aBottom","bTop","bBottom","lastElementBounds","ele","contextToolbarBounds","forceHide","hideOrRepositionIfNecessary","lastAnchor","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","allButtons","toolbarType","default","buildContextToolbarGroups","buildContextMenuGroups","launchContext","getAnchorLayout","sElem","launchContextToolbar","rootElem","isOutsideRoot","lookup$1","parts$d","partType$1","schema$r","itemsPart","parts$e","name$2","CustomList","_external","getListContainer","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","setup$4","isDocked","getBehaviours$2","StaticHeader","getOffsetParent","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPosition","revertToOriginal","setInitialPosition","offsetBox_1","_left","_top","_right","_bottom","morphToFixed","getModes","storePrior","winBox","top_1","isTop","getMorph","morphToOriginal","morphToStatic","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextual","contextInfo","lazyContext","isPartiallyVisible","setVisible","resetInternal","setDocked","getMorphToOriginal","morph","refresh$4","lazyViewport","refreshInternal","reset","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","DockingState","docked","visible","initialBounds","Docking","visibility","editorStickyOnClass","editorStickyOffClass","updateIframeContentFlow","parentElem","padding","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","getBehaviours$3","runOnSinkElement","onDockingSwitch","additionalBehaviours","getIframeBehaviours","headerHeight","boxHeight","topBound","focusedElem","ownerDoc","activeElm","rootElm","findFocusedElem","StickyHeader","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","owner$4","schema$s","getPartName$1","make$7","getSlotNames","onSlot","def","slot","doShowing","_key","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","createSidebar","sidepanel","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","fromHtml$2","getAttrs","renderSpinner","setup$7","lazyThrobber","throbberState","toggleThrobber","timerId","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","sliding","toolbarFactory","renderer","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","menuData","removedMenuItems","getRemovedMenuItems","itemName","removedMenuItem","make$8","fireSkinLoaded$1","_skinLoaded","fireSkinLoaded","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUrl","loadShadowDomUiSkins","loadSkin","isInline","skin","skinName","documentBaseURI","baseURL","getSkinUrl","contentCSS","isSkinDisabled","fireSkinLoadError","fireSkinLoadError$1","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","fireScrollContent","elementLoad","setupEvents","socket","limit","unbinder","_ui","addQueryValueHandler","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getHeightWithFallback","baseHeight","minHeight","getHeight$1","getWidth$1","baseWidth","minWidth","InlineHeader","targetElm","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","newMode","toolbar_1","toolbarHeight","docHeight","calcMode","verticalDir","setupMode","addClass","removeClass","getTargetPosAndBounds","Inline","toolbarPersist","isToolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","requestAnimationFrame","setupEvents$1","nodeChanged","register$6","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","toggleFormat","registerButtons$1","_idx","name_1","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","register$8","registerMenuItems","toggleUndoRedoState","checkState","onUndoStateChange","register$9","registerMenuItems$1","registerButtons$2","unsupportedLength","pattern","dot","accepted","unitRaw","check","isUnit","normaliseLineHeight","normalise","getLineHeights","getLineHeightFormats","Map","lastApi","register$b","registerMenuItems$3","addMenuButton","registerButtons$3","setup$8","cmd","alignNoneToolbarButton","register$5","applyFormat","removeFormat","registerCommands","lastForeColor","lastBackColor","register$1","registerToolbarButton","addToggleMenuItem","hasVisual","onVisualAid","toggleVisualAidState","registerMenuItems$2","register$a","queryCommandState","onNodeChange","toggleOutdentState","registerButtons","register$7","nu$d","isTouchEvent$1","transposeContentAreaContainer","containerPos","getPos","dx","dy","transpose$1","getPointAnchor","pageX","pageY","fromPageXY","fromClientXY","getSelectionAnchor","getNodeAnchor$1","initAndShow","buildMenu","contextmenu","useNodeAnchor","anchorSpec","bubbleAlignments$2","getPointAnchorSpec","initAndShow$1","openiOS_1","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","getContextMenu","defaultItems","contextMenus","getMenuItems","isSeparator$1","separator$3","makeContextItem","addContextMenuGroup","groupItems","isTriggeredByKeyboard","pointerType","getSelectedElement","setup$9","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAvoidOverlapSelector","shouldUseNodeAnchor","selectedElement","sections","allItems","generateContextMenu","hideEvents","adt$c","subtract","add$4","transform$1","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","absolute$3","fixed$1","parseAttrToInt","NaN","getCoords","snapInfo","snapsInfo","leftAttr","topAttr","get$f","moveOrSnap","newCoord","mustSnap","findClosestSnap","findSnap","fixedCoord","set$8","spanned","stopDrag","findMatchingSnap","snaps","sensor","coord1","coord2","withinRange","getSnapPoints","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","scroll_1","origin_1","snapPin","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$t","getCurrentCoord","oc","location","calcNewCoord","optSnaps","currentCoord","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcStartData","move$1","dragState","dragMode","dragStartData","getStartData","dlt","onDrag","dragBy","updateStartState","setStartData","MouseData","events$g","stop$1","delayDrop","dragApi","drop","forceDrop","init$c","schema$u","TouchData","getDataFrom","events$h","blockerCell","init$d","mouse","mouseOrTouch","Dragging","dragger","previous","dragEvent","nuData","calculateDelta","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$a","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","resize$3","resizeType","originalHeight","originalWidth","Both","getDimensions","dim","fireResizeEditor","isHidden$1","renderElementPath","newPathElements","divider","newPath","parent_1","isDefaultPrevented","isPropagationStopped","updatePath","_btn","newAcc","renderStatusbar","getTextComponents","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","None","Vertical","getResizeType","renderResizeHandlerIcon","getComponents","setup$b","sinkSpec","reactiveWidthSpec","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","isUiContainerInBody","dirAttributes","verticalDirAttributes","resizeUiMothership","memAnchorBar","throbber","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","border","addQueryStateHandler","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onWindowScroll","onWindowResize","onEditorResize","setup$3","setEditorSize","parsedHeight","parsedWidth","getWidthWithFallback","renderUI","sidebars","handleToggle","setup$6","getToolbarGroups","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","getUi","broadcastAll","schema$x","basic","parts$f","dragBlockClass","getDragBounds","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingSchema","Blocking","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","defaultedPostMsg","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","desc","getP","thunkOf","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema$3","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","optionArrayOf","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","extract$1","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","vals","TabButton","tabButtonBehaviours","schema$y","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$g","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","schema$z","barPart","tabs","viewPart","parts$h","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","allTabs","smartTabHeight","extraEvents","tabviewComp","maxTabHeightOpt","heights","getMaxHeight","_tab","measureHeights","oldHeight","naiveTabHeight","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","tabMode","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialog","currentDialogInit","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","makeButton","lookupByName","buttonName","lookup$2","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","prevData","mergedData","newInternalData","dialogState","validateData","tabSection","dialogInit","renderDialog$1","bodySpec","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","getDialogSizeClasses","outerForm","renderInlineDialog","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","global$h","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","renderIframeBody","iframeUri","base_uri","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","handleMessage","isCustomMessage","onMessage","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","setup$e","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$c","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$d","openModalUrlDialog","openModalDialog","internalInitialData","openInlineDialog","config$1","refreshDocking","dialogUi","inlineDialogComp","isAlertOrConfirmDialog","alert","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","eqString","eqArray","eqa","eqSortedArray","compareFn","contramap","eqRecord","kx","ky","q","eqAny","tx","isEquatableType","map$1","bifilter","isArray$1","each$2","l","indexOf$1","reduce","iteratee","accumulator","startsWith","lTrim","rTrim","platform$1","webkit","fileApi","windowsPhone","Env","gecko","iOS","transparentSrc","caretAfter","documentMode","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp","walk","delim","hasOwn","exts","ext","sp","scn","de","cn","ns","createNS","onCreate","_addCacheSuffix","toArray$1","recurse","is$1","eq$2","prevSibling","previousSibling","prevSiblings","nextSiblings","lastChild","getStyleContainer","getHead","intoView","alignToTop","scrollIntoViewIfNeeded","isNodeType","isRestrictedNode","getPrototypeOf","matchNodeNames","lowercasedNames","matchStyleValues","computed","attrName","isBogus","isTable","tagName","isTextareaOrInput","isComment$1","isDocument$1","isDocumentFragment$1","isBr","isImg","isTableCell","isMedia","browser$1","firstElement","nodes","hasChild","caption","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","module$1","par","asyncValues","asyncValue","unite","requestAnimationFramePromise","child$1","descendant","promiseObj","wrappedSetTimeout","wrappedSetInterval","debounce","func","Delay","requestAnimationFrameFunc","vendors","setEditorInterval","StyleSheetLoader","documentOrShadowRoot","idCount","loadedStates","edos","maxLoadTime","failure","urlWithSuffix","passed","failed","getOrCreateState","onload","onerror","waitForWebKitLinkLoaded","waitCallback","styleSheets","ownerNode","testCallback","now","linkElem","contentCssCors","referrerPolicy","loadF","styleContainer","loadAll","urls","futures","unloadAll","_setReferrerPolicy","attrValue","WeakMap","forElement","referenceElement","rootDom","sl","DomTreeWalker","prev2","shallow","findSibling","findPreviousNode","startName","siblingName","sibling","lazyLookup","isHeading","isBr$1","isTextBlock","isList","isListItem","isTableSection","isTableCell$1","isWsPreserveElement","nbsp","ZWSP","isZwsp$1","trim$2","isElement$2","isText$2","isCaretContainerBlock","isCaretContainerInline","isCaretContainer","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","insertBlock","blockName","br","blockNode","startsWithCaretContainer","endsWithCaretContainer","showCaretContainerBlock","caretContainer","brs","getElementsByTagName","lastBr","isContentEditableTrue$1","isContentEditableFalse$1","isBr$2","isText$3","isInvalidTextElement","isAtomicInline","isTable$2","isCaretContainer$1","isCaretCandidate","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","hasWhitespacePreserveParent","rootElement","isContent","isNamedAnchor","isBookmark","isBogus$1","isBogusAll$1","isEmpty","skipBogus","brCount","isEmptyNode","isInlineContent","isBookmarkNode","isSpan","isKeepTextNode","prevIsInline","nextIsInline","surroundedByInlineContent","trimNode","currentChildren","isDocument$2","isKeepElement","makeMap$1","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","128","130","131","132","133","134","135","136","137","138","139","140","142","145","146","147","148","149","150","151","152","153","154","155","156","158","159","baseEntities","'","reverseEntities","buildEntitiesLookup","radix","entity","fromCharCode","namedEntities","encodeRaw","encodeNumeric","encodeNamed","entities","Entities","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","nativeDecode","mapCache","dummyObj","makeMap$2","each$3","extend$1","explode$1","compileElementMap","Schema","patternElements","customElementsMap","specialElements","createLookupTable","defaultValue","extendWith","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","script","compileSchema","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","custom_elements","valid_children","extended_valid_elements","dd","dt","li","th","tr","tbody","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getValidClasses","getBlockElements","getInvalidStyles","getShortEndedElements","getTextBlockElements","getBoolAttrs","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","isValidChild","attrPatterns","getCustomElements","support","Expr","isXML","tokenize","compile","outermostContext","sortInput","hasDuplicate","setDocument","document$1","documentIsHTML","rbuggyQSA","rbuggyMatches","contains$3","Styles","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","encodingItems","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","allow_svg_data_urls","lastIndex","serialize","serializeStyles","styleList","i_1","styleMap","mouseEventRe","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","returnFalse","returnTrue","addEvent","attachEvent","removeEvent","detachEvent","fix","originalEvent","srcElement","isMouseEvent","eventDoc","cancelBubble","isImmediatePropagationStopped","hasIsDefaultPrevented","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","relatedTarget","ci","eventMap","parentWindow","clean","Event","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","push_native","indexOf$2","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","seed","nid","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","checkNonElements","doneName","xml","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","elems","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","attrId","tmp","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","excess","unquoted","nodeNameSelector","operator","what","forward","ofType","nodeIndex","useCache","pseudo","matched","lang","elemLang","hash","tabIndex","selectedIndex","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","matcherFromGroupMatchers","token","compiled","push$1","slice$1","rquickExpr$1","skipUniques","isDefined","isString$1","createFragment","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","whiteSpaceRegExp$2","trim$3","each$4","hook","removeAttr","camel","dashed","currentStyle","prependTo","replaceWith","wrapInner","classState","existingClassName","trigger","object","sibling$1","firstSibling","contentDocument","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","sub","each$5","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","findNodeIndex","normalized","lastNodeType","DOMUtils","_this","addedStyles","counter","boundEvents","ownEvents","$$","defaultVal","getAttribs","originalValue","onSetAttrib","attrElm","root_element","getPos$1","getSize","collect","selectorVal","_findSib","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","oldElm","replaceChild","isNonEmptyElement","rv","stdMode","boxModel","deep","clone_1","getViewPort","argWin","getPrev","outHtml","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","cssText","serializeStyle","addStyle","styleElm","styleSheet","loadCSS","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","rgbVal","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","getContentEditableParent","isChildOf","dumpRng","keepValues","keep_values","keepUrlHook","setupAttrHooks","DOMUtils$1","each$6","grep$2","ScriptLoader","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","currentCode","getLanguageData","I18n","setCode","newCode","getCode","langData","translation","getLangData","textstr","removeContext","isTokenised","$1","$2","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","dependencies","createUrl","baseUrl","resource","addOnUrl","urlString","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","AddOnManager$1","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","an","newStart","getAttr","findMarkers","_registry","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","annotations","fireNoAnnotation","fireCallbacks","serializer","addNodeFilter","spans","identifyParserNode","persistent","TextWalker","TextSeeker","isBlockBoundary","newOffset","forwards","lift2","clone$2","toStart","isValidOverflow","overflowY","rect1","rect2","halfHeight","containsXY","getSelectedNode","extendingChars","isExtendingChar","isElement$3","isCaretCandidate$1","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$3","resolveIndex","isWhiteSpace","isRange","isHiddenWhiteSpaceRange","isZeroRect","clientRect","clientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","beforeNode","addUniqueAndValidRect","addCharacterOffset","CaretPosition","toRange","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","HDirection","CaretPosition$1","trimEmptyTextNode","rangeInsertNode","insertFragment","isText$5","isBogus$2","nodeIndex$1","normalizedParent","getChildNodes","equal$1","createPathItem","numTextFragments","normalizedNodeIndex","outputOffset","normalizedTextOffset","resolve$1","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$2","getPoint","trimmedOffset","getNormalizedTextOffset","findIndex$2","moveEndPoint","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","getLocation","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","getCaretBookmark","getRangeBookmark","getUndoBookmark","DOM$1","getBodySetting","bodyObj","getContentSecurityPolicy","getForcedRootBlock","getForcedRootBlockAttrs","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isElement$4","isText$6","removeNode","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","removeElementAndReposition","newPosition","removeTextCaretContainer","removeTextAndReposition","removeAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$3","isMedia$1","isTableCell$2","getAbsoluteClientRect","scrollX","scrollY","rootRect","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","startBlink","textNode","splitText","insertInline","isInlineFakeCaretTarget","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$4","isMedia$2","isBlockLike","isCaretContainer$2","isCaretContainerBlock$1","isElement$5","isCaretCandidate$2","isForwards","isBackwards","skipCaretContainers","findNode","predicateFn","isCefOrCaretContainer","getParentBlock","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$1","normalizeRange","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","expected","isContentEditableFalse$5","isText$7","isElement$6","isBr$4","isCaretCandidate$3","isAtomic$1","isAtomicContentEditableFalse","isEditableCaretCandidate$1","nodeAtIndex","getCaretCandidatePosition","findCaretPosition","startPos","nextNode","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","CaretWalker","Backwards","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","shouldSkipPosition","fromPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID","isCaretNode","getParentCaretContainer","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","resolve$2","isPathBookmark","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","resolveIndex$1","isRangeBookmark","getBookmark$1","isBookmarkNode$1","isNbsp","actual","isWhiteSpace$1","isContent$1","isNode","moveStart","isInlineBlock","isWhiteSpaceNode","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","allowSpaces","replaceVars","vars","isEq","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$1","areSimilarFormats","otherFormatName","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal","isBookmarkNode$2","getParents$2","isWhiteSpaceNode$1","isTextBlock$2","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","clampToExistingChildren","walk$1","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","siblings_1","startPoint","endPoint","getCellsFromRanges","getSelectedNodes","getCellsFromElementOrRanges","selectedCells","getCellsFromEditor","getSel","getFirstChildren","getLastChildren","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint$1","hasAnyRanges","runOnRanges","fakeSelectionNodes","fakeNodeRng","fillBookmark","wrapName","isZeroWidth","isAnnotation","makeAnnotation","eDoc","decorate","master","annotate","newWrappers","finishWrapper","processElements","processElement","processNodes","annotateWithBookmark","initialRng","hasFakeSelection","applyWordGrab","selectionRng","Annotator","annotationChanged","nodesAlready","findAll","BookmarkManager","BookmarkManager$1","getContentEditableRoot","isXYWithinRange","VK","DELETE","END","HOME","modifierPressed","isContentEditableFalse$6","ControlSelection","selectedElmGhost","resizeHelper","selectedHandle","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","editableDoc","rootDocument","resizeHandles","nw","ne","sw","isImage","contextMenuSelectImage","isEventOnImageOutsideRange","getResizeTarget","isResizable","setGhostElmSize","ghostElm","resizeGhostElement","resizeHelperX","resizeHelperY","getResizeImgProportional","selectedElmX","selectedElmY","fireObjectResizeStart","endGhostResize","wasResizeStarted","setSizeProp","showResizeRect","fireObjectResized","hideResizeRect","unbindResizeHandleEvents","targetWidth","targetHeight","unSelectabe","startDrag","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","fromPoint$1","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","moveToElementText","findClosestIeRange","parentElement","findParent","moveOutOfContentEditableFalse","isEq$1","rng1","hasParent","findParent$1","hasParentWithName","isTable$3","isTableCell$3","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normRng","split$1","RangeUtils","normalizedRng","compareRanges","getCaretRangeFromPoint","RangeUtils$1","documentFocusInHandler","excludeFromDescend","markerInfo","cleanupFun","createMarker","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","elementMarker","startElement","endElement","scrollToMarker","intoWindowIfNeeded","viewportBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","browser$3","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","getBookmark$2","bookmarkToNativeRng","newBookmark","FocusManager","isEditorUIElement","registerEditorEvents","throttledStore","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","mouseUpPage","registerPageMouseUp","DOM$2","isUIElement","customSelector","getCustomUiSelector","isEditorUIElement$1","registerEvents","editorManager","focusedEditor","blurredEditor","getActiveElement","activeEditor","unregisterDocumentEvents","getFocusInElement","getCollapsedNode","normalizeSelection","caretPos","focusBody","hasElementFocus","hasFocus$1","rawBody","hasInlineFocus","iframeElement","hasIframeFocus","hasEditorOrUiFocus","hasUiFocus","activateEditor","skipFocus","quirks","refreshContentEditable","bookmarkRng","contentEditableHost","getContentEditableHost","focusEditor","getEndpointElement","real","getStart$2","skipEmptyTextNodes","processRanges","ancestor$3","isEq$2","matchesUnInheritedFormatSelector","formatList","inherit","matchParents","matchNode","matchName","matchItems","similar","onmatch","rawElm","matchAllOnNode","formatNames","matchSimilar","isVariableValue","fieldValues","isVariableFormatName","typeLookup","walk$2","isEmptyTextNode$1","AstNode","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","makeMap$3","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","cdata","comment","pi","doctype","HtmlSerializer","writer","8","7","10","11","sortedAttrs","elementRule","restoreDataUris","imageId","uris","safeSvgDataUrlElements","isInvalidUri","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","findEndTagIndex","startIndex","shortEndedElements","tokenRegExp","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","parseInternal","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","filteredUrlAttrs","scriptUriRegExp","parsingMode","processEndTag","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","lcHtml","isConditionalComment","endIfIndex","endCommentRegexp","findCommentEndIndex","parseAttribute","val2","val3","attrRule","processAttr","fillAttrsMap","isValidPrefixAttrName","decodeURIComponent","unescape","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","bogusValue","preserve_cdata","dataImageUri","extractBase64DataUris","findEndTag","SaxParser$1","trimInternal","endTagIndex","bogusAllRegExp","tempAttrs","trimContentRegExp","trimHtml","getTempAttrs","trimExternal","getContentFromBody","getInner","no_events","emptyRegExp","trimEmptyContents","each$7","ElementUtils","attribs","compareObjects","obj1","obj2","isChar","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","removeTrailingBr","allBrs","rawNode","getLastChildren$1","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","parentsUntil$1","rawParent","parents$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary$1","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr$5","findBr","parentBlocks","isBeforeBr","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock$1","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","isAtLineBoundary","isAtBeginningOfBody","isAtEndOfBody","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbspInMiddleOfTextNode","newText","chars","normalizeNbspMiddle","normalizeNbsps","firstPos","normalizeNbspAtStart","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwards","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionForward","findCaretPositionForwardsFromElm","findCaretPosOutsideElmAfterDelete","findCaretPosition$1","setSelection","isBlock$2","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","prevTextOpt","nextTextOpt","deleteElement","moveCaret","afterDeletePos","parentBlock","normalizedAfterDeletePos","isInlineElement","paddPos","tableCellRng","deleteAction","removeTable","emptyCells","deleteCellSelection","getClosestCell","getClosestTable","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableCells","partialSelection","endCell","isWithinSameTable","getCellRangeFromStartTable","getTableSelection","optCellRng","cRng","tableSelection","getTableSelectionFromCellRng","getCellIndex","isSingleCellTableContentSelected","isSingleCellTable","getSelectedCells","getActionFromRange","isRootFromElement","getCellRng","freefallRtl","deleteCellContents","deleteContents","lastNode","lastBlock","additionalCleanupNodes","deleteTableElement","deleteTableRange","startElm","getParentCaption","deleteCellRange","emptyElement","deleteCaptionRange","getParentCell","deleteCaretInsideCaption","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretCells","fromCell","deleteBetweenCells","isNearTable","deleteCaret","fromPos","isBeforeOrAfterTable","deleteCaretCaption","backspaceDelete","deleteRange","normalizeBlockSelectionRange","commonAncestorContainer","newEndPos","createRange$1","normalize$2","isPaddedEmptyBlock","hasOnlyOneChild","isPaddingNode","isListFragment","nonEmptyElements","isEmptyFragmentElement","isListItemPadded","isPadding","trimListItems","getParentLi","findLastOf","newCaretPos","findFirstIn","insertAtCaret","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","beforeRng","afterRng","getSplit","insertMiddle","isTableCell$4","deleteSelectedContent","isTableCellContentSelected","insertHtmlAtCaret","trimOrPadLeftRight","parser","bookmarkHtml","paste","caretElement","canHaveChildren","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","validInsertion","textInlineElements","root_1","elementUtils_1","testNode","reduceInlineTextElements","nextRng","parentEditableFalseElm","getContentEditableFalseParent","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","filter$3","nodeFilters","attributeFilters","attrMatches","name_2","findMatchingNodes","isTreeNode","setEditorHtml","moveSelection","setContentInternal","getNodeFilters","getAttributeFilters","setContentTree","forcedRootBlockName","padd","isRootContent","setContentString","sibling$2","ZWSP$1","CARET_ID$1","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","clonedFormatNode","cleanFormatNode","caretTextNode","disableCaretContainer","isFormatElement","postProcessHooks","filter$4","each$8","addPostProcessHook","blocks","isPre","getSelectedBlocks","pre","pre1","pre2","each$9","isElementNode","findElementSibling","mergeSiblingsNodes","tmpSibling","elementUtils","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$a","isEq$3","isChildOfInlineParent","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrapWithSiblings","removeFormatInternal","compareNode","stylesModified","matchName$1","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","removeNode$1","newName","removeFormatFromClone","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","lastContentEditable","isRemoveBookmarkNode","removeRngStyle","textDecoration","ceFalseOverride","each$b","mergeWithChildren","clear_child_styles","clearChildStyles","each$c","hasFormatProperty","setElementFormat","onformat","styleVal","applyNodeStyle","found","applyRngStyle","nodeSpecific","wrapElm","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","figcaption","summary","hasCaretNodeSibling","canFormatBR","getChildElementNode","isElementNode$1","childCount","isEmptyTextNode","getChildCount","mergeStyles","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","importNode","applyCaretFormat","curSelNode","firstFormat","forced_root_block","defaultBlock","fake","postProcess","formatItem","updateAndFireChangeCallbacks","currentFormats","formatChangeData","formatsList","newFormats","remainingFormats","filterRemainingFormats","formatChangedInternal","registeredFormatListeners","formatChangeItems","addListeners","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","findElementPos","extractRows","sx","sy","ey","newRows","fromDom$1","tableElm","rowspan","colspan","y2","x2","fillout","skipCellsX","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","subsection","subTable","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","listStyles","_style","getWrapElements","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","emptyFragment","getFragmentFromRange","innerElm","getTableFragment","selectedTableCells","firstCell","lastCell","fullTableModel","sectionedTableModel","getSelectionFragment","isCollapsibleWhitespace","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","tmpElm","getSerializedContent","getOuterHtml","insertAt","createFragment$1","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","removeAt","applyDiff","start1","end1","start2","end2","diag","i2","snake","undoLevelDocument","createFromEditor","trimmedFragments","trimmed","beforeBookmark","createFragmentedLevel","createCompleteLevel","applyToEditor","getLevelContent","getCleanLevelContent","implementation","createHTMLDocument","isEq$4","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","isTreeNode$1","runSerializerFiltersOnFragment","makePlainAdaptor","beforeChange","addUndoLevel","currentLevel","lastLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","hasUndo","hasRedo","callback1","callback2","matchAll","matchedFormatNames","checkedMap","getContentInternal","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","makeRtcAdaptor","tinymceEditor","rtcEditor","defaultVars","_undoManager","_locks","_node","matchFormat","canApplyFormat","closestFormat","_similar","_rfl","_args","_details","contextArgs","_elm","getSelectedContent","getRawModel","isRtc","plugins","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","getContent$1","mergeAndNormalizeText","outerNode","outerElm","oldLength","walkPastBookmark","normalizeTextIfRequired","setContent$1","contentArgs","setupArgs","contextBlock","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","matchedSelectors","SelectorChanged","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","isForward","anchorRange","focusRange","bookmarkManager","controlSelection","select$1","compareEndPoints","setNode","getNode$1","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFontToSpansFilter","domParser","fontSizes","face","removeAttrs","addFilters","convert_fonts_to_spans","font_size_legacy_values","addStrikeToSpanFilter","parseDataUri$1","uriParts","buildBlob","uriToBlob","rejectWithError","xhr","XMLHttpRequest","responseType","blobUriToBlob","imageToBlobInfo","blobCache","blobInfo","getByData","getByUri","dataUri","ImageScanner","uploadStatus","cachedPromises","images","getAllImages","isUploaded","promises","imageInfo","newPromise","paddEmptyNode","blockElements","padd_empty_with_br","hasOnlyChild","isEmpty$2","whitespaceElements","isPadded","registerBase64ImageFilter","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","parseDataUri","images_dataimg_filter","imgElem_1","isValidDataImg","blobUri","addAttributeFilter","makeMap$4","each$d","explode$2","extend$2","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","fi","fl","isInWhiteSpacePreservedElement","invalidChildren","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","createNode","removeWhitespaceBefore","textNodeNext","textVal","cloneAndExcludeBlocks","isLineBreakNode","attrFiltersLen","tempNode","isPaddedWithNbsp","newParent","currentNode","nonSplitableElements","textBlockElements","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","register$2","inline_styles","hasEventListeners","shouldFireEvent","oldDoc","impl","firePreProcess","preProcess","addTempAttr","htmlParser","toHtml","firePostProcess","postProcess$1","serializeNode","DomSerializerImpl","internalName","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","addRules","setRules","DomSerializer","domSerializer","getContent$2","setContent$2","DOM$3","safeDestroy","editorUpload","save","is_removing","unbindAllNativeEvents","hasHiddenInput","fireRemove","orgDisplay","restoreOriginalStyles","fireDetach","automatic","destroyed","_beforeUnload","theme","formElement","_mceOldSubmit","formEventDelegate","restoreForm","contentAreaContainer","clearDomReferences","hasOwnProperty$2","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","normalizePlugins","pluginNames","trimmedPlugins","extractSections","sectionResult","hasSection","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","getExternalPlugins$1","overrideSettings","userDefinedExternalPlugins","external_plugins","getPlatformPlugins","isMobileDevice","desktopPlugins","mobilePlugins","isSectionTheme","processPlugins","defaultOverrideSettings","forcedPlugins","forced_plugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","combineSettings","defaultSettings","defaultDeviceSettings","mobile","extendedSettings","isOnMobile","sectionSettings","getSection","getEditorSettings","documentBaseUrl","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","getDefaultSettings","getFiltered","getParamObject","iconPack","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","getBoundingClientRect$1","transpose","isInsideElementContentArea","isEditorAttachedToDom","rawContainer","NotificationManager","getImplementation","unimplemented","getTopNotification","closeNotification","otherNotification","fireEvent","addNotification","serviceMessage","getServiceMessage","getNotifications","WindowManager","dialogs","getParams","setParams","funcBind","addDialog","fireOpenEvent","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","displayNotification","notificationManager","displayError","logError","errorType","fireError","createLoadError","pluginLoadError","initError","getContentCssUrls","contentCss","getContentCss","contentCssFile","isContentCssSkinName","Uploader","pendingPromises","defaultHandler","withCredentials","credentials","upload","onprogress","path1","path2","json","responseText","basePath","FormData","filename","handlerSuccess","handlerFailure","resolvePending","uploadBlobs","blobInfos","openNotification","isPending","pendingUploadBlobInfo","markPending","closeNotification_1","markUploaded","failureOptions","removeFailed","uploadBlobInfo","count$1","uuid","rnd","EditorUpload","uploader","imageScanner","blobUriStatuses","createStatus","hasBlobUri","toBlobInfo","mime","findFirst","cachedBlobInfo","removeByUri","BlobCache","resultUri","getResultUri","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","isValidDataUriImage","imgElm","getImagesDataImgFilter","dataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","FormatRegistry","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontsize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","removeformat","getFormats","BreakType","each$e","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","formatChangeState","applyFormat$1","removeFormat$1","matchAllFormats","matchNodeFormat","UndoManager","beforeChange$1","addUndoLevel$1","undo$1","redo$1","clear$1","reset$1","hasUndo$1","hasRedo$1","transact$1","ignore$1","extra$1","isFirstTypedCharacter","addNonTypingUndoLevel","isDirty","modKey","inputType","isInsertFromPasteOrDrop","registerEvents$1","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","firstElementChild","isVisuallyEmpty","firePlaceholderToggle","strongRtl","isInlineTarget","getInlineBoundarySelector","isRtl$1","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","blockPosition","readFromRange","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","getInsertionPoint","parentsAndSelf$1","findInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","block1","block2","backspaceDelete$1","read$3","isRawNodeInTable","isEverythingSelected","noPrevious","noNext","isSelectionInTable","deleteRange$1","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$2","_forward","isContentEditableTrue$2","isContentEditableFalse$7","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","trimEmptyTextNode$1","backspaceDelete$3","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","isDeleteFromCefDifferentBlocks","getContentEditableAction","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getAncestorCe","backspaceDeleteCaret","selectedNode","read$4","hideFakeCaret","deleteElement$1","backspaceDeleteRange","paddEmptyElement","backspaceDelete$4","backspaceDelete$5","deleteCaret$1","isText$8","startsWithCaretContainer$1","endsWithCaretContainer$1","createZwsp","insertInline$1","insertBefore$1","insertAfter$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope","before$4","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","after$3","isValidLocation","readLocation","getName","outside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation","findLocationTraverse","modify","moveByWord","hasSelectionModifyApi","setCaretPosition","setSelected","renderCaretLocation","safeRemoveCaretContainer","isAtZwsp","isInlineTarget$1","findLocation$1","moveWord","_caret","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDeleteCollapsed","rescope$1","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDelete$6","hasOnlyOneChild$1","deleteLastPosition","parentInlines","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteCaret$2","getParentInlines","normalizedFromPos","nextPos","willDeleteLastPositionInElement","backspaceDelete$7","deleteElement$2","backspaceDelete$8","isNearMedia","deleteCaret$3","deleteRange$2","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","styleValue","indentElement","backspaceDelete$9","nativeCommand","deleteCommand","forwardDeleteCommand","debounceLongpress","isEqualNode","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","VDirection","walk$3","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil","isAboveFn","isBeflowFn","targetClientRect","findUntil$1","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$8","findNode$1","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil$1","includeChildren","closestFakeCaret","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","isRangeInCaretContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint","isContentEditableFalse$9","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","getHorizontalRange","moveToCeFalseHorizontally","getVerticalRange","down","moveToCeFalseVertically","moveH","newRange","moveV","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","insertEmptyLine","insertBr","insertBlock$1","isAtFirstOrLastLine","isAtLastLine","isAtFirstLine","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","moveV$1","match$1","defaultPatterns","matchesEvent","moveH$1","moveV$2","moveToLineEndPoint$2","getClosestCell$1","getYAxisValue","isTargetCorner","corners","newCorner","oldCorner","oldDist","newDist","findClosestCorner","tds","deflate","getCorners","corner","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","getTable","renderBlock","navigateVertically","getClosestAbovePosition","getClosestBelowPosition","mover","moveH$2","moveV$3","executeKeydownOverride","executeKeydownOverride$1","executeKeyupOverride","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock$2","hasParent$1","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","createNewBlock","newBlockName","tmpRng","hasFirstChild","isEmptyAnchor","emptyBlock","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot$1","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","insert$1","parentBlockName","isAfterLastNodeInContainer","clonedNode","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell$5","wrapSelfAndSiblingsInDefaultBlock","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","scrollToBr","brElm","moveSelectionToBr","extraBr","insertBrAtCaret","isControlKey","hasRightSideContent","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$2","anchorLocation","readInlineAnchorLocation","newLineAction","shouldBlockNewLine$1","_shiftKey","getNoNewLineSelector","shouldBlockNewLine","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre$1","shouldPutBrInPre","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","canInsertIntoEditableRoot","rootEditable","getEditableRoot","match$2","predicates","insert$3","getAction$1","handleEnterKeyEvent","setup$f","executeKeydownOverride$2","browser$4","setup$g","keypressThrotter","setupIeInput","isComposing","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection$1","setup$h","executeKeydownOverride$3","registerKeyboardOverrides","NodeChange","lastPath","nativeRng","fakeRng","isSameElementPath","currentPath","setup$j","preventSummaryToggle","filterDetails","isTextBlockNode","setup$k","normalizeSelection$1","getAbsolutePosition","calc","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","isContentEditableFalse$a","isContentEditableTrue$3","createGhost","clonedElm","boxSizing","removeElement","start$1","isLeftMouseButtonPressed","ceElm","elmPos","dragging","relX","relY","ghost","targetElement","dragElement","isValidDropTarget","targetClone_1","cloneElm","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","throttledPlaceCaretAt","targetPos","applyRelPos","overflowX","moveGhost","move$2","dropHandler","dragEndHandler","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","defaultPrevented","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","isContentEditableTrue$4","isContentEditableFalse$b","getContentEditableRoot$1","SelectionOverrides","fakeCaret","realSelectionId","elementSelectionAttr","isFakeSelectionTargetElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","normalizeShortEndedElementSelection","selectElement","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","setElementSelection","afterNode","removeElementSelection","contentEditableRoot","hasNormalCaretPosition","hasBetterMouseTarget","targetBlock","fakeCaretInfo","clipboardData","realSelectionElement","clearData","outerText","renderFocusCaret","setup$l","setup$m","Quirks","serializeRng","getAttributeApplyFunction","isSelectionAcrossElements","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","selectAll","disableBackspaceIntoATable","bodyHeight","contentStyles","allRng","allContentsSelected","selectionHtml","internalContent","escape","setMceInternalContent","getMceInternalContent","queryCommandSupported","Range","body_1","template","setAttributeNode","DOM$4","getRootName","removeUndefined","mkParserSettings","moveSelectionToFirstCaretPosition","storeNative","initEditor","bindPendingEventDelegates","fireInit","execCallback","auto_focus","autoFocus","preInit","rtcMode","browser_spellcheck","gecko_spellcheck","spellcheck","firePostRender","directionality","getDirectionality","protect","startContent","contentCssText_1","getStyleSheetLoader","loadContentCss","content_style","appendStyle","initContentBody","skipWrite","orgVisibility","iframeHTML","hex_colors","force_hex_style_colors","createParser","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","mkSerializerSettings","annotator","_nodeChangeDispatcher","setup$i","firePreInit","editorCast","rtc","isRemote","setup$5","loadingRtc","setProgressState","DOM$5","getIframeHtml","getDocType","getDocumentBaseUrl","getURI","bodyId","getBodyId","bodyClass","getBodyClass","createIframe","ifr","customAttrs","frameBorder","allowTransparency","createIframeElement","getIframeAttrs","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","DOM$6","initPlugin","initializedPlugins","plugin","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","renderThemeFalse","renderThemeFalseIframe","renderThemeUi","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","init$2","iconPackName","currentIcons","loadIcons","svgData","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","augmentEditorUiApi","boxInfo","appendContentCssFromSettings","hidden","init$1","DOM$7","hasSkipLoadPrefix","loadLanguage","scriptLoader","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","getIconsUrlMetaFromName","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","urlMeta","iconsLoadError","themeUrl","getThemeUrl","loadTheme","getExternalPlugins","depPlugin","url_2","loadPlugins","getStyleSheetLoader$1","isInline$1","resetContent","shouldPatchSubmit","triggerSave","isEncodingXml","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","set_dirty","addVisual$1","legacyPropNames","getSpecifiedFontProp","legacyPropName","getProperty","getFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","mapper","getCaretElement","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","insertAtCaret$1","processValue","each$f","map$3","inArray$2","EditorCommands","setupCommands","skip_focus","customCommand","addCommands","commandList","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","queryCommandEnabled","listParent","fontNameAction","fontSizeAction","lineHeightAction","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","lineHeightQuery","internalContentEditableAttr","setContentEditable","toggleReadOnly","removeFakeSelection","switchOnContentEditableTrue","restoreFakeSelection","isReadOnly$1","registerFilters","processReadonlyEvents","isClickEvent","getAnchorHrefOpt","numChars","removeFromStart","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","nameIn","argsIn","beforeFire","wrappedCallback","currentName","bindingName","hi","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","dispatcherArgs","DOM$8","getEventTarget","eventRoot","isListening","bindEventDelegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","activate","deactivate","editorReadOnly","fireSwitchMode","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","registerMode","each$g","explode$3","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","cmdFunc","normalizeCommandFunc","createShortcut","parseShortcut","charCode","bridge","addAutocompleter","addContextToolbar","addSidebar","each$h","trim$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","isProtocolRelative","toAbsPath","urlMatch","userInfo","uriComponents","pathname","setPath","pathMatch","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","DOM$9","extend$3","each$i","resolve$3","ie$1","Editor","loadedCSS","isNotDirty","documentBaseURL","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","modeInstance","callbackLookup","initialContent","oldState","urlconverter_callback","_scanForImages","DOM$a","explode$4","each$j","extend$4","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","relativePosition","targetW","targetH","relChars","create$7","Rect","findBestRelativePosition","constrainRect","intersect","x1","y1","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","awaiter","each$k","extend$5","Class","_super","mixins","mixin","Mixins","dummy","Methods","Properties","Statics","Defaults","member","createMethod","localStorage","min$1","max$1","round$2","JSONUtils","hexCode","JSONP","XHR","ready","async","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","extend$6","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","removeItem","configurable","enumerable","publicApi","geom","LocalStorage","Color","hsvToRgb","toRgb","toHsv","rgb2hsv","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders"],"mappings":"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CACED,KAAM+zF,GACN5tF,KAAM,eACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,YACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,eACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,aACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,QACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,SACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,MACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,SACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,OACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,iBACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,SACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,WACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,cACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,YACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,aACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,cACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,OACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,YACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,YACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,QACNlG,MAAO,WAET,CACED,KAAM+zF,GACN5tF,KAAM,QACNlG,MAAO,YAGPg0F,GAhJJ,SAAqB1pD,QACP,IAARA,IACFA,EAAM,IAER,IAEsBvkC,EAFlBkuF,EAAgBL,GAASjU,QAAQkU,IACjCK,EAAezzF,EAASwzF,GAAiB3hF,KAAKC,MAAM0hF,GAAiB,GAKrEE,EAHS7pD,GADSvkC,EAIJmuF,GAHM7uF,OACR,EAAIU,EAAK0W,MAAM,EAAG6tB,GAAOvkC,EAWrCkJ,EAAS,SAAUmlF,GACrBD,EAAME,OAAOD,EAAK,IAKpB,MAAO,CACL9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AAIC,EAAKD,IAAK,CAC7C,IAAIlF,EAAI6E,EAAGK,GACXD,EAAE3E,OAAON,IAAMiE,EAAEjE,EAAGkF,GAEtB,OAAOD,EAi8FsB0uC,CAAYttC,EAAO1E,IAChCsF,eAAe5G,GAAKsN,MAGlCsuL,GAAYD,GA/BD,CACb,KACA,KACA,KACA,KACA,KACA,OA0BEv+G,GAAUu+G,GArHD,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,YAwEEx7B,GAAW,SAAU7yJ,GACvB,OAAOqrB,GAAUrrB,KAAU8vE,GAAQ9vE,IAEjCuuL,GAAS,SAAUvuL,GACrB,OAAOqrB,GAAUrrB,IAAwB,OAAftN,GAAKsN,IAE7BwuL,GAAcH,GAnED,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,WA6CEI,GAASJ,GA9BD,CACV,KACA,KACA,OA4BEK,GAAaL,GApCD,CACd,KACA,KACA,OAkCEM,GAAiBN,GA3ED,CAClB,QACA,QACA,UAyEEO,GAAgBP,GAhFH,CACf,KACA,OA+EEQ,GAAsBR,GA7BT,CACf,MACA,SACA,WACA,UAgCES,GAAO,IAQPC,GATY,SAUZC,GARS,SAAU79G,GACrB,MAHc,WAGPA,GAQL89G,GANa,SAAU14L,GACzB,OAAOA,EAAE4G,QAAQ,UAAW,KAO1B+xL,GAAcx8G,GACdy8G,GAAW38G,GACX48G,GAAwB,SAAUpvL,GAIpC,OAHImvL,GAASnvL,KACXA,EAAOA,EAAKmB,YAEP+tL,GAAYlvL,IAASA,EAAK6tB,aAAa,mBAE5CwhK,GAAyB,SAAUrvL,GACrC,OAAOmvL,GAASnvL,IAASgvL,GAAShvL,EAA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","file":"vendors-node_modules_tinymce_icons_default_index_js-node_modules_tinymce_plugins_link_index_j-d665b5.bundle.js?v=3c438699b6e8fcd2619b","sourcesContent":["tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><path d=\"M5 14.8h14a1 1 0 010 2H5a1 1 0 010-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 110-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 01-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-2c0-.6.4-1 1-1z\" fill-rule=\"evenodd\"/></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z\"/><path d=\"M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" fill-rule=\"nonzero\"/></svg>',\n    'export': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z\"/><path d=\"M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z\"/><path d=\"M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z\"/></g></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z\"/><path d=\"M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n    'line-height': '<svg width=\"24\" height=\"24\"><path d=\"M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 010 2H5a1 1 0 010-2z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z\"/><path d=\"M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n  }\n});","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.1 (2020-11-25)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$2.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$3(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$2.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$2.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$2.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      return foldl([\n        'title',\n        'rel',\n        'class',\n        'target'\n      ], function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (anchorElm.hasOwnProperty('innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var link = function (editor, attachState, data) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(data)) : linkDomMutation(editor, attachState, data);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$4.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$5.resolve(data);\n      }, function (transform) {\n        return new global$5(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$5(function (callback) {\n        if (isString(linkList)) {\n          global$6.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = initialTarget.is('_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !info.anchor[key].is(value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : function () {\n          }\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open$1 = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open$1(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$1.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        return toggleState(editor, function () {\n          api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        });\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return function () {\n        };\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var anchor = getAnchorElement(editor);\n              var value = formApi.getValue();\n              if (!anchor) {\n                var attachState = {\n                  href: value,\n                  attach: function () {\n                  }\n                };\n                var onlyText = isOnlyTextSelected(editor);\n                var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)).filter(function (t) {\n                  return t.length > 0;\n                }).or(Optional.from(value)) : Optional.none();\n                link(editor, attachState, {\n                  href: value,\n                  text: text,\n                  title: Optional.none(),\n                  rel: Optional.none(),\n                  target: Optional.none(),\n                  class: Optional.none()\n                });\n                formApi.hide();\n              } else {\n                editor.undoManager.transact(function () {\n                  editor.dom.setAttrib(anchor, 'href', value);\n                  collapseSelectionToEnd(editor);\n                  formApi.hide();\n                });\n              }\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.1 (2020-11-25)\n */\n(function () {\n    'use strict';\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$1 = function (results) {\n      var values = [];\n      var errors = [];\n      each(results, function (obj) {\n        fold(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult = function (res) {\n      return fold(res, Result.error, Result.value);\n    };\n    var fromResult = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult,\n      toResult: toResult,\n      svalue: svalue,\n      partition: partition$1,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map$1,\n      mapError: mapError,\n      fold: fold\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$1 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var adt = Adt.generate([\n      { strict: [] },\n      { defaultedThunk: ['fallbackThunk'] },\n      { asOption: [] },\n      { asDefaultedOptionThunk: ['fallbackThunk'] },\n      { mergeWithThunk: ['baseThunk'] }\n    ]);\n    var defaulted = function (fallback) {\n      return adt.defaultedThunk(constant(fallback));\n    };\n    var mergeWith = function (base) {\n      return adt.mergeWithThunk(constant(base));\n    };\n    var strict = adt.strict;\n    var asOption = adt.asOption;\n    var defaultedThunk = adt.defaultedThunk;\n    var asDefaultedOptionThunk = adt.asDefaultedOptionThunk;\n    var mergeWithThunk = adt.mergeWithThunk;\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$2 = function (results) {\n      var errors = [];\n      var values = [];\n      each(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude = function (obj, fields) {\n      var r = {};\n      each$1(obj, function (v, k) {\n        if (!contains(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll = function (keyvalues) {\n      var r = {};\n      each(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude$1 = function (obj, fields) {\n      return exclude(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap(key, value);\n    };\n    var wrapAll$1 = function (keyvalues) {\n      return wrapAll(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$2(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: function () {\n            return '... (only showing first ten failures)';\n          }\n        }]) : errors;\n      return map(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingStrict = function (path, key, obj) {\n      return nu(path, function () {\n        return 'Could not find valid *strict* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu(path, function () {\n        return err;\n      });\n    };\n\n    var adt$1 = Adt.generate([\n      {\n        field: [\n          'key',\n          'okey',\n          'presence',\n          'prop'\n        ]\n      },\n      {\n        state: [\n          'okey',\n          'instantiator'\n        ]\n      }\n    ]);\n    var strictAccess = function (path, obj, key) {\n      return get$1(obj, key).fold(function () {\n        return missingStrict(path, key, obj);\n      }, SimpleResult.svalue);\n    };\n    var fallbackAccess = function (obj, key, fallbackThunk) {\n      var v = get$1(obj, key).fold(function () {\n        return fallbackThunk(obj);\n      }, identity);\n      return SimpleResult.svalue(v);\n    };\n    var optionAccess = function (obj, key) {\n      return SimpleResult.svalue(get$1(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback) {\n      var opt = get$1(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return SimpleResult.svalue(opt);\n    };\n    var cExtractOne = function (path, obj, field, strength) {\n      return field.fold(function (key, okey, presence, prop) {\n        var bundle = function (av) {\n          var result = prop.extract(path.concat([key]), strength, av);\n          return SimpleResult.map(result, function (res) {\n            return wrap(okey, strength(res));\n          });\n        };\n        var bundleAsOption = function (optValue) {\n          return optValue.fold(function () {\n            var outcome = wrap(okey, strength(Optional.none()));\n            return SimpleResult.svalue(outcome);\n          }, function (ov) {\n            var result = prop.extract(path.concat([key]), strength, ov);\n            return SimpleResult.map(result, function (res) {\n              return wrap(okey, strength(Optional.some(res)));\n            });\n          });\n        };\n        return function () {\n          return presence.fold(function () {\n            return SimpleResult.bind(strictAccess(path, obj, key), bundle);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(fallbackAccess(obj, key, fallbackThunk), bundle);\n          }, function () {\n            return SimpleResult.bind(optionAccess(obj, key), bundleAsOption);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(optionDefaultedAccess(obj, key, fallbackThunk), bundleAsOption);\n          }, function (baseThunk) {\n            var base = baseThunk(obj);\n            var result = SimpleResult.map(fallbackAccess(obj, key, constant({})), function (v) {\n              return deepMerge(base, v);\n            });\n            return SimpleResult.bind(result, bundle);\n          });\n        }();\n      }, function (okey, instantiator) {\n        var state = instantiator(obj);\n        return SimpleResult.svalue(wrap(okey, strength(state)));\n      });\n    };\n    var cExtract = function (path, obj, fields, strength) {\n      var results = map(fields, function (field) {\n        return cExtractOne(path, obj, field, strength);\n      });\n      return ResultCombine.consolidateObj(results, {});\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, strength, val) {\n        return getDelegate().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var value$1 = function (validator) {\n      var extract = function (path, strength, val) {\n        return SimpleResult.bindError(validator(val, strength), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = function () {\n        return 'val';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, function (value) {\n        return value !== undefined && value !== null;\n      }));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, f) {\n        return f.fold(function (key) {\n          return deepMerge(acc, wrap$1(key, true));\n        }, constant(acc));\n      }, {});\n      var extract = function (path, strength, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, strength, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (fields) {\n      var extract = function (path, strength, o) {\n        return cExtract(path, o, fields, strength);\n      };\n      var toString = function () {\n        var fieldStrings = map(fields, function (field) {\n          return field.fold(function (key, okey, presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (okey, _instantiator) {\n            return 'state(' + okey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, strength, array) {\n        var results = map(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), strength, a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, strength, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, strength, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$1(validator)).extract(path, identity, keys);\n      };\n      var extract = function (path, strength, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map(validKeys, function (vk) {\n            return adt$1.field(vk, vk, strict(), prop);\n          });\n          return objOf(schema).extract(path, strength, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (desc, processor) {\n      var getP = cached(function () {\n        return processor();\n      });\n      var extract = function (path, strength, val) {\n        return getP().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue = constant(value$1(SimpleResult.svalue));\n    var arrOfObj = compose(arrOf, objOf);\n    var state = adt$1.state;\n    var field = adt$1.field;\n\n    var chooseFrom = function (path, strength, input, branches, ch) {\n      var fields = get$1(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), strength, input);\n      });\n    };\n    var choose = function (key, branches) {\n      var extract = function (path, strength, input) {\n        var choice = get$1(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, strength, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var _anyValue = value$1(SimpleResult.svalue);\n    var arrOfObj$1 = function (objFields) {\n      return arrOfObj(objFields);\n    };\n    var arrOfVal = function () {\n      return arrOf(_anyValue);\n    };\n    var valueThunkOf = valueThunk;\n    var valueOf = function (validator) {\n      return value$1(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf$1 = function (validator, prop) {\n      return setOf(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extract = function (label, prop, strength, obj) {\n      var res = prop.extract([label], strength, obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extract(label, prop, identity, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    var asRawOrDie = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var chooseProcessor = function (key, branches) {\n      return choose(key, branches);\n    };\n    var choose$1 = function (key, branches) {\n      return choose(key, map$2(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n    var anyValue$1 = constant(_anyValue);\n    var typedValue = function (validator, expectedType) {\n      return value$1(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      var every = function (iter, callbackFn) {\n        var result = iter.next();\n        while (!result.done) {\n          if (!callbackFn(result.value)) {\n            return false;\n          }\n          result = iter.next();\n        }\n        return true;\n      };\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      case 'Map':\n        return every(val.keys(), isPostMessageable) && every(val.values(), isPostMessageable);\n      case 'Set':\n        return every(val.keys(), isPostMessageable);\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$1(function (a) {\n      return isPostMessageable(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n    });\n\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var strict$1 = function (key) {\n      return field(key, key, strict(), anyValue());\n    };\n    var strictOf = function (key, schema) {\n      return field(key, key, strict(), schema);\n    };\n    var strictNumber = function (key) {\n      return strictOf(key, number);\n    };\n    var strictString = function (key) {\n      return strictOf(key, string);\n    };\n    var strictStringEnum = function (key, values) {\n      return field(key, key, strict(), validateEnum(values));\n    };\n    var strictBoolean = function (key) {\n      return strictOf(key, boolean);\n    };\n    var strictFunction = function (key) {\n      return strictOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field(key, key, asOption(), value$1(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var strictObjOf = function (key, objSchema) {\n      return field(key, key, strict(), objOf(objSchema));\n    };\n    var strictArrayOfObj = function (key, objFields) {\n      return field(key, key, strict(), arrOfObj(objFields));\n    };\n    var strictArrayOf = function (key, schema) {\n      return field(key, key, strict(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted$1 = function (key, fallback) {\n      return field(key, key, defaulted(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field(key, key, defaulted(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n    var state$1 = function (okey, instantiator) {\n      return state(okey, instantiator);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$1(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu$1(0, 0);\n    };\n    var nu$1 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$1,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$3,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq$1(component.element, simulatedEvent.event.target);\n    };\n\n    var nu$4 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return asRawOrDie('Extracting event.handler', objOfOnly([\n        defaulted$1('can', always),\n        defaulted$1('abort', never),\n        defaulted$1('run', noop)\n      ]), parts);\n    };\n    var all$1 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read = function (handler) {\n      return isFunction(handler) ? {\n        can: constant(true),\n        abort: constant(false),\n        run: handler\n      } : handler;\n    };\n    var fuse = function (handlers) {\n      var can = all$1(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return nu$4({\n        can: can,\n        abort: abort,\n        run: run\n      });\n    };\n\n    var constant$1 = constant;\n    var touchstart = constant$1('touchstart');\n    var touchmove = constant$1('touchmove');\n    var touchend = constant$1('touchend');\n    var touchcancel = constant$1('touchcancel');\n    var mousedown = constant$1('mousedown');\n    var mousemove = constant$1('mousemove');\n    var mouseout = constant$1('mouseout');\n    var mouseup = constant$1('mouseup');\n    var mouseover = constant$1('mouseover');\n    var focusin = constant$1('focusin');\n    var focusout = constant$1('focusout');\n    var keydown = constant$1('keydown');\n    var keyup = constant$1('keyup');\n    var input = constant$1('input');\n    var change = constant$1('change');\n    var click = constant$1('click');\n    var transitionend = constant$1('transitionend');\n    var selectstart = constant$1('selectstart');\n\n    var prefixName = function (name) {\n      return constant('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight = prefixName('highlight');\n    var dehighlight = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive = function (configs) {\n      return wrapAll$1(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run = function (name, handler) {\n      return {\n        key: name,\n        value: nu$4({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$4({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).fold(function () {\n          var closest$1 = closest(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest$1.getOr(component);\n        }, function (c) {\n          return c;\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute = runOnName(execute());\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$2 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$2(container);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$3(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow$1 = function (original) {\n      return clone(original, false);\n    };\n\n    var getHtml = function (element) {\n      var clone = shallow$1(element);\n      return getOuter(clone);\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq$1(originator, component.element) && !eq$1(originator, target);\n    };\n    var events = derive([can(focus(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events\n    });\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix = constant('alloy-id-');\n    var idAttr = constant('data-alloy-id');\n\n    var prefix$1 = prefix();\n    var idAttr$1 = idAttr();\n    var write = function (label, elem) {\n      var id = generate$1(prefix$1 + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr$1, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement(elem) ? elem.dom[idAttr$1] : null;\n      return Optional.from(id);\n    };\n    var generate$2 = function (prefix) {\n      return generate$1(prefix);\n    };\n\n    var make = identity;\n\n    var NoContextApi = function (getComp) {\n      var fail = function (event) {\n        return function () {\n          throw new Error('The component must be in a context to send: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : ''));\n        };\n      };\n      return {\n        debugInfo: constant('fake'),\n        triggerEvent: fail('triggerEvent'),\n        triggerFocus: fail('triggerFocus'),\n        triggerEscape: fail('triggerEscape'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        broadcast: fail('broadcast'),\n        broadcastOn: fail('broadcastOn'),\n        broadcastEvent: fail('broadcastEvent'),\n        isConnected: never\n      };\n    };\n    var singleton = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$1('alloy-premade');\n    var premade = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$1(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArrays([\n          component.getApis(),\n          component\n        ], rest));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$5({\n          readState: function () {\n            return 'No State required';\n          }\n        });\n      }\n    };\n    var nu$5 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom = function (spec, all) {\n      var schema = map(all, function (a) {\n        return optionObjOf(a.name(), [\n          strict$1('config'),\n          defaulted$1('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, function (v) {\n        return v;\n      });\n      return {\n        list: all,\n        data: map$2(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return function () {\n            return output;\n          };\n        })\n      };\n    };\n    var getBehaviours = function (bData) {\n      return bData.list;\n    };\n    var getData = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each$1(data, function (detail, key) {\n        each$1(detail, function (value, indexKey) {\n          var chain = get$1(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$6 = function (s) {\n      return {\n        classes: s.classes !== undefined ? s.classes : [],\n        attributes: s.attributes !== undefined ? s.attributes : {},\n        styles: s.styles !== undefined ? s.styles : {}\n      };\n    };\n    var merge$1 = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$6({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse$1 = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse$1(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var baseBehaviour = 'alloy.base.behaviour';\n    var toInfo = function (spec) {\n      var _a;\n      return asRaw('custom.definition', objOf([\n        field('dom', 'dom', strict(), objOf([\n          strict$1('tag'),\n          defaulted$1('styles', {}),\n          defaulted$1('classes', []),\n          defaulted$1('attributes', {}),\n          option('value'),\n          option('innerHtml')\n        ])),\n        strict$1('components'),\n        strict$1('uid'),\n        defaulted$1('events', {}),\n        defaulted$1('apis', {}),\n        field('eventOrder', 'eventOrder', mergeWith((_a = {}, _a[execute()] = [\n          'disabling',\n          baseBehaviour,\n          'toggling',\n          'typeaheadevents'\n        ], _a[focus()] = [\n          baseBehaviour,\n          'focusing',\n          'keying'\n        ], _a[systemInit()] = [\n          baseBehaviour,\n          'disabling',\n          'toggling',\n          'representing'\n        ], _a[input()] = [\n          baseBehaviour,\n          'representing',\n          'streaming',\n          'invalidating'\n        ], _a[detachedFromDom()] = [\n          baseBehaviour,\n          'representing',\n          'item-events',\n          'tooltipping'\n        ], _a[mousedown()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[touchstart()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[mouseover()] = [\n          'item-type-events',\n          'tooltipping'\n        ], _a[receive()] = [\n          'receiving',\n          'reflecting',\n          'tooltipping'\n        ], _a)), anyValue$1()),\n        option('domModification')\n      ]), spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$6({});\n      }, nu$6);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read$2 = function (element, attr) {\n      var value = get$3(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read$2(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read$2(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$2(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$5 = function (element, classes) {\n      each(classes, function (x) {\n        remove$4(element, x);\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$2 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$2(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove$1(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var get$6 = function (element) {\n      return element.dom.value;\n    };\n    var set$3 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll(subject, definition.attributes);\n      add$3(subject, definition.classes);\n      setAll$1(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$3(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$1 = function (spec) {\n      var behaviours = get$1(spec, 'behaviours').getOr({});\n      var keys$1 = filter(keys(behaviours), function (k) {\n        return behaviours[k] !== undefined;\n      });\n      return map(keys$1, function (k) {\n        return behaviours[k].me;\n      });\n    };\n    var generateFrom$1 = function (spec, all) {\n      return generateFrom(spec, all);\n    };\n    var generate$3 = function (spec) {\n      var all = getBehaviours$1(spec);\n      return generateFrom$1(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine(bData, baseModification, bList, definition) : infoModification;\n      return merge$1(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$3(spec);\n      var bList = getBehaviours(bBlob);\n      var bData = getData(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, function (c) {\n            return [c];\n          });\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$1(spec, 'components').getOr([]);\n      return map(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external({ element: element });\n    };\n    var external = function (spec) {\n      var extSpec = asRawOrDie('external.component', objOfOnly([\n        strict$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      extSpec.uid.each(function (uid) {\n        writeOnly(extSpec.element, uid);\n      });\n      var me = {\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant('No state'),\n        syncComponents: noop,\n        components: constant([]),\n        events: {}\n      };\n      return premade(me);\n    };\n    var uids = generate$2;\n    var build$1 = function (spec) {\n      return getPremade(spec).fold(function () {\n        var userSpecWithUid = spec.hasOwnProperty('uid') ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      }, function (prebuilt) {\n        return prebuilt;\n      });\n    };\n    var premade$1 = premade;\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$7 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api.max(element, value, inclusions);\n      set$2(element, 'max-height', absMax + 'px');\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$4 = function (element, h) {\n      return api$1.set(element, h);\n    };\n    var get$8 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$1.max(element, value, inclusions);\n      set$2(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$a = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$a(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$3 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute, element), function (frames) {\n        var offset = viewport(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box = function (element) {\n      var xy = absolute(element);\n      var w = getOuter$2(element);\n      var h = getOuter$1(element);\n      return bounds$1(xy.left, xy.top, w, h);\n    };\n    var absolute$1 = function (element) {\n      var position = find$3(element);\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds(window);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$1(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$3 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$2, scope, selector, isRoot);\n    };\n\n    var find$4 = function (queryElem) {\n      var dependent = closest$1(queryElem, function (elem) {\n        if (!isElement(elem)) {\n          return false;\n        }\n        var id = get$3(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$3(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant$1(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$1('aria-owns');\n      var link = function (elem) {\n        set$1(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$1(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$4(queryElem).exists(function (owner) {\n        return isPartOf(component, owner);\n      });\n    };\n    var isPartOf = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq$1(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown$3 = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map(sequence, function (s) {\n              if (!contains([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$1(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown$3);\n      } else {\n        return unknown$3;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant(ignoreEvent);\n\n    var menuFields = constant([\n      strict$1('menu'),\n      strict$1('selectedMenu')\n    ]);\n    var itemFields = constant([\n      strict$1('item'),\n      strict$1('selectedItem')\n    ]);\n    var schema = constant(objOf(itemFields().concat(menuFields())));\n    var itemSchema = constant(objOf(itemFields()));\n\n    var _initSize = strictObjOf('initSize', [\n      strict$1('numColumns'),\n      strict$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return strictOf('markers', itemSchema());\n    };\n    var tieredMenuMarkers = function () {\n      return strictObjOf('markers', [strict$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers = function (required) {\n      return strictObjOf('markers', map(required, strict$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      var trace = getTrace();\n      return field(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, strict());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, strict());\n    };\n    var output = function (name, value) {\n      return state$1(name, constant(value));\n    };\n    var snapshot = function (name) {\n      return state$1(name, identity);\n    };\n    var initSize = constant(_initSize);\n\n    var nu$7 = function (x, y, bubble, direction, boundsRestriction, label) {\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        boundsRestriction: boundsRestriction,\n        label: label\n      };\n    };\n\n    var adt$2 = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast = adt$2.southeast;\n    var southwest = adt$2.southwest;\n    var northeast = adt$2.northeast;\n    var northwest = adt$2.northwest;\n    var south = adt$2.south;\n    var north = adt$2.north;\n    var east = adt$2.east;\n    var west = adt$2.west;\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$1(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds, boundsRestrictions, bubbleOffsets) {\n      var applyRestriction = function (dir, current) {\n        var bubbleOffset = dir === 'top' || dir === 'bottom' ? bubbleOffsets.top : bubbleOffsets.left;\n        return get$1(boundsRestrictions, dir).bind(identity).bind(function (restriction) {\n          if (dir === 'left' || dir === 'top') {\n            return restriction >= current ? Optional.some(restriction) : Optional.none();\n          } else {\n            return restriction <= current ? Optional.some(restriction) : Optional.none();\n          }\n        }).map(function (restriction) {\n          return restriction + bubbleOffset;\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds.x);\n      var adjustedTop = applyRestriction('top', bounds.y);\n      var adjustedRight = applyRestriction('right', bounds.right);\n      var adjustedBottom = applyRestriction('bottom', bounds.bottom);\n      return bounds$1(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var eastX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), southY(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), 'layout-se');\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), southY(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), 'layout-sw');\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), northY(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), 'layout-ne');\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), northY(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), 'layout-nw');\n    };\n    var north$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), northY(anchor, element), bubbles.north(), north(), boundsRestriction(anchor, { bottom: 2 }), 'layout-n');\n    };\n    var south$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), southY(anchor), bubbles.south(), south(), boundsRestriction(anchor, { top: 3 }), 'layout-s');\n    };\n    var east$1 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX(anchor), centreY(anchor, element), bubbles.east(), east(), boundsRestriction(anchor, { left: 0 }), 'layout-e');\n    };\n    var west$1 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX(anchor, element), centreY(anchor, element), bubbles.west(), west(), boundsRestriction(anchor, { right: 1 }), 'layout-w');\n    };\n    var all$2 = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$1,\n        northwest$1,\n        southeast$1,\n        southwest$1,\n        north$1,\n        south$1\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$1,\n        northeast$1,\n        southwest$1,\n        southeast$1,\n        north$1,\n        south$1\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter(channels, function (ch) {\n        return contains(message.channels, ch);\n      });\n    };\n    var events$1 = function (receiveConfig) {\n      return derive([run(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$1\n    });\n\n    var ReceivingSchema = [strictOf('channels', setOf$1(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted$1('schema', anyValue$1())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$2(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$2(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: function () {\n          return schemaSchema;\n        },\n        exhibit: function (info, base) {\n          return getConfig(info).bind(function (behaviourInfo) {\n            return get$1(active, 'exhibit').map(function (exhibitor) {\n              return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n            });\n          }).getOr(nu$6({}));\n        },\n        name: function () {\n          return name;\n        },\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$1(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll$1(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      strict$1('fields'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var create$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      strict$1('branchKey'),\n      strict$1('branches'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var createModes$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant(undefined);\n\n    var Receiving = create$1({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit = function (base, posConfig) {\n      return nu$6({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var blur = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq$1(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq$1(newFocus, oldFocus);\n        }).fold(function () {\n          focus$1(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      return {\n        position: position,\n        left: left,\n        top: top,\n        right: right,\n        bottom: bottom\n      };\n    };\n    var applyPositionCss = function (element, position) {\n      var addPx = function (num) {\n        return num + 'px';\n      };\n      setOptions(element, {\n        position: Optional.some(position.position),\n        left: position.left.map(addPx),\n        top: position.top.map(addPx),\n        right: position.right.map(addPx),\n        bottom: position.bottom.map(addPx)\n      });\n    };\n\n    var adt$3 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionX = decision.x - x;\n      var decisionY = decision.y - y;\n      var decisionWidth = decision.width;\n      var decisionHeight = decision.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        return NuPositionCss('absolute', Optional.some(decision.x), Optional.some(decision.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$3, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$3(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var viewport$1 = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds$1);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds = b();\n          var pos = translate(origin, bounds.x, bounds.y);\n          return bounds$1(pos.left, pos.top, bounds.width, bounds.height);\n        });\n      });\n    };\n    var translate = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant(pos), constant(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    var none$1 = adt$3.none;\n    var relative = adt$3.relative;\n    var fixed = adt$3.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box$1 = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var adt$4 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'deltaW',\n          'deltaH'\n        ]\n      }\n    ]);\n    var calcReposition = function (newX, newY, width, height, bounds) {\n      var boundsX = bounds.x;\n      var boundsY = bounds.y;\n      var boundsWidth = bounds.width;\n      var boundsHeight = bounds.height;\n      var xInBounds = newX >= boundsX;\n      var yInBounds = newY >= boundsY;\n      var originInBounds = xInBounds && yInBounds;\n      var xFit = newX + width <= boundsX + boundsWidth;\n      var yFit = newY + height <= boundsY + boundsHeight;\n      var sizeInBounds = xFit && yFit;\n      var deltaW = Math.abs(Math.min(width, xInBounds ? boundsX + boundsWidth - newX : boundsX - (newX + width)));\n      var deltaH = Math.abs(Math.min(height, yInBounds ? boundsY + boundsHeight - newY : boundsY - (newY + height)));\n      var maxX = Math.max(bounds.x, bounds.right - width);\n      var maxY = Math.max(bounds.y, bounds.bottom - height);\n      var limitX = clamp(newX, bounds.x, maxX);\n      var limitY = clamp(newY, bounds.y, maxY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        limitX: limitX,\n        limitY: limitY,\n        deltaW: deltaW,\n        deltaH: deltaH\n      };\n    };\n    var attempt = function (candidate, width, height, bounds) {\n      var candidateX = candidate.x;\n      var candidateY = candidate.y;\n      var bubbleOffsets = candidate.bubble.offset;\n      var bubbleLeft = bubbleOffsets.left;\n      var bubbleTop = bubbleOffsets.top;\n      var adjustedBounds = adjustBounds(bounds, candidate.boundsRestriction, bubbleOffsets);\n      var boundsY = adjustedBounds.y;\n      var boundsBottom = adjustedBounds.bottom;\n      var boundsX = adjustedBounds.x;\n      var boundsRight = adjustedBounds.right;\n      var newX = candidateX + bubbleLeft;\n      var newY = candidateY + bubbleTop;\n      var _a = calcReposition(newX, newY, width, height, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, limitX = _a.limitX, limitY = _a.limitY, deltaW = _a.deltaW, deltaH = _a.deltaH;\n      var upAvailable = constant(limitY + deltaH - boundsY);\n      var downAvailable = constant(boundsBottom - limitY);\n      var maxHeight = cataVertical(candidate.direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant(limitX + deltaW - boundsX);\n      var eastAvailable = constant(boundsRight - limitX);\n      var maxWidth = cataHorizontal(candidate.direction, eastAvailable, eastAvailable, westAvailable);\n      var reposition = {\n        x: limitX,\n        y: limitY,\n        width: deltaW,\n        height: deltaH,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        classes: {\n          on: candidate.bubble.classesOn,\n          off: candidate.bubble.classesOff\n        },\n        label: candidate.label,\n        candidateYforTest: newY\n      };\n      return originInBounds && sizeInBounds ? adt$4.fit(reposition) : adt$4.nofit(reposition, deltaW, deltaH);\n    };\n    var attempts = function (candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, deltaW, deltaH) {\n        var next = layout(anchorBox, elementBox, bubbles);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(adt$4.fit, function (newReposition, newDeltaW, newDeltaH) {\n          var improved = newDeltaH > deltaH || newDeltaW > deltaW;\n          return improved ? adt$4.nofit(newReposition, newDeltaW, newDeltaH) : adt$4.nofit(reposition, deltaW, deltaH);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(adt$4.fit, bestNext);\n      }, adt$4.nofit({\n        x: anchorBox.x,\n        y: anchorBox.y,\n        width: elementBox.width,\n        height: elementBox.height,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast(),\n        classes: {\n          on: [],\n          off: []\n        },\n        label: 'none',\n        candidateYforTest: anchorBox.y\n      }, -1, -1));\n      return abc.fold(identity, identity);\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$2(p),\n        height: getOuter$1(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$5(element, classInfo.off);\n      add$3(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position = function (element, decision, options) {\n      applyPositionCss(element, reposition(options.origin, decision));\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax(element, Math.floor(maxHeight));\n    };\n    var anchored = constant(function (element, available) {\n      setMaxHeight(element, available);\n      setAll$1(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable = constant(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, getBounds, overrideOptions) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport$1(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction\n      };\n      go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position(element, decision, options);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right'\n    ];\n    var nu$8 = function (width, yoffset, classes) {\n      var getClasses = function (prop) {\n        return get$1(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind(alignmentsOn, getClasses),\n          classesOff: bind(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerNorthwest: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        innerNortheast: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        innerNorth: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        innerSouthwest: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        innerSoutheast: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        innerSouth: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        innerWest: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerEast: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$8(0, 0, {});\n    };\n\n    var nu$9 = function (x) {\n      return x;\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$5(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement(current) && get$3(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$1 = function () {\n      return optionObjOf('layouts', [\n        strict$1('onLtr'),\n        strict$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$b = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$b(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      strict$1('hotspot'),\n      option('bubble'),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement)\n    ];\n\n    var placement$1 = function (component, anchorInfo, origin) {\n      var pos = translate(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds$1(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$b(component.element, anchorInfo, all$2(), allRtl(), all$2(), allRtl(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      strict$1('x'),\n      strict$1('y'),\n      defaulted$1('height', 0),\n      defaulted$1('width', 0),\n      defaulted$1('bubble', fallback()),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement$1)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$5 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$2 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$5.before;\n    var on = adt$5.on;\n    var after$1 = adt$5.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$1,\n      cata: cata$2,\n      getStart: getStart\n    };\n\n    var adt$6 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$6.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$6.domRange;\n    var relative$1 = adt$6.relative;\n    var exact = adt$6.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative$1,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$7 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$7.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$7.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$7.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr = adt$7.ltr;\n    var rtl = adt$7.rtl;\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$c = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$2(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText(last) ? get$c(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    var adt$8 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity, identity);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$8.screen;\n    var absolute$2 = adt$8.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner(frame);\n        var compOwner = owner(component.element);\n        return eq$1(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$2(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var capRect = function (left, top, width, height) {\n      var newLeft = left, newTop = top, newWidth = width, newHeight = height;\n      if (left < 0) {\n        newLeft = 0;\n        newWidth = width + left;\n      }\n      if (top < 0) {\n        newTop = 0;\n        newHeight = height + top;\n      }\n      var point = screen(SugarPosition(newLeft, newTop));\n      return Optional.some(pointed(point, newWidth, newHeight));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$b(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$9({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var descendOnce$1 = function (element, offset) {\n      return isText(element) ? point(element, offset) : descendOnce(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce$1(sel.start, sel.soffset);\n        var modFinish = descendOnce$1(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$2 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getFirstRect$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before(sel.start, x);\n          return getFirstRect$1(win, SimSelection.exact(x, 0, x, 1)).map(function (rect) {\n            remove(x);\n            return rect;\n          });\n        });\n        return optRect.bind(function (rawRect) {\n          return capRect(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$2)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = capRect(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      strict$1('node'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$3)\n    ];\n\n    var eastX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), southY$1(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), 'link-layout-se');\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), southY$1(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), 'link-layout-sw');\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), northY$1(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), 'link-layout-ne');\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), 'link-layout-nw');\n    };\n    var all$3 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2\n      ];\n    };\n\n    var placement$4 = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$b(component.element, submenuInfo, all$3(), allRtl$1(), all$3(), allRtl$1(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      strict$1('item'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      output('placement', placement$4)\n    ];\n\n    var AnchorSchema = choose$1('anchor', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee) {\n      var anchor = box$1(anchoring.anchorBox, origin);\n      simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, getBounds, anchoring.overrides);\n    };\n    var position$1 = function (component, posConfig, posState, anchor, placee) {\n      positionWithin(component, posConfig, posState, anchor, placee, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, anchor, placee, boxElement) {\n      var boundsBox = boxElement.map(box);\n      return positionWithinBounds(component, posConfig, posState, anchor, placee, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, anchor, placee, bounds) {\n      var anchorage = asRawOrDie('positioning anchor.info', AnchorSchema, anchor);\n      preserve(function () {\n        set$2(placee.element, 'position', 'fixed');\n        var oldVisibility = getRaw(placee.element, 'visibility');\n        set$2(placee.element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          doPlace(component, origin, anchoring, getBounds, placee);\n        });\n        oldVisibility.fold(function () {\n          remove$6(placee.element, 'visibility');\n        }, function (vis) {\n          set$2(placee.element, 'visibility', vis);\n        });\n        if (getRaw(placee.element, 'left').isNone() && getRaw(placee.element, 'top').isNone() && getRaw(placee.element, 'right').isNone() && getRaw(placee.element, 'bottom').isNone() && getRaw(placee.element, 'position').is('fixed')) {\n          remove$6(placee.element, 'position');\n        }\n      }, placee.element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode\n    });\n\n    var PositionSchema = [\n      defaulted$1('useFixed', never),\n      option('getBounds')\n    ];\n\n    var Positioning = create$1({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach = function (parent, child) {\n      append(parent.element, child.element);\n    };\n    var detachChildren = function (component) {\n      each(component.components(), function (childComp) {\n        return remove(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren(component);\n      var deleted = difference(subs, newChildren);\n      each(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach$1 = function (parent, child) {\n      attachWith(parent, child, append);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren$1 = function (component) {\n      var subs = component.components();\n      each(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren$1(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach$1(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach$1(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren$1(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf$1 = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$1(sandbox.element, attr);\n      }, function (v) {\n        set$1(sandbox.element, attr, v);\n      });\n      set$2(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$2(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$2(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open,\n        openWhileCloaked: openWhileCloaked,\n        close: close,\n        isOpen: isOpen,\n        isPartOf: isPartOf$1,\n        getState: getState,\n        setContent: setContent\n    });\n\n    var events$2 = function (sandboxConfig, sandboxState) {\n      return derive([run(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$2\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      strict$1('isPartOf'),\n      strict$1('getAttachPoint'),\n      defaulted$1('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init = function () {\n      var contents = Cell(Optional.none());\n      var readState = constant('not-implemented');\n      var isOpen = function () {\n        return contents.get().isSome();\n      };\n      var set = function (comp) {\n        contents.set(Optional.some(comp));\n      };\n      var get = function () {\n        return contents.get();\n      };\n      var clear = function () {\n        contents.set(Optional.none());\n      };\n      return nu$5({\n        readState: readState,\n        isOpen: isOpen,\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Sandboxing = create$1({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant('dismiss.popups');\n    var repositionPopups = constant('reposition.popups');\n    var mouseReleased = constant('mouse.released');\n\n    var schema$2 = objOfOnly([\n      defaulted$1('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted$1('event', dismissRequested())])\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Dismissal', schema$2, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([strict$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$3 = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted$1('event', repositionRequested())]),\n      strictFunction('doReposition')\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Reposition', schema$3, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        onUnload: onUnload,\n        setValue: setValue,\n        getValue: getValue,\n        getState: getState$1\n    });\n\n    var events$3 = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad)];\n      return derive(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var memory = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$5({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = function () {\n      };\n      return nu$5({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$1(dataByValue.get(), itemString).orThunk(function () {\n          return get$1(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$1(item, 'meta').each(function (meta) {\n            get$1(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$5({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$1 = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory,\n        dataset: dataset,\n        manual: manual,\n        init: init$1\n    });\n\n    var setValue$1 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).fold(function () {\n        return store.getFallbackEntry(key);\n      }, function (data) {\n        return data;\n      });\n    };\n    var onLoad$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$1(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      strict$1('getFallbackEntry'),\n      strict$1('getDataKey'),\n      strict$1('setValue'),\n      output('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$1,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$2 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$2 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$2 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      strict$1('getValue'),\n      defaulted$1('setValue', noop),\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$2,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$3 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$3,\n        getValue: getValue$3,\n        onLoad: onLoad$3,\n        onUnload: onUnload$2,\n        state: memory\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted$1('resetOnDom', false)\n    ];\n\n    var Representing = create$1({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field$1 = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([state$1('dump', identity)]));\n    };\n    var get$d = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, data.dump), derive$1(original));\n    };\n    var SketchBehaviours = {\n      field: field$1,\n      augment: augment,\n      get: get$d\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$9 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$9.single(true, constant(compSpec));\n      }\n      return get$1(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$9.single(false, constant(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$1(value, 'components').getOr([]);\n        var substituted = bind(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$2(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each$1(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single = adt$9.single;\n    var multiple = adt$9.multiple;\n    var placeholder = constant(_placeholder);\n\n    var adt$a = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted$1('factory', { sketch: identity });\n    var fSchema = defaulted$1('schema', []);\n    var fName = strict$1('name');\n    var fPname = field('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$1(typeSpec.name) + '>';\n    }), anyValue$1());\n    var fGroupSchema = state$1('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted$1('defaults', constant({}));\n    var fOverrides = defaulted$1('overrides', constant({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      strict$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity, identity, identity, identity);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$a.required, requiredSpec);\n    var external$1 = convert(adt$a.external, externalSpec);\n    var optional = convert(adt$a.optional, optionalSpec);\n    var group = convert(adt$a.group, groupSpec);\n    var original = constant('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine$2 = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant(data.factory.sketch(combine$2(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant(internals),\n        externals: constant(externals)\n      };\n    };\n\n    var generate$4 = function (owner, parts) {\n      var r = {};\n      each(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return strictObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$2(detail.partUids, function (pUid, _k) {\n        return constant(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll$1(map(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue$1());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$4,\n        generateOne: generateOne,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [strictObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        strict$1('uid'),\n        defaulted$1('dom', {}),\n        defaulted$1('components', []),\n        snapshot('originalSpec'),\n        defaulted$1('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie$1 = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components$1 = components(owner, detail, subs.internals());\n      return factory(detail, components$1, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$2('uid') });\n    };\n\n    function isSketchSpec(spec) {\n      return spec.uid !== undefined;\n    }\n    var singleSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      strict$1('partFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var single$2 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite$1 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$4(config.name, config.partFields);\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var inside = function (target) {\n      return name(target) === 'input' && get$3(target, 'type') !== 'radio' || name(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [strict$1('find')];\n\n    var Composing = create$1({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$4(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight$1 = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$4(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight());\n      }\n    };\n    var highlight$1 = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight$1(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw new Error(err);\n      }, function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight$1(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has$2(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error('No element found with index ' + index);\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex(items, function (item) {\n        return has$2(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight$1,\n        highlight: highlight$1,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      strict$1('highlightClass'),\n      strict$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$1({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose$2 = function (transitions, event) {\n      var transition = find(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq$1(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted$1('focusManager', dom()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output('handler', me),\n          output('state', stateInit),\n          output('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose$2(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run(focus(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$3 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted$1('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted$1('firstTabstop', 0),\n        defaulted$1('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$3(element, sel);\n        }).getOr(element);\n        return get$7(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$3(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex(tabstops, curry(eq$1, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$3(state$1('cyclic', never));\n\n    var CyclicType = create$3(state$1('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$4 = [\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('useSpace', false),\n      defaulted$1('useEnter', true),\n      defaulted$1('useControlEnter', false),\n      defaulted$1('useDown', false)\n    ];\n    var execute$1 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$1)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$1)] : []);\n    };\n    var getKeyupRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$4, NoState.init, getKeydownRules, getKeyupRules, function () {\n      return Optional.none();\n    });\n\n    var flatgrid = function () {\n      var dimensions = Cell(Optional.none());\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set(Optional.some({\n          numRows: numRows,\n          numColumns: numColumns\n        }));\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$5({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$2 = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid,\n        init: init$2\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$2 = useV;\n    var south$2 = useV;\n    var move = useV;\n\n    var isHidden = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq$1(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex$1 = function (elements, target) {\n      return findIndex(elements, function (elem) {\n        return eq$1(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, -1);\n    };\n    var cycleUp = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, -1);\n    };\n    var cycleDown = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, +1);\n    };\n\n    var schema$5 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('captureTab', false),\n      initSize()\n    ];\n    var focusIn = function (component, gridConfig, _gridState) {\n      descendant$1(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, gridConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft = doMove(cycleLeft);\n    var moveRight = doMove(cycleRight);\n    var moveNorth = doMove(cycleUp);\n    var moveSouth = doMove(cycleDown);\n    var getKeydownRules$1 = constant([\n      rule(inSet(LEFT), west$2(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$2(moveLeft, moveRight)),\n      rule(inSet(UP), north$2(moveNorth)),\n      rule(inSet(DOWN), south$2(moveSouth)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape),\n      rule(inSet(SPACE.concat(ENTER)), execute$2)\n    ]);\n    var getKeyupRules$1 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$5, flatgrid, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name(candidate) === 'button' && get$3(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$6 = [\n      strict$1('selector'),\n      defaulted$1('getInitial', Optional.none),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('executeOnMove', false),\n      defaulted$1('allowVertical', true)\n    ];\n    var findCurrent$1 = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, flowConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent$1(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$1 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant$1(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$3(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape$1 = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$2 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$2(moveLeft$1, moveRight$1))),\n        rule(inSet(eastMovers), doMove$1(east$2(moveLeft$1, moveRight$1))),\n        rule(inSet(ENTER), execute$3),\n        rule(inSet(SPACE), execute$3),\n        rule(inSet(ESCAPE), doEscape$1)\n      ];\n    };\n    var getKeyupRules$2 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$6, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal$1 = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical$1 = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, -1);\n    };\n    var cycleUp$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, -1);\n    };\n    var cycleDown$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$7 = [\n      strictObjOf('selectors', [\n        strict$1('row'),\n        strict$1('cell')\n      ]),\n      defaulted$1('cycles', true),\n      defaulted$1('previousSelector', Optional.none),\n      defaulted$1('execute', defaultExecute)\n    ];\n    var focusIn$2 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant$1(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$4 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove$2 = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$3(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex$1(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex$1(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1, moveLeft$2);\n    var moveRight$3 = doMove$2(cycleRight$1, moveRight$2);\n    var moveNorth$1 = doMove$2(cycleUp$1, moveUp);\n    var moveSouth$1 = doMove$2(cycleDown$1, moveDown);\n    var getKeydownRules$3 = constant([\n      rule(inSet(LEFT), west$2(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$2(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$2(moveNorth$1)),\n      rule(inSet(DOWN), south$2(moveSouth$1)),\n      rule(inSet(SPACE.concat(ENTER)), execute$4)\n    ]);\n    var getKeyupRules$3 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$7, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var schema$8 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('moveOnTab', false)\n    ];\n    var execute$5 = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$3 = function (component, menuConfig, _state) {\n      descendant$1(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveUp$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveDown$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$4 = constant([\n      rule(inSet(UP), move(moveUp$1)),\n      rule(inSet(DOWN), move(moveDown$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute$5),\n      rule(inSet(SPACE), execute$5)\n    ]);\n    var getKeyupRules$4 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$8, NoState.init, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var schema$9 = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules$5 = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules$5 = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$9, NoState.init, getKeydownRules$5, getKeyupRules$5, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid$1 = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid$1,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes$1({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$5 = function (component, replaceConfig, replaceState, data) {\n      preserve(function () {\n        var newChildren = map(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append$2 = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append, appendee);\n    };\n    var prepend$1 = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend, prependee);\n    };\n    var remove$7 = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find(children, function (child) {\n        return eq$1(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove$7(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append$2,\n        prepend: prepend$1,\n        remove: remove$7,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$5,\n        contents: contents\n    });\n\n    var Replacing = create$1({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$4 = function (name, eventHandlers) {\n      var events = derive(eventHandlers);\n      return create$1({\n        fields: [strict$1('enabled')],\n        name: name,\n        active: { events: constant(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$4(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$1(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur$1 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur$1,\n        isFocused: isFocused\n    });\n\n    var exhibit$1 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$6(mod);\n    };\n    var events$5 = function (focusConfig) {\n      return derive([run(focus(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$1,\n        events: events$5\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted$1('stopMousedown', false),\n      defaulted$1('ignore', false)\n    ];\n\n    var Focusing = create$1({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$4(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on$1 = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$6 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on$1 : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad$4 = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$4,\n        toggle: toggle,\n        isOn: isOn,\n        on: on$1,\n        off: off,\n        set: set$6\n    });\n\n    var exhibit$2 = function () {\n      return nu$6({});\n    };\n    var events$6 = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle);\n      var load = loadEvent(toggleConfig, toggleState, onLoad$4);\n      return derive(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2,\n        events: events$6\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted$1('selected', false),\n      option('toggleClass'),\n      defaulted$1('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted$1('syncWithExpanded', false),\n          output('update', updatePressed)\n        ],\n        checked: [output('update', updateChecked)],\n        expanded: [output('update', updateExpanded)],\n        selected: [output('update', updateSelected)],\n        none: [output('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$1({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run(click(), onClick),\n        run(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$7 = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant(hoverEvent);\n    var focus$3 = constant(focusEvent);\n\n    var builder = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArrays(pointerEvents(), [\n            run(mouseover(), onHover),\n            run(focusItem(), Focusing.focus)\n          ]))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$a = [\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted$1('ignoreFocus', false),\n      defaulted$1('domModification', {}),\n      output('builder', builder),\n      defaulted$1('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive([stopper(focusItem())])\n      };\n    };\n    var schema$b = [\n      strict$1('dom'),\n      strict$1('components'),\n      output('builder', builder$1)\n    ];\n\n    var owner$2 = function () {\n      return 'item-widget';\n    };\n    var parts = constant([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: function () {\n                  }\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder$2 = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts());\n      var components$1 = components(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components$1,\n        domModification: detail.domModification,\n        events: derive([\n          runOnExecute(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(mouseover(), onHover),\n          run(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$c = [\n      strict$1('uid'),\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('autofocus', false),\n      defaulted$1('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted$1('domModification', {}),\n      defaultUidsSchema(parts()),\n      output('builder', builder$2)\n    ];\n\n    var itemSchema$1 = choose$1('type', {\n      widget: schema$c,\n      item: schema$a,\n      separator: schema$b\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$1 = constant([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie('menu.spec item', itemSchema$1, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return u.hasOwnProperty('uid') ? u : __assign(__assign({}, u), { uid: generate$2('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$d = constant([\n      strict$1('value'),\n      strict$1('items'),\n      strict$1('dom'),\n      strict$1('components'),\n      defaulted$1('eventOrder', {}),\n      field$1('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output('config', configureGrid)\n        ],\n        matrix: [\n          output('config', configureMatrix),\n          strict$1('rowSelector')\n        ],\n        menu: [\n          defaulted$1('moveOnTab', true),\n          output('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted$1('fakeFocus', false),\n      defaulted$1('focusManager', dom()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus$4 = constant('alloy.menu-focus');\n\n    var make$1 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive([\n          run(focus$3(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus$4(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite$1({\n      name: 'Menu',\n      configFields: schema$d(),\n      partFields: parts$1(),\n      factory: make$1\n    });\n\n    var transpose = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$1(byMenu, finish).bind(function (triggerItem) {\n        return get$1(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$5 = function (menus, expansions) {\n      var items = {};\n      each$1(menus, function (menuItems, menu) {\n        each(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose(expansions);\n      var menuPaths = map$2(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$2(items, function (menu) {\n        return get$1(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$3 = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = Cell(Optional.none());\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.set(Optional.none());\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(Optional.some(sPrimary));\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$5(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$1(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return primary.get().is(menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$1(expansions.get(), itemValue).map(function (menu) {\n          var current = get$1(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$1(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$1(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$1(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$3,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$2 = function (detail, _rawUiSpec) {\n      var submenuParentItems = Cell(Optional.none());\n      var buildMenus = function (container, primaryName, menus) {\n        return map$2(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$2(detail.data.menus, function (data, _menuName) {\n          return bind(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each(others, function (o) {\n          remove$5(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter(items, function (i) {\n            return get$3(i, 'aria-haspopup') === 'true';\n          });\n          each(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(Optional.some(r));\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each$1(parentItems, function (v, k) {\n          var expanded = contains(path, k);\n          set$1(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              remove$5(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        var value = getItemValue(item);\n        return layeredState.expand(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return Optional.from(path[0]).bind(function (menuName) {\n            return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n              var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Optional.some(item);\n              }\n            });\n          });\n        });\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$3(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(function () {\n                return true;\n              });\n            });\n          });\n        };\n      };\n      var events = derive([\n        run(focus$4(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, function () {\n            });\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade$1(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$3(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem = constant('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem$1 = function (text) {\n      return {\n        value: generate$1(collapseItem()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single$2({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted$1('highlightImmediately', true),\n        strictObjOf('data', [\n          strict$1('primary'),\n          strict$1('menus'),\n          strict$1('expansions')\n        ]),\n        defaulted$1('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        strict$1('dom'),\n        defaulted$1('navigateOnHover', true),\n        defaulted$1('stayInDom', false),\n        field$1('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted$1('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$2,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem$1\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, anchor, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), anchor, menu, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, __assign({\n            anchor: 'submenu',\n            item: item\n          }, getSubmenuLayouts(triggeringPaths)), submenu);\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, anchor, primaryMenu, getBounds());\n          each(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, __assign({\n              anchor: 'submenu',\n              item: st.triggeringItem\n            }, submenuLayouts), st.triggeredMenu);\n          });\n        }\n      });\n    };\n    var factory = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, anchor, thing) {\n        showWithin(sandbox, anchor, thing, Optional.none());\n      };\n      var showWithin = function (sandbox, anchor, thing, boxElement) {\n        showWithinBounds(sandbox, anchor, thing, function () {\n          return boxElement.map(function (elem) {\n            return box(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, anchor, thing, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, anchor, sandbox, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          anchor: anchor,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, anchor, menuSpec) {\n        showMenuWithinBounds(sandbox, anchor, menuSpec, function () {\n          return Optional.none();\n        });\n      };\n      var showMenuWithinBounds = function (sandbox, anchor, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, anchor, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(function (tmenu) {\n                tieredMenu.repositionMenus(tmenu);\n              });\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, state.anchor, sandbox, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single$2({\n      name: 'InlineView',\n      configFields: [\n        strict$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field$1('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted$1('event', repositionRequested())]),\n        defaulted$1('getRelated', Optional.none),\n        defaulted$1('isExtraPart', never),\n        defaulted$1('eventOrder', Optional.none)\n      ],\n      factory: factory,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var westEdgeX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor) {\n      return anchor.y;\n    };\n    var southY$2 = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var southeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), southY$2(anchor, element), bubbles.innerSoutheast(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), 'layout-inner-se');\n    };\n    var southwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), southY$2(anchor, element), bubbles.innerSouthwest(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), 'layout-inner-sw');\n    };\n    var northeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), northY$2(anchor), bubbles.innerNortheast(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), 'layout-inner-ne');\n    };\n    var northwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), northY$2(anchor), bubbles.innerNorthwest(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), 'layout-inner-nw');\n    };\n    var north$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), northY$2(anchor), bubbles.innerNorth(), south(), boundsRestriction(anchor, { top: 2 }), 'layout-inner-n');\n    };\n    var south$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouth(), north(), boundsRestriction(anchor, { bottom: 3 }), 'layout-inner-s');\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$1 = function (detail) {\n      var events = events$7(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single$2({\n      name: 'Button',\n      factory: factory$1,\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('dom'),\n        defaulted$1('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$2('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var defaultIcon = function (icons) {\n      return Optional.from(icons()['temporary-placeholder']).getOr('!not found!');\n    };\n    var get$e = function (name, icons) {\n      return Optional.from(icons()[name.toLowerCase()]).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getOr = function (name, icons, fallback) {\n      return Optional.from(icons()[name.toLowerCase()]).or(fallback).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getFirst$1 = function (names, icons) {\n      return findMap(names, function (name) {\n        return Optional.from(icons()[name.toLowerCase()]);\n      }).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$2 = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', detail.iconProvider),\n              attributes: { 'aria-label': detail.translationProvider('Close') }\n            }\n          }],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var components = [\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__icon'],\n            innerHtml: getFirst$1(iconChoices, detail.iconProvider)\n          }\n        },\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__body']\n          },\n          components: [memBannerText.asSpec()],\n          behaviours: derive$1([Replacing.config({})])\n        }\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single$2({\n      name: 'Notification',\n      factory: factory$2,\n      configFields: [\n        option('level'),\n        strict$1('progress'),\n        strict$1('icon'),\n        strict$1('onAction'),\n        strict$1('text'),\n        strict$1('iconProvider'),\n        strict$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var backstage = extras.backstage;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south$3;\n        case 'tc-tc':\n          return north$3;\n        case 'tc-bc':\n          return north$1;\n        case 'bc-tc':\n        default:\n          return south$1;\n        }\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          return notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          head(notifications).each(function (firstItem) {\n            return firstItem.moveRel(null, 'banner');\n          });\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: backstage.shared.providers.icons,\n          translationProvider: backstage.shared.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: extras.backstage.shared.getSink,\n          fireDismissalEventInstead: {}\n        }, backstage.shared.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$2.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, {\n              anchor: 'makeshift',\n              x: x,\n              y: y\n            }, premade$1(notification));\n          },\n          moveRel: function (element, rel) {\n            if (rel !== 'banner') {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                anchor: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showAt(notificationWrapper, nodeAnchor, premade$1(notification));\n            } else {\n              InlineView.showAt(notificationWrapper, extras.backstage.shared.anchors.banner(), premade$1(notification));\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$3(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect$4(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect$4 = function (elm) {\n      return closest$3(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect$4(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect$4(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point$1 = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText$1 = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText$1(node)) {\n        return point$1(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point$1(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point$1(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$4.all(map(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted$1('type', 'autocompleteitem'),\n      defaulted$1('active', false),\n      defaulted$1('disabled', false),\n      defaulted$1('meta', {}),\n      strictString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      strictString('type'),\n      strictString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted$1('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      strictFunction('fetch'),\n      strictFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      strictString('type'),\n      strictFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      strictString('type'),\n      strictFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', function () {\n        return false;\n      }),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted$1('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted$1('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted$1('type', 'contextform'),\n      defaultedFunction('initValue', function () {\n        return '';\n      }),\n      optionString('label'),\n      strictArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted$1('type', 'contexttoolbar'),\n      strictString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$2(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, function (x) {\n          return x;\n        });\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var iconClassRtl = 'tox-collection__item-icon-rtl';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$1(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers$1 = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components$1 = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers$1(presets)\n      };\n    };\n\n    var chunk$1 = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk(items, numColumns);\n        return map(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk$1({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk$1({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk$1({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components$1,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      strictString('type'),\n      strictString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      strictString('type'),\n      strictString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$2 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      strictString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      strictArrayOf('items', itemSchema$2)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field('value', 'value', defaultedThunk(function () {\n        return generate$1('menuitem-value');\n      }), anyValue$1()),\n      defaulted$1('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('label'),\n      strictArrayOf('items', itemSchema$2),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var fancyTypes = [\n      'inserttable',\n      'colorswatch'\n    ];\n    var fancyMenuItemSchema = objOf([\n      strictString('type'),\n      strictStringEnum('fancytype', fancyTypes),\n      defaultedFunction('onAction', noop)\n    ]);\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      strictString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      strictString('type'),\n      strictFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      strictFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$1('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var TooltippingSchema = [\n      strict$1('lazySink'),\n      strict$1('tooltipDom'),\n      defaulted$1('exclusive', true),\n      defaulted$1('tooltipComponents', []),\n      defaulted$1('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted$1('anchor', function (comp) {\n        return {\n          anchor: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ]),\n            onRtl: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$4 = function () {\n      var timer = Cell(Optional.none());\n      var popup = Cell(Optional.none());\n      var getTooltip = function () {\n        return popup.get();\n      };\n      var setTooltip = function (comp) {\n        popup.set(Optional.some(comp));\n      };\n      var clearTooltip = function () {\n        popup.set(Optional.none());\n      };\n      var clearTimer = function () {\n        timer.get().each(function (t) {\n          clearTimeout(t);\n        });\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(Optional.some(setTimeout(function () {\n          f();\n        }, delay)));\n      };\n      var isShowing = function () {\n        return popup.get().isSome();\n      };\n      var readState = constant('not-implemented');\n      return nu$5({\n        getTooltip: getTooltip,\n        isShowing: isShowing,\n        setTooltip: setTooltip,\n        clearTooltip: clearTooltip,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var ExclusivityChannel = generate$1('tooltip.exclusive');\n    var ShowTooltipEvent = generate$1('tooltip.show');\n    var HideTooltipEvent = generate$1('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$8 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive(tooltipConfig.mode === 'normal' ? [\n              run(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach$1(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, tooltipConfig.anchor(comp), popup);\n        }\n      };\n      return derive(flatten([\n        [\n          run(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run(highlight(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(dehighlight(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var Tooltipping = create$1({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$5 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable : enable;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains(nativeDisabled, name(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$1(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$1(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$3(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$1(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$1(component.element, 'aria-disabled', 'false');\n    };\n    var disable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$4(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$7 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable : enable;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$5,\n        set: set$7\n    });\n\n    var exhibit$3 = function (base, disableConfig) {\n      return nu$6({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$9 = function (disableConfig, disableState) {\n      return derive([\n        abort(execute(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$5)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$9\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted$1('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$1({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$7.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$5.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, function () {\n        return true;\n      });\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerElement = function (editor) {\n      var selector = fixedContainerSelector(editor);\n      return selector.length > 0 && editor.inline ? descendant$1(body(), selector) : Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerElement(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerElement(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var isDraggableModal = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$2(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([strictBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (onDestroy !== null && onDestroy !== undefined) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a = {}, _a[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a);\n\n    var componentRenderPipeline = function (xs) {\n      return bind(xs, function (o) {\n        return o.toArray();\n      });\n    };\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$8.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has(replace, search) ? replace[search] : segment;\n      });\n      return global$8.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon = function (iconHtml) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [iconClass],\n          innerHtml: iconHtml\n        }\n      };\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$6.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text(global$6.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [checkmarkClass],\n          innerHtml: get$e('checkmark', icons)\n        }\n      };\n    };\n    var renderSubmenuCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-right', icons)\n        }\n      };\n    };\n    var renderDownwardsCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-down', icons)\n        }\n      };\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (itemText, itemValue, iconSvg, providerBackstage) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArrays(baseDom.classes, ['tox-swatches__picker-btn']),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArrays(baseDom.classes, ['tox-swatch--remove']),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (rtlClass, ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$6.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ].concat(rtlClass ? [iconClassRtl] : [])\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, icon, renderIcons, textRender, rtlClass) {\n      var leftIcon = renderIcons ? icon.or(Optional.some('')).map(renderIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(rtlClass, info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var rtlIcon = [\n      'list-num-default',\n      'list-num-lower-alpha',\n      'list-num-lower-greek',\n      'list-num-lower-roman',\n      'list-num-upper-alpha',\n      'list-num-upper-roman'\n    ];\n    var rtlTransform = [\n      'list-bull-circle',\n      'list-bull-default',\n      'list-bull-square'\n    ];\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      var getIconName = function (iconName) {\n        return iconName.map(function (name) {\n          return global$6.isRtl() && contains(rtlIcon, name) ? name + '-rtl' : name;\n        });\n      };\n      var needRtlClass = global$6.isRtl() && info.iconContent.exists(function (name) {\n        return contains(rtlTransform, name);\n      });\n      var icon = getIconName(info.iconContent).map(function (iconName) {\n        return getOr(iconName, providersBackstage.icons, fallbackIcon);\n      });\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      if (info.presets === 'color') {\n        return renderColorStructure(info.ariaLabel, info.value, icon, providersBackstage);\n      } else {\n        return renderNormalItemStructure(info, icon, renderIcons, textRender, needRtlClass);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$1(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                anchor: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var escapeRegExp = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n    var encodeText = function (text) {\n      return global$5.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$6.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escapeRegExp(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: function () {\n          return {};\n        },\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: function () {\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$2 = generate$4(owner$2(), parts());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round(255 * (r + match));\n      g = round(255 * (g + match));\n      b = round(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$9.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$9.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      var canvas = document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      var ctx = canvas.getContext('2d');\n      var byteAsHex = function (colorByte, alphaByte) {\n        var bg = 255;\n        var alpha = alphaByte / 255;\n        var colorByteWithWhiteBg = Math.round(colorByte * alpha + bg * (1 - alpha));\n        return ('0' + colorByteWithWhiteBg.toString(16)).slice(-2).toUpperCase();\n      };\n      var asHexColor = function (color) {\n        if (/^[0-9A-Fa-f]{6}$/.test(color)) {\n          return '#' + color.toUpperCase();\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        var rgba = ctx.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0], g = rgba[1], b = rgba[2], a = rgba[3];\n        return '#' + byteAsHex(r, a) + byteAsHex(g, a) + byteAsHex(b, a);\n      };\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: asHexColor(colorMap[i]),\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, '#000000');\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var setIconFillAndStroke = function (pathId, color) {\n        splitButtonApi.setIconFill(pathId, color);\n        splitButtonApi.setIconStroke(pathId, color);\n      };\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      setIconFillAndStroke(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = Optional.from(getCurrentColor(editor, format));\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch(getColors(editor), hasCustomColors(editor)),\n        onAction: function (_splitButtonApi) {\n          if (lastColor.get() !== null) {\n            applyColor(editor, format, lastColor.get(), function () {\n            });\n          }\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            setIconColor(splitButtonApi, name, lastColor.get());\n          }\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var getOnSubmit = function (callback) {\n          return function (api) {\n            var data = api.getData();\n            callback(Optional.from(data.colorpicker));\n            api.close();\n          };\n        };\n        var onAction = function (api, details) {\n          if (details.name === 'hex-valid') {\n            if (details.value) {\n              api.enable('ok');\n            } else {\n              api.disable('ok');\n            }\n          }\n        };\n        var initialData = { colorpicker: value };\n        var submit = getOnSubmit(callback);\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: submit,\n          onClose: function () {\n          },\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(null);\n      var lastBackColor = Cell(null);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers$1(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    function renderColorSwatchItem(spec, backstage) {\n      var items = getColors$1(backstage.colorinput.getColors(), backstage.colorinput.hasCustomColors());\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n        return false;\n      }, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers$1(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget(Menu.sketch(widgetSpec))]\n      };\n    }\n\n    var cellOverEvent = generate$1('cell-over');\n    var cellExecuteEvent = generate$1('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run(mouseover(), Focusing.focus),\n            run(execute(), emitExecute),\n            run(click(), onClick),\n            run(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind(cells, function (cellRow) {\n        return map(cellRow, premade$1);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 1 + 'x' + (row + 1));\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$1('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [text('0x0')],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var row = e.event.row;\n                  var col = e.event.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row, col)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  spec.onAction({\n                    numRows: e.event.row + 1,\n                    numColumns: e.event.col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var valueOpt = function (obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key) ? Optional.some(obj[key]) : Optional.none();\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return valueOpt(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var render = function (items, extras) {\n      return map(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(false, spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !i.hasOwnProperty('text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers$1(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$2 = function (editor, sharedBackstage) {\n      var activeAutocompleter = Cell(Optional.none());\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect$4(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.set(Optional.none());\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set(Optional.some({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          }));\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, {\n          anchor: 'node',\n          root: SugarElement.fromDom(editor.getBody()),\n          node: Optional.from(ac.element)\n        }, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')));\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last$2(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$2 };\n\n    var filter$2 = always;\n    var bind$3 = function (element, event, handler) {\n      return bind$2(element, event, filter$2, handler);\n    };\n    var capture$1 = function (element, event, handler) {\n      return capture(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var closest$4 = function (scope, selector, isRoot) {\n      return closest$3(scope, selector, isRoot).isSome();\n    };\n\n    function DelayedFunction (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    }\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = Cell(Optional.none());\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(Optional.some(data));\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Optional.none());\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq$1(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll$1([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$1(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains([\n        'input',\n        'textarea'\n      ], name(event.target)) && !closest$4(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$3().browser.isFirefox();\n    };\n    var settingsSchema = objOfOnly([\n      strictFunction('triggerEvent'),\n      defaulted$1('stopBackspace', true)\n    ]);\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'focus', handler);\n      } else {\n        return bind$3(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'blur', handler);\n      } else {\n        return bind$3(container, 'focusout', handler);\n      }\n    };\n    var setup$1 = function (container, rawSettings) {\n      var settings = asRawOrDie('Getting GUI events settings', settingsSchema, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind$3(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = Cell(Optional.none());\n      var onPaste = bind$3(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0)));\n      });\n      var onKeydown = bind$3(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace === true && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = Cell(Optional.none());\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0)));\n      });\n      var unbind = function () {\n        each(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.get().each(clearTimeout);\n        focusoutTimeout.get().each(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive$2 = function (rawEvent, rawTarget) {\n      var source = get$1(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$b = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$b.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(function () {\n        return true;\n      }, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, function () {\n        return false;\n      });\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive$2(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive$2(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    function EventRegistry () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each$1(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).fold(function () {\n          return Optional.none();\n        }, function (id) {\n          return handlers.bind(function (h) {\n            return get$1(h, id);\n          }).map(function (descHandler) {\n            return eventHandler(elem, descHandler);\n          });\n        });\n      };\n      var filterByType = function (type) {\n        return get$1(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        var handlers = get$1(registry, type);\n        return closest(target, function (elem) {\n          return findHandler(handlers, elem);\n        }, isAboveRoot);\n      };\n      var unregisterId = function (id) {\n        each$1(registry, function (handlersById, _eventName) {\n          if (handlersById.hasOwnProperty(id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    }\n\n    function Registry () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).fold(function () {\n          return write('uid-', component.element);\n        }, function (uid) {\n          return uid;\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$1(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    }\n\n    var factory$3 = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$d(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single$2({\n      name: 'Container',\n      factory: factory$3,\n      configFields: [\n        defaulted$1('components', []),\n        field$1('containerBehaviours', []),\n        defaulted$1('events', {}),\n        defaulted$1('domModification', {}),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(function () {\n          return true;\n        }, function (parent) {\n          return eq$1(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$1(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$1(target);\n          }, function (_alloyId) {\n            monitorEvent(focus(), target, function (logger) {\n              triggerHandler(lookup, focus(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove$1(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText(component.element)) {\n          registry.register(component);\n          each(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText(component.element)) {\n          each(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach$1(root, component);\n      };\n      var remove$1 = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove$1,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$e = constant([\n      defaulted$1('prefix', 'form-field'),\n      field$1('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$3 = constant([\n      optional({\n        schema: [strict$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude$1(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [strict$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$1(detail.prefix);\n            ps.label().each(function (label) {\n              set$1(label.element, 'for', id);\n              set$1(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$1(detail.prefix);\n              set$1(descriptor.element, 'id', descriptorId);\n              set$1(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite$1({\n      name: 'FormField',\n      configFields: schema$e(),\n      partFields: parts$3(),\n      factory: factory$4,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$4 = function (base, tabConfig) {\n      return nu$6({\n        attributes: wrapAll$1([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4\n    });\n\n    var TabstopSchema = [defaulted$1('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$1({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$1('form-component-change');\n    var formCloseEvent = generate$1('form-close');\n    var formCancelEvent = generate$1('form-cancel');\n    var formActionEvent = generate$1('form-action');\n    var formSubmitEvent = generate$1('form-submit');\n    var formBlockEvent = generate$1('form-block');\n    var formUnblockEvent = generate$1('form-unblock');\n    var formTabChangeEvent = generate$1('form-tabchange');\n    var formResizeEvent = generate$1('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$3(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$3(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map(items, function (item) {\n          var itemText = global$6.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$a.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk(htmlLines, spec.columns) : [htmlLines];\n        var html = map(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$1(tgt);\n        })),\n        run(click(), onClick),\n        run(tap(), onClick),\n        run(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run(focusout(), runOnItem(function (comp) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n        })),\n        runOnExecute(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$1(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$4(childElm, 'tox-collection__item--state-disabled');\n                remove$1(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$f = constant([\n      option('data'),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('tag', 'input'),\n      defaulted$1('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted$1('styles', {}),\n      defaulted$1('eventOrder', {}),\n      field$1('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted$1('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$6(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$6(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$6(input.element);\n              if (current !== data) {\n                set$3(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom$2 = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$5 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom$2(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single$2({\n      name: 'Input',\n      configFields: schema$f(),\n      factory: factory$5\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu$a = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$a(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$a(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$a,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$3 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$3(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$3(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$3(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$3(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$b = function (baseFn) {\n      return make$3(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make$3(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$b,\n      pure: pure$1\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name$1 = name(elem);\n      return contains(ariaElements, name$1);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$4(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run$1 = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has$2(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run$1,\n        isInvalid: isInvalid\n    });\n\n    var events$a = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive([run(validatorInfo.onEvent, function (component) {\n            run$1(component, invalidConfig, invalidState).get(identity);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run$1(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$a\n    });\n\n    var InvalidateSchema = [\n      strict$1('invalidClass'),\n      defaulted$1('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted$1('aria', 'alert'),\n        defaulted$1('getContainer', Optional.none),\n        defaulted$1('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        strict$1('validate'),\n        defaulted$1('onEvent', 'input'),\n        defaulted$1('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$1({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [strictOf('others', setOf$1(Result.value, anyValue$1()))];\n\n    var init$5 = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$1(coupled, name).getOrThunk(function () {\n            var builder = get$1(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Coupling = create$1({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant('sink');\n    var partType = constant(optional({\n      name: suffix(),\n      overrides: constant({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var anchor = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$2(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, menu);\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, {\n                anchor: 'submenu',\n                item: item\n              }, submenu);\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, primaryMenu);\n              each(submenuTriggers, function (st) {\n                Positioning.position(sink, {\n                  anchor: 'submenu',\n                  item: st.triggeringItem\n                }, st.triggeredMenu);\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open$1 = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close$1 = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close$1 : open$1;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$8(hotspot.element);\n      if (useMinWidth) {\n        set$2(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$4(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel({ isExtraPart: never })), receivingChannel$1({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted$1('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$g = constant([\n      strict$1('dom'),\n      strict$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      field$1('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      strict$1('toggleClass'),\n      defaulted$1('eventOrder', {}),\n      option('lazySink'),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$4 = constant([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$6 = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox(detail, hotspot, {\n                  onOpen: function () {\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$7(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite$1({\n      name: 'Dropdown',\n      configFields: schema$g(),\n      partFields: parts$4(),\n      factory: factory$6,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$5 = function () {\n      return nu$6({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$b = function () {\n      return derive([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$b,\n        exhibit: exhibit$5\n    });\n\n    var Unselecting = create$1({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n              return false;\n            }, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$1('color-input-change');\n    var colorSwatchChangeEvent = generate$1('color-swatch-change');\n    var colorPickerCancelEvent = generate$1('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(function () {\n          });\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$2(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$1,\n              southeast$1,\n              south$1\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$1,\n              southwest$1,\n              south$1\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$2(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var calcHex = function (value) {\n      var hue = (100 - value) / 100 * 360;\n      var hsv = hsvColour(hue, 100, 100);\n      var rgb = fromHsv(hsv);\n      return fromRgba(rgb);\n    };\n\n    var fieldsUpdate = generate$1('rgb-hex-update');\n    var sliderUpdate = generate$1('slider-update');\n    var paletteUpdate = generate$1('palette-update');\n\n    var labelPart = optional({\n      schema: [strict$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [state$1('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive([\n            run(touchstart(), setValueFrom),\n            run(touchmove(), setValueFrom),\n            run(mousedown(), setValueFrom),\n            run(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant(_sliderChangeEvent);\n    var isTouchEvent = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r$1 = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range$2 = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range$2(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range$2(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r$1);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds$1 = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue(xValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$1(spectrum, sliderValue(min));\n    };\n    var setToMax = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$1(spectrum, sliderValue(max));\n    };\n    var moveBy = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$8(thumb.element) / 2;\n      set$2(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft = handleMovement(-1);\n    var onRight = handleMovement(1);\n    var onUp = Optional.none;\n    var onDown = Optional.none;\n    var edgeActions = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue$2 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$2(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange$3 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value.left);\n      var yValue = findValueOfOffset$1(spectrum, detail, value.top);\n      var val = sliderValue$2(xValue, yValue);\n      fireSliderChange$3(spectrum, val);\n      return val;\n    };\n    var moveBy$2 = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$3(spectrum, sliderValue$2(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, isVerticalMovement, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$8(thumb.element) / 2;\n      var thumbYRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$2(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1, false);\n    var onRight$2 = handleMovement$2(1, false);\n    var onUp$2 = handleMovement$2(-1, true);\n    var onDown$2 = handleMovement$2(1, true);\n    var edgeActions$2 = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        getValueFromEvent: getValueFromEvent$2,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var SliderSchema = [\n      defaulted$1('stepSize', 1),\n      defaulted$1('onChange', noop),\n      defaulted$1('onChoose', noop),\n      defaulted$1('onInit', noop),\n      defaulted$1('onDragStart', noop),\n      defaulted$1('onDragEnd', noop),\n      defaulted$1('snapToGrid', false),\n      defaulted$1('rounded', true),\n      option('snapStart'),\n      strictOf('model', choose$1('mode', {\n        x: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          strict$1('getInitialValue'),\n          output('manager', TwoDModel)\n        ]\n      })),\n      field$1('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      state$1('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var changeValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive([\n          run(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run(touchstart(), onDragStart),\n          run(touchend(), onDragEnd),\n          run(mousedown(), onDragStart),\n          run(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          changeValue: changeValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite$1({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch,\n      apis: {\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$3 = 'form';\n    var schema$h = [field$1('formBehaviours', [Representing])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne(owner$3, getPartName(name), config);\n        };\n        return {\n          field: field,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite(owner$3, schema$h, fieldParts, make$4, spec);\n    };\n    var toResult$1 = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$2(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult$1(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each$1(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$1('valid-input');\n    var invalidInput = generate$1('invalid-input');\n    var validatingInput = generate$1('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$2(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run(validInput, onValidInput),\n                run(invalidInput, onInvalidInput),\n                run(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single$2({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setSliderColour = function (slider, rgba) {\n        var canvas = slider.components()[0].element.dom;\n        setColour(canvas, toString(rgba));\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single$2({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setRgba: function (_apis, slider, rgba) {\n            setSliderColour(slider, rgba);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var state = { paletteRgba: Cell(red) };\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            var rgba = fromHex(hex);\n            state.paletteRgba.set(rgba);\n            sbPalette.setRgba(palette, rgba);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var runUpdates = function (anyInSystem, hex, updates) {\n          each(updates, function (update) {\n            update(anyInSystem, hex);\n          });\n        };\n        var paletteUpdates = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldRgb = state.paletteRgba.get();\n            var hsvColour$1 = fromRgb(oldRgb);\n            var newHsvColour = hsvColour(hsvColour$1.hue, value.x, 100 - value.y);\n            var rgb = fromHsv(newHsvColour);\n            var nuHex = fromRgba(rgb);\n            runUpdates(form, nuHex, updates);\n          };\n        };\n        var sliderUpdates = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var hex = calcHex(value.y);\n            runUpdates(form, hex, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            sliderFactory(translate, getClass),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run(paletteUpdate, paletteUpdates()),\n              run(sliderUpdate, sliderUpdates())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single$2({\n        name: 'ColourPicker',\n        configFields: [\n          strict$1('dom'),\n          defaulted$1('onValidHex', noop),\n          defaulted$1('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return Object.prototype.hasOwnProperty.call(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = Cell(Optional.none());\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = Cell(Optional.none());\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$b.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.get().each(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.set(Optional.none());\n                  editorApi.set(Optional.some(ea));\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(Optional.some(value));\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted$1('preprocess', identity),\n      defaulted$1('postprocess', identity)\n    ]);\n    var memento$1 = function (mem, rawProcessors) {\n      var ps = asRawOrDie('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$6, set$3);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$2, set);\n    };\n    var memory$1 = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento$1,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory$1\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$c.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name, '.' + type);\n        });\n      };\n      return filter(from$1(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragover', stopper),\n              run('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$1('alloy-fake-before-tabstop');\n    var afterObject = generate$1('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus$1 = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has$2(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has$2(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest$4(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$3().browser.isIE() || detect$3().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$1(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$1(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    function create$5(width, height) {\n      return resize(document.createElement('canvas'), width, height);\n    }\n    function clone$1(canvas) {\n      var tCanvas = create$5(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    }\n    function get2dContext(canvas) {\n      return canvas.getContext('2d');\n    }\n    function resize(canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n\n    function getWidth(image) {\n      return image.naturalWidth || image.width;\n    }\n    function getHeight(image) {\n      return image.naturalHeight || image.height;\n    }\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var anyWindow = window;\n      var asap = Promise.immediateFn || typeof anyWindow.setImmediate === 'function' && anyWindow.setImmediate || function (fn) {\n        setTimeout(fn, 1);\n      };\n      function bind(fn, thisArg) {\n        return function () {\n          return fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise$1 = window.Promise ? window.Promise : promise();\n\n    function blobToImage(blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        function loaded() {\n          removeListeners();\n          resolve(image);\n        }\n        function error() {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        }\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          loaded();\n        }\n      });\n    }\n    function dataUriToBlobSync(uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    }\n    function dataUriToBlob(uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    }\n    function canvasToBlob(canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    }\n    function canvasToDataURL(canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    }\n    function blobToCanvas(blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$5(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    }\n    function blobToDataUri(blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    function revokeImageUrl(image) {\n      URL.revokeObjectURL(image.src);\n    }\n\n    function create$6(getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      function toBlob() {\n        return Promise$1.resolve(blob);\n      }\n      var toDataURL = constant(uri);\n      function toBase64() {\n        return uri.split(',')[1];\n      }\n      function toAdjustedBlob(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      }\n      function toAdjustedDataURL(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      }\n      function toAdjustedBase64(type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      }\n      function toCanvas() {\n        return getCanvas.then(clone$1);\n      }\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    }\n    function fromBlob(blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$6(blobToCanvas(blob), blob, uri);\n      });\n    }\n    function fromCanvas(canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$6(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    }\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    function clamp$1(value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    }\n    function identity$1() {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    }\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    function multiply(matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    }\n    function adjustContrast(matrix, value) {\n      var x;\n      value = clamp$1(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustBrightness(matrix, value) {\n      value = clamp$1(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustColors(matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp$1(adjustR, 0, 2);\n      adjustG = clamp$1(adjustG, 0, 2);\n      adjustB = clamp$1(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n\n    function colorFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyColorFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      }\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function convoluteFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyConvoluteFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pIn, pOut, aMatrix) {\n        function clamp(value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        }\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      }\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function functionColorFilter(colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        function applyLookup(pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        }\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    }\n    function complexAdjustableColorFilter(matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity$1(), adjust));\n      };\n    }\n    function basicColorFilter(matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    }\n    function basicConvolutionFilter(kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    }\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity$1(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    function scale(image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    }\n    function _scale(image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$5(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    }\n\n    function rotate(ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    }\n    function applyRotate(image, type, angle) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function flip(ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    }\n    function applyFlip(image, type, axis) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    }\n    function crop(ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    }\n    function applyCrop(image, type, x, y, w, h) {\n      var canvas = create$5(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    }\n    function resize$1(ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    }\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var renderIcon$1 = function (iconHtml, behaviours) {\n      return __assign({\n        dom: {\n          tag: 'span',\n          innerHtml: iconHtml,\n          classes: [\n            'tox-icon',\n            'tox-tbtn__icon-wrap'\n          ]\n        }\n      }, behaviours);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), {});\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), { behaviours: derive$1([Replacing.config({})]) });\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a$1;\n    var internalToolbarButtonExecute = generate$1('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a$1 = {}, _a$1[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a$1);\n\n    var updateMenuText = generate$1('update-menu-text');\n    var updateMenuIcon = generate$1('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [prefix + '__select-chevron'],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            }\n          })\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArrays(spec.dropdownBehaviours, [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ])),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has(item, 'getSubmenuItems');\n    };\n    var separator$1 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator(acc[acc.length - 1]) ? acc.concat([separator$1]) : acc;\n          } else if (has(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator(item)) {\n        return item;\n      } else {\n        var itemValue = get$1(item, 'value').getOrThunk(function () {\n          return generate$1('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build$2 = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$1('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$2(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$1(elm, 'aria-pressed', true);\n          } else {\n            remove$4(elm, 'tox-tbtn--enabled');\n            remove$1(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has$2(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch$1 = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$1(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArrays(!spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], icon.isSome() ? ['tox-button--icon'] : [], spec.borderless ? ['tox-button--naked'] : [], extraClasses);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch$1(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$i = constant([\n      defaulted$1('field1Name', 'field1'),\n      defaulted$1('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers(['lockClass']),\n      defaulted$1('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$5 = constant([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [strict$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite$1({\n      name: 'FormCoupledInputs',\n      configFields: schema$i(),\n      partFields: parts$5(),\n      factory: factory$7,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return Object.prototype.hasOwnProperty.call(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$1('ratio-event');\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__lock'\n              ],\n              innerHtml: get$e('lock', providersBackstage.icons)\n            }\n          },\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__unlock'\n              ],\n              innerHtml: get$e('unlock', providersBackstage.icons)\n            }\n          }\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant(generate$1('undo'));\n    var redo = constant(generate$1('redo'));\n    var zoom = constant(generate$1('zoom'));\n    var back = constant(generate$1('back'));\n    var apply = constant(generate$1('apply'));\n    var swap = constant(generate$1('swap'));\n    var transform = constant(generate$1('transform'));\n    var tempTransform = constant(generate$1('temp-transform'));\n    var transformApply = constant(generate$1('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant('save-state');\n    var disable$1 = constant('disable');\n    var enable$1 = constant('enable');\n    var external$2 = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable$1,\n      enable: enable$1\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external$2.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external$2.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop$1(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$2(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip$1, 'h');\n      var verticalFlip = makeValueTransform(flip$1, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate$1, -90);\n      var clockwiseRotate = makeValueTransform(rotate$1, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run(external$2.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run(external$2.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness$1, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast$1, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma$1, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize$1(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen$1);\n      var invertTransform = Optional.some(invert$1);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    function getDocumentSize(doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || document;\n      var downButton;\n      var startX, startY;\n      var handleElement = doc.getElementById(settings.handle || id);\n      var start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        var handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (window.getComputedStyle) {\n          cursor = window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$e('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$e(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      var drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e);\n        global$e(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$e(handleElement).off();\n      };\n      global$e(handleElement).on('mousedown touchstart', start);\n    }\n\n    var count = 0;\n    var create$7 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      function moveRect(handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$d.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      }\n      function render() {\n        function createDragHelper(handle) {\n          var startRect;\n          return new DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        }\n        global$e('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$c.each(blockers, function (blocker) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$c.each(handles, function (handle) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\" title=\"' + handle.label + '\">');\n        });\n        dragHelpers = global$c.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$e(containerElm).on('focusin focusout', function (e) {\n          global$e(e.target).attr('aria-grabbed', e.type === 'focus' ? 'true' : 'false');\n        });\n        global$e(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$c.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          function moveAndBlock(evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          }\n          switch (e.keyCode) {\n          case global$g.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$g.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$g.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$g.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$g.ENTER:\n          case global$g.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      }\n      function toggleVisibility(state) {\n        var selectors = global$c.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$c.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$e(selectors, containerElm).show();\n        } else {\n          global$e(selectors, containerElm).hide();\n        }\n      }\n      function repaint(rect) {\n        function updateElementRect(name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$e('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        }\n        global$c.each(handles, function (handle) {\n          global$e('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      }\n      function setRect(rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      }\n      function setViewPortRect(rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      }\n      function setInnerRect(rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      }\n      function setClampRect(rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      }\n      function destroy() {\n        global$c.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      }\n      render();\n      var instance = global$c.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$f);\n      return instance;\n    };\n    var CropRect = { create: create$7 };\n\n    var loadImage = function (image) {\n      return new global$4(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = Cell(Optional.none());\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll$1(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll$1(bg.element, css);\n          });\n          cropRect.get().each(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$1(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          return memContainer.getOpt(anyInSystem).map(function (panel) {\n            var aImg = external({ element: img });\n            Replacing.replaceAt(panel, 1, Optional.some(aImg));\n            var lastViewRect = viewRectState.get();\n            var viewRect = {\n              x: 0,\n              y: 0,\n              w: img.dom.naturalWidth,\n              h: img.dom.naturalHeight\n            };\n            viewRectState.set(viewRect);\n            var rect = global$d.inflate(viewRect, -20, -20);\n            rectState.set(rect);\n            if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n              zoomFit(panel, img);\n            }\n            repaintImg(panel, img);\n            return img;\n          });\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, function () {\n                    });\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(Optional.some(cRect));\n                  });\n                })])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      function add(state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      }\n      function undo() {\n        if (canUndo()) {\n          return data[--index];\n        }\n      }\n      function redo() {\n        if (canRedo()) {\n          return data[++index];\n        }\n      }\n      function canUndo() {\n        return index > 0;\n      }\n      function canRedo() {\n        return index !== -1 && index < data.length - 1;\n      }\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = Cell(Optional.none());\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().fold(function () {\n          return blobState.get();\n        }, function (temp) {\n          return temp;\n        });\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(Optional.some(newTempState));\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$c.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.get().each(destroyState);\n        tempState.set(Optional.none());\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(Optional.some(newState));\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(function () {\n        }, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        return blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url).then(function (oImg) {\n            updateButtonUndoStates(anyInSystem);\n            swap();\n            unblock(anyInSystem);\n            return oImg;\n          });\n        }).catch(function (err) {\n          console.log(err);\n          unblock(anyInSystem);\n          return err;\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run(internal.undo(), undo),\n            run(internal.redo(), redo),\n            run(internal.zoom(), zoom),\n            run(internal.back(), back),\n            run(internal.apply(), apply),\n            run(internal.transform(), transform),\n            run(internal.tempTransform(), tempTransform),\n            run(internal.transformApply(), transformApply),\n            run(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel$2 = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant(noop),\n              getApi: constant({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$3(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$1(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$8 = function (detail, _spec) {\n      var options = map(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$6(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$3(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single$2({\n      name: 'HtmlSelect',\n      configFields: [\n        strict$1('options'),\n        field$1('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted$1('selectClasses', []),\n        defaulted$1('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$8\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield__icon-js'],\n          innerHtml: get$e('chevron-down', providersBackstage.icons)\n        }\n      });\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$c = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive([\n        run(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$c\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$5({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$6 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$6\n    });\n\n    var setup$2 = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last$2(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      strictOf('stream', choose$1('mode', {\n        throttle: [\n          strict$1('delay'),\n          defaulted$1('stopEvent', true),\n          output('streams', {\n            setup: setup$2,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted$1('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$1({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$6(el);\n      var node = el.dom;\n      if (get$3(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant('alloy.typeahead.itemexecute');\n\n    var make$5 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open$1(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind(menus, function (menu) {\n              return filter(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$6(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$3(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$6(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open$1(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom$2(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$j = constant([\n      option('lazySink'),\n      strict$1('fetch'),\n      defaulted$1('minChars', 5),\n      defaulted$1('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Optional.none()),\n      defaulted$1('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted$1('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted$1('selectsOver', true),\n        defaulted$1('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted$1('inputClasses', []),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('matchWidth', true),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('dismissOnBlur', true),\n      markers(['openClass']),\n      option('initialData'),\n      field$1('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      state$1('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$f()).concat(sandboxFields()));\n    var parts$6 = constant([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite$1({\n      name: 'Typeahead',\n      configFields: schema$j(),\n      partFields: parts$6(),\n      factory: make$5\n    });\n\n    var wrap$2 = function (delegate) {\n      var toCached = function () {\n        return wrap$2(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap$2(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap$2(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$c = function (worker) {\n      return wrap$2(Future.nu(worker));\n    };\n    var value$2 = function (value) {\n      return wrap$2(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap$2(Future.pure(Result.error(error)));\n    };\n    var fromResult$1 = function (result) {\n      return wrap$2(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap$2(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$c(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$c,\n      wrap: wrap$2,\n      pure: value$2,\n      value: value$2,\n      error: error$1,\n      fromResult: fromResult$1,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$2 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: function () {\n        }\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: function () {\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$2, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$1('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$1(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox-icon',\n              'tox-control-wrap__status-icon-' + name\n            ],\n            innerHtml: get$e(icon, providersBackstage.icons),\n            attributes: __assign({\n              'title': providersBackstage.translate(label),\n              'aria-live': 'polite'\n            }, errId.fold(function () {\n              return {};\n            }, function (id) {\n              return { id: id };\n            }))\n          }\n        };\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$1('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$e(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                }\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return {\n          dom: {\n            tag: 'span',\n            classes: [\n              'tox-icon',\n              'tox-checkbox-icon__' + className\n            ],\n            innerHtml: get$e(iconName, providerBackstage.icons)\n          }\n        };\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$6 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$1(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$6(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$6(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$6(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$6(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$6(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$6(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$6(function (spec, backstage) {\n        return renderLabel$2(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$6(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$6(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$6(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$6(renderColorPicker),\n      dropzone: make$6(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$6(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$6(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$6(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$6(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$6(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$6(renderCustomEditor),\n      htmlpanel: make$6(renderHtmlPanel),\n      imagetools: make$6(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$6(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$6(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$1(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubble = nu$8(-12, 12, bubbleAlignments);\n      var overrides = { maxHeightFunction: expandable() };\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [northwest$3];\n            },\n            onLtr: function () {\n              return [northeast$3];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north$3];\n            },\n            onLtr: function () {\n              return [north$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$1];\n            },\n            onLtr: function () {\n              return [south$1];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          anchor: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor = function (bodyElement) {\n      return function (element) {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors$1 = function (editor) {\n      return function () {\n        return hasCustomColors(editor);\n      };\n    };\n    var getColors$2 = function (editor) {\n      return function () {\n        return getColors(editor);\n      };\n    };\n    var getColorCols$2 = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors$1(editor),\n        getColors: getColors$2(editor),\n        getColorCols: getColorCols$2(editor)\n      };\n    };\n\n    var isDraggableModal$1 = function (editor) {\n      return function () {\n        return isDraggableModal(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal$1(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$3 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$1(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems_1 = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), {\n              getStyleItems: function () {\n                return newItems_1;\n              }\n            });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$7 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$3(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$3(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var trim$1 = global$c.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$8 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$1('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$8('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$8('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim$1(target.title).length > 0;\n    };\n    var find$5 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$5 };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$1(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$9.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$9.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n      var itemsWithoutUrl = filter(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$2(global$c.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(function () {\n        return false;\n      }, function (_picker) {\n        return optTypes.fold(function () {\n          return true;\n        }, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$8 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$6.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$7(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var expandable$1 = constant(function (element, available) {\n      setMax$1(element, Math.floor(available));\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var schema$k = constant([\n      strict$1('dom'),\n      defaulted$1('shell', true),\n      field$1('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$7 = constant([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite$1({\n      name: 'Toolbar',\n      configFields: schema$k(),\n      partFields: parts$7(),\n      factory: factory$9,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var generate$6 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output$1 = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$6(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output$1(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output$1(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output$1(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition$3 = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups = function (toolbar, storedGroups) {\n      var bGroups = map(storedGroups, function (g) {\n        return premade$1(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh = function (toolbar, detail, setOverflow) {\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$2(primary.element, 'visibility', 'hidden');\n      var groups = detail.builtGroups.get().concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups(primary, groups);\n      var availableWidth = get$8(primary.element);\n      var overflows = partition$3(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$8(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$l = constant([\n      field$1('splitToolbarBehaviours', [Coupling]),\n      state$1('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$m = constant([\n      markers(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      strict$1('lazySink'),\n      state$1('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$l()));\n    var parts$8 = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$k(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var schema$n = constant([\n      markers(['toggledClass']),\n      strict$1('lazySink'),\n      strictFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n      schema$1()\n    ]);\n    var parts$9 = constant([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle$2 = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position$2 = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, {\n        anchor: 'hotspot',\n        hotspot: button,\n        layouts: layouts,\n        overrides: { maxWidthFunction: expandable$1() }\n      }, toolbar, bounds);\n    };\n    var setGroups$1 = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position$2(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox$1 = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups$1(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position$2(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle$2(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox$1(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups$1(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position$2(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle$2(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite$1({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$n(),\n      partFields: parts$9(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$o = constant([\n      strict$1('items'),\n      markers(['itemSelector']),\n      field$1('tgroupBehaviours', [Keying])\n    ]);\n    var parts$a = constant([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$b = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite$1({\n      name: 'ToolbarGroup',\n      configFields: schema$o(),\n      partFields: parts$a(),\n      factory: factory$b\n    });\n\n    var buildGroups = function (comps) {\n      return map(comps, function (g) {\n        return premade$1(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$c = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$1,\n              southeast$1\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$1,\n              southwest$1\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$1,\n              northeast$1\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$1,\n              northwest$1\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite$1({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$m(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$5(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$2(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$4(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has$2(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$2(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$4(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$2 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState, Optional.none());\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) === true || isShrinking(component, slideConfig) === true;\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$2,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit$6 = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$6({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$6({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$d = function (slideConfig, slideState) {\n      return derive([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6,\n        events: events$d\n    });\n\n    var SlidingSchema = [\n      strict$1('closedClass'),\n      strict$1('openClass'),\n      strict$1('shrinkingClass'),\n      strict$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted$1('expanded', false),\n      strictOf('dimension', choose$1('property', {\n        width: [\n          output('property', 'width'),\n          output('getDimension', function (elem) {\n            return get$8(elem) + 'px';\n          })\n        ],\n        height: [\n          output('property', 'height'),\n          output('getDimension', function (elem) {\n            return get$7(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$9 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$5({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$9\n    });\n\n    var Sliding = create$1({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var schema$p = constant([\n      markers([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$l()));\n    var parts$b = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen$1 = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh$3(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh$3 = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh(toolbar, detail, function (groups) {\n          var builtGroups = map(groups, function (g) {\n            return premade$1(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$d = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh$3(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$3(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen$1(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite$1({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$p(),\n      partFields: parts$b(),\n      factory: factory$d,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var toolbarHeightChange = constant(generate$1('toolbar-height-change'));\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$1(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$1(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds$1(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      strictString('type'),\n      strictOf('items', oneOf([\n        arrOfObj$1([\n          strictString('name'),\n          strictArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArrays([strictString('type')], baseMenuButtonFields));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      strictString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted$1('columns', 1),\n      strictFunction('onAction'),\n      strictFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var events$e = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive([\n        run(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$e\n    });\n\n    var getState$2 = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState$2\n    });\n\n    var ReflectingSchema = [\n      strict$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$a = function () {\n      var cell = Cell(Optional.none());\n      var set = function (optS) {\n        return cell.set(optS);\n      };\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var get = function () {\n        return cell.get();\n      };\n      var readState = function () {\n        return cell.get().fold(function () {\n          return 'none';\n        }, function (x) {\n          return x;\n        });\n      };\n      return {\n        readState: readState,\n        get: get,\n        set: set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Reflecting = create$1({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$q = constant([\n      strict$1('toggleClass'),\n      strict$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      strict$1('dom'),\n      onHandler('onOpen'),\n      field$1('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$c = constant([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$e = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$1('aria');\n            set$1(descriptor.element, 'id', descriptorId);\n            set$1(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$7(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite$1({\n      name: 'SplitDropdown',\n      configFields: schema$q(),\n      partFields: parts$c(),\n      factory: factory$e,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$1('focus-button');\n    var rtlIcon$1 = [\n      'checklist',\n      'ordered-list'\n    ];\n    var rtlTransform$1 = [\n      'indent',\n      'outdent',\n      'table-insert-column-after',\n      'table-insert-column-before',\n      'unordered-list'\n    ];\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      var getIconName = function (iconName) {\n        return global$6.isRtl() && contains(rtlIcon$1, iconName) ? iconName + '-rtl' : iconName;\n      };\n      var needsRtlClass = global$6.isRtl() && icon.exists(function (name) {\n        return contains(rtlTransform$1, name);\n      });\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []).concat(needsRtlClass ? ['tox-tbtn__icon-rtl'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(function () {\n            return false;\n          }), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$1('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$1(comp.element, 'aria-pressed', state);\n            descendant$1(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant$1(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute$1 = function (memInput, original) {\n      return run(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var generateOne$1 = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate$7 = function (memInput, buttons, providersBackstage) {\n      var mementos = map(buttons, function (button) {\n        return record(generateOne$1(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate$7(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$1('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds) {\n      var x = Math.max(viewportBounds.x, contentAreaBox.x);\n      var contentBoxWidth = contentAreaBox.right - x;\n      var maxViewportWidth = viewportBounds.width - (x - viewportBounds.x);\n      var width = Math.min(contentBoxWidth, maxViewportWidth);\n      return {\n        x: x,\n        width: width\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant$1(container, '.tox-editor-header').getOr(container);\n      var headerBox = box(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = box(container);\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y, viewportBounds.y),\n        bottom: Math.min(headerBox.y, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage) {\n      var viewportBounds = getBounds(window);\n      var contentAreaBox = box(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds$1(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop), y = _b.y, bottom = _b.bottom;\n        return bounds$1(x, y, width, bottom - y);\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor(startNode, function (ancestorElem) {\n          var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n          var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n          return toolbars.length > 0 ? Optional.some({\n            elem: ancestorElem,\n            toolbars: toolbars\n          }) : Optional.none();\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq$1(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains$2(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$1('forward-slide');\n    var backSlideEvent = generate$1('backward-slide');\n    var changeSlideEvent = generate$1('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$4(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, _se) {\n              remove$4(comp.element, resizingClass);\n              remove$6(comp.element, 'width');\n            }),\n            run(changeSlideEvent, function (comp, se) {\n              remove$6(comp.element, 'width');\n              var currentWidth = get$8(comp.element);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(comp.element, resizingClass);\n              var newWidth = get$8(comp.element);\n              set$2(comp.element, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$1(f);\n                  return search(comp.element);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active();\n                });\n              });\n              global$2.setTimeout(function () {\n                set$2(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active()\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run(backSlideEvent, function (comp, _se) {\n              last(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade$1(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return {\n          getComponent: function () {\n            return comp;\n          }\n        };\n      };\n      var onSetup = function (api) {\n        spec.setInitialValue.each(function (f) {\n          return f(api.getComponent());\n        });\n        return spec.nodeChangeHandler.map(function (f) {\n          var handler = f(api.getComponent());\n          editor.on('NodeChange', handler);\n          return function () {\n            editor.off('NodeChange', handler);\n          };\n        }).getOr(noop);\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : Optional.some(''),\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec = function (editor) {\n      var getMatchingValue = function () {\n        return find(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return function () {\n          return Optional.none();\n        };\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(function () {\n          return 'left';\n        }, function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuIcon(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuIcon(comp);\n      });\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$1 = function (editor) {\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          if (isSystemFontStack(font)) {\n            return Optional.from({\n              title: 'System Font',\n              format: font\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(function () {\n          return font;\n        }, function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$1(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$1(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(function () {\n          return size;\n        }, function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var revocable = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return revocable(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return revocable(function (s) {\n        return s.unbind();\n      });\n    };\n    var value$3 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return boundCallback.clear;\n      };\n    };\n    var onActionToggleFormat = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$3 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec$4 = function (editor, dataset) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, function () {\n          return flattenedItems;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      return {\n        tooltip: 'Formats',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec$4(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$1(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map(defaultToolbar, function (group) {\n        var items = filter(group.items, function (subItem) {\n          return has(buttons, subItem) || has(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has(t, 'name') && has(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$1(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$1(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$1(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map(toolbarGroups, function (group) {\n        var items = bind(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var bubbleSize = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable(),\n      maxWidthFunction: expandable$1()\n    };\n    var desktopAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          north$1,\n          south$1,\n          northeast$1,\n          southeast$1,\n          northwest$1,\n          southwest$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          north$1,\n          south$1,\n          northwest$1,\n          southwest$1,\n          northeast$1,\n          southeast$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var mobileAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var getAnchorLayout = function (position, isTouch) {\n      if (position === 'line') {\n        return {\n          bubble: nu$8(bubbleSize, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$1];\n            },\n            onRtl: function () {\n              return [west$1];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$8(0, bubbleSize, bubbleAlignments$1),\n          layouts: isTouch ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts,\n          overrides: anchorOverrides\n        };\n      }\n    };\n    var register$4 = function (editor, registryContextToolbars, sink, extras) {\n      var isTouch = detect$3().deviceType.isTouch;\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        return getContextToolbarBounds(editor, extras.backstage.shared);\n      };\n      var isRangeOverlapping = function (aTop, aBottom, bTop, bBottom) {\n        return Math.max(aTop, bTop) <= Math.min(aBottom, bBottom);\n      };\n      var getLastElementVerticalBound = function () {\n        var nodeBounds = lastElement.get().filter(function (ele) {\n          return inBody(SugarElement.fromDom(ele));\n        }).map(function (ele) {\n          return ele.getBoundingClientRect();\n        }).getOrThunk(function () {\n          return editor.selection.getRng().getBoundingClientRect();\n        });\n        var diffTop = editor.inline ? get$9().top : absolute$1(SugarElement.fromDom(editor.getBody())).y;\n        return {\n          y: nodeBounds.top + diffTop,\n          bottom: nodeBounds.bottom + diffTop\n        };\n      };\n      var shouldContextToolbarHide = function () {\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return true;\n        }\n        var lastElementBounds = getLastElementVerticalBound();\n        var contextToolbarBounds = getBounds();\n        return !isRangeOverlapping(lastElementBounds.y, lastElementBounds.bottom, contextToolbarBounds.y, contextToolbarBounds.bottom);\n      };\n      var forceHide = function () {\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        lastAnchor.get().each(function (anchor) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$2(contextBarEle, 'display', 'none');\n          } else {\n            Positioning.positionWithinBounds(sink, anchor, contextbar, Optional.some(getBounds()));\n          }\n        });\n      };\n      var lastAnchor = Cell(Optional.none());\n      var lastElement = Cell(Optional.none());\n      var timer = Cell(null);\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextMenuGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextMenuGroups(ctx, extras.backstage.shared.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$1('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: extras.backstage.shared.providers\n        });\n      };\n      editor.on(showContextToolbarEvent, function (e) {\n        var scopes = getScopes();\n        get$1(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n          launchContext([ctx], e.target === editor ? Optional.none() : Optional.some(e));\n          InlineView.getContent(contextbar).each(Keying.focusIn);\n        });\n      });\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? extras.backstage.shared.anchors.node(element) : extras.backstage.shared.anchors.cursor();\n        return deepMerge(anchorage, getAnchorLayout(position, isTouch()));\n      };\n      var launchContext = function (toolbarApi, elem) {\n        clearTimer();\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var sElem = elem.map(SugarElement.fromDom);\n        var anchor = getAnchor(toolbarApi[0].position, sElem);\n        lastAnchor.set(Optional.some(anchor));\n        lastElement.set(elem);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        InlineView.showWithinBounds(contextbar, anchor, wrapInPopDialog(toolbarSpec), function () {\n          return Optional.some(getBounds());\n        });\n        if (shouldContextToolbarHide()) {\n          set$2(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = function () {\n        if (!editor.hasFocus()) {\n          return;\n        }\n        var scopes = getScopes();\n        lookup$1(scopes, editor).fold(function () {\n          lastAnchor.set(Optional.none());\n          InlineView.hide(contextbar);\n        }, function (info) {\n          launchContext(info.toolbars, Optional.some(info.elem.dom));\n        });\n      };\n      var clearTimer = function () {\n        var current = timer.get();\n        if (current !== null) {\n          global$2.clearTimeout(current);\n          timer.set(null);\n        }\n      };\n      var resetTimer = function (t) {\n        clearTimer();\n        timer.set(t);\n      };\n      editor.on('init', function () {\n        editor.on(hideContextToolbarEvent, forceHide);\n        editor.on('ScrollContent ScrollWindow longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent ObjectResized ResizeEditor', function () {\n          resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n        });\n        editor.on('focusout', function (_e) {\n          global$2.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              lastAnchor.set(Optional.none());\n              InlineView.hide(contextbar);\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            lastAnchor.set(Optional.none());\n            InlineView.hide(contextbar);\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(function () {\n            resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n          }, function (_) {\n          });\n        });\n      });\n    };\n\n    var setup$3 = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var onTouchstart = bind$3(SugarElement.fromDom(document), 'touchstart', fireDismissPopups);\n      var onTouchmove = bind$3(SugarElement.fromDom(document), 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind$3(SugarElement.fromDom(document), 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind$3(SugarElement.fromDom(document), 'mousedown', fireDismissPopups);\n      var onMouseup = bind$3(SugarElement.fromDom(document), 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent$1(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent$1(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$d = AlloyParts;\n    var partType$1 = PartType;\n\n    var schema$r = constant([\n      defaulted$1('shell', false),\n      strict$1('makeItem'),\n      defaulted$1('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$e = constant([itemsPart]);\n    var name$2 = constant('CustomList');\n\n    var factory$f = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite$1({\n      name: name$2(),\n      configFields: schema$r(),\n      partFields: parts$e(),\n      factory: factory$f,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var setup$4 = noop;\n    var isDocked = never;\n    var getBehaviours$2 = constant([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$4,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours$2\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = getRaw(element, 'position').is('fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPosition().map(function (pos) {\n        return bounds$1(pos.bounds.x, pos.bounds.y, get$8(elem), get$7(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPosition(Optional.some({\n        style: getAllRaw(elem),\n        position: get$5(elem, 'position') || 'static',\n        bounds: box\n      }));\n    };\n    var revertToOriginal = function (elem, box$1, state) {\n      return state.getInitialPosition().bind(function (position) {\n        state.setInitialPosition(Optional.none());\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box).getOrThunk(function () {\n            return box(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$1(position.style, 'left').map(function (_left) {\n            return box$1.x - offsetBox_1.x;\n          }), get$1(position.style, 'top').map(function (_top) {\n            return box$1.y - offsetBox_1.y;\n          }), get$1(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box$1.right;\n          }), get$1(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box$1.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box$1 = box(elem);\n      if (!isVisibleForModes(state.getModes(), box$1, viewport)) {\n        storePrior(elem, box$1, state);\n        var winBox = win();\n        var left = box$1.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box$1.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = getRaw(elem, 'position').is('fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config) {\n      each([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, position) {\n      applyPositionCss(component.element, position);\n      var method = position.position === 'fixed' ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$3(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        state.setDocked(!isDocked);\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$5(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$f = function (dockInfo, dockState) {\n      return derive([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has$2(component.element, contextInfo.transitionClass)) {\n              remove$5(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        strictString('fadeInClass'),\n        strictString('fadeOutClass'),\n        strictString('transitionClass'),\n        strictFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$b = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = Cell(Optional.none());\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$5({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPosition: initialBounds.get,\n        setInitialPosition: initialBounds.set,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Docking = create$1({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$1(markerElement);\n      var markerHeight = get$7(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute(containerHeader);\n      var editorHeaderHeight = get$7(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$1(elm) + (parseInt(get$5(elm, 'margin-top'), 10) || 0) + (parseInt(get$5(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$8(parentElem);\n          set$2(elm, 'width', parentWidth + 'px');\n          set$2(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$4(sinkElem, visibility.fadeOutClass);\n        add$3(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$4(sinkElem, visibility.fadeInClass);\n        add$3(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$4(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$4(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq$1(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq$1(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains$2(headerElem, activeElm);\n      }).each(function () {\n        return focus$1(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$5 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked$2 = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours$3 = function (editor, sharedBackstage) {\n      var focusedElm = Cell(Optional.none());\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArrays([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$1(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box$1 = box(SugarElement.fromDom(container));\n              var boxHeight = box$1.height - headerHeight;\n              var topBound = box$1.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds$1(box$1.x, topBound, box$1.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.set(Optional.none());\n              });\n            },\n            onHide: function (comp) {\n              focusedElm.set(findFocusedElem(comp.element, lazySink));\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$5,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$3\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours = spec.sticky ? getBehaviours$3 : getBehaviours$2;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours(editor, spec.sharedBackstage))\n      };\n    };\n\n    var factory$g = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run(mouseover(), function (comp, se) {\n              descendant$1(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$3(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq$1(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single$2({\n      factory: factory$g,\n      name: 'silver.Menubar',\n      configFields: [\n        strict$1('dom'),\n        strict$1('uid'),\n        strict$1('onEscape'),\n        strict$1('backstage'),\n        defaulted$1('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var owner$4 = 'container';\n    var schema$s = [field$1('slotBehaviours', [])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$2 = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne(owner$4, getPartName$1(name), config);\n        };\n        return {\n          slot: slot,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite(owner$4, schema$s, fieldParts, make$7, spec);\n    };\n    var make$7 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$3(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$1(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$2(element, 'display', 'none');\n          set$1(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$2({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch$2 });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$6 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return Optional.from(editor.queryCommandValue('ToggleSidebar')).is(name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$1('FixSizeEvent');\n    var autoSize = generate$1('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$8(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run(fixSize, function (comp, se) {\n              set$2(comp.element, 'width', se.event.width);\n            }),\n            run(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml$2 = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$2(elem) };\n      return __assign({\n        tag: name(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var renderSpinner = function (providerBackstage) {\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-label': providerBackstage.translate('Loading...') },\n          classes: ['tox-throbber__busy-spinner']\n        },\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onTab: function () {\n              return Optional.some(true);\n            },\n            onShiftTab: function () {\n              return Optional.some(true);\n            }\n          }),\n          Focusing.config({})\n        ])\n      };\n    };\n    var toggleThrobber = function (comp, state, providerBackstage) {\n      var element = comp.element;\n      if (state === true) {\n        Replacing.set(comp, [renderSpinner(providerBackstage)]);\n        remove$6(element, 'display');\n        remove$1(element, 'aria-hidden');\n      } else {\n        Replacing.set(comp, []);\n        set$2(element, 'display', 'none');\n        set$1(element, 'aria-hidden', 'true');\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([Replacing.config({})]),\n        components: []\n      };\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = Cell(Optional.none());\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          toggleThrobber(lazyThrobber(), state, sharedBackstage.providers);\n          throbberState.set(state);\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.get().each(global$2.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$2.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(Optional.some(timerId));\n        } else {\n          toggle(e.state);\n          timer.set(Optional.none());\n        }\n      });\n    };\n\n    var factory$h = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$d.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$d.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$d.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$d.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$d.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$d.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$d.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$d.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType$1.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [strict$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$1('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape')\n      ]\n    });\n    var partToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape'),\n        strict$1('getSink')\n      ]\n    });\n    var partHeader = partType$1.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [strict$1('dom')]\n    });\n    var partSocket = partType$1.optional({\n      name: 'socket',\n      schema: [strict$1('dom')]\n    });\n    var partSidebar = partType$1.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [strict$1('dom')]\n    });\n    var partThrobber = partType$1.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [strict$1('dom')]\n    });\n    var OuterContainer = composite$1({\n      name: 'OuterContainer',\n      factory: factory$h,\n      configFields: [\n        strict$1('dom'),\n        strict$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map(ts, function (g) {\n            return map(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make$8 = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter(menubar, function (menuName) {\n        return userDefinedMenus ? registry.menus.hasOwnProperty(menuName) && registry.menus[menuName].hasOwnProperty('items') || defaultMenus.hasOwnProperty(menuName) : defaultMenus.hasOwnProperty(menuName);\n      });\n      var menus = map(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make$8({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError$1 = function (editor, err) {\n      return function () {\n        return fireSkinLoadError(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$4(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$5.DOM.styleSheetLoader);\n      } else {\n        return global$4.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$4.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded$1(editor), fireSkinLoadError$1(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded$1(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$3();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$2(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll$1(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind$3(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight$1 = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight$1(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth$1 = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth$1(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$5.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth$1(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(function () {\n          return 0;\n        }, function (tbar) {\n          return tbar.components().length > 1 ? get$7(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$7(container.element) - offset;\n          var targetBounds = box(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$7(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$1(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$5(body(), 'margin-left')).getOr(0);\n          return get$8(body()) - absolute(targetElm).left + bodyMargin;\n        });\n        set$2(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$7(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll$1(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$2(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$2(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$2(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents$1 = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$2.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render$2 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents$1(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$2\n    });\n\n    var register$5 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      global$c.each(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          onAction: function () {\n            return editor.execCommand(item.cmd);\n          },\n          icon: item.icon,\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      var alignNoneToolbarButton = {\n        name: 'alignnone',\n        text: 'No alignment',\n        cmd: 'JustifyNone',\n        icon: 'align-none'\n      };\n      editor.ui.registry.addButton(alignNoneToolbarButton.name, {\n        tooltip: alignNoneToolbarButton.text,\n        onAction: function () {\n          return editor.execCommand(alignNoneToolbarButton.cmd);\n        },\n        icon: alignNoneToolbarButton.icon\n      });\n    };\n\n    var register$6 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var toggleOutdentState = function (api, editor) {\n      api.setDisabled(!editor.queryCommandState('outdent'));\n      var onNodeChange = function () {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      };\n      editor.on('NodeChange', onNodeChange);\n      return function () {\n        return editor.off('NodeChange', onNodeChange);\n      };\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: function (api) {\n          return toggleOutdentState(api, editor);\n        },\n        onAction: function () {\n          return editor.execCommand('outdent');\n        }\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: function () {\n          return editor.execCommand('indent');\n        }\n      });\n    };\n    var register$7 = function (editor) {\n      registerButtons(editor);\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: toggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: toggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$c.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          },\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: toggleFormat(editor, 'code')\n      });\n    };\n    var register$8 = function (editor) {\n      registerButtons$1(editor);\n      registerMenuItems(editor);\n    };\n\n    var toggleUndoRedoState = function (api, editor, type) {\n      var checkState = function () {\n        return editor.undoManager ? editor.undoManager[type]() : false;\n      };\n      var onUndoStateChange = function () {\n        api.setDisabled(editor.mode.isReadOnly() || !checkState());\n      };\n      api.setDisabled(!checkState());\n      editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      return function () {\n        return editor.off('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      };\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var register$9 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons$2(editor);\n    };\n\n    var toggleVisualAidState = function (api, editor) {\n      api.setActive(editor.hasVisual);\n      var onVisualAid = function (e) {\n        api.setActive(e.hasVisual);\n      };\n      editor.on('VisualAid', onVisualAid);\n      return function () {\n        return editor.off('VisualAid', onVisualAid);\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: function (api) {\n          return toggleVisualAidState(api, editor);\n        },\n        onAction: function () {\n          editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: function () {\n          return editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var register$a = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var normaliseLineHeight = function (input) {\n      return normalise(input, [\n        'fixed',\n        'relative',\n        'empty'\n      ]).getOr(input);\n    };\n    var getLineHeights = function (editor) {\n      var options = getLineHeightFormats(editor);\n      var apis = new Map();\n      var lastApi = destroyable();\n      var callback = function () {\n        var current = normaliseLineHeight(editor.queryCommandValue('LineHeight'));\n        Optional.from(apis.get(current)).fold(function () {\n          return lastApi.clear();\n        }, function (api) {\n          lastApi.set({\n            destroy: function () {\n              api.setActive(false);\n            }\n          });\n          api.setActive(true);\n        });\n      };\n      editor.on('nodeChange', callback);\n      return map(options, function (value, i) {\n        return {\n          type: 'togglemenuitem',\n          text: value,\n          onSetup: function (api) {\n            apis.set(normaliseLineHeight(value), api);\n            if (i + 1 === options.length) {\n              callback();\n            }\n            return function () {\n              if (i === 0) {\n                editor.off('nodeChange', callback);\n                lastApi.clear();\n              }\n            };\n          },\n          onAction: function () {\n            return editor.execCommand('LineHeight', false, value);\n          }\n        };\n      });\n    };\n    var registerMenuItems$3 = function (editor) {\n      editor.ui.registry.addNestedMenuItem('lineheight', {\n        type: 'nestedmenuitem',\n        text: 'Line height',\n        getSubmenuItems: function () {\n          return getLineHeights(editor);\n        }\n      });\n    };\n    var registerButtons$3 = function (editor) {\n      editor.ui.registry.addMenuButton('lineheight', {\n        tooltip: 'Line height',\n        icon: 'line-height',\n        fetch: function (callback) {\n          return callback(getLineHeights(editor));\n        }\n      });\n    };\n    var register$b = function (editor) {\n      registerMenuItems$3(editor);\n      registerButtons$3(editor);\n    };\n\n    var setup$8 = function (editor, backstage) {\n      register$5(editor);\n      register$8(editor);\n      register$6(editor, backstage);\n      register$9(editor);\n      register$1(editor);\n      register$a(editor);\n      register$7(editor);\n      register$b(editor);\n    };\n\n    var nu$d = function (x, y) {\n      return {\n        anchor: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose$1 = function (pos, dx, dy) {\n      return nu$d(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent$1 = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.pageX, touch.pageY);\n      } else {\n        return nu$d(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.clientX, touch.clientY);\n      } else {\n        return nu$d(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$5.DOM.getPos(element);\n      return transpose$1(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        anchor: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor$1 = function (editor) {\n      return {\n        anchor: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var items = buildMenu();\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, anchorSpec, {\n          menu: { markers: markers$1('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect$1(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var getPointAnchorSpec = function (editor, e) {\n      return __assign({\n        bubble: nu$8(0, bubbleSize$1, bubbleAlignments$2),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable$1(),\n          maxHeightFunction: expandable()\n        }\n      }, getPointAnchor(editor, e));\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$2.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var show = function (editor, e, items, backstage, contextmenu, useNodeAnchor, highlightImmediately) {\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchorSpec(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, anchorSpec, {\n          menu: {\n            markers: markers$1('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var detection = detect$3();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, useNodeAnchor, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && !useNodeAnchor) {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        if (isAndroid && !useNodeAnchor) {\n          editor.selection.setCursorLocation(e.target, 0);\n        }\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter(patchPipeConfig(defaultItems), function (item) {\n          return has(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator$1 = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator$3 = { type: 'separator' };\n    var makeContextItem = function (item) {\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator$3;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            icon: item.icon,\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          return {\n            type: 'menuitem',\n            text: item.text,\n            icon: item.icon,\n            onAction: noarg(item.onAction)\n          };\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last(xs).filter(function (item) {\n        return !isSeparator$1(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator$3];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator$3]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        if (has(contextMenus, name)) {\n          var items = contextMenus[name].update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([name]);\n        }\n      }, []);\n      if (sections.length > 0 && isSeparator$1(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var shouldUseNodeAnchor = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      if (isTriggeredByKeyboard(editor, e)) {\n        return true;\n      } else if (selector) {\n        var target = getSelectedElement(editor, e);\n        return closest$4(SugarElement.fromDom(target), selector);\n      } else {\n        return false;\n      }\n    };\n    var setup$9 = function (editor, lazySink, backstage) {\n      var detection = detect$3();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var useNodeAnchor = shouldUseNodeAnchor(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow$1 : initAndShow;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, useNodeAnchor);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt$c = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add$4 = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform$1 = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform$1([\n        add$4(origin),\n        subtract(scroll)\n      ]), transform$1([subtract(scroll)]), transform$1([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform$1([add$4(origin)]), transform$1([]), transform$1([add$4(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform$1([]), transform$1([subtract(origin)]), transform$1([\n        add$4(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate$2 = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute$3(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed$1(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute$3), absorbOne(asFixed, fixed$1));\n    };\n    var offset = adt$c.offset;\n    var absolute$3 = adt$c.absolute;\n    var fixed$1 = adt$c.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$3(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get$f = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set$8 = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$1(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$1(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$1(element, snapsInfo.leftAttr);\n      remove$1(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get$f(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed) {\n        return fixed$1(fixed.left + delta.left, fixed.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set$8(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed$1(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo$1 = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo$1\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$2(root, 'z-index', zIndex);\n        });\n        remove$1(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$1(root, initialAttribute, zindex);\n        });\n        set$2(root, 'z-index', get$5(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      strict$1('getSnapPoints'),\n      onHandler('onSensor'),\n      strict$1('leftAttr'),\n      strict$1('topAttr'),\n      defaulted$1('lazyViewport', win),\n      defaulted$1('mustSnap', false)\n    ]);\n\n    var schema$t = [\n      defaulted$1('useFixed', never),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      defaulted$1('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed$1 : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute(target);\n        return absolute$3(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute$3(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, function () {\n        return newCoords;\n      }, function () {\n        var fixed = asFixed(newCoords, scroll, origin);\n        return fixed$1(fixed.left, fixed.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate$2(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed$1(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$1(comp.element),\n        width: getOuter$2(comp.element)\n      };\n    };\n    var move$1 = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive(__spreadArrays([run(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState)));\n      };\n    };\n\n    var init$c = function (dragApi) {\n      return derive([\n        run(mousedown(), dragApi.forceDrop),\n        run(mouseup(), dragApi.drop),\n        run(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$g = function (dragConfig, dragState, updateStartState) {\n      return [run(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move$1(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$c(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$u = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$g) })]);\n\n    var init$d = function (dragApi) {\n      return derive([\n        run(touchstart(), dragApi.forceDrop),\n        run(touchend(), dragApi.drop),\n        run(touchcancel(), dragApi.drop),\n        run(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData$2 = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta$2 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$2,\n        getDelta: getDelta$2\n    });\n\n    var events$h = function (dragConfig, dragState, updateStartState) {\n      var blockerCell = Cell(Optional.none());\n      return [\n        run(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            stop(component, blockerCell.get(), dragConfig, dragState);\n            blockerCell.set(Optional.none());\n          };\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: function () {\n            },\n            forceDrop: stop$1,\n            move: function (event) {\n              move$1(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$d(dragApi));\n          blockerCell.set(Optional.some(blocker));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move$1(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        }),\n        run(touchcancel(), function (component) {\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        })\n      ];\n    };\n    var schema$v = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$h) })]);\n\n    var events$i = function (dragConfig, dragState, updateStartState) {\n      return __spreadArrays(events$g(dragConfig, dragState, updateStartState), events$h(dragConfig, dragState, updateStartState));\n    };\n    var schema$w = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$i) })]);\n\n    var mouse = schema$u;\n    var touch = schema$v;\n    var mouseOrTouch = schema$w;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init$e = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$e\n    });\n\n    var Dragging = createModes$1({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute$3(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute$3(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute$3(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute$3(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq$1(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(Optional.some(td));\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$a = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = Cell(Optional.none());\n      var finishCell = Cell(Optional.none());\n      var getTopLeftSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$2(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$3().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach$1(sink, topLeft);\n            attach$1(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(Optional.some(e.start));\n          finishCell.set(Optional.some(e.finish));\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.set(Optional.none());\n          finishCell.set(Optional.none());\n        });\n      }\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize$3 = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$7(container), get$8(container));\n      each$1(dimensions, function (val, dim) {\n        return set$2(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var isHidden$1 = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden$1(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderResizeHandlerIcon = function (resizeType) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__resize-handle'],\n            attributes: {\n              'title': providersBackstage.translate('Resize'),\n              'aria-hidden': 'true'\n            },\n            innerHtml: get$e('resize-handle', providersBackstage.icons)\n          },\n          behaviours: derive$1([Dragging.config({\n              mode: 'mouse',\n              repositionTarget: false,\n              onDrag: function (comp, target, delta) {\n                resize$3(editor, delta, resizeType);\n              },\n              blockerClass: 'tox-blocker'\n            })])\n        };\n      };\n      var renderBranding = function () {\n        var label = global$6.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getResizeType = function (editor) {\n        var fallback = !editor.hasPlugin('autoresize');\n        var resize = editor.getParam('resize', fallback);\n        if (resize === false) {\n          return ResizeTypes.None;\n        } else if (resize === 'both') {\n          return ResizeTypes.Both;\n        } else {\n          return ResizeTypes.Vertical;\n        }\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeType = getResizeType(editor);\n        if (resizeType !== ResizeTypes.None) {\n          components.push(renderResizeHandlerIcon(resizeType));\n        }\n        return components;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$b = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$3();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var isUiContainerInBody = eq$1(body(), getUiContainer(editor));\n      var dirAttributes = global$6.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$2(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive([run(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isUiContainerInBody ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$8(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$6.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$3(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: function () {\n          }\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$2(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$2(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$2(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$8(editor, backstage);\n        setup$9(editor, lazySink, backstage);\n        setup$6(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$2(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$4(editor, contextToolbars, sink, { backstage: backstage });\n        setup$a(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$3(describedElement, 'id')).fold(function () {\n        var id = generate$1('dialog-describe');\n        set$1(describeElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$1('dialog-label');\n        set$1(labelElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$x = constant([\n      strict$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted$1('useTabstopAt', always),\n      defaulted$1('eventOrder', {}),\n      field$1('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity };\n    var parts$f = constant([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor$2(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [strict$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted$1('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted$1('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var block = function (component, config, state, getBusySpec) {\n      set$1(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade$1(blocker));\n      if (blocker.hasConfigured(Keying)) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$1(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$f = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$5({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Blocking = create$1({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var factory$i = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = Cell(Optional.none());\n      var showDialog = function (dialog) {\n        dialogComp.set(Optional.some(dialog));\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade$1(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach$1(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.set(Optional.none());\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$1('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite$1({\n      name: 'ModalDialog',\n      configFields: schema$x(),\n      partFields: parts$f(),\n      factory: factory$i,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      strictString('type'),\n      strictString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArrays(baseFooterButtonFields, [strictString('text')]);\n    var normalFooterButtonFields = __spreadArrays([strictStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields);\n    var menuFooterButtonFields = __spreadArrays([\n      strictStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      strictString('type'),\n      strictString('text'),\n      strictStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      strictString('icon'),\n      defaulted$1('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        strictString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      strictString('type'),\n      strictString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      strictString('type'),\n      strictString('name'),\n      strictString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      strictString('type'),\n      strictString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted$1('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj$1([\n      strictString('value'),\n      strictString('text'),\n      strictString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictString('scriptId'),\n      strictString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      strictString('type'),\n      strictString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([strictOf('currentState', objOf([\n        strict$1('blob'),\n        strictString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      strictString('text'),\n      strictString('value')\n    ];\n    var listBoxNestedItemFields = [\n      strictString('text'),\n      strictArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOfObj('items', [\n        strictString('text'),\n        strictString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      strictString('width'),\n      strictString('height')\n    ]);\n\n    var tableFields = [\n      strictString('type'),\n      strictArrayOf('header', string),\n      strictArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted$1('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      strictString('value'),\n      defaulted$1('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field('items', 'items', strict(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema$3, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema$3 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      strictString('type'),\n      defaulted$1('classes', []),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('tab-name');\n      }), string),\n      strictString('title'),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var tabPanelFields = [\n      strictString('type'),\n      strictArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      strictString('title'),\n      strictOf('body', chooseProcessor('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      strictArrayOf('buttons', dialogButtonSchema),\n      defaulted$1('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted$1('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArrays([strictStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields));\n    var urlDialogSchema = objOf([\n      strictString('title'),\n      strictString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [strictOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract$1 = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract$1(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract$1(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each$1(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, function (vals) {\n                return vals;\n              });\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$j = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$7(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single$2({\n      name: 'TabButton',\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('value'),\n        field('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$1('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue$1()),\n        option('action'),\n        defaulted$1('domModification', {}),\n        field$1('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        strict$1('view')\n      ],\n      factory: factory$j\n    });\n\n    var schema$y = constant([\n      strict$1('tabs'),\n      strict$1('dom'),\n      defaulted$1('clickToDismiss', false),\n      field$1('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$g = constant([tabsPart]);\n\n    var factory$k = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite$1({\n      name: 'Tabbar',\n      configFields: schema$y(),\n      partFields: parts$g(),\n      factory: factory$k\n    });\n\n    var factory$l = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single$2({\n      name: 'Tabview',\n      configFields: [field$1('tabviewBehaviours', [Replacing])],\n      factory: factory$l\n    });\n\n    var schema$z = constant([\n      defaulted$1('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted$1('tabs', []),\n      field$1('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        strict$1('dom'),\n        strictObjOf('markers', [\n          strict$1('tabClass'),\n          strict$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts$h = constant([\n      barPart,\n      viewPart\n    ]);\n\n    var factory$m = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$1(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.tabSectionBehaviours),\n        events: derive(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite$1({\n      name: 'TabSection',\n      configFields: schema$z(),\n      partFields: parts$h(),\n      factory: factory$m,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor$2(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$5(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$7(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$8(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$7(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$5(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$5(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$7(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$2(tabview, 'height', height + 'px');\n      if (!detect$3().browser.isIE()) {\n        set$2(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor$2(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant$1(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$2(tabview, 'height', '0');\n            set$2(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant$1(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = Cell(Optional.none());\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$2(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeight.set(maxTabHeightOpt);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$2.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active();\n              set$2(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(Optional.from(newHeight));\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$1);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll$1([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$1('update-dialog');\n    var titleChannel = generate$1('update-title');\n    var bodyChannel = generate$1('update-body');\n    var footerChannel = generate$1('update-footer');\n    var bodySendMessageChannel = generate$1('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$8.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml$2('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArrays([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray()),\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArrays([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$4(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours)),\n        eventOrder: __assign((_a = {}, _a[execute()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', providersBackstage.icons)\n            }\n          }],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml$2('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$3(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': message },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArrays([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus$1),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })]);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains$2(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains$2(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ]);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup$2 = function (compInSystem, footerButtons, buttonName) {\n      return find(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup$2(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml$2('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$2(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each$1(menuItemStates, function (v, k) {\n            if (has(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog$1 = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: function () {\n            return dialog;\n          },\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$1('dialog-label');\n      var dialogContentId = generate$1('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = '' + dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name(elem) !== 'button' || get$3(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: function () {\n          return dialog;\n        },\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$h = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$h(internalDialog.url, { base_uri: new global$h(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = Cell(Optional.none());\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind$3(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$h(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(Optional.some(unbind));\n          }),\n          runOnDetached(function () {\n            messageHandlerUnbinder.get().each(function (unbinder) {\n              return unbinder.unbind();\n            });\n          })\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant$1(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$c = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$d = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData$1 = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest$4(target, '.tox-alert-dialog') || closest$4(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup$e = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$c(extras);\n      var confirmDialog = setup$d(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog$1(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData$1(internalInitialData, dataValidator);\n          var inlineDialog = value$3();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArrays([config('window-manager-inline-events', [run(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop))),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, anchor, premade$1(dialogUi.dialog), Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$1.add('silver', function (editor) {\n        var _a = setup$b(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup$e({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.1 (2020-11-25)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf(x);\n      var ty = typeOf(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf$1 = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf$1(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort$1 = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray$1 = Array.isArray;\n    var toArray = function (obj) {\n      if (!isArray$1(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$2 = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (o.hasOwnProperty(n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$2 = function (array, callback) {\n      var out = [];\n      each$2(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$2(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect$3();\n    var browser = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser.isOpera(),\n      webkit: webkit,\n      ie: browser.isIE() || browser.isEdge() ? browser.version.major : false,\n      gecko: browser.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser.current,\n        version: browser.version,\n        isChrome: browser.isChrome,\n        isEdge: browser.isEdge,\n        isFirefox: browser.isFirefox,\n        isIE: browser.isIE,\n        isOpera: browser.isOpera,\n        isSafari: browser.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var is = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray$1(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty$1 = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    var create = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (ext.hasOwnProperty(name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$2(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode = function (s, d) {\n      if (!s || is(s, 'array')) {\n        return s;\n      }\n      return map$2(s.split(d || ','), trim$1);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$1,\n      isArray: isArray$1,\n      is: is,\n      toArray: toArray,\n      makeMap: makeMap,\n      each: each$2,\n      map: map$2,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty$1,\n      extend: extend,\n      create: create,\n      walk: walk,\n      createNS: createNS,\n      resolve: resolve,\n      explode: explode,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var toArray$1 = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$1 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$2 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter(elements, function (x) {\n          return !eq$2(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray$1(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray$1(element, nextSibling);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$2 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect$3().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$3 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$2(SugarElement.fromDom(doc));\n      return get$3(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$1 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        var i, cssValue;\n        if (isElement$1(node)) {\n          for (i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$1(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus = function (node) {\n      return isElement$1(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll = function (node) {\n      return isElement$1(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable = function (node) {\n      return isElement$1(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$1(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$1 = isNodeType(3);\n    var isComment$1 = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment$1 = isNodeType(11);\n    var isBr = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var isTableCell = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$4 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$4(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$1 = detect$3().browser;\n    var firstElement = function (nodes) {\n      return find(nodes, isElement);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$1.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0, offsetParent;\n      var doc = body.ownerDocument;\n      var pos;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x += offsetParent.offsetLeft || 0;\n          y += offsetParent.offsetTop || 0;\n          offsetParent = offsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise = module$1.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$4 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$4,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var sibling = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child$1(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq$2(scope, x) && predicate(x);\n      });\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is$1(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$1(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var promise = function () {\n      function bind(fn, thisArg) {\n        return function () {\n          fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof setImmediate === 'function' && setImmediate || function (fn) {\n        setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var i, requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (callback) {\n        window.setTimeout(callback, 0);\n      };\n      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    function StyleSheetLoader(documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove);\n      };\n      var getOrCreateState = function (url) {\n        return get$1(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par$1(map(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$1(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    }\n\n    var create$1 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$1();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return lookup.hasOwnProperty(name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock = lazyLookup(blocks);\n    var isTable$1 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline = function (node) {\n      return isElement(node) && !isBlock(node);\n    };\n    var isBr$1 = function (node) {\n      return isElement(node) && name(node) === 'br';\n    };\n    var isTextBlock = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$1 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP = zeroWidth;\n    var isZwsp$1 = isZwsp;\n    var trim$2 = removeZwsp;\n\n    var isElement$2 = isElement$1;\n    var isText$2 = isText$1;\n    var isCaretContainerBlock = function (node) {\n      if (isText$2(node)) {\n        node = node.parentNode;\n      }\n      return isElement$2(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$2(node) && isZwsp$1(node.data);\n    };\n    var isCaretContainer = function (node) {\n      return isCaretContainerBlock(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr(node.firstChild);\n    };\n    var insertInline = function (node, before) {\n      var sibling;\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP);\n      var parentNode = node.parentNode;\n      if (!before) {\n        sibling = node.nextSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        sibling = node.previousSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$1(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$1(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[0] === ZWSP;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[node.data.length - 1] === ZWSP;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock(range.startContainer);\n    };\n\n    var isContentEditableTrue$1 = isContentEditableTrue;\n    var isContentEditableFalse$1 = isContentEditableFalse;\n    var isBr$2 = isBr;\n    var isText$3 = isText$1;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$2 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer;\n    var isCaretCandidate = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$3(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$2(node) || isTable$2(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$1(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$1(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$1(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from$1(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$1(elm);\n      }, false) !== true;\n    };\n    var isAtomic = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate = function (node, root) {\n      return isCaretCandidate(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq$2, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$1(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$1(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent = function (node, rootNode) {\n      return isCaretCandidate(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll$1 = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var node, brCount = 0;\n      if (isContent(targetNode, targetNode)) {\n        return false;\n      } else {\n        node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll$1(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent(node, root) || isInline(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$1(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$1(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument$2 = function (node) {\n      return isDocumentFragment$1(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$1(node) && isBookmarkNode(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$1(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument$2(node) && !isContent(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$1(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$3 = Tools.each, extend$1 = Tools.extend, explode$1 = Tools.explode, inArray = Tools.inArray;\n    var split = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split(children);\n        }\n        var names = split(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split(name);\n        ni = names.length;\n        var attrs = split(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$3(split(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$3(split(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$3(split('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$3(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$1(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    function Schema(settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$1(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$3((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$1(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$3(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$3(split(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$1({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$3(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$1({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$3(split(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$3(split(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$3(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$3(split('strong/b em/i'), function (item) {\n            var items = split(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$3(split('ol ul sub sup blockquote span font a table tbody strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$3(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$3(split('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$3({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$3(explode$1(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = function () {\n        return validStyles;\n      };\n      var getInvalidStyles = function () {\n        return invalidStyles;\n      };\n      var getValidClasses = function () {\n        return validClasses;\n      };\n      var getBoolAttrs = function () {\n        return boolAttrMap;\n      };\n      var getBlockElements = function () {\n        return blockElementsMap;\n      };\n      var getTextBlockElements = function () {\n        return textBlockElementsMap;\n      };\n      var getTextInlineElements = function () {\n        return textInlineElementsMap;\n      };\n      var getShortEndedElements = function () {\n        return shortEndedElementsMap;\n      };\n      var getSelfClosingElements = function () {\n        return selfClosingElementsMap;\n      };\n      var getNonEmptyElements = function () {\n        return nonEmptyElementsMap;\n      };\n      var getMoveCaretBeforeOnEnterElements = function () {\n        return moveCaretBeforeOnEnterElementsMap;\n      };\n      var getWhiteSpaceElements = function () {\n        return whiteSpaceElementsMap;\n      };\n      var getSpecialElements = function () {\n        return specialElements;\n      };\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = function () {\n        return customElementsMap;\n      };\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    }\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$1(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var deprecated = {\n      keyLocation: 1,\n      layerX: 1,\n      layerY: 1,\n      returnValue: 1,\n      webkitMovementX: 1,\n      webkitMovementY: 1,\n      keyIdentifier: 1,\n      mozPressure: 1\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;\n    };\n    var returnFalse = function () {\n      return false;\n    };\n    var returnTrue = function () {\n      return true;\n    };\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var name;\n      var event = data || {};\n      for (name in originalEvent) {\n        if (!deprecated[name]) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (!event.target) {\n        event.target = event.srcElement || document;\n      }\n      if (event.composedPath) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      if (originalEvent && isMouseEvent(originalEvent) && originalEvent.pageX === undefined && originalEvent.clientX !== undefined) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event.preventDefault = function () {\n        event.isDefaultPrevented = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.preventDefault) {\n            originalEvent.preventDefault();\n          } else {\n            originalEvent.returnValue = false;\n          }\n        }\n      };\n      event.stopPropagation = function () {\n        event.isPropagationStopped = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.stopPropagation) {\n            originalEvent.stopPropagation();\n          } else {\n            originalEvent.cancelBubble = true;\n          }\n        }\n      };\n      event.stopImmediatePropagation = function () {\n        event.isImmediatePropagationStopped = returnTrue;\n        event.stopPropagation();\n      };\n      if (hasIsDefaultPrevented(event) === false) {\n        event.isDefaultPrevented = returnFalse;\n        event.isPropagationStopped = returnFalse;\n        event.isImmediatePropagationStopped = returnFalse;\n      }\n      if (typeof event.metaKey === 'undefined') {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$1(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix(null, args);\n        event.type = name;\n        event.target = target;\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains$3, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf$2 = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains$3(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains$3 = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains$3(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains$3(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf$2.call(sortInput, a) - indexOf$2.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf$2.call(sortInput, a) - indexOf$2.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains$3(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf$2.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf$2.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf$2.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document, push$1 = Array.prototype.push, slice$1 = Array.prototype.slice;\n    var rquickExpr$1 = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString$1 = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString$1(sourceItem)) {\n        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$1 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$3 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var each$4 = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep = function (array, callback) {\n      var out = [];\n      each$4(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString$1(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr$1.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push$1.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString$1(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push$1.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$1(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$1(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$4(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$3((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$4(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event.fire(this, name.type, name);\n          } else {\n            Event.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return new DomQuery(slice$1.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push$1,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$4,\n      trim: trim$3,\n      grep: grep,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$4({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$4({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$5 = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    function DOMUtils(doc, settings) {\n      var _this = this;\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$5(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment$1(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$5(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : _this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$5(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (attrs.hasOwnProperty(key) && attrs[key] !== null && typeof attrs[key] !== 'undefined') {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$1(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$5(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$5(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$1(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$1(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$1(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$1(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        while (node) {\n          if (parent === node) {\n            return true;\n          }\n          node = node.parentNode;\n        }\n        return false;\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, function () {\n        return self;\n      });\n      return self;\n    }\n    (function (DOMUtils) {\n      DOMUtils.DOM = DOMUtils(document);\n      DOMUtils.nodeIndex = findNodeIndex;\n    }(DOMUtils || (DOMUtils = {})));\n    var DOMUtils$1 = DOMUtils;\n\n    var DOM = DOMUtils$1.DOM;\n    var each$6 = Tools.each, grep$2 = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$6(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep$2(scripts);\n          scripts.length = 0;\n          each$6(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$6(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$1(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$1(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$1(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$1(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl = function () {\n      return getLanguageData().bind(function (items) {\n        return get$1(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add,\n      translate: translate,\n      isRtl: isRtl,\n      hasCode: hasCode\n    };\n\n    function AddOnManager() {\n      var _this = this;\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = _this.urls[pluginName];\n        each(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has(lookup, name) && state === 'added') {\n          callback();\n        } else if (has(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    }\n    (function (AddOnManager) {\n      AddOnManager.PluginManager = AddOnManager();\n      AddOnManager.ThemeManager = AddOnManager();\n    }(AddOnManager || (AddOnManager = {})));\n    var AddOnManager$1 = AddOnManager;\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read = function (element, attr) {\n      var value = get$4(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$6(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child(start, rng.startOffset).getOr(start);\n      var closest = closest$1(newStart, selector, function (n) {\n        return eq$2(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$4(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement(elem) && has$2(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants$1(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants$1(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each(markers, function (m) {\n        var uid = get$4(m, dataAnnotationId());\n        var nodesAlready = directory.hasOwnProperty(uid) ? directory[uid] : [];\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: Cell(Optional.none())\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = callbackMap.hasOwnProperty(name) ? callbackMap[name] : initData();\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last$2(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort$1(keys(callbackMap));\n        each(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.set(Optional.none());\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!prev.is(uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(Optional.some(uid));\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$1 = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$2 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return annotations.hasOwnProperty(name) ? Optional.from(annotations[name]).map(function (a) {\n          return a.settings;\n        }) : Optional.none();\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add$4 = function (element, classes) {\n      each(classes, function (x) {\n        add$3(element, x);\n      });\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$7 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set$1 = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$1(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$1);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$1);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr(node) || isContentEditableFalse(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$1(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var round = Math.round;\n    var clone$2 = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round(rect.left),\n        top: round(rect.top),\n        bottom: round(rect.bottom),\n        right: round(rect.right),\n        width: round(rect.width),\n        height: round(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone$2(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode = function (container, offset) {\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        if (offset >= container.childNodes.length) {\n          offset = container.childNodes.length - 1;\n        }\n        container = container.childNodes[offset];\n      }\n      return container;\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$1;\n    var isCaretCandidate$1 = isCaretCandidate;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$1, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$1;\n    var isBr$3 = isBr;\n    var nodeIndex = DOMUtils$1.nodeIndex;\n    var resolveIndex = getNode;\n    var createRange = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils$1.DOM.createRng();\n    };\n    var isWhiteSpace = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      var text;\n      if (isWhiteSpace(range.toString()) && isNotPre(container.parentNode) && isText$1(container)) {\n        text = container.data;\n        if (isWhiteSpace(text[offset - 1]) || isWhiteSpace(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone$2(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$1(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$2(clientRects[0]);\n      } else {\n        clientRect = clone$2(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var beforeNode, node;\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), true));\n          }\n        }\n      };\n      if (isText$4(caretPosition.container())) {\n        addCharacterOffset(caretPosition.container(), caretPosition.offset());\n        return clientRects;\n      }\n      if (isElement$3(caretPosition.container())) {\n        if (caretPosition.isAtEnd()) {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n          }\n        } else {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n            return clientRects;\n          }\n          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    function CaretPosition(container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    }\n    (function (CaretPosition) {\n      CaretPosition.fromRangeStart = function (range) {\n        return CaretPosition(range.startContainer, range.startOffset);\n      };\n      CaretPosition.fromRangeEnd = function (range) {\n        return CaretPosition(range.endContainer, range.endOffset);\n      };\n      CaretPosition.after = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node) + 1);\n      };\n      CaretPosition.before = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node));\n      };\n      CaretPosition.isAbove = function (pos1, pos2) {\n        return lift2(head(pos2.getClientRects()), last(pos1.getClientRects()), isAbove).getOr(false);\n      };\n      CaretPosition.isBelow = function (pos1, pos2) {\n        return lift2(last(pos2.getClientRects()), head(pos1.getClientRects()), isBelow).getOr(false);\n      };\n      CaretPosition.isAtStart = function (pos) {\n        return pos ? pos.isAtStart() : false;\n      };\n      CaretPosition.isAtEnd = function (pos) {\n        return pos ? pos.isAtEnd() : false;\n      };\n      CaretPosition.isTextPosition = function (pos) {\n        return pos ? isText$1(pos.container()) : false;\n      };\n      CaretPosition.isElementPosition = function (pos) {\n        return CaretPosition.isTextPosition(pos) === false;\n      };\n    }(CaretPosition || (CaretPosition = {})));\n    var CaretPosition$1 = CaretPosition;\n\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$1(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode(dom, node.previousSibling);\n      trimEmptyTextNode(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment$1(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$5 = isText$1;\n    var isBogus$2 = isBogus;\n    var nodeIndex$1 = DOMUtils$1.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus$2(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus$2(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$5(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal$1 = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal$1(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$5(node) && isText$5(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal$1(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$5(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$3 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$5(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil(root, container);\n      parents = filter$2(parents, not(isBogus));\n      path = path.concat(map$2(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$5(node) || !isText$5(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$5(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$5(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$5(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition$1(container, offset);\n    };\n    var resolve$1 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$5(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex$1(container) + 1;\n        } else {\n          offset = nodeIndex$1(container);\n        }\n        return CaretPosition$1(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$1(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$1(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      return bookmark;\n    };\n    var findIndex$2 = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$1(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint(rng, true);\n      moveEndPoint(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$1(node)) {\n        node = getNode(node, offset);\n        if (isContentEditableFalse$2(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer(node)) {\n        if (isText$1(node) && isCaretContainerBlock(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$2(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$3(selection.dom.getRoot(), CaretPosition$1.fromRangeStart(rng)),\n        end: create$3(selection.dom.getRoot(), CaretPosition$1.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$1 = DOMUtils$1.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return bodyObj.hasOwnProperty(editor.id) ? bodyObj[editor.id] : defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString(contentCss)) {\n        return map(contentCss.split(','), trim);\n      } else if (isArray(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString(selector) ? selector : 'table,img,figure.image,div';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$1.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline$1 = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n\n    var isElement$4 = isElement$1;\n    var isText$6 = isText$1;\n    var removeNode = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$5(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition$1(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf(from$1(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition$1(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$5(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$6(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition$1.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$5 = function (caretContainerNode) {\n      if (isElement$4(caretContainerNode) && isCaretContainer(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode(caretContainerNode);\n        }\n      }\n      if (isText$6(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect$3().browser;\n    var isContentEditableFalse$3 = isContentEditableFalse;\n    var isMedia$1 = isMedia;\n    var isTableCell$2 = isTableCell;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var docElm, scrollX, scrollY, margin, rootRect;\n      if (root.tagName === 'BODY') {\n        docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants$1(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = Cell(Optional.none());\n      var cursorInterval, caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var clientRect, rng;\n        hide();\n        if (isTableCell$2(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock(caretBlock, element, before);\n          clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(clientRect).appendTo(root)[0];\n          lastVisualCaret.set(Optional.some({\n            caret: caret,\n            element: element,\n            before: before\n          }));\n          lastVisualCaret.get().each(function (caretState) {\n            if (before) {\n              DomQuery(caretState.caret).addClass('mce-visual-caret-before');\n            }\n          });\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$5(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.get().each(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.set(Optional.none());\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = null;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.get().each(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$3(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$4 = isContentEditableFalse;\n    var isMedia$2 = isMedia;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer$2 = isCaretContainer;\n    var isCaretContainerBlock$1 = isCaretContainerBlock;\n    var isElement$5 = isElement$1;\n    var isCaretCandidate$2 = isCaretCandidate;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock$1(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$4(node) || isCaretContainerBlock$1(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock(caretPosition1.container(), rootNode) === getParentBlock(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$5(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock(node1, root) === getParentBlock(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var sibling, siblingName;\n      if (left) {\n        siblingName = 'previousSibling';\n      } else {\n        siblingName = 'nextSibling';\n      }\n      while (node && node !== root) {\n        sibling = node[siblingName];\n        if (isCaretContainer$2(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$4(sibling) || isMedia$2(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$2(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$1 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node, container, location;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock(container)) {\n        if (!isElement$5(container)) {\n          container = container.parentNode;\n        }\n        location = container.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$1(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$1(container)) {\n        if (isCaretContainer$2(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$1(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$4);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$5 = isContentEditableFalse;\n    var isText$7 = isText$1;\n    var isElement$6 = isElement$1;\n    var isBr$4 = isBr;\n    var isCaretCandidate$3 = isCaretCandidate;\n    var isAtomic$1 = isAtomic;\n    var isEditableCaretCandidate$1 = isEditableCaretCandidate;\n    var getParents = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate$3(node.previousSibling) && !isText$7(node.previousSibling)) {\n          return CaretPosition$1.before(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate$3(node.nextSibling) && !isText$7(node.nextSibling)) {\n          return CaretPosition$1.after(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$4(node)) {\n          return CaretPosition$1.before(node);\n        }\n        return CaretPosition$1.after(node);\n      }\n      return CaretPosition$1.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate$3(nextSibling)) {\n        if (isText$7(nextSibling)) {\n          return CaretPosition$1(nextSibling, 0);\n        } else {\n          return CaretPosition$1.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition(HDirection.Forwards, CaretPosition$1.after(nextNode), root);\n      }\n    };\n    var findCaretPosition = function (direction, startPos, root) {\n      var node, nextNode, innerNode;\n      var caretPosition;\n      if (!isElement$6(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition$1.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition$1.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate$3(root.lastChild) && isElement$6(root.lastChild)) {\n          return isBr$4(root.lastChild) ? CaretPosition$1.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$7(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition$1(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition$1(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate$3(nextNode)) {\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, innerNode.data.length);\n                }\n                return CaretPosition$1.after(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, nextNode.data.length);\n            }\n            return CaretPosition$1.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate$3(nextNode)) {\n            if (isBr$4(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, 0);\n                }\n                return CaretPosition$1.before(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, 0);\n            }\n            return CaretPosition$1.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode(node, direction, always, root, true);\n        if (isEditableCaretCandidate$1(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode(node, direction, isEditableCaretCandidate$1, root);\n      var rootContentEditableFalseElm = last$1(filter(getParents(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition$1.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition$1.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition$1.before(start) : CaretPosition$1.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr(node) ? CaretPosition$1.before(node) : CaretPosition$1.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition$1.isTextPosition(from) && !CaretPosition$1.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition$1.isTextPosition(position) && isBr(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$1(startNode)) {\n        return Optional.some(CaretPosition$1(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate(startNode)) {\n          return Optional.some(forward ? CaretPosition$1.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$1(node) && node.id === CARET_ID;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return typeof bookmark.start === 'string';\n    };\n    var isRangeBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$1(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$1(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$1(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(function () {\n        return false;\n      }, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$1(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$1(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$1(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition$1(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex$1 = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$2 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex$1(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$2(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$1(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is$2 = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is$2(nbsp);\n    var isWhiteSpace$1 = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent$1 = function (chr) {\n      return !isWhiteSpace$1(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer, walker, node, nodes;\n      if (rng.startContainer === rng.endContainer) {\n        if (isInlineBlock(rng.startContainer.childNodes[rng.startOffset])) {\n          return;\n        }\n      }\n      if (container.nodeType === 1) {\n        nodes = container.childNodes;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3 && !isWhiteSpaceNode(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (node.nodeType === 1 || !isWhiteSpaceNode(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$1(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      return isNonNullable(node) && isText$1(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (typeof value !== 'string') {\n        value = value(vars);\n      } else if (vars) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$1 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$1(format, key).exists(function (field) {\n            var fieldValues = isArray(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$1(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n\n    var isBookmarkNode$2 = isBookmarkNode$1;\n    var getParents$2 = getParents$1;\n    var isWhiteSpaceNode$1 = isWhiteSpaceNode;\n    var isTextBlock$2 = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$1(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace$1(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent$1);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode$2(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, format, rng, container, siblingName) {\n      if (isText$1(container) && container.nodeValue.length === 0 && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$2(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < format.length; y++) {\n          var curFormat = format[y];\n          if ('collapsed' in curFormat && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, format, container, siblingName) {\n      var node;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      if (!format[0].wrapper) {\n        node = dom.getParent(container, format[0].block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$1(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock$2(editor, node);\n        }, scopeRoot);\n      }\n      if (node && format[0].wrapper) {\n        node = getParents$2(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, format, container, offset, start) {\n      var parent = container;\n      var sibling;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$1(container) && !isWhiteSpaceNode$1(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!format[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$1(sibling) && !isAtBlockBoundary(dom, root, sibling, siblingName);\n          if (!isBookmarkNode$2(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode$1(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode$2(container.parentNode) || isBookmarkNode$2(container);\n    };\n    var expandRng = function (editor, rng, format, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      if (isElement$1(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode(startContainer, startOffset);\n        if (isText$1(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$1(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$1(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode$2(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$1(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode$2(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$1(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (format[0].inline || format[0].block_expand) {\n        if (!format[0].inline || (!isText$1(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, format, startContainer, startOffset, true);\n        }\n        if (!format[0].inline || (!isText$1(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, format, endContainer, endOffset, false);\n        }\n      }\n      if (format[0].selector && format[0].expand !== false && !format[0].inline) {\n        startContainer = findSelectorEndPoint(dom, format, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, format, rng, endContainer, 'nextSibling');\n      }\n      if (format[0].block || format[0].selector) {\n        startContainer = findBlockEndPoint(editor, format, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, format, endContainer, 'nextSibling');\n        if (format[0].block) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, format, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, format, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$1(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$1(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var clampToExistingChildren = function (container, index) {\n      var childNodes = container.childNodes;\n      if (index >= childNodes.length) {\n        index = childNodes.length - 1;\n      } else if (index < 0) {\n        index = 0;\n      }\n      return childNodes[index] || container;\n    };\n    var getEndChild = function (container, index) {\n      return clampToExistingChildren(container, index - 1);\n    };\n    var walk$1 = function (dom, rng, callback) {\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var exclude = function (nodes) {\n        var node;\n        node = nodes[0];\n        if (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n          nodes.splice(0, 1);\n        }\n        node = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        do {\n          if (node.parentNode === root) {\n            return node;\n          }\n          node = node.parentNode;\n        } while (node);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = clampToExistingChildren(startContainer, startOffset);\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getEndChild(endContainer, endOffset);\n      }\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      for (var node = startContainer; node; node = node.parentNode) {\n        if (node === endContainer) {\n          return walkBoundary(startContainer, ancestor, true);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      for (var node = endContainer; node; node = node.parentNode) {\n        if (node === startContainer) {\n          return walkBoundary(endContainer, ancestor);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter(getSelectedNodes(ranges), isTableCell$1);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants$1(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$1(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$1(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find(getFirstChildren(elm), curry(eq$2, startNode));\n        var end = find(getLastChildren(elm), curry(eq$2, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint$1 = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$1(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$1(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$8 = function (element) {\n      return api.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText(elem) && get$8(elem) === ZWSP;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: true }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate$1('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$3(master, annotation());\n      set(master, '' + dataAnnotationId(), uid);\n      set(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll(master, attributes);\n      add$4(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = Cell(Optional.none());\n      var finishWrapper = function () {\n        wrapper.set(Optional.none());\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(Optional.some(nu));\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$1(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set$1(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$2();\n      setup$1(editor, registry);\n      var changes = setup(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$1(directory, function (elems) {\n            return map(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    function BookmarkManager(selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    }\n    (function (BookmarkManager) {\n      BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n    }(BookmarkManager || (BookmarkManager = {})));\n    var BookmarkManager$1 = BookmarkManager;\n\n    var getContentEditableRoot = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue(node) || isContentEditableFalse(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$1(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$6 = isContentEditableFalse;\n    var ControlSelection = function (selection, editor) {\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTarget = function (elm) {\n        return editor.dom.is(elm, 'figure.image') ? elm.querySelector('img') : elm;\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        return is$1(SugarElement.fromDom(elm), selector);\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        dom.setStyles(getResizeTarget(ghostElm), {\n          width: width,\n          height: height\n        });\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if (isImage(selectedElm) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        var setSizeProp = function (name, value) {\n          if (value) {\n            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {\n              dom.setStyle(getResizeTarget(selectedElm), name, value);\n            } else {\n              dom.setAttrib(getResizeTarget(selectedElm), name, '' + value);\n            }\n          }\n        };\n        if (wasResizeStarted) {\n          setSizeProp('width', width);\n          setSizeProp('height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        hideResizeRect();\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = getResizeTarget(selectedElm).clientWidth;\n              startH = getResizeTarget(selectedElm).clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              selectedElmGhost = selectedElm.cloneNode(true);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = false;\n              selectedElmGhost.unSelectabe = true;\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute('data-mce-selected');\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        selectedElm.setAttribute('data-mce-selected', '1');\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute('data-mce-selected');\n        }\n        each$1(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute('data-mce-selected');\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$6(getContentEditableRoot(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$1(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue(node) || isContentEditableFalse(node);\n    };\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse(findParent(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint$1 = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (doc.caretRangeFromPoint) {\n        rng = doc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$1 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent = function (node, rootNode, predicate) {\n      return findParent$1(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable$3 = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$3 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer(node) && hasParent(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$1(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$1(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer(container)) {\n        return Optional.none();\n      }\n      if (isElement$1(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$3(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$1(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$3(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable$3(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse(node) || isCaretContainer(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$1(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$3(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$1(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$1(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$1(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$1(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split$1 = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$1(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$1(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$1(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    function RangeUtils(dom) {\n      var walk = function (rng, callback) {\n        return walk$1(dom, rng, callback);\n      };\n      var split = split$1;\n      var normalize$1 = function (rng) {\n        return normalize(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split,\n        normalize: normalize$1\n      };\n    }\n    (function (RangeUtils) {\n      RangeUtils.compareRanges = isEq$1;\n      RangeUtils.getCaretRangeFromPoint = fromPoint$1;\n      RangeUtils.getSelectedNode = getSelectedNode;\n      RangeUtils.getNode = getNode;\n    }(RangeUtils || (RangeUtils = {})));\n    var RangeUtils$1 = RangeUtils;\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$9 = function (element) {\n      return api$1.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$1 = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$2 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$2(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText(last)) {\n            return {\n              element: last,\n              offset: get$8(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$9(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\">' + ZWSP + '</span>');\n      before(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$2(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$2(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$4 };\n\n    var adt = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$3 = adt.before;\n    var on = adt.on;\n    var after$2 = adt.after;\n    var Situ = {\n      before: before$3,\n      on: on,\n      after: after$2,\n      cata: cata,\n      getStart: getStart\n    };\n\n    var adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$1.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$1.domRange;\n    var relative = adt$1.relative;\n    var exact = adt$1.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$3 = detect$3().browser;\n    var clamp = function (offset, element) {\n      var max = isText(element) ? get$8(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp(rng.soffset, rng.start), rng.finish, clamp(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$2(root, elm) || eq$2(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$3.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark$2 = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark$2(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils$1.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils$1.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect$3().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$2 = DOMUtils$1.DOM;\n    var isEditorUIElement$1 = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$2.getParent(elm, function (elm) {\n        return isEditorUIElement$1(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents = function (editorManager, e) {\n      var editor = e.editor;\n      register(editor);\n      editor.on('focusin', function () {\n        var self = this;\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== self) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: self });\n          }\n          editorManager.setActive(self);\n          editorManager.focusedEditor = self;\n          self.fire('focus', { blurredEditor: focusedEditor });\n          self.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        var self = this;\n        Delay.setEditorTimeout(self, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(self, getActiveElement(self)) && focusedEditor === self) {\n            self.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$2.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$2.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$2 = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$2(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      return active().filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus$1 = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus$1(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus$1 = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      skipFocus ? activateEditor(editor) : focusEditor(editor);\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement(elm) ? Optional.some(elm) : parent(elm).filter(isElement);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart$2 = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$1(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode$1 = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart$2(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select$1 = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint$1(dom, rng, node, true);\n          moveEndPoint$1(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor$3 = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$2 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor$3(scope, transform, stop);\n      });\n    };\n\n    var isEq$2 = isEq;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].inherit === false && ed.dom.is(node, formatList[i].selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return matchNode(editor, node, name, vars);\n    };\n    var matchName = function (dom, node, format) {\n      if (isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isEq$2(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var key, value;\n      var items = format[itemName];\n      var i;\n      if (format.onmatch) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (typeof items.length === 'undefined') {\n          for (key in items) {\n            if (items.hasOwnProperty(key)) {\n              if (itemName === 'attributes') {\n                value = dom.getAttrib(node, key);\n              } else {\n                value = getStyle(dom, node, key);\n              }\n              if (similar && !value && !format.exact) {\n                return;\n              }\n              if ((!similar || format.exact) && !isEq$2(value, normalizeStyleValue(dom, replaceVars(items[key], vars), key))) {\n                return;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return format;\n            }\n          }\n        }\n      }\n      return format;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var format, i, x, classes;\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (i = 0; i < formatList.length; i++) {\n          format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            if (classes = format.classes) {\n              for (x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, classes[x])) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match = function (editor, name, vars, node) {\n      if (node) {\n        return matchParents(editor, node, name, vars);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest$3 = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq$2(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$2(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var startNode, parents, i, x, selector;\n      var dom = editor.dom;\n      if (formatList) {\n        startNode = editor.selection.getStart();\n        parents = getParents$1(dom, startNode);\n        for (x = formatList.length - 1; x >= 0; x--) {\n          selector = formatList[x].selector;\n          if (!selector || formatList[x].defaultBlock) {\n            return true;\n          }\n          for (i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$2 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$1(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$1(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode$1(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$2(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var makeMap$3 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$3(settings.indent_before || '');\n      var indentAfter = makeMap$3(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          var name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n          if (!handler) {\n            name = node.name;\n            isEmpty = node.shortEnded;\n            attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              sortedAttrs = [];\n              sortedAttrs.map = {};\n              elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (i = 0, l = attrs.length; i < l; i++) {\n                  attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;]+;base64,([a-z0-9\\+\\/=]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate$1('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join('')\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(new RegExp(result.prefix + '_[0-9]+', 'g'), function (imageId) {\n        return get$1(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      var allowed = isNullable(allowSvgDataUrls) ? contains(safeSvgDataUrlElements, tagName) : allowSvgDataUrls;\n      return !allowed;\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findEndTagIndex = function (schema, html, startIndex) {\n      var count = 1, index, matches;\n      var shortEndedElements = schema.getShortEndedElements();\n      var tokenRegExp = /<([!?\\/])?([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\/|\\s+)>/g;\n      tokenRegExp.lastIndex = index = startIndex;\n      while (matches = tokenRegExp.exec(html)) {\n        index = tokenRegExp.lastIndex;\n        if (matches[1] === '/') {\n          count--;\n        } else if (!matches[1]) {\n          if (matches[2] in shortEndedElements) {\n            continue;\n          }\n          count++;\n        }\n        if (count === 0) {\n          break;\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    function SaxParser(settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var noop = function () {\n      };\n      settings = settings || {};\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return get$1(base64Extract.uris, value).getOr(value);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri, tagName)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/|\\\\s+)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    }\n    (function (SaxParser) {\n      SaxParser.findEndTag = findEndTagIndex;\n    }(SaxParser || (SaxParser = {})));\n    var SaxParser$1 = SaxParser;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var content = html;\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var endTagIndex, index, matchLength, matches;\n      var schema = serializer.schema;\n      content = trimHtml(serializer.getTempAttrs(), content);\n      var shortEndedElements = schema.getShortEndedElements();\n      while (matches = bogusAllRegExp.exec(content)) {\n        index = bogusAllRegExp.lastIndex;\n        matchLength = matches[0].length;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser$1.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$2(content);\n    };\n    var trimExternal = trimInternal;\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var content;\n      args.format = format;\n      args.get = true;\n      args.getInner = true;\n      if (!args.no_events) {\n        editor.fire('BeforeGetContent', args);\n      }\n      if (args.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$2(body.innerText || body.textContent);\n      } else if (args.format === 'tree') {\n        content = editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      if (!contains([\n          'text',\n          'tree'\n        ], args.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        args.content = Tools.trim(content);\n      } else {\n        args.content = content;\n      }\n      if (!args.no_events) {\n        editor.fire('GetContent', args);\n      }\n      return args.content;\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$7 = Tools.each;\n    var ElementUtils = function (dom) {\n      this.compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$7(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (obj1.hasOwnProperty(name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (obj2.hasOwnProperty(name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$1).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace$1);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace$1);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$1(container) && (container.data.length === 0 || isZwsp$1(container.data) && BookmarkManager$1.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse(node) && !isBogusAll(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia);\n    var isAfterMedia = matchesElementPosition(false, isMedia);\n    var isBeforeTable = matchesElementPosition(true, isTable);\n    var isAfterTable = matchesElementPosition(false, isTable);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren$1 = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants$1(elm, 'br');\n      var brs = filter(getLastChildren$1(elm).slice(-1), isBr$1);\n      if (allBrs.length === brs.length) {\n        each(brs, remove);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock(elm) && isBr$1(lastChild) && isBlock(lastChildPrevSibling)) {\n            remove(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil$1 = function (start, root, predicate) {\n      if (contains$2(root, start)) {\n        return dropLast(parents(start, function (elm) {\n          return predicate(elm) || eq$2(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents$1 = function (start, root) {\n      return parentsUntil$1(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents$1(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock = function (root, pos) {\n      return find(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$2(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary$1 = function (forward, root, pos) {\n      return getClosestBlock(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary$1, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary$1, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr$5 = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$1);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr$5);\n    };\n    var isBeforeBr = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$1) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$1) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      var parentBlocks = filter(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock$1(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock$1(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest(elm, isElement);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$1(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$1(container) && contains$1(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent$1(chars[i - 1]) && isContent$1(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace$1(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor(elm, isBlock).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition$1(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition$1(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      return normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      return normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition$1.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition$1.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition$1(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$1(node) ? CaretPosition$1(node, 0) : CaretPosition$1.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$1(node) ? CaretPosition$1(node, node.data.length) : CaretPosition$1.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition$1.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition$1.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition$1.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition$1.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition$1 = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition$1(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock$2 = function (editor, elm) {\n      return elm && has(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append(elm, br);\n        return Optional.some(CaretPosition$1.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText);\n      var nextTextOpt = nextSibling(elm).filter(isText);\n      remove(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition$1(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor(elm, curry(isBlock$2, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      { removeTable: ['element'] },\n      { emptyCells: ['cells'] },\n      {\n        deleteCellSelection: [\n          'rng',\n          'cell'\n        ]\n      }\n    ]);\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq$2(root, cur);\n      };\n    };\n    var getClosestCell = function (container, isRoot) {\n      return closest$1(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$1(cell, 'table', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq$2(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq$2(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getTableCells = function (table) {\n      return descendants$1(table, 'td,th');\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (table) {\n        return last(getTableCells(table)).map(function (endCell) {\n          return tableCellRng(cellRng.start, endCell);\n        });\n      });\n    };\n    var partialSelection = function (isRoot, rng) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return rng.collapsed ? Optional.none() : lift2(startCell, endCell, tableCellRng).fold(function () {\n        return startCell.fold(function () {\n          return endCell.bind(function (endCell) {\n            return getClosestTable(endCell, isRoot).bind(function (table) {\n              return head(getTableCells(table)).map(function (startCell) {\n                return tableCellRng(startCell, endCell);\n              });\n            });\n          });\n        }, function (startCell) {\n          return getClosestTable(startCell, isRoot).bind(function (table) {\n            return last(getTableCells(table)).map(function (endCell) {\n              return tableCellRng(startCell, endCell);\n            });\n          });\n        });\n      }, function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng) ? Optional.none() : getCellRangeFromStartTable(cellRng, isRoot);\n      });\n    };\n    var isWithinSameTable = function (isRoot, cellRng) {\n      return getTableFromCellRng(cellRng, isRoot).isSome();\n    };\n    var getTableSelectionFromCellRng = function (cellRng, isRoot) {\n      return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n        return tableSelection(cellRng, table, getTableCells(table));\n      });\n    };\n    var getTableSelection = function (optCellRng, rng, isRoot) {\n      return optCellRng.filter(function (cellRng) {\n        return isExpandedCellRng(cellRng) && isWithinSameTable(isRoot, cellRng);\n      }).orThunk(function () {\n        return partialSelection(isRoot, rng);\n      }).bind(function (cRng) {\n        return getTableSelectionFromCellRng(cRng, isRoot);\n      });\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex(cells, function (x) {\n        return eq$2(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.filter(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      }).map(function (cellRng) {\n        return cellRng.start;\n      });\n    };\n    var getAction = function (tableSelection) {\n      return getSelectedCells(tableSelection).map(function (selected) {\n        var cells = tableSelection.cells;\n        return selected.length === cells.length ? deleteAction.removeTable(tableSelection.table) : deleteAction.emptyCells(selected);\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      return isSingleCellTableContentSelected(optCellRng, rng, isRoot).map(function (cell) {\n        return deleteAction.deleteCellSelection(rng, cell);\n      }).orThunk(function () {\n        return getTableSelection(optCellRng, rng, isRoot).bind(getAction);\n      });\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var emptyCells = function (editor, cells) {\n      each(cells, fillWithPaddingBr);\n      editor.selection.setCursorLocation(cells[0].dom, 0);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell) {\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        editor.selection.setCursorLocation(lastBlock.dom, 0);\n      }\n      if (!eq$2(cell, lastBlock)) {\n        var additionalCleanupNodes = parent(lastBlock).is(cell) ? [] : siblings(lastBlock);\n        each(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq$2(node, lastBlock) && !contains$2(node, lastBlock)) {\n            remove(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteTableElement, editor), curry(emptyCells, editor), curry(deleteCellContents, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange = function (editor, startElm) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      var selectedCells = getCellsFromEditor(editor);\n      return selectedCells.length !== 0 ? emptyCells(editor, selectedCells) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find(parentsAndSelf(elm, rootElm), isTableCell$1);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find(parentsAndSelf(elm, rootElm), function (elm) {\n        return name(elm) === 'caption';\n      });\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq$2(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq$2(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return isEmpty(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret(editor, forward, startElm) : deleteRange(editor, startElm);\n    };\n\n    var createRange$1 = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition$1.fromRangeStart(rng);\n      var endPos = CaretPosition$1.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange$1(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize$2 = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems$1 = function (elm) {\n      return Tools.grep(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition$1.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition$1.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems$1(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition$1.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition$1.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$4 = isTableCell;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$4);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody(), elementUtils_1 = new ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          for (var testNode = node.parentNode; testNode && testNode !== root_1; testNode = testNode.parentNode) {\n            if (textInlineElements[node.nodeName.toLowerCase()] && elementUtils_1.compare(testNode, node)) {\n              dom.remove(node, true);\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom, selection = editor.selection;\n      var node2;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (node && node.nodeType === 3) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          node2 = marker.nextSibling;\n          if (node2 && node2.nodeType === 3) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$4(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize$2(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$4);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode, rootNode, args;\n      var marker, rng, node;\n      var selection = editor.selection, dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      args = {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      };\n      args = editor.fire('BeforeSetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (nodeMatches.hasOwnProperty(name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (attrMatches.hasOwnProperty(name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$3 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each(matches, function (match) {\n        each(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus$1(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html) {\n      editor.dom.setHTML(editor.getBody(), html);\n      moveSelection(editor);\n    };\n    var setContentString = function (editor, body, content, args) {\n      var forcedRootBlockName, padd;\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$3(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setContentInternal = function (editor, content, args) {\n      args.format = args.format ? args.format : defaultFormat;\n      args.set = true;\n      args.content = isTreeNode(content) ? '' : content;\n      if (!args.no_events) {\n        editor.fire('BeforeSetContent', args);\n      }\n      if (!isTreeNode(content)) {\n        content = args.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, args) : setContentString(editor, body, content, args);\n      });\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var sibling$2 = function (scope, predicate) {\n      return sibling(scope, predicate).isSome();\n    };\n\n    var ZWSP$1 = ZWSP, CARET_ID$1 = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP$1 || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$1(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll(caretContainer, {\n        'id': CARET_ID$1,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append(caretContainer, SugarElement.fromText(ZWSP$1));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP$1) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID$1)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$1(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split$1(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP$1) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split$1(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP$1) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$3 = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before(SugarElement.fromDom(targetNode), caretContainer);\n      remove(SugarElement.fromDom(targetNode));\n      return CaretPosition$1(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return inlineElements.hasOwnProperty(name(element)) && !isCaretNode(element.dom) && !isBogus(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter$4 = filter$2;\n    var each$8 = each$2;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess = function (name, editor) {\n      each$8(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$8(filter$4(filter$4(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$9 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$1(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      var sibling;\n      for (sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$1(sibling) && sibling.nodeValue.length !== 0) {\n          return node;\n        }\n        if (isElement$1(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var sibling, tmpSibling;\n      var elementUtils = new ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (sibling = prev.nextSibling; sibling && sibling !== next;) {\n            tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$9(dom.select(selector, node), function (node) {\n          if (isElementNode(node)) {\n            each$9(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$9(node.childNodes, function (node) {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$a = Tools.each;\n    var isEq$3 = isEq;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$1(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$1(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$1(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$2 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append$1(wrapper, siblings);\n      if (next) {\n        before(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after(start, wrapper);\n        append(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return isElement$1(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find$3 = function (dom, node, next, inc) {\n      node = getNonWhiteSpaceSibling(node, next, inc);\n      return !node || (node.nodeName === 'BR' || dom.isBlock(node));\n    };\n    var removeNode$1 = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (format.block) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find$3(dom, node, false) && !find$3(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find$3(dom, node, true) && !find$3(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$3(node, format.list_block)) {\n              each(from$1(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$2(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = 0;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (format.selector && format.inline && !isEq$3(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName$1(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (format.inline && format.remove === 'all' && isArray(format.preserve_attributes)) {\n        var attrsToPreserve = filter(dom.getAttribs(elm), function (attr) {\n          return contains(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$a(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$3(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$a(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$3(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$a(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode$1(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each(getParents$1(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (format.inline) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$6 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$1(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var process = function (node) {\n        var lastContentEditable, hasContentEditableState;\n        if (isElement$1(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from$1(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          for (var i = 0; i < formatList.length; i++) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$1(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split$1(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$2(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$2(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$1(dom, newRng, function (nodes) {\n              each(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$1(dom, expandedRng, function (nodes) {\n          each(nodes, function (node) {\n            process(node);\n            var textDecorations = [\n              'underline',\n              'line-through',\n              'overline'\n            ];\n            each(textDecorations, function (decoration) {\n              if (isElement$1(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n                removeFormat(ed, {\n                  deep: false,\n                  exact: true,\n                  inline: 'span',\n                  styles: { textDecoration: decoration }\n                }, null, node);\n              }\n            });\n          });\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        return;\n      }\n      if (!selection.isCollapsed() || !format.inline || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (format.inline && match(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n    };\n\n    var each$b = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (format.inline === 'sub' || format.inline === 'sup') {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$b(formatList, function (format) {\n        each$b(editor.dom.select(format.inline, node), function (child) {\n          if (!isElementNode(child)) {\n            return;\n          }\n          removeFormat(editor, format, vars, child, format.exact ? child : null);\n        });\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$c = Tools.each;\n    var hasFormatProperty = function (format, prop) {\n      return hasNonNullableKey(format, prop);\n    };\n    var isElementNode$1 = function (node) {\n      return node && node.nodeType === 1 && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = __assign(__assign({}, editor.schema.getTextBlockElements()), {\n          td: {},\n          th: {},\n          li: {},\n          dt: {},\n          dd: {},\n          figcaption: {},\n          caption: {},\n          details: {},\n          summary: {}\n        });\n        var hasCaretNodeSibling = sibling$2(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        fmt = fmt || format;\n        if (elm) {\n          if (fmt.onformat) {\n            fmt.onformat(elm, fmt, vars, node);\n          }\n          each$c(fmt.styles, function (value, name) {\n            dom.setStyle(elm, name, replaceVars(value, vars));\n          });\n          if (fmt.styles) {\n            var styleVal = dom.getAttrib(elm, 'style');\n            if (styleVal) {\n              dom.setAttrib(elm, 'data-mce-style', styleVal);\n            }\n          }\n          each$c(fmt.attributes, function (value, name) {\n            dom.setAttrib(elm, name, replaceVars(value, vars));\n          });\n          each$c(fmt.classes, function (value) {\n            value = replaceVars(value, vars);\n            if (!dom.hasClass(elm, value)) {\n              dom.addClass(elm, value);\n            }\n          });\n        }\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        if (!isSelectorFormat(format)) {\n          return false;\n        }\n        each$c(formatList, function (format) {\n          if ('collapsed' in format && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var applyRngStyle = function (dom, rng, bookmark, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = dom.create(wrapName);\n        setElementFormat(wrapElm);\n        walk$1(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentName = node.parentNode.nodeName.toLowerCase();\n            if (isElement$1(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!hasFormatProperty(format, 'inline') || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && node.nodeType === 3 && node.nodeValue.length === 1 && node.nodeValue.charCodeAt(0) === 65279) && !isCaretNode(node) && (!hasFormatProperty(format, 'inline') || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$c(Tools.grep(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$c(nodes, process);\n        });\n        if (format.links === true) {\n          each$c(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$c(Tools.grep(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$c(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$c(node.childNodes, function (node) {\n              if (!isEmptyTextNode(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var getChildElementNode = function (root) {\n            var child = false;\n            each$c(root.childNodes, function (node) {\n              if (isElementNode$1(node)) {\n                child = node;\n                return false;\n              }\n            });\n            return child;\n          };\n          var mergeStyles = function (node) {\n            var clone;\n            var child = getChildElementNode(node);\n            if (child && !isBookmarkNode$1(child) && matchName(dom, child, format)) {\n              clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n            }\n            return clone || node;\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            return;\n          }\n        }\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), null, true);\n            }\n          } else {\n            applyRngStyle(dom, node, null, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize$2(selection.getRng()));\n            preserve(selection, true, function (bookmark) {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess(name, ed);\n      }\n    };\n\n    var setup$4 = function (registeredFormatListeners, editor) {\n      var currentFormats = Cell({});\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, currentFormats, registeredFormatListeners.get());\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, currentFormats, formatChangeData) {\n      var formatsList = keys(currentFormats.get());\n      var newFormats = {};\n      var matchedFormats = {};\n      var parents = filter(getParents$1(editor.dom, elm), function (node) {\n        return node.nodeType === 1 && !node.getAttribute('data-mce-bogus');\n      });\n      each$1(formatChangeData, function (data, format) {\n        Tools.each(parents, function (node) {\n          if (editor.formatter.matchNode(node, format, {}, data.similar)) {\n            if (formatsList.indexOf(format) === -1) {\n              each(data.callbacks, function (callback) {\n                callback(true, {\n                  node: node,\n                  format: format,\n                  parents: parents\n                });\n              });\n              newFormats[format] = data.callbacks;\n            }\n            matchedFormats[format] = data.callbacks;\n            return false;\n          }\n          if (matchesUnInheritedFormatSelector(editor, node, format)) {\n            return false;\n          }\n        });\n      });\n      var remainingFormats = filterRemainingFormats(currentFormats.get(), matchedFormats, elm, parents);\n      currentFormats.set(__assign(__assign({}, newFormats), remainingFormats));\n    };\n    var filterRemainingFormats = function (currentFormats, matchedFormats, elm, parents) {\n      return bifilter(currentFormats, function (callbacks, format) {\n        if (!has(matchedFormats, format)) {\n          each(callbacks, function (callback) {\n            callback(false, {\n              node: elm,\n              format: format,\n              parents: parents\n            });\n          });\n          return false;\n        } else {\n          return true;\n        }\n      }).t;\n    };\n    var addListeners = function (registeredFormatListeners, formats, callback, similar) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        if (!formatChangeItems[format]) {\n          formatChangeItems[format] = {\n            similar: similar,\n            callbacks: []\n          };\n        }\n        formatChangeItems[format].callbacks.push(callback);\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        formatChangeItems[format].callbacks = filter(formatChangeItems[format].callbacks, function (c) {\n          return c !== callback;\n        });\n        if (formatChangeItems[format].callbacks.length === 0) {\n          delete formatChangeItems[format];\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar) {\n      if (registeredFormatListeners.get() === null) {\n        setup$4(registeredFormatListeners, editor);\n      }\n      addListeners(registeredFormatListeners, formats, callback, similar);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$6(editor, name, vars, node);\n      } else {\n        applyFormat(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$4(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq$2(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append$1(tableBody, rows);\n      append(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map(table.rows, function (row) {\n        var cells = map(row.cells, function (cell) {\n          var td = deep(cell);\n          remove$1(td, 'colspan');\n          remove$1(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append$1(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom$1 = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each(descendants$1(tableElm, 'tr'), function (tr, y) {\n        each(descendants$1(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$1(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll$1(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap$3 = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter(parents, function (elm) {\n        return isInline(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap$3(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$1(cell, 'table', curry(eq$2, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom$1(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$1 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace$1(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$2(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$2(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$1(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.get = true;\n      args.format = format;\n      args.selection = true;\n      args = editor.fire('BeforeGetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('GetContent', args);\n        return args.content;\n      }\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        args.getInner = true;\n        var content = getSerializedContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          args.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', args);\n          return args.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$1(elm)) {\n        return elm.outerHTML;\n      } else if (isText$1(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment$1(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment$1 = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment$1(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm) {\n      return filter(map(from$1(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map(from$1(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var undoLevelDocument = Cell(Optional.none());\n    var lazyTempDocument = function () {\n      return undoLevelDocument.get().getOrThunk(function () {\n        var doc = document.implementation.createHTMLDocument('undo');\n        undoLevelDocument.set(Optional.some(doc));\n        return doc;\n      });\n    };\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments = read$2(editor.getBody());\n      var trimmedFragments = bind(fragments, function (html) {\n        var trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      var content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, { format: 'raw' });\n      }\n      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each(descendants$1(elm, '*[data-mce-bogus]'), unwrap);\n      return get$7(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$4 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(Optional.some(getUndoBookmark(editor.selection)));\n      }\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$4(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$4(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var isTreeNode$1 = function (content) {\n      return content instanceof AstNode;\n    };\n    var runSerializerFiltersOnFragment = function (editor, fragment) {\n      filter$3(editor.serializer.getNodeFilters(), editor.serializer.getAttributeFilters(), fragment);\n    };\n    var getInsertContext = function (editor) {\n      return Optional.from(editor.selection.getStart(true)).map(function (elm) {\n        return elm.nodeName.toLowerCase();\n      });\n    };\n    var createDummyUndoLevel = function () {\n      return {\n        type: 'complete',\n        fragments: [],\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange(editor, locks, beforeBookmark);\n          },\n          addUndoLevel: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node) {\n            return match(editor, name, vars, node);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest$3(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$6(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (tinymceEditor, rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var unsupported = die('Unimplemented feature for rtc');\n      var ignore = noop;\n      return {\n        undoManager: {\n          beforeChange: ignore,\n          addUndoLevel: unsupported,\n          undo: function () {\n            rtcEditor.undo();\n            return createDummyUndoLevel();\n          },\n          redo: function () {\n            rtcEditor.redo();\n            return createDummyUndoLevel();\n          },\n          clear: unsupported,\n          reset: unsupported,\n          hasUndo: function () {\n            return rtcEditor.hasUndo();\n          },\n          hasRedo: function () {\n            return rtcEditor.hasRedo();\n          },\n          transact: function (_undoManager, _locks, fn) {\n            rtcEditor.transact(fn);\n            return createDummyUndoLevel();\n          },\n          ignore: unsupported,\n          extra: unsupported\n        },\n        formatter: {\n          match: function (name, vars, _node) {\n            return rtcEditor.matchFormat(name, defaultVars(vars));\n          },\n          matchAll: unsupported,\n          matchNode: unsupported,\n          canApply: function (name) {\n            return rtcEditor.canApplyFormat(name);\n          },\n          closest: function (names) {\n            return rtcEditor.closestFormat(names);\n          },\n          apply: function (name, vars, _node) {\n            return rtcEditor.applyFormat(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return rtcEditor.removeFormat(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return rtcEditor.toggleFormat(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar) {\n            return rtcEditor.formatChanged(formats, callback, similar);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            if (format === 'html' || format === 'tree') {\n              var fragment = rtcEditor.getContent();\n              var serializer = HtmlSerializer({ inner: true });\n              runSerializerFiltersOnFragment(tinymceEditor, fragment);\n              return format === 'tree' ? fragment : serializer.serialize(fragment);\n            } else {\n              return makePlainAdaptor(tinymceEditor).editor.getContent(args, format);\n            }\n          },\n          setContent: function (content, _args) {\n            var fragment = isTreeNode$1(content) ? content : tinymceEditor.parser.parse(content, {\n              isRootContent: true,\n              insert: true\n            });\n            rtcEditor.setContent(fragment);\n            return content;\n          },\n          insertContent: function (value, _details) {\n            var contextArgs = getInsertContext(tinymceEditor).fold(function () {\n              return {};\n            }, function (context) {\n              return { context: context };\n            });\n            var fragment = isTreeNode$1(value) ? value : tinymceEditor.parser.parse(value, __assign(__assign({}, contextArgs), { insert: true }));\n            rtcEditor.insertContent(fragment);\n          },\n          addVisual: function (_elm) {\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            if (format === 'html' || format === 'tree') {\n              var fragment = rtcEditor.getSelectedContent();\n              var serializer = HtmlSerializer({});\n              runSerializerFiltersOnFragment(tinymceEditor, fragment);\n              return format === 'tree' ? fragment : serializer.serialize(fragment);\n            } else {\n              return makePlainAdaptor(tinymceEditor).selection.getContent(format, args);\n            }\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(rtcEditor.getRawModel());\n          }\n        }\n      };\n    };\n    var isRtc = function (editor) {\n      return has(editor.plugins, 'rtc');\n    };\n    var setup$5 = function (editor) {\n      var editorCast = editor;\n      return get$1(editor.plugins, 'rtc').fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (rtc) {\n        return Optional.some(rtc.setup().then(function (rtcEditor) {\n          editorCast.rtcInstance = makeRtcAdaptor(editor, rtcEditor);\n          return rtcEditor.isRemote;\n        }));\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.addUndoLevel(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo$1 = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset$1 = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo$1 = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact$1 = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore$1 = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat$1 = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat$1 = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar) {\n      if (similar === void 0) {\n        similar = false;\n      }\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar);\n    };\n    var getContent = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager$1.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition$1(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition$1(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var contentArgs = setupArgs(args, content);\n      if (!contentArgs.no_events) {\n        contentArgs = editor.fire('BeforeSetContent', contentArgs);\n        if (contentArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', contentArgs);\n          return;\n        }\n      }\n      args.content = cleanContent(editor, contentArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(args.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!contentArgs.no_events) {\n        editor.fire('SetContent', contentArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && callbackMap.hasOwnProperty(selector)) {\n        var newCallbacks = filter(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                Tools.each(parents, function (node) {\n                  if (dom.is(node, selector)) {\n                    if (!currentSelectors[selector]) {\n                      Tools.each(callbacks, function (callback) {\n                        callback(true, {\n                          node: node,\n                          selector: selector,\n                          parents: parents\n                        });\n                      });\n                      currentSelectors[selector] = callbacks;\n                    }\n                    matchedSelectors[selector] = callbacks;\n                    return false;\n                  }\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$2(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (!node) {\n          moveEndPoint$1(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        } else {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart = function (real) {\n        return getStart$2(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select = function (node, content) {\n        select$1(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        if (!win) {\n          return null;\n        }\n        var doc = win.document;\n        if (typeof doc === 'undefined' || doc === null) {\n          return null;\n        }\n        if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode = function () {\n        return getNode$1(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize$1 = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint$1(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition$1.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize$1,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager$1(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$1 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', url, true);\n          xhr.responseType = 'blob';\n          xhr.onload = function () {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr.onerror = rejectWithError;\n          xhr.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri$1(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri$1(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri$1(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from$1(elm.getElementsByTagName('img')) : [];\n    };\n    function ImageScanner(uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    }\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty$2 = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (blockElements[node.name] || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return img.attr('data-mce-bogus');\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || img.attr('data-mce-placeholder');\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$1(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each(nodes, processImage);\n        });\n      }\n    };\n    var register$2 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node, classList, ci, className, classValue;\n          var validClasses = schema.getValidClasses();\n          var validClassesMap, valid;\n          while (i--) {\n            node = nodes[i];\n            classList = node.attr('class').split(' ');\n            classValue = '';\n            for (ci = 0; ci < classList.length; ci++) {\n              className = classList[ci];\n              valid = false;\n              validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var makeMap$4 = Tools.makeMap, each$d = Tools.each, explode$2 = Tools.explode, extend$2 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i;\n        var sibling, nextNode;\n        var nonSplitableElements = makeMap$4('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        for (ni = 0; ni < nodes.length; ni++) {\n          node = nodes[ni];\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap(node);\n            continue;\n          }\n          parents = [node];\n          for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent) {\n            parents.push(parent);\n          }\n          if (parent && parents.length > 1) {\n            parents.reverse();\n            newParent = currentNode = filterNode(parents[0].clone());\n            for (i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = filterNode(parents[i].clone());\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty$2(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty$2(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              if (specialElements[node.name]) {\n                node.empty().remove();\n              } else {\n                node.unwrap();\n              }\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var i, name, list;\n        name = node.name;\n        if (name in nodeFilters) {\n          list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        i = attributeFilters.length;\n        while (i--) {\n          name = attributeFilters[i].name;\n          if (name in node.attributes.map) {\n            list = matchedAttributes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[name] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$d(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (nodeFilters.hasOwnProperty(name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$d(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var isInWhiteSpacePreservedElement;\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$2(makeMap$4('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        isInWhiteSpacePreservedElement = whiteSpaceElements.hasOwnProperty(args.context) || whiteSpaceElements.hasOwnProperty(settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, next, rootBlockNode;\n          var trim = function (rootBlockNode) {\n            if (rootBlockNode) {\n              node = rootBlockNode.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlockNode.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var textNode, textNodeNext, textVal, sibling;\n          var blockElements = schema.getBlockElements();\n          for (textNode = node.prev; textNode && textNode.type === 3;) {\n            textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var name;\n          var output = {};\n          for (name in input) {\n            if (name !== 'li' && name !== 'p') {\n              output[name] = input[name];\n            }\n          }\n          return output;\n        };\n        var parser = SaxParser$1({\n          validate: validate,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var newNode, attrFiltersLen, attrName, parent;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              parent = children[node.name];\n              if (parent && children[newNode.name] && !parent[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling, tempNode;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                tempNode = node.parent;\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n                node = tempNode;\n                return;\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!matchedNodes.hasOwnProperty(name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$2(exports, settings);\n      register$1(exports, settings);\n      return exports;\n    };\n\n    var register$3 = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, value;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp$1(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var i = nodes.length, node, value, type;\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        while (i--) {\n          node = nodes[i];\n          value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var doc, oldDoc;\n      var dom = editor.dom;\n      node = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        doc = impl.createHTMLDocument('');\n        Tools.each(node.nodeName === 'BODY' ? node.childNodes : [node], function (node) {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (node.nodeName !== 'BODY') {\n          node = doc.body.firstChild;\n        } else {\n          node = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: node }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return node;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess$1 = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess$1(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils$1.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register$3(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: function (rules) {\n          schema.addValidElements(rules);\n        },\n        setRules: function (rules) {\n          schema.setValidElements(rules);\n        },\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: function () {\n          return tempAttrs;\n        },\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat$1 = 'html';\n    var getContent$2 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat$1;\n      return getContent(editor, args, format);\n    };\n\n    var setContent$2 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent(editor, content, args);\n    };\n\n    var DOM$3 = DOMUtils$1.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$3.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$3.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove$7 = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$3.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$3.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var deep$1 = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$2.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep$1);\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect$3().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map(isString(pluginNames) ? pluginNames.split(' ') : [], trim);\n      return filter(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter(plugins, curry(contains, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = sections.hasOwnProperty(name) ? sections[name] : {};\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return sectionResult.sections().hasOwnProperty(name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$1(settings, 'toolbar_mode').orThunk(function () {\n        return get$1(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins$1 = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins$1(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      return combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has$1 = function (id) {\n        return has(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has$1\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect$1 = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect$1(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    function NotificationManagerImpl() {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    }\n\n    function NotificationManager(editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', __assign({}, notification));\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = function () {\n        return notifications;\n      };\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    }\n\n    var PluginManager = AddOnManager$1.PluginManager;\n\n    var ThemeManager = AddOnManager$1.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          return f ? f.apply(scope, arguments) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        getImplementation().alert(message, funcBind(scope ? scope : this, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        getImplementation().confirm(message, funcBind(scope ? scope : this, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArrays([message], x));\n        } else {\n          console.log.apply(console, __spreadArrays([message], x));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      var contentCss = getContentCss(editor);\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map(contentCss, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor));\n    };\n\n    function Uploader(uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          var noop = function () {\n          };\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              if (!notification) {\n                notification = openNotification();\n              }\n              notification.progressBar.value(percent);\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    }\n\n    function UploadStatus () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    }\n\n    var count$1 = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count$1++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last(data).filter(function (level) {\n          return !isEq$4(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var openNotification = function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = Uploader(uploadStatus, {\n            url: getImageUploadUrl(editor),\n            basePath: getImageUploadBasePath(editor),\n            credentials: getImagesUploadCredentials(editor),\n            handler: getImagesUploadHandler(editor)\n          });\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                replaceImageUriInView(image, uploadInfo.url);\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          each(result, function (resultItem) {\n            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n            resultItem.image.src = resultItem.blobInfo.blobUri();\n            resultItem.image.removeAttribute('data-mce-src');\n          });\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get$a = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$1(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    function FormatRegistry(editor) {\n      var formats = {};\n      var get = function (name) {\n        return name ? formats[name] : formats;\n      };\n      var has$1 = function (name) {\n        return has(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (typeof name !== 'string') {\n            Tools.each(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray(format)) {\n              format = [format];\n            }\n            Tools.each(format, function (format) {\n              if (typeof format.deep === 'undefined') {\n                format.deep = !format.selector;\n              }\n              if (typeof format.split === 'undefined') {\n                format.split = !format.selector || format.inline;\n              }\n              if (typeof format.remove === 'undefined' && format.selector && !format.inline) {\n                format.remove = 'none';\n              }\n              if (format.selector && format.inline) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (typeof format.classes === 'string') {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get$a(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get,\n        has: has$1,\n        register: register,\n        unregister: unregister\n      };\n    }\n\n    var each$e = Tools.each;\n    var dom = DOMUtils$1.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$1(format, 'preview');\n        if (previewOpt.is(false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$e(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$e(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$e(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$e(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$6 = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$6(editor);\n      setup$3(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat$1(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat$1(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node) {\n          return matchFormat(editor, name, vars, node);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, names, vars, similar) {\n          return matchNodeFormat(editor, node, names, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var registerEvents$1 = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd !== 'undo' && cmd !== 'redo' && cmd !== 'mcerepaint') {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd !== 'undo' && cmd !== 'redo' && cmd !== 'mcerepaint') {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$4(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = Cell(Optional.none());\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange$1(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo$1(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo$1(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear$1(editor, undoManager, index);\n        },\n        reset: function () {\n          reset$1(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo$1(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo$1(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact$1(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore$1(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra$1(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents$1(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$1(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl$1 = function (element) {\n      return DOMUtils$1.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter(DOMUtils$1.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock(node1, rootNode);\n      var block2 = getParentBlock(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$1(container.nextSibling)) {\n            return CaretPosition$1(container.nextSibling, 0);\n          } else {\n            return CaretPosition$1.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition$1(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$1(container.previousSibling)) {\n            return CaretPosition$1(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition$1.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition$1(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq$2(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      return contains$2(rootNode, elm) ? closest(elm, function (element) {\n        return isTextBlock(element) || isListItem(element);\n      }, isBeforeRoot(rootNode)) : Optional.none();\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq$2(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq$2(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable = function (blockBoundary) {\n      return isContentEditableFalse(blockBoundary.from.block.dom) === false && isContentEditableFalse(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr(blockPosition.position.getNode()) && isEmpty(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition$1.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable(blockBoundary);\n      });\n    };\n    var read$3 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex(children$1, isBlock).fold(function () {\n        return children$1;\n      }, function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each(children, remove);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find(parents.reverse(), function (element) {\n        return isEmpty(element);\n      }).each(remove);\n    };\n    var isEmptyBefore = function (el) {\n      return filter(prevSiblings(el), function (el) {\n        return !isEmpty(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty(fromBlock)) {\n        before(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition$1.before(insertionPoint.dom));\n      each(extractChildren(fromBlock), function (child) {\n        before(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty(toBlock)) {\n        remove(toBlock);\n        if (isEmpty(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each(extractChildren(fromBlock), function (child) {\n        append(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$2(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$1).each(remove);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$1 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$3(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq$2(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq$2, root);\n      return ancestor(node, isTableCell$1, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition$1.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition$1.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$2 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue;\n    var isContentEditableFalse$7 = isContentEditableFalse;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition$1.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$7(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$1(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode$1(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$1(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$3 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$1(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$1(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read$4 = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition$1.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition$1.before(element) : CaretPosition$1.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse).fold(function () {\n        return read$4(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each(descendants$1(rootElement, '.mce-offscreen-selection'), remove);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, function () {\n          return true;\n        });\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition$1.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$1 = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var isText$8 = isText$1;\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[0] === ZWSP;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[node.data.length - 1] === ZWSP;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP);\n    };\n    var insertBefore$1 = function (node) {\n      if (isText$8(node.previousSibling)) {\n        if (endsWithCaretContainer$1(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP);\n          return node.previousSibling;\n        }\n      } else if (isText$8(node)) {\n        if (startsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter$1 = function (node) {\n      if (isText$8(node.nextSibling)) {\n        if (startsWithCaretContainer$1(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP);\n          return node.nextSibling;\n        }\n      } else if (isText$8(node)) {\n        if (endsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline$1 = function (before, node) {\n      return before ? insertBefore$1(node) : insertAfter$1(node);\n    };\n    var insertInlineBefore = curry(insertInline$1, true);\n    var insertInlineAfter = curry(insertInline$1, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$1(pos.container())) {\n        return insertInline$1(before, pos.container());\n      } else {\n        return insertInline$1(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$5(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition$1(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$5(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition$1(text, 1);\n          } else {\n            return CaretPosition$1(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$5(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition$1(text, text.length - 1);\n          } else {\n            return CaretPosition$1(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$5(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition$1(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before$4 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after$3 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl$1(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before$4,\n        start,\n        end,\n        after$3\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq$5 = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq$5(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    var prevLocation = curry(findLocation, false);\n    var nextLocation = curry(findLocation, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition$1(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition$1.fromRangeEnd(rng) : CaretPosition$1.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation$1 = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map(descendants$1(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter(elms, isInlineTarget);\n      each(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition$1.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter(elms, isInlineTarget);\n        each(inlines, function (_inline) {\n          var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation$1(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition$1.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope$1(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$6 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex(parents, isBlock).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild$1 = function (elm) {\n      return children(elm).length === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map(filter(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$2 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter(getParentInlines(rootElm, startElm), hasOnlyOneChild$1);\n      return last(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$7 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var deleteElement$2 = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret$3 = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement$2(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement$2(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange$2 = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia(selectedNode) ? deleteElement$2(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$8 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$3(editor, forward) : deleteRange$2(editor, forward);\n    };\n\n    var isEditable$1 = function (target) {\n      return closest(target, function (elm) {\n        return isContentEditableTrue(elm.dom) || isContentEditableFalse(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$1(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).map(isListComponent).getOr(false);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter(map(editor.selection.getSelectedBlocks(), SugarElement.fromDom), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable$1(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete$9 = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition$1.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$2(editor)) {\n        return;\n      } else if (backspaceDelete$7(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$2(editor)) {\n        return;\n      } else if (backspaceDelete$7(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$8 = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$9 = function (editor) {\n      var startData = Cell(Optional.none());\n      var longpressFired = Cell(false);\n      var debounceLongpress = last$2(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(Optional.some(data));\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Optional.none());\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return blockElements.hasOwnProperty(node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$1(node)) {\n        return true;\n      } else if (isElement$1(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents$1(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$1(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$1(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus$1(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$a = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').fold(constant(null), function (elm) {\n        return elm.dom;\n      });\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$b = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk$3 = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start, nextPos;\n      var positions = [];\n      while (currentPos) {\n        nextPos = walk$3(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map(clientRects, function (clientRect) {\n          clientRect = clone$2(clientRect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$1(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$1(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil$1 = function (direction, root, predicateFn, node) {\n      while (node = findNode(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var i, clientRect, clientRects;\n        clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (i = 0; i < clientRects.length; i++) {\n          clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil$1(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil, VDirection.Up, isAbove, isBelow);\n    var downUntil = curry(walkUntil, VDirection.Down, isBelow, isAbove);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn, isBelowFn, isAboveFn, caretPosition;\n      var result = [];\n      var line = 0, clientRect;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow;\n        isAboveFn = isAbove;\n        caretPosition = CaretPosition$1.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove;\n        isAboveFn = isBelow;\n        caretPosition = CaretPosition$1.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        clientRect = getClientRect(caretPosition);\n        if (isAboveFn(clientRect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(clientRect, last$1(result))) {\n          line++;\n        }\n        clientRect = clone$2(clientRect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$8 = isContentEditableFalse;\n    var findNode$1 = findNode;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInsideX(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$8(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil$1 = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode$1(startNode, direction, isEditableCaretCandidate, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode$1(node, direction, isEditableCaretCandidate, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil$1(VDirection.Up, root, curry(collect, isAbove), targetNodeRect.node, includeChildren);\n      walkUntil$1(VDirection.Down, root, curry(collect, isBelow), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter(from$1(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        var includeChildren = !isTable(closestNodeRect.node) && !isMedia(closestNodeRect.node);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition$1.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last(result.positions);\n      } else {\n        var from = CaretPosition$1.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$9);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$9);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition$1.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock$1 = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll(block, attrs);\n      append(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock$1(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq$2, root);\n      return closest(SugarElement.fromDom(pos.container()), isBlock, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$1 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$2 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$2 = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone$2(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell$1 = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants$1(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove$1 = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow$1 = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell$1, getBottomValue, isAbove$1);\n    var getClosestCellBelow = curry(getClosestCell$1, getTopValue, isBelow$1);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition$1.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition$1.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition$1.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$1(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll(element, getForcedRootBlockAttrs(editor));\n          append(element, SugarElement.fromTag('br'));\n          if (down) {\n            after(SugarElement.fromDom(table), element);\n          } else {\n            before(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition$1.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH$2 = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV$3 = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride = function (editor, caret, evt) {\n      var os = detect$3().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$c = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$d = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$1(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock$2 = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock$2(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock$2(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var hasParent$1 = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$1(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n      }\n      dom.remove(parentBlock);\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each(descendants(SugarElement.fromDom(fragment), isText), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell$5 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$1(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$1(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$1(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter(currentClasses, function (clazz) {\n          return !contains(attrClasses, clazz);\n        });\n        var newClasses = __spreadArrays(attrClasses, filteredClasses);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$1(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot$1(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell$5(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$1 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$1(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$1(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$1(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$1(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$1(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$1(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$1(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot$1(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var scrollToBr = function (dom, selection, brElm) {\n      var marker = dom.create('span', {}, '&nbsp;');\n      brElm.parentNode.insertBefore(marker, brElm);\n      selection.scrollIntoView(marker);\n      dom.remove(marker);\n    };\n    var moveSelectionToBr = function (dom, selection, brElm, extraBr) {\n      var rng = dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      selection.setRng(rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      scrollToBr(dom, selection, brElm);\n      moveSelectionToBr(dom, selection, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after(SugarElement.fromDom(inline), br);\n      scrollToBr(editor.dom, editor.selection, br.dom);\n      moveSelectionToBr(editor.dom, editor.selection, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr$1 = function (pos) {\n      return isBr(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr$1(CaretPosition$1.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition$1.after(startNode)).map(function (pos) {\n          return isBr(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$2 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock$2(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$1(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine$1 = function (editor, _shiftKey) {\n      return shouldBlockNewLine(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre$1 = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match$2 = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction$1 = function (editor, evt) {\n      return evaluateUntil([\n        match$2([shouldBlockNewLine$1], newLineAction.none()),\n        match$2([inSummaryBlock()], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false)\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true)\n        ], newLineAction.br()),\n        match$2([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([inListBlock(true)], newLineAction.block()),\n        match$2([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match$2([isBrMode(true)], newLineAction.br()),\n        match$2([inBrContext], newLineAction.br()),\n        match$2([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert$3 = function (editor, evt) {\n      getAction$1(editor, evt).fold(function () {\n        insert$2(editor, evt);\n      }, function () {\n        insert$1(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert$3(editor, event);\n      });\n    };\n    var setup$e = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$f = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, evt);\n        }\n      });\n    };\n\n    var browser$4 = detect$3().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser$4.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$g = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$1(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after(elm, textNode);\n          } else {\n            before(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition$1.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition$1.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection$1 = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection$1(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride$3 = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$h = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$b(editor);\n      setup$c(editor, caret);\n      setup$d(editor, caret);\n      setup$e(editor);\n      setup$h(editor);\n      setup$g(editor);\n      setup$f(editor);\n      return caret;\n    };\n    var setup$i = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$1(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$j = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$1(node) && isTextBlock(SugarElement.fromDom(node));\n    };\n    var normalizeSelection$1 = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize$2(rng));\n    };\n    var setup$k = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection$1(editor);\n        }\n      });\n    };\n\n    var value$1 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$a = isContentEditableFalse, isContentEditableTrue$3 = isContentEditableTrue;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$a(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$a(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start$1 = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find(editor.dom.getParents(e.target), or(isContentEditableFalse$a, isContentEditableTrue$3)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move$2 = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value$1();\n      var pageDom = DOMUtils$1.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start$1(state, editor);\n      var dragHandler = move$2(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$a(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.defaultPrevented) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils$1.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$l = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup$m = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia(target)) {\n            var ceRoot = getContentEditableRoot(editor.getBody(), target);\n            var node = isContentEditableFalse(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue$4 = isContentEditableTrue;\n    var isContentEditableFalse$b = isContentEditableFalse;\n    var getContentEditableRoot$1 = function (editor, node) {\n      return getContentEditableRoot(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus$1(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse$b(node) || isMedia(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$b(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue$4(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition$1.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isNearFakeSelectionElement(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (targetBlock && targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse$b(getContentEditableRoot$1(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot$1(editor, targetElm);\n          if (isContentEditableFalse$b(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot$1(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$b(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue$4(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse$b(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init(editor);\n        setup$l(editor);\n        setup$m(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer(node) || startsWithCaretContainer(node) || endsWithCaretContainer(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each(descendants$1(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq$2(nodeElm, elm)) {\n            remove$1(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse$b(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var inputMethodFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint$1(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = function () {\n      };\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      removeBlockQuoteOnBackSpace();\n      emptyEditorWhenDeleting();\n      if (!Env.windowsPhone) {\n        normalizeSelection();\n      }\n      if (isWebKit) {\n        inputMethodFocus();\n        selectControlElements();\n        setDefaultBlockType();\n        blockFormSubmitInsideEditor();\n        disableBackspaceIntoATable();\n        removeAppleInterchangeBrs();\n        if (Env.iOS) {\n          restoreFocusOnKeyDown();\n          bodyHeight();\n          tapLinksAndImages();\n        } else {\n          selectAll();\n        }\n      }\n      if (Env.ie >= 11) {\n        bodyHeight();\n        disableBackspaceIntoATable();\n      }\n      if (Env.ie) {\n        selectAll();\n        disableAutoUrlDetect();\n        ieInternalDragAndDrop();\n      }\n      if (isGecko) {\n        removeHrOnBackspace();\n        focusBody();\n        removeStylesWhenDeletingAcrossBlockElements();\n        setGeckoEditingOptions();\n        addBrAfterLastLinks();\n        showBrokenImageIcon();\n        blockCmdArrowNavigation();\n        disableBackspaceIntoATable();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$4 = DOMUtils$1.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set(style, 'type', 'text/css');\n      append(style, SugarElement.fromText(text));\n      append(container, style);\n      editor.on('remove', function () {\n        remove(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$1(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign({}, mkParserSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before,\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var loadContentCss = function (editor, css) {\n      var styleSheetLoader = getStyleSheetLoader(editor);\n      var loaded = function () {\n        editor.on('remove', function () {\n          return styleSheetLoader.unloadAll(css);\n        });\n        initEditor(editor);\n      };\n      styleSheetLoader.loadAll(css, loaded, loaded);\n    };\n    var preInit = function (editor, rtcMode) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$4.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      if (rtcMode === false) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      loadContentCss(editor, editor.contentCSS);\n      if (settings.content_style) {\n        appendStyle(editor, settings.content_style);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$4.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$4.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils$1(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$9(editor);\n      setup$j(editor);\n      if (!isRtc(editor)) {\n        setup$k(editor);\n      }\n      var caret = setup$i(editor);\n      setup$8(editor, caret);\n      setup$a(editor);\n      setup$7(editor);\n      firePreInit(editor);\n      setup$5(editor).fold(function () {\n        preInit(editor, false);\n      }, function (loadingRtc) {\n        editor.setProgressState(true);\n        loadingRtc.then(function (rtcMode) {\n          editor.setProgressState(false);\n          preInit(editor, rtcMode);\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils$1.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll(iframe, customAttrs);\n      setAll(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$3(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var title = editor.editorManager.translate('Rich Text Area. Press ALT-0 for help.');\n      var ifr = createIframeElement(editor.id, title, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$6 = DOMUtils$1.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$1(loadIcons, function (svgData, icon) {\n        if (!has(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$6.create('div');\n      DOM$6.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init$2 = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$7 = DOMUtils$1.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !ThemeManager.urls.hasOwnProperty(theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init$2(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init$2(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader$1 = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$7.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$7.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$1(element, attr.name);\n        });\n        setAll(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader$1(element, editor);\n      if (!isInline$1(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$7.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$7.insertAfter(DOM$7.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$7.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$7.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual$1 = function (editor, elm) {\n      return addVisual(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$1(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq$2(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$2(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils$1.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$1(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var mapRange = function (editor, mapper) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement).map(mapper);\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$2(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq$2, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.undoManager.transact(function () {\n        editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n        editor.nodeChanged();\n      });\n    };\n\n    var processValue = function (value) {\n      var details;\n      if (typeof value !== 'string') {\n        details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret$1 = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$f = Tools.each;\n    var map$3 = Tools.map, inArray$2 = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n          self.editor.focus();\n        } else {\n          restore(self.editor);\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$f(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$f(commandList, function (callback, command) {\n          each$f(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value ? { value: value } : undefined);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': function () {\n          },\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$f('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, value);\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret$1(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert$3(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': function () {\n          },\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$2(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map$3(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray$2(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has$2(elm, cls) && state === false) {\n        remove$4(elm, cls);\n      } else if (state) {\n        add$3(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$1(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly$1(editor)) {\n          each(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly$1(editor)) {\n          each(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq$2(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$1(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly$1(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly$1(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (nameIn, argsIn) {\n        var name = nameIn.toLowerCase();\n        var args = argsIn || {};\n        args.type = name;\n        if (!args.target) {\n          args.target = this.scope;\n        }\n        if (!args.preventDefault) {\n          args.preventDefault = function () {\n            args.isDefaultPrevented = always;\n          };\n          args.stopPropagation = function () {\n            args.isPropagationStopped = always;\n          };\n          args.stopImmediatePropagation = function () {\n            args.isImmediatePropagationStopped = always;\n          };\n          args.isDefaultPrevented = never;\n          args.isPropagationStopped = never;\n          args.isImmediatePropagationStopped = never;\n        }\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(args);\n        }\n        var handlers = this.bindings[name];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.once) {\n              this.off(name, callback.func);\n            }\n            if (args.isImmediatePropagationStopped()) {\n              args.stopPropagation();\n              return args;\n            }\n            if (callback.func.call(this.scope, args) === false) {\n              args.preventDefault();\n              return args;\n            }\n          }\n        }\n        return args;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = { func: callback };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = this.bindings[currentName] = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers.unshift(wrappedCallback);\n            } else {\n              handlers.push(wrappedCallback);\n            }\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$1(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var hi = handlers.length;\n                while (hi--) {\n                  if (handlers[hi].func === callback) {\n                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));\n                    this.bindings[currentName] = handlers;\n                  }\n                }\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$1(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$8 = DOMUtils$1.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$8.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly$1(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly$1(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$1(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$8.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$8.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$8.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$1(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$5 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly$1(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$g = Tools.each, explode$3 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$g(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$g(explode$3(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.parseShortcut = function (pattern) {\n        var key;\n        var shortcut = {};\n        each$g(explode$3(pattern.toLowerCase(), '+'), function (value) {\n          if (value in modifierNames) {\n            shortcut[value] = true;\n          } else {\n            if (/^[0-9]{2,}$/.test(value)) {\n              shortcut.keyCode = parseInt(value, 10);\n            } else {\n              shortcut.charCode = value.charCodeAt(0);\n              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n            }\n          }\n        });\n        var id = [shortcut.keyCode];\n        for (key in modifierNames) {\n          if (shortcut[key]) {\n            id.push(key);\n          } else {\n            shortcut[key] = false;\n          }\n        }\n        shortcut.id = id.join(',');\n        if (shortcut.access) {\n          shortcut.alt = true;\n          if (Env.mac) {\n            shortcut.ctrl = true;\n          } else {\n            shortcut.shift = true;\n          }\n        }\n        if (shortcut.meta) {\n          if (Env.mac) {\n            shortcut.meta = true;\n          } else {\n            shortcut.ctrl = true;\n            shortcut.meta = false;\n          }\n        }\n        return shortcut;\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$3(pattern, '>'), this.parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$6 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$6();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var each$h = Tools.each, trim$4 = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim$4(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$h(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$h(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var DOM$9 = DOMUtils$1.DOM;\n    var extend$3 = Tools.extend, each$i = Tools.each;\n    var resolve$3 = Tools.resolve;\n    var ie$1 = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils$1.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager$1.languageLoad = this.settings.language_load;\n        AddOnManager$1.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$5(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        focus$1(this, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus$1(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve$3(scope) : 0;\n          callback = resolve$3(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$9.show(self.getContainer());\n            DOM$9.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie$1 && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$9.hide(self.getContainer());\n            DOM$9.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$9.getParent(self.id, 'form')) {\n            each$i(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent$2(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent$2(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent$2(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent$2(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$9.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$9.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual$1(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove$7(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM$a = DOMUtils$1.DOM;\n    var explode$4 = Tools.explode, each$j = Tools.each, extend$4 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$j(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '6.1',\n      releaseDate: '2020-11-25',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$2(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$1(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager$1.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$1(elm, 'name').filter(function (name) {\n              return !DOM$a.get(name);\n            }).getOrThunk(DOM$a.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM$a.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$j(settings.types, function (type) {\n              targets = targets.concat(DOM$a.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM$a.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$j(explode$4(l), function (id) {\n                var elm = DOM$a.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$j(document.forms, function (f) {\n                    each$j(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM$a.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$j(DOM$a.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM$a.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$j(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM$a.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$4({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$j(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM$a.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each$j(DOM$a.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', 0, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$j(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min = Math.min, max = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$7(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$7(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max(rect.x, cropRect.x);\n      var y1 = max(rect.y, cropRect.y);\n      var x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$7(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp$1 = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max(0, clampRect.x - x1);\n      var underflowY1 = max(0, clampRect.y - y1);\n      var overflowX2 = max(0, x2 - cx2);\n      var overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$7(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$7 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$7(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp$1,\n      create: create$7,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$8 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$8();\n\n    var each$k = Tools.each, extend$5 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each$k(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each$k(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each$k(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each$k(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$5({}, _super.Defaults, props.Defaults);\n      }\n      each$1(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min$1 = Math.min, max$1 = Math.max, round$2 = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min$1(r, min$1(g, b));\n        var maxRGB = max$1(r, max$1(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round$2(h),\n          s: round$2(s * 100),\n          v: round$2(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max$1(0, min$1(saturation, 1));\n        brightness = max$1(0, min$1(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round$2(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round$2(255 * (r + match));\n        g = round$2(255 * (g + match));\n        b = round$2(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils$1.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend$6 = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend$6({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend$6(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create$9 = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create$9();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils$1,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils$1,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager$1,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser$1,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager$1,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils$1.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n"],"sourceRoot":""}