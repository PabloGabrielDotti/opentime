{"version":3,"sources":["webpack://timetrex/./interface/html5/views/reports/ReportBaseViewController.js"],"names":["ReportBaseViewController","BaseViewController","options","_","defaults","view_file","page_orientation_array","font_size_array","auto_refresh_array","chart_display_mode_array","chart_type_array","templates_array","setup_fields_array","log_action_id_array","log_table_name_id_array","time_period_array","visible_report_widgets","visible_report_values","visible_report_widgets_order_fix","status_id_array","api_user_report","current_saved_report","saved_report_array","sub_saved_report_view_controller","sub_custom_column_view_controller","need_refresh_display_columns","ReportMissedField","include_form_setup","show_empty_message","do_validate_after_create_ui","form_setup_changed","super","this","preInitReport","real_this","constructor","__super__","permission_id","LocalCacheData","current_open_report_controller","$this","TTAPI","APIUserReportData","initReport","buildContextMenu","TTPromise","resolve","postInitReport","data","item","find","is_default","length","default_context_menu_model","groups","editor","label","$","i18n","id","saved_report","viewId","ContextMenuIconName","view_html","group","icon","Icons","view","print","export_excel","sort_order","cancel","save_existed_report","save","save_new_report","save_and_new","context_btn","grid_selected_length","pId","$context_menu_array","context_menu_array","initOptions","processFilterField","edit_view","initEditViewUI","wait","default_edit_id_for_next_open_edit_view","navigation","setValue","getUserReportData","filter_data","onResult","result","getResult","current_edit_record","initEditView","script","script_name","api","getOtherConfig","config_result","config","other","key","edit_view_ui_dic","hasOwnProperty","getChartConfig","chart","callBack","args","res_data","pager_data","getPagerData","initDropDownOptions","option_name","css","getSourceData","setSourceData","getLoginUserPreference","setRowPerPage","items_per_page","setPagerData","default_args","setDefaultArgs","setUIWidgetFieldsToCurrentEditRecord","setNavigationArrowsStatus","setCurrentEditRecordData","SaveAndContinueBox","related_view_controller","next_select_item","current_url","window","location","href","indexOf","substring","tab_name","substr","Global","off","on","e","target","next_select_item_id","getValue","edit_view_error_ui_dic","sub_view_mode","edit_only_mode","parent_value","initData","beforeLoadView","afterLoadView","subViewController","parent_key","parent_view_controller","firstColumn","edit_view_tab","add","CustomColumnViewController","loadSubView","refreshNav","SavedReportViewController","navigation_div","left_click","right_click","navigation_widget_div","FormItemType","AWESOME_BOX","append","attr","text","navigation_label","edit_view_close_icon","hide","click","onCloseIconClick","tab_0_label","tab_1_label","tab_2_label","tab_3_label","tab_4_label","tab_5_label","buildFormSetupUI","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","set_empty","always_search_full_columns","setNavigation","tab0_column1","form_item_input","COMBO_BOX","TComboBox","field","addEditFieldToColumn","tab1_column1","allow_drag_to_order","shift","CHECKBOX","TCheckbox","TEXT_INPUT","TTextInput","width","tab2_column1","template","i","default_filter_for_next_open_view","onTemplateChange","select_template_data","buildSelectTemplateData","other_key","setSelectTemplate","chart_key","widget","setCountryValue","getCompanyFormConfig","res_Data","setFormSetupData","collectUIDataToCurrentEditRecord","setDefaultConfigData","setEditViewDataDone","setTabOVisibility","validate","initRightClickMenuForViewButton","my_tabs","children","n","html","replace","selector","items","getViewButtonRightClickItems","isEmptyObject","contextMenu","callback","onContextMenuClick","onContextMenu","zIndex","isDisabled","parent","hasClass","name","disabled","doNotDoValidate","preFormItemChange","setIsChanged","time_period","skill_expiry_date","membership_renewal_date","license_expiry_date","education_graduate_date","getField","onTimePeriodChange","onFormItemChangeProcessFilterField","onMembershipRenewalDateChange","onSkillExpiryDate","onLicenseExpiryDate","onEducationGraduateDate","value","type","TTUUID","zero_id","setEditMenu","templateId","getTemplate","result_data","len","setup_field","push","createUI","uiModel","cleanUI","edit_view_tabs","edit_view_form_item_dic","last_time_visible_values","order_fix","model","getUIWidget","getFieldLabel","setFilterValue","initSourceData","setEditViewWidgetsMode","editFieldResize","tabs","last_index","getEditViewTabIndex","auto_refresh","initSubCustomColumnView","initSubSavedReportView","buildReportUIBaseOnSetupFields","checkFormSetupSaved","undefined","TAlertManager","showConfirmAlert","flag","onSaveSetup","html_item","remove","removeEditView","getSimpleTComboBox","getCheckBox","getSortComboBox","getComboBox","getTreeModeAComboBox","getTag","getTComboBox","APIUser","APIUserTitle","APIPayrollRemittanceAgency","APILegalEntity","APIBranch","APIDepartment","APIJob","APIJobItem","APIAbsencePolicy","APICurrency","APIAccrualPolicy","APIPayPeriod","APIExpensePolicy","APIPayStubEntryAccount","APIProduct","APIClient","APICompanyDeduction","APIQualification","APIKPI","APIJobApplicant","APIJobVacancy","APIAccrualPolicyAccount","TAG_INPUT","TTagInput","tree_mode","layoutName","apiClass","allowMultiple","api_instance","option","getOptions","APIKPIGroup","getKPIGroup","res","APIQualificationGroup","getQualificationGroup","APIProductGroup","getProductGroup","APIClientGroup","getClientGroup","APIUserGroup","getUserGroup","APIJobGroup","getJobGroup","APIJobItemGroup","getJobItemGroup","APIJobApplication","APIUserReviewControl","APIUserSkill","APIUserLanguage","APIPayStub","APIUserMembership","APIPayPeriodTimeSheetVerify","APILog","APISchedule","APITransaction","APIAccrual","APIExceptionPolicy","APIUserExpense","APIInvoice","getAPI","buildSortSelectorUnSelectColumns","noCache","DATE_PICKER","TDatePicker","form_item","WidgetNamesDic","EDIT_VIEW_SUB_FORM_ITEM","form_item_label","form_item_input_div","addClass","defaultValue","start_date_3","end_date_3","pay_period_id_3","pay_period_schedule_id_3","form_item_div","form_input_div","empty","v_box","start_date","getDatePicker","end_date","putInputToInsideFormItem","form_item2","form_item3","unbind","bind","onFormItemChange","setEditFieldSize","buildCustomDateUI","pay_period","pay_period_id","buildPayPeriodUI","APIPayPeriodSchedule","pay_period_schedule_id","buildPayPeriodScheduleUI","buildDefaultUI","start_date_4","end_date_4","pay_period_id_4","pay_period_schedule_id_4","start_date_2","end_date_2","pay_period_id_2","pay_period_schedule_id_2","start_date_1","end_date_1","pay_period_id_1","pay_period_schedule_id_1","dont_switch_tab","clearErrorTips","error_list","getDetails","found_in_current_tab","is","setErrorStyle","showEditViewError","display_columns","fina_array","each","index","content","new_content","extend","sort","did_clean_dic","column","tab_id","setEnabled","page_orientation","font_size","disable_grand_total","maximum_page_limit","show_duplicate_values","report_name","report_description","description","enable","display_mode","include_sub_total","axis_scale_static","combine_columns","fullValue","new_item","report","new_report_fields","synchronous","getFormValues","getChartValues","convertSortValues","addOrderFix","form","getFormSetupData","validateResult","async","message_override","getPostReportJson","post_data","0","1","message","showAlert","doFormIFrameCall","source","getAllURLArgs","sm","TFeedback","force_source","delay","filter","noPreFix","getVisibleReportValues","sort_","menu_name","ProgressBar","showOverlay","clickProcessing","clickProcessingHandle","setTimeout","closeOverlay","onViewClick","view_html_new_window","onViewExcelClick","onCancelClick","onSaveExistedReportClick","onSaveNewReportClick","save_setup","view_form","e_file","timesheet_view","timesheet_view_detail","onCustomContextClick","form_setup","save_export_setup_data","setCompanyFormConfig","isValid","new_window","url","ServiceCaller","getAPIURL","className","key_name","generateUUID","refresh_request","JSON","stringify","w","open","document","writeln","close","IndexViewController","openWizard","getApplicationName","showErrorAlert","retval","UserGenericStatusWindowController","getLoginUser","2","pay_stub_api","postData","select_field","unshift","report_data","onAddClick","new_id","isUUID","newId","getReportData","getDefaultReport"],"mappings":"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xS,MAAMgS,cACrBS,EAAS,SACT,MACD,IAAK,sBACJD,EAAexS,MAAMgS,cACrBS,EAAS,OACT,MACD,IAAK,2BACJD,EAAexS,MAAMgS,cACrBS,EAAS,YACT,MACD,IAAK,4BACJD,EAAexS,MAAM0T,kBACrBjB,EAAS,SACT,MACD,IAAK,0BACJD,EAAexS,MAAM0T,kBACrBjB,EAAS,OACT,MACD,IAAK,uBACJD,EAAexS,MAAM+R,gBACrBU,EAAS,MACT,MACD,IAAK,0BACJD,EAAexS,MAAM+R,gBACrBU,EAAS,SACT,MACD,IAAK,8BACJD,EAAexS,MAAM2T,qBACrBlB,EAAS,OACT,MACD,IAAK,gCACJD,EAAexS,MAAM2T,qBACrBlB,EAAS,SACT,MACD,IAAK,cACJD,EAAexS,MAAM2T,qBACrBlB,EAAS,WACT,MACD,IAAK,UACJD,EAAexS,MAAM2T,qBACrBlB,EAAS,OACT,MACD,IAAK,gBACJD,EAAexS,MAAM8R,OACrBW,EAAS,SACT,MACD,IAAK,cACJD,EAAexS,MAAM8R,OACrBW,EAAS,OACT,MACD,IAAK,iBACJD,EAAexS,MAAM4T,aACrBnB,EAAS,cACT,MACD,IAAK,aACJD,EAAexS,MAAM6T,gBACrBpB,EAAS,UACT,MACD,IAAK,gBACJD,EAAexS,MAAM6T,gBACrBpB,EAAS,aACT,MACD,IAAK,iBACJD,EAAexS,MAAM4Q,QACrB6B,EAAS,SACT,MACD,IAAK,qBACJD,EAAexS,MAAM8T,WACrBrB,EAAS,kBACT,MACD,IAAK,eACJD,EAAexS,MAAM+T,kBACrBtB,EAAS,YACT,MACD,IAAK,sBACJD,EAAejT,KAAKkE,IACpBgP,EAAS,sBACT,MACD,IAAK,0BACJD,EAAejT,KAAKkE,IACpBgP,EAAS,0BACT,MACD,IAAK,oBACJD,EAAejT,KAAKkE,IACpBgP,EAAS,oBACT,MACD,IAAK,0BACJD,EAAejT,KAAKkE,IACpBgP,EAAS,0BACT,MACD,IAAK,QACL,IAAK,YACL,IAAK,aACJD,EAAejT,KAAKkE,IACpBgP,EAAS,iBACT,MACD,IAAK,yCACJD,EAAexS,MAAMgU,4BAErBvB,EAAS,uBACT,MACD,IAAK,gBACJD,EAAexS,MAAMkR,OACrBuB,EAAS,SAET,MACD,IAAK,gBACJD,EAAejT,KAAKkE,IACpBgP,EAAS,wBACT,MAED,IAAK,gBAEJD,EAAexS,MAAMiU,OACrBxB,EAAS,SAET,MACD,IAAK,oBAEJD,EAAexS,MAAMiU,OACrBxB,EAAS,aAET,MACD,IAAK,SACsB,0BAArBlT,KAAKiE,aACTgP,EAAexS,MAAMkU,YACrBzB,EAAS,UACuB,oCAArBlT,KAAKiE,aAChBgP,EAAexS,MAAMmU,eACrB1B,EAAS,QACuB,yBAArBlT,KAAKiE,aAChBgP,EAAexS,MAAM8T,WACrBrB,EAAS,UACuB,sBAArBlT,KAAKiE,cAChBgP,EAAexS,MAAM4Q,QACrB6B,EAAS,UAGV,MACD,IAAK,yBACJD,EAAexS,MAAMsR,iBACrBmB,EAAS,OACT,MACD,IAAK,kBACJD,EAAexS,MAAMoU,WACrB3B,EAAS,OACT,MACD,IAAK,wBACJD,EAAexS,MAAM6R,iBACrBY,EAAS,OACT,MACD,IAAK,2BACJD,EAAexS,MAAMqU,mBACrB5B,EAAS,OACT,MACD,IAAK,+BACJD,EAAexS,MAAMqU,mBACrB5B,EAAS,WACT,MACD,IAAK,oCACJD,EAAexS,MAAMwR,iBACrBiB,EAAS,kBACT,MACD,IAAK,yBACJD,EAAexS,MAAMwR,iBACrBiB,EAAS,OACT,MACD,IAAK,iCACJD,EAAexS,MAAMsU,eACrB7B,EAAS,iBACT,MACD,IAAK,yBACJD,EAAexS,MAAMsU,eACrB7B,EAAS,SACT,MACD,IAAK,qBACJD,EAAexS,MAAMmR,WACrBsB,EAAS,SACT,MACD,IAAK,mBACJD,EAAexS,MAAM2R,UACrBc,EAAS,SACT,MACD,IAAK,oBACJD,EAAexS,MAAMuU,WACrB9B,EAAS,SACT,MACD,IAAK,8BACJD,EAAexS,MAAMmU,eACrB1B,EAAS,OACT,MACD,IAAK,kBACJD,EAAexS,MAAM0R,WACrBe,EAAS,OACT,MACD,IAAK,mBACJD,EAAexS,MAAM8T,WACrBrB,E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","file":"reports-ReportBaseViewController.bundle.js?v=5260330e9838f5bc022b","sourcesContent":["import { BaseViewController } from '@/views/BaseViewController';\nimport { Global } from '@/global/Global';\n\nexport class ReportBaseViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tview_file: '',\n\n\t\t\tpage_orientation_array: null,\n\t\t\tfont_size_array: null,\n\t\t\tauto_refresh_array: null,\n\t\t\tchart_display_mode_array: null,\n\t\t\tchart_type_array: null,\n\t\t\ttemplates_array: null,\n\t\t\tsetup_fields_array: null,\n\n\t\t\tlog_action_id_array: null,\n\n\t\t\tlog_table_name_id_array: null,\n\n\t\t\ttime_period_array: null,\n\n\t\t\tvisible_report_widgets: null,\n\n\t\t\tvisible_report_values: null,\n\n\t\t\tvisible_report_widgets_order_fix: null,\n\n\t\t\tstatus_id_array: null,\n\n\t\t\tapi_user_report: null,\n\n\t\t\tcurrent_saved_report: null, // Current saved report if any\n\n\t\t\tsaved_report_array: null,\n\n\t\t\tsub_saved_report_view_controller: null,\n\n\t\t\tsub_custom_column_view_controller: null,\n\n\t\t\tneed_refresh_display_columns: false, //When custom column changed. Set this to true.\n\n\t\t\tReportMissedField: null,\n\n\t\t\tinclude_form_setup: false,\n\n\t\t\tshow_empty_message: false,\n\n\t\t\tdo_validate_after_create_ui: false, //Do validate if there is a saved report\n\n\t\t\tform_setup_changed: false\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tpreInit( options ) {\n\t\tthis.preInitReport();\n\t}\n\n\tinit( options ) {\n\t\t//Initialize this.real_this without having to call _super,\n\t\t//this avoids Maximum stack size errors in other functions that call _super. Copied from __super.\n\t\tthis.real_this = this.constructor.__super__;\n\n\t\tthis.permission_id = 'report';\n\n\t\tLocalCacheData.current_open_report_controller = this;\n\n\t\tvar $this = this;\n\n\t\t$this.api_user_report = TTAPI.APIUserReportData;\n\t\t$this.initReport();\n\t\t$this.buildContextMenu();\n\t\tTTPromise.resolve( 'Reports', 'openReport' );\n\t\t$this.postInitReport();\n\t}\n\n\t// Removed because the require callback in init() serves this function and calls postInitReport() at the proper time.\n\t// postInit: function(){\n\t// },\n\n\tpreInitReport( options ) {\n\t}\n\n\tinitReport( options ) {\n\t}\n\n\tpostInitReport( options ) {\n\t}\n\n\trender() {\n\t}\n\n\t// Need always override if report has filter field.\n\tprocessFilterField() {\n\t}\n\n\tgetDefaultReport( data ) {\n\t\tvar item = _.find( data, function( item ) {\n\t\t\treturn item.is_default === true;\n\t\t} );\n\t\tdata && data.length > 0 && !item && ( item = data[0] );\n\n\t\treturn item;\n\t}\n\n\t// overrides BaseViewController.getDefaultContextMenuModel()\n\tgetDefaultContextMenuModel() {\n\n\t\tvar default_context_menu_model = {\n\t\t\t// only put groups that are used in default here, others go in the relevant view controller to avoid confusion on which are obsolete.\n\t\t\tgroups: {\n\t\t\t\teditor: {\n\t\t\t\t\tlabel: $.i18n._( 'Editor' ),\n\t\t\t\t\tid: 'editor'\n\t\t\t\t},\n\t\t\t\tsaved_report: {\n\t\t\t\t\tlabel: $.i18n._( 'Saved Report' ),\n\t\t\t\t\tid: this.viewId + 'SavedReport'\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'icons': {}\n\t\t};\n\n\t\tdefault_context_menu_model['icons'][ContextMenuIconName.view_html] = {\n\t\t\tlabel: $.i18n._( 'View' ),\n\t\t\tid: ContextMenuIconName.view_html,\n\t\t\tgroup: 'editor',\n\t\t\ticon: Icons.view\n\t\t};\n\n\t\tdefault_context_menu_model['icons'][ContextMenuIconName.view] = {\n\t\t\tlabel: $.i18n._( 'PDF' ),\n\t\t\tid: ContextMenuIconName.view,\n\t\t\tgroup: 'editor',\n\t\t\ticon: Icons.print\n\t\t};\n\n\t\tdefault_context_menu_model['icons'][ContextMenuIconName.export_excel] = {\n\t\t\tlabel: $.i18n._( 'Excel' ),\n\t\t\tid: ContextMenuIconName.export_excel,\n\t\t\tgroup: 'editor',\n\t\t\ticon: Icons.export_excel,\n\t\t\tsort_order: 1800\n\t\t};\n\n\t\tdefault_context_menu_model['icons'][ContextMenuIconName.cancel] = {\n\t\t\tlabel: $.i18n._( 'Cancel' ),\n\t\t\tid: ContextMenuIconName.cancel,\n\t\t\tgroup: 'editor',\n\t\t\ticon: Icons.cancel,\n\t\t\tsort_order: 1990\n\t\t};\n\n\t\tdefault_context_menu_model['icons'][ContextMenuIconName.save_existed_report] = {\n\t\t\tlabel: $.i18n._( 'Save' ),\n\t\t\tid: ContextMenuIconName.save_existed_report,\n\t\t\tgroup: 'saved_report',\n\t\t\ticon: Icons.save\n\t\t};\n\n\t\tdefault_context_menu_model['icons'][ContextMenuIconName.save_new_report] = {\n\t\t\tlabel: $.i18n._( 'Save as New' ),\n\t\t\tid: ContextMenuIconName.save_new_report,\n\t\t\tgroup: 'saved_report',\n\t\t\ticon: Icons.save_and_new\n\t\t};\n\n\t\treturn default_context_menu_model;\n\t}\n\n\t//this prevents the function of the same name in base class from hiding all of the export to excel buttons on all reports due to their lack of a grid.\n\tsetDefaultMenuExportIcon( context_btn, grid_selected_length, pId ) {\n\t}\n\n\topenEditView() {\n\t\tvar $this = this;\n\t\tvar $context_menu_array = $this.context_menu_array;\n\t\tthis.initOptions( function() {\n\t\t\t// Always need override\n\t\t\t$this.processFilterField();\n\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t$this.initEditViewUI( $this.viewId, $this.view_file );\n\t\t\t}\n\t\t\t$this.context_menu_array = $context_menu_array;\n\n\t\t\t$this.do_validate_after_create_ui = true;\n\n\t\t\tTTPromise.wait( 'init', 'init', function() {\n\t\t\t\tif ( LocalCacheData.default_edit_id_for_next_open_edit_view ) {\n\t\t\t\t\t$this.navigation.setValue( LocalCacheData.default_edit_id_for_next_open_edit_view );\n\t\t\t\t\t$this.api_user_report.getUserReportData( { filter_data: { id: LocalCacheData.default_edit_id_for_next_open_edit_view } }, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tresult = result.getResult();\n\t\t\t\t\t\t\t$this.current_saved_report = result[0];\n\t\t\t\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t\t\t\t$this.visible_report_values = {};\n\t\t\t\t\t\t\tLocalCacheData.default_edit_id_for_next_open_edit_view = null;\n\t\t\t\t\t\t\t$this.initEditView();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\t$this.api_user_report.getUserReportData( {\n\t\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\t\tscript: $this.script_name,\n\t\t\t\t\t\t\tis_default: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar data = result.getResult();\n\t\t\t\t\t\t\t$this.current_saved_report = {};\n\t\t\t\t\t\t\tif ( data && data.length > 0 ) {\n\t\t\t\t\t\t\t\t$this.current_saved_report = data[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t\t\t\t$this.visible_report_values = {};\n\t\t\t\t\t\t\t$this.initEditView();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t} );\n\t\t} );\n\t}\n\n\tsetDefaultConfigData() {\n\n\t\tvar $this = this;\n\t\tthis.api.getOtherConfig( {\n\t\t\tonResult: function( config_result ) {\n\n\t\t\t\tif ( $this.current_saved_report &&\n\t\t\t\t\t$this.current_saved_report.data &&\n\t\t\t\t\t$this.current_saved_report.data.config &&\n\t\t\t\t\t$this.current_saved_report.data.config.other\n\t\t\t\t) {\n\t\t\t\t\t//do nothing\n\t\t\t\t} else {\n\n\t\t\t\t\tconfig_result = config_result.getResult();\n\t\t\t\t\tfor ( var key in config_result ) {\n\t\t\t\t\t\tif ( $this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\t$this.edit_view_ui_dic[key].setValue( config_result[key] );\n\t\t\t\t\t\t\t$this.current_edit_record[key] = config_result[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis.api.getChartConfig( {\n\t\t\tonResult: function( config_result ) {\n\n\t\t\t\tif ( $this.current_saved_report &&\n\t\t\t\t\t$this.current_saved_report.data &&\n\t\t\t\t\t$this.current_saved_report.data.config &&\n\t\t\t\t\t$this.current_saved_report.data.config.chart\n\t\t\t\t) {\n\t\t\t\t\t//do nothing\n\t\t\t\t} else {\n\n\t\t\t\t\tconfig_result = config_result.getResult();\n\t\t\t\t\tfor ( var key in config_result ) {\n\t\t\t\t\t\tif ( $this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\t$this.edit_view_ui_dic[key].setValue( config_result[key] );\n\t\t\t\t\t\t\t$this.current_edit_record[key] = config_result[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetTabStatus() {\n\t\t//Handle most cases that one tab and on audit tab\n\t}\n\n\t//Call this from setEditViewData\n\tinitTabData() {\n\t}\n\n\tgetReportData( callBack ) {\n\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = { script: this.script_name };\n\t\tthis.api_user_report.getUserReportData( args, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar res_data = result.getResult();\n\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\tcallBack( res_data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitOptions( callBack ) {\n\t\tvar options = [\n\t\t\t{ option_name: 'page_orientation' },\n\t\t\t{ option_name: 'font_size' },\n\t\t\t{ option_name: 'auto_refresh' },\n\t\t\t{ option_name: 'chart_display_mode' },\n\t\t\t{ option_name: 'chart_type' },\n\t\t\t{ option_name: 'templates' },\n\t\t\t{ option_name: 'setup_fields' }\n\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t} );\n\t}\n\n\t//Call this from setEditViewData\n\tinitEditViewData() {\n\t\tvar $this = this;\n\n\t\t//Set Navigation Awesomebox\n\t\tvar navigation_div = this.edit_view.find( '.navigation-div' );\n\t\tnavigation_div.css( 'display', 'block' );\n\n\t\t//init navigation only when open edit view\n\t\tif ( !this.navigation.getSourceData() ) {\n\t\t\tthis.navigation.setSourceData( this.saved_report_array );\n\t\t\tif ( LocalCacheData.getLoginUserPreference() ) {\n\t\t\t\tthis.navigation.setRowPerPage( LocalCacheData.getLoginUserPreference().items_per_page );\n\t\t\t}\n\t\t\tthis.navigation.setPagerData( this.pager_data );\n\n\t\t\tvar default_args = {};\n\t\t\tdefault_args.filter_data = { script: this.script_name };\n\t\t\tthis.navigation.setDefaultArgs( default_args );\n\t\t}\n\n\t\tthis.navigation.setValue( this.current_saved_report );\n\t\tthis.setUIWidgetFieldsToCurrentEditRecord();\n\t\tthis.setNavigationArrowsStatus();\n\t\t// Create this function alone because of the column value of view is different from each other, some columns need to be handle specially. and easily to rewrite this function in sub-class.\n\t\tthis.setCurrentEditRecordData();\n\n\t\t//Can't hide navigation box if there aren't any saved reports, without having to make an API call and count how many saved reports there are first, which kind of defeats the purpose.\n\n\t\t//Init *Please save this record before modifying any related data* box\n\t\tthis.edit_view.find( '.save-and-continue-div' ).SaveAndContinueBox( { related_view_controller: this } );\n\t\tthis.edit_view.find( '.save-and-continue-div' ).css( 'display', 'none' );\n\t}\n\n\tonRightOrLeftArrowClickCallBack( next_select_item ) {\n\t\tthis.navigation.setValue( next_select_item );\n\t\tthis.current_saved_report = next_select_item;\n\t\tthis.current_edit_record = {};\n\t\tthis.visible_report_values = {};\n\t\tthis.initEditView();\n\t}\n\n\t//Call this after initEditViewUI, usually after current_edit_record is set\n\tinitEditView() {\n\t\tvar $this = this;\n\t\tvar current_url = window.location.href;\n\t\tif ( current_url.indexOf( '&sm' ) > 0 ) {\n\t\t\tcurrent_url = current_url.substring( 0, current_url.indexOf( '&sm' ) );\n\t\t}\n\t\tif ( $this.current_saved_report && $this.current_saved_report.id ) {\n\n\t\t\tcurrent_url = current_url + '&sm=' + $this.viewId + '&sid=' + $this.current_saved_report.id;\n\n\t\t} else {\n\t\t\tcurrent_url = current_url + '&sm=' + $this.viewId;\n\t\t}\n\n\t\tif ( window.location.href.indexOf( '&tab=' ) > 0 ) {\n\t\t\tvar tab_name = window.location.href;\n\t\t\ttab_name = tab_name.substr( ( window.location.href.indexOf( '&tab=' ) + 5 ) ); //get the selected tab name\n\t\t\ttab_name = tab_name.substr( 0, window.location.href.indexOf( '&' ) ); // incase there are subsequent arguments after the tab argument\n\t\t\tcurrent_url += '&tab=' + tab_name;\n\t\t}\n\n\t\tGlobal.setURLToBrowser( current_url );\n\n\t\tsuper.initEditView();\n\t}\n\n\tsetNavigation() {\n\n\t\tvar $this = this;\n\n\t\tthis.navigation.off( 'formItemChange' ).on( 'formItemChange', function( e, target ) {\n\t\t\tvar next_select_item_id = target.getValue();\n\t\t\t$this.edit_view_error_ui_dic = {};\n\t\t\tif ( !next_select_item_id ) {\n\t\t\t\t$this.current_saved_report = null;\n\t\t\t\t$this.saved_report_array = [];\n\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t$this.visible_report_values = {};\n\n\t\t\t\t$this.do_validate_after_create_ui = true;\n\t\t\t\t$this.initEditView();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( next_select_item_id !== $this.current_edit_record.id ) {\n\t\t\t\t$this.current_saved_report = target.getValue( true );\n\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t$this.visible_report_values = {};\n\n\t\t\t\t$this.initEditView();\n\t\t\t}\n\t\t\tGlobal.triggerAnalyticsEditViewNavigation( 'navigation', $this.viewId );\n\t\t} );\n\t}\n\n\tinitSubCustomColumnView( callBack ) {\n\t\tvar $this = this;\n\n\t\t$this.sub_view_mode = true;\n\n\t\tif ( this.sub_custom_column_view_controller ) {\n\t\t\t$this.sub_custom_column_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_custom_column_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_custom_column_view_controller.parent_value = this.script_name;\n\t\t\t$this.sub_custom_column_view_controller.initData(); //Init data in this parent view\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadViewSource( 'CustomColumn', 'CustomColumnViewController.js', function() {\n\t\t\tvar tab = $this.edit_view_tab.find( '#tab_custom_columns' );\n\n\t\t\tvar firstColumn = tab.find( '.first-column-sub-view' );\n\n\t\t\tTTPromise.add( 'SubCustomColumnView', 'init' );\n\t\t\tTTPromise.wait( 'SubCustomColumnView', 'init', function() {\n\t\t\t\tfirstColumn.css( 'opacity', '1' );\n\t\t\t} );\n\n\t\t\tfirstColumn.css( 'opacity', '0' ); //Hide the grid while its loading/sizing.\n\n\t\t\tGlobal.trackView( 'Sub' + 'ReportSchedule' + 'View' );\n\t\t\tCustomColumnViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_custom_column_view_controller = subViewController;\n\t\t\t$this.sub_custom_column_view_controller.parent_key = 'script';\n\t\t\t$this.sub_custom_column_view_controller.parent_value = $this.script_name;\n\t\t\t$this.sub_custom_column_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_custom_column_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_custom_column_view_controller.sub_view_mode = true;\n\n\t\t\t//init complete\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack(); // Call back decide call init or not\n\t\t\t}\n\t\t\t$this.sub_custom_column_view_controller.initData(); //Init data in this parent view\n\t\t}\n\t}\n\n\tonSavedReportDelete() {\n\t\tthis.refreshNav();\n\t}\n\n\tinitSubSavedReportView( callBack ) {\n\t\tvar $this = this;\n\n\t\t$this.sub_view_mode = true;\n\n\t\tif ( this.sub_saved_report_view_controller ) {\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_saved_report_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_saved_report_view_controller.parent_value = this.script_name;\n\t\t\t$this.sub_saved_report_view_controller.initData(); //Init data in this parent view\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadViewSource( 'SavedReport', 'SavedReportViewController.js', function() {\n\t\t\tvar tab = $this.edit_view_tab.find( '#tab_saved_reports' );\n\n\t\t\tvar firstColumn = tab.find( '.first-column-sub-view' );\n\n\t\t\tTTPromise.add( 'SubSavedReportView', 'init' );\n\t\t\tTTPromise.wait( 'SubSavedReportView', 'init', function() {\n\t\t\t\tfirstColumn.css( 'opacity', '1' );\n\t\t\t} );\n\n\t\t\tfirstColumn.css( 'opacity', '0' ); //Hide the grid while its loading/sizing.\n\n\t\t\tGlobal.trackView( 'Sub' + 'ReportSchedule' + 'View' );\n\t\t\tSavedReportViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\n\t\t\t$this.sub_saved_report_view_controller = subViewController;\n\t\t\t$this.sub_saved_report_view_controller.parent_key = 'script';\n\t\t\t$this.sub_saved_report_view_controller.parent_value = $this.script_name;\n\t\t\t$this.sub_saved_report_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_saved_report_view_controller.sub_view_mode = true;\n\n\t\t\t//init complete\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack(); // Call back decide call init or not\n\t\t\t} else {\n\t\t\t\t$this.sub_saved_report_view_controller.initData(); //Init data in this parent view\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tvar $this = this;\n\n\t\tvar navigation_div = this.edit_view.find( '.navigation-div' );\n\t\tvar label = navigation_div.find( '.navigation-label' );\n\t\tvar left_click = navigation_div.find( '.left-click' );\n\t\tvar right_click = navigation_div.find( '.right-click' );\n\t\tvar navigation_widget_div = navigation_div.find( '.navigation-widget-div' );\n\n\t\tthis.navigation = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tnavigation_widget_div.append( this.navigation );\n\n\t\tleft_click.attr( 'src', Global.getRealImagePath( 'images/left_arrow.png' ) );\n\t\tright_click.attr( 'src', Global.getRealImagePath( 'images/right_arrow.png' ) );\n\n\t\tlabel.text( this.navigation_label );\n\n\t\tnavigation_widget_div.append( this.navigation );\n\n\t\tthis.edit_view_close_icon = this.edit_view.find( '.close-icon' );\n\t\tthis.edit_view_close_icon.hide();\n\t\tthis.edit_view_close_icon.click( function() {\n\t\t\t$this.onCloseIconClick();\n\t\t} );\n\n\t\tvar tab_0_label = this.edit_view.find( 'a[ref=tab_report]' );\n\t\tvar tab_1_label = this.edit_view.find( 'a[ref=tab_setup]' );\n\t\tvar tab_2_label = this.edit_view.find( 'a[ref=tab_chart]' );\n\n\t\tif ( this.include_form_setup ) {\n\t\t\tvar tab_3_label = this.edit_view.find( 'a[ref=tab_form_setup]' );\n\t\t\tvar tab_4_label = this.edit_view.find( 'a[ref=tab_custom_columns]' );\n\t\t\tvar tab_5_label = this.edit_view.find( 'a[ref=tab_saved_reports]' );\n\n\t\t\ttab_0_label.text( $.i18n._( 'Report' ) );\n\t\t\ttab_1_label.text( $.i18n._( 'Setup' ) );\n\t\t\ttab_2_label.text( $.i18n._( 'Chart' ) );\n\t\t\ttab_3_label.text( $.i18n._( 'Form Setup' ) );\n\t\t\ttab_4_label.text( $.i18n._( 'Custom Columns' ) );\n\t\t\ttab_5_label.text( $.i18n._( 'Saved Reports' ) );\n\n\t\t\tthis.buildFormSetupUI();\n\t\t} else {\n\t\t\tvar tab_3_label = this.edit_view.find( 'a[ref=tab_custom_columns]' );\n\t\t\tvar tab_4_label = this.edit_view.find( 'a[ref=tab_saved_reports]' );\n\n\t\t\ttab_0_label.text( $.i18n._( 'Report' ) );\n\t\t\ttab_1_label.text( $.i18n._( 'Setup' ) );\n\t\t\ttab_2_label.text( $.i18n._( 'Chart' ) );\n\t\t\ttab_3_label.text( $.i18n._( 'Custom Columns' ) );\n\t\t\ttab_4_label.text( $.i18n._( 'Saved Reports' ) );\n\t\t}\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserReportData,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user_report_data',\n\t\t\tdefault_args: { filter_data: { script: this.script_name } },\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true, //Required in case there are saved reports but none of them are the default.\n\t\t\talways_search_full_columns: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\n\t\tvar tab0_column1 = tab_report.find( '.first-column' );\n\n\t\t// Template\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'template', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.templates_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Template' ), form_item_input, tab0_column1 );\n\n\t\t//Tab 1 start\n\t\tvar tab_setup = this.edit_view_tab.find( '#tab_setup' );\n\t\tvar tab1_column1 = tab_setup.find( '.first-column' );\n\n\t\t//Fields\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tallow_multiple_selection: true,\n\t\t\tkey: 'value',\n\t\t\tlayout_name: 'global_option_column',\n\t\t\tallow_drag_to_order: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'setup_field'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fields' ), form_item_input, tab1_column1, '' );\n\t\tthis.setup_fields_array.shift();\n\t\tform_item_input.setSourceData( this.setup_fields_array );\n\n\t\t//Page Orientation\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'page_orientation', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.page_orientation_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Page Orientation' ), form_item_input, tab1_column1 );\n\n\t\t//Font Size\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'font_size', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.font_size_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Font Size' ), form_item_input, tab1_column1 );\n\n\t\t//Disable Grand Total\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'disable_grand_total' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Disable Grand Total' ), form_item_input, tab1_column1 );\n\n\t\t//Show Duplicate Values\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'show_duplicate_values' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Show Duplicate Values' ), form_item_input, tab1_column1 );\n\n\t\t//Auto-Refresh\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'auto_refresh', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.auto_refresh_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Auto-Refresh' ), form_item_input, tab1_column1 );\n\n\t\t//Maximum Pages\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'maximum_page_limit', width: 50 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Maximum Pages' ), form_item_input, tab1_column1 );\n\n\t\t//Tab 2 start\n\t\tvar tab_chart = this.edit_view_tab.find( '#tab_chart' );\n\t\tvar tab2_column1 = tab_chart.find( '.first-column' );\n\n\t\t//Enable\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Enable' ), form_item_input, tab2_column1, '' );\n\n\t\t//Display\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'display_mode', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.chart_display_mode_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Display' ), form_item_input, tab2_column1 );\n\n\t\t//Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.chart_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab2_column1 );\n\n\t\t//Chart Sub-Totals\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'include_sub_total' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Chart Sub-Totals' ), form_item_input, tab2_column1 );\n\n\t\t//Consistent Axis Scales\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'axis_scale_static' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Consistent Axis Scales' ), form_item_input, tab2_column1 );\n\n\t\t//Consistent Axis Scales\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'combine_columns' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Combine Columns' ), form_item_input, tab2_column1, '' );\n\n\t\tTTPromise.resolve( 'init', 'init' );\n\t}\n\n\tbuildFormSetupUI() {\n\t\t//Need always override\n\t}\n\n\tbuildSelectTemplateData() {\n\t\tvar template = this.current_saved_report.data.template;\n\t\tvar config = this.current_saved_report.data.config;\n\n\t\tvar result = {};\n\n\t\tfor ( var i = 0; i < template.length; i++ ) {\n\t\t\tvar item = template[i];\n\t\t\tif ( item === 'sort' ) {\n\t\t\t\tresult[item] = config[item + '_'];\n\t\t\t} else {\n\t\t\t\tresult[item] = config[item];\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/* jshint ignore:start */\n\tsetCurrentEditRecordData() {\n\n\t\tvar $this = this;\n\t\tif ( LocalCacheData.default_filter_for_next_open_view ) {\n\n\t\t\tthis.do_validate_after_create_ui = false;\n\t\t\tthis.current_edit_record['template'] = LocalCacheData.default_filter_for_next_open_view.template;\n\t\t\t$this.onTemplateChange( this.current_edit_record['template'] );\n\t\t\tLocalCacheData.default_filter_for_next_open_view = null;\n\n\t\t} else {\n\t\t\tif ( this.current_saved_report && this.current_saved_report.data ) {\n\t\t\t\tvar select_template_data = this.buildSelectTemplateData();\n\t\t\t\tthis.setSelectTemplate( select_template_data );\n\n\t\t\t\tthis.current_edit_record['template'] = this.current_saved_report.data.config.template;\n\n\t\t\t\tfor ( var other_key in this.current_saved_report.data.config.other ) {\n\n\t\t\t\t\tif ( !this.current_saved_report.data.config.other.hasOwnProperty( other_key ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.current_edit_record[other_key] = this.current_saved_report.data.config.other[other_key];\n\t\t\t\t}\n\n\t\t\t\tfor ( var chart_key in this.current_saved_report.data.config.chart ) {\n\n\t\t\t\t\tif ( !this.current_saved_report.data.config.chart.hasOwnProperty( chart_key ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.current_edit_record[chart_key] = this.current_saved_report.data.config.chart[chart_key];\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t////If no any saved report, use default setup fields\n\t\t\t\t//var default_setup_fields = this.api.getOptions( 'default_setup_fields', {async: false} );\n\t\t\t\t//$this.current_edit_record.setup_field = default_setup_fields.getResult();\n\t\t\t\t//$this.buildReportUIBaseOnSetupFields();\n\t\t\t\tthis.do_validate_after_create_ui = false;\n\t\t\t\tthis.onTemplateChange( this.templates_array[1].id );\n\t\t\t\tthis.current_edit_record['template'] = this.templates_array[1].id;\n\t\t\t}\n\t\t}\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'user_id':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tif ( this.include_form_setup ) {\n\t\t\tthis.api.getCompanyFormConfig( {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar res_Data = result.getResult();\n\t\t\t\t\tif ( res_Data.length == 1 && res_Data.hasOwnProperty( '0' ) && res_Data[0] === false ) {\n\t\t\t\t\t\t//There seem to be cases where the form setup data is somehow saved as the following, which should be ignored, otherwise when trying to re-save the form setup data it doesn't get uploaded to the server because 0 => false.\n\t\t\t\t\t\t//   array(1) {\n\t\t\t\t\t\t//     [0]=>\n\t\t\t\t\t\t//     bool(false)\n\t\t\t\t\t\t//   }\n\t\t\t\t\t\t//\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.setFormSetupData( res_Data );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\n\t\tthis.setDefaultConfigData();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\t/* jshint ignore:end */\n\n\t//set tab 0 visible after all data set done. This be hide when init edit view data\n\tsetEditViewDataDone() {\n//\t\tLocalCacheData.current_doing_context_action = '';\n\t\tthis.setTabOVisibility( true );\n\n\t\tif ( this.do_validate_after_create_ui ) {\n\t\t\tthis.validate();\n\t\t\tthis.do_validate_after_create_ui = false;\n\t\t}\n\n\t\tthis.initRightClickMenuForViewButton();\n\n\t\t//Set url selected tab.\n\t\tif ( window.location.href.indexOf( '&tab=' ) > 0 ) {\n\t\t\tvar tab_name = window.location.href;\n\t\t\ttab_name = tab_name.substr( ( window.location.href.indexOf( '&tab=' ) + 5 ) ); //get the selected tab name\n\t\t\ttab_name = tab_name.substr( 0, window.location.href.indexOf( '&' ) ); // incase there are subsequent arguments after the tab argument\n\t\t\tvar my_tabs = this.edit_view_tab.find( '.edit-view-tab-bar-label' ).children();\n\n\t\t\tfor ( var n = 0; n < my_tabs; n++ ) {\n\t\t\t\tif ( $( my_tabs[n] ).find( 'a' ).length > 0 && tab_name == $( my_tabs[n] ).find( 'a' ).html().replace( /\\/|\\s+/g, '' ) ) {\n\t\t\t\t\t$( my_tabs[n] ).find( 'a' ).click();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tTTPromise.resolve( 'init', 'init' );\n\t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t}\n\n\t//This is just calling into the base anyway, so commented out for now.\n\t// validateResult( result ) {\n\t// \tsuper.validateResult( result );\n\t// },\n\n\tinitRightClickMenuForViewButton() {\n\t\tvar $this = this;\n\t\tvar selector = '#viewHTMLIcon';\n\t\tif ( $( selector ).length == 0 ) {\n\t\t\treturn;\n\t\t}\n\t\tvar items = this.getViewButtonRightClickItems();\n\n\t\tif ( !items || $.isEmptyObject( items ) ) {\n\t\t\treturn;\n\t\t}\n\t\t$.contextMenu( 'destroy', selector );\n\t\t$.contextMenu( {\n\t\t\tselector: selector,\n\t\t\tcallback: function( key, options ) {\n\t\t\t\t$this.onContextMenuClick( null, key );\n\t\t\t},\n\n\t\t\tonContextMenu: function() {\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\titems: items,\n\t\t\tzIndex: 50\n\t\t} );\n\t}\n\n\tgetViewButtonRightClickItems() {\n\t\tvar $this = this;\n\t\tvar items = {};\n\t\titems['viewHTMLIcon'] = {\n\t\t\tname: $.i18n._( 'View' ), icon: 'viewHTMLIcon', disabled: function() {\n\t\t\t\treturn isDisabled();\n\t\t\t}\n\t\t};\n\t\titems['viewHTMLNewWindow'] = {\n\t\t\tname: $.i18n._( 'View (New Window)' ), icon: 'viewHTMLIcon', disabled: function() {\n\t\t\t\treturn isDisabled();\n\t\t\t}\n\t\t};\n\n\t\tfunction isDisabled() {\n\t\t\tif ( $( '#viewHTMLIcon' ).parent().hasClass( 'disable-image' ) ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n\n//\tonViewRightClick( key ) {\n//\t\t//TODO show view\n//\t\talert('dfdf');\n//\t},\n\n\t// Need always override if report has filter field\n\tonFormItemChangeProcessFilterField() {\n\t}\n\n\t//Shim method to allow override for classes that need their own onFormItemChange for a specific purpose ie payroll export reports\n\t//eg in payroll export, when export_type is changed, we need to execute code but also need the default behaviour of onFormItemChange.\n\tpreFormItemChange( target, doNotDoValidate ) {\n\t\treturn true;\n\t}\n\n\t/* jshint ignore:start */\n\tonFormItemChange( target, doNotDoValidate ) {\n\t\tthis.preFormItemChange( target ); //shim for child class\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tvar key = target.getField();\n\t\tvar time_period;\n\t\tvar skill_expiry_date;\n\t\tvar membership_renewal_date;\n\t\tvar license_expiry_date;\n\t\tvar education_graduate_date;\n\n\t\tif ( this.visible_report_widgets && ( this.visible_report_widgets[key] || key === 'start_date' || key === 'end_date' || key === 'pay_period_id' || key === 'pay_period_schedule_id' ) ) {\n\t\t\tif ( key === 'sort' ) {\n\t\t\t\tthis.visible_report_values[key] = target.getValue( true );\n\n\t\t\t} else if ( key.indexOf( 'time_period' ) >= 0 ) {\n\n\t\t\t\ttime_period = target.getValue();\n\n\t\t\t\tif ( !this.visible_report_values[key] || this.visible_report_values[key].time_period !== time_period ) {\n\t\t\t\t\tthis.visible_report_values[key] = { time_period: time_period };\n\t\t\t\t\tthis.onTimePeriodChange( target );\n\t\t\t\t}\n\n\t\t\t} else if ( key === 'filter' ) {\n\t\t\t\t//Always needs override\n\t\t\t\tthis.onFormItemChangeProcessFilterField( target, key );\n\n\t\t\t} else if ( key === 'start_date' || key === 'end_date' || key === 'pay_period_id' || key === 'pay_period_schedule_id' ) {\n\t\t\t\ttime_period = this.visible_report_values[target.attr( 'time_period_key' ) ? target.attr( 'time_period_key' ) : 'time_period'];\n\t\t\t\ttime_period[key] = target.getValue();\n\n\t\t\t} else if ( key === 'membership_renewal_date' ) {\n\t\t\t\tmembership_renewal_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: membership_renewal_date };\n\n\t\t\t\tthis.onMembershipRenewalDateChange( target );\n\t\t\t} else if ( key === 'start_date_1' || key === 'end_date_1' || key === 'pay_period_id_1' || key === 'pay_period_schedule_id_1' ) {\n\t\t\t\tmembership_renewal_date = this.visible_report_values['membership_renewal_date'];\n\t\t\t\tmembership_renewal_date[key.replace( '_1', '' )] = target.getValue();\n\n\t\t\t} else if ( key === 'skill_expiry_date' ) {\n\t\t\t\tskill_expiry_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: skill_expiry_date };\n\n\t\t\t\tthis.onSkillExpiryDate( target );\n\t\t\t} else if ( key === 'start_date_2' || key === 'end_date_2' || key === 'pay_period_id_2' || key === 'pay_period_schedule_id_2' ) {\n\t\t\t\tskill_expiry_date = this.visible_report_values['skill_expiry_date'];\n\t\t\t\tskill_expiry_date[key.replace( '_2', '' )] = target.getValue();\n\n\t\t\t} else if ( key === 'license_expiry_date' ) {\n\t\t\t\tlicense_expiry_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: license_expiry_date };\n\n\t\t\t\tthis.onLicenseExpiryDate( target );\n\t\t\t} else if ( key === 'start_date_3' || key === 'end_date_3' || key === 'pay_period_id_3' || key === 'pay_period_schedule_id_3' ) {\n\t\t\t\tlicense_expiry_date = this.visible_report_values['license_expiry_date'];\n\t\t\t\tlicense_expiry_date[key.replace( '_3', '' )] = target.getValue();\n\n\t\t\t} else if ( key === 'education_graduate_date' ) {\n\t\t\t\teducation_graduate_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: education_graduate_date };\n\n\t\t\t\tthis.onEducationGraduateDate( target );\n\t\t\t} else if ( key === 'start_date_4' || key === 'end_date_4' || key === 'pay_period_id_4' || key === 'pay_period_schedule_id_4' ) {\n\t\t\t\teducation_graduate_date = this.visible_report_values['education_graduate_date'];\n\t\t\t\teducation_graduate_date[key.replace( '_4', '' )] = target.getValue();\n\t\t\t} else {\n\t\t\t\tif ( target.hasClass( 't-checkbox' ) ) {\n\t\t\t\t\tthis.visible_report_values[key] = target.getValue();\n\t\t\t\t} else {\n\t\t\t\t\tvar value = target.getValue();\n\t\t\t\t\tif ( value && ( $.type( value ) !== 'array' || value.length > 0 ) && value != TTUUID.zero_id ) {\n\t\t\t\t\t\tthis.visible_report_values[key] = target.getValue();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.visible_report_values[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.current_edit_record[key] = target.getValue();\n\t\t}\n\n\t\tif ( key === 'template' ) {\n\t\t\t$this.onTemplateChange( this.current_edit_record[key] );\n\t\t\t$this.setEditMenu(); //clean error, set edit menu\n\t\t} else {\n\t\t\tif ( !doNotDoValidate ) {\n\t\t\t\tthis.validate();\n\t\t\t}\n\t\t}\n\n\t\tif ( this.include_form_setup && key === 3 ) {\n\t\t\tthis.form_setup_changed = true;\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\n\t//Create first tab widget base on select template\n\tonTemplateChange( templateId ) {\n\t\tvar $this = this;\n\t\tthis.api.getTemplate( templateId, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t$this.setSelectTemplate( result_data );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetSelectTemplate( result_data ) {\n\t\tvar $this = this;\n\t\tvar result = Global.buildRecordArray( result_data );\n\n\t\tvar len = result.length;\n\t\tif ( $this.current_edit_record ) {\n\t\t\t$this.current_edit_record.setup_field = [];\n\t\t\t$this.visible_report_values = {};\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar item = result[i];\n\n\t\t\t\tif ( item.value === 'template' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t$this.visible_report_values[item.value] = item.label; // set value to model\n\t\t\t\t$this.current_edit_record.setup_field.push( item.value );\n\n\t\t\t}\n\n\t\t\t$this.createUI( result );\n\t\t}\n\t}\n\n\tgetFieldLabel( field ) {\n\t\tvar len = this.setup_fields_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar setup_field = this.setup_fields_array[i];\n\t\t\tif ( setup_field.value === field ) {\n\t\t\t\treturn setup_field.label;\n\t\t\t}\n\t\t}\n\t}\n\n\t//Create widgets,\n\tcreateUI( uiModel ) {\n\n\t\tthis.cleanUI();\n\t\tvar $this = this;\n\t\tvar len = uiModel.length;\n\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\t\tvar tab0_column1 = tab_report.find( '.first-column' );\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab0_column1 );\n\t\tthis.visible_report_widgets = {}; //report tab widgets\n\t\tthis.edit_view_form_item_dic = {}; //Only keep report tab form item\n\n\t\tthis.visible_report_widgets_order_fix = {};\n\n\t\tvar last_time_visible_values = this.visible_report_values;\n\n\t\tthis.visible_report_values = {};\n\n\t\tvar order_fix = 1001;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar model = uiModel[i];\n\n\t\t\tvar field = '';\n\t\t\tvar value = '';\n\n\t\t\t//Value, label object\n\t\t\tif ( model.value ) {\n\t\t\t\tfield = model.value;\n\n\t\t\t} else { //Mode is string\n\t\t\t\tfield = model;\n\t\t\t}\n\n\t\t\tvalue = last_time_visible_values[field];\n\t\t\tvar widget = this.getUIWidget( field );\n\n\t\t\t//Dont add field is it's not in setup fields.\n\t\t\tif ( !widget || !this.getFieldLabel( field ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//Add widget first\n\t\t\tif ( field.indexOf( 'time_period' ) >= 0 ||\n\t\t\t\tfield === 'membership_renewal_date' ||\n\t\t\t\tfield === 'skill_expiry_date' ||\n\t\t\t\tfield == 'license_expiry_date' ||\n\t\t\t\tfield == 'education_graduate_date'\n\t\t\t) {\n\t\t\t\tthis.addEditFieldToColumn( $.i18n._( this.getFieldLabel( field ) ), widget, tab0_column1, '', null, true, true );\n\t\t\t\t$this.edit_view_form_item_dic[field].attr( 'id', 'report_' + field + '_div' );\n\n\t\t\t} else {\n\t\t\t\tthis.addEditFieldToColumn( $.i18n._( this.getFieldLabel( field ) ), widget, tab0_column1, '', null, true );\n\t\t\t}\n\n\t\t\t//Then set Value\n\t\t\tif ( value ) {\n\n\t\t\t\tif ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\t\t\twidget.setValue( value['time_period'] ); //inside time_period field, the key always be tiem_period\n\t\t\t\t\t$this.onTimePeriodChange( widget, value );\n\t\t\t\t} else if ( field === 'membership_renewal_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onMembershipRenewalDateChange( widget, value );\n\t\t\t\t} else if ( field === 'skill_expiry_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onSkillExpiryDate( widget, value );\n\t\t\t\t} else if ( field === 'license_expiry_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onLicenseExpiryDate( widget, value );\n\t\t\t\t} else if ( field === 'education_graduate_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onEducationGraduateDate( widget, value );\n\t\t\t\t} else if ( field === 'filter' ) {\n\t\t\t\t\t$this.setFilterValue( widget, value );\n\t\t\t\t} else if ( field === 'sort' ) {\n\t\t\t\t\twidget.setValue( value );\n\t\t\t\t} else {\n\t\t\t\t\twidget.setValue( value );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// then init source options\n\n\t\t\tthis.initSourceData( field, widget );\n\n\t\t\tdelete this.current_edit_record[field];\n\n\t\t\tif ( widget.hasClass( 't-checkbox' ) ) {\n\t\t\t\tthis.visible_report_values[field] = value;\n\t\t\t} else if ( value ) {\n\t\t\t\tthis.visible_report_values[field] = value;\n\t\t\t}\n\n\t\t\tthis.visible_report_widgets[field] = widget;\n\n\t\t\tthis.visible_report_widgets_order_fix[field] = order_fix;\n\n\t\t\torder_fix = order_fix + 1;\n\n\t\t}\n\n\t\tthis.setEditViewWidgetsMode();\n\t\tthis.need_refresh_display_columns = false;\n\t\tthis.editFieldResize( 0 );\n\t}\n\n\t// onTabIndexChange( e, ui ) {\n\t//\n\t// },\t// onTabIndexChange: function( e, ui ) {\n\t//\n\t// },\n\t/* jshint ignore:start */\n\tonTabShow( e ) {\n\t\tvar $this = this;\n\t\tvar key = $( e.target ).tabs( 'option', 'active' );\n\n\t\tthis.editFieldResize( key );\n\n\t\tif ( !this.current_edit_record ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar last_index = this.getEditViewTabIndex();\n\n\t\tif ( !this.include_form_setup ) {\n\t\t\tif ( ( last_index === 1 || this.need_refresh_display_columns ) && key === 0 ) {\n\t\t\t\tthis.buildReportUIBaseOnSetupFields();\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 1 ) {\n\t\t\t\tthis.edit_view_ui_dic.setup_field.setValue( this.current_edit_record.setup_field );\n\t\t\t\tif ( Global.getProductEdition() == 10 ) {\n\t\t\t\t\tthis.edit_view_ui_dic.auto_refresh.parent().parent().css( 'display', 'none' );\n\t\t\t\t}\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 2 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t\t\t}\n\t\t\t} else if ( key === 3 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_custom_columns' ).find( '.first-column-sub-view' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t\tthis.initSubCustomColumnView();\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_custom_columns' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\n\t\t\t\t}\n\n\t\t\t} else if ( key === 4 ) {\n\t\t\t\tthis.initSubSavedReportView();\n\t\t\t} else {\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t}\n\t\t} else {\n\t\t\tif ( ( last_index === 1 || this.need_refresh_display_columns ) && key === 0 ) {\n\t\t\t\tthis.buildReportUIBaseOnSetupFields();\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 1 ) {\n\t\t\t\tthis.edit_view_ui_dic.setup_field.setValue( this.current_edit_record.setup_field );\n\t\t\t\tif ( Global.getProductEdition() == 10 ) {\n\t\t\t\t\tthis.edit_view_ui_dic.auto_refresh.parent().parent().css( 'display', 'none' );\n\t\t\t\t}\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 2 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t\t\t}\n\t\t\t} else if ( key === 4 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_form_setup' ).find( '.first-column-sub-view' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t\tthis.initSubCustomColumnView();\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_form_setup' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\n\t\t\t\t}\n\t\t\t} else if ( key === 5 ) {\n\t\t\t\tthis.initSubSavedReportView();\n\t\t\t} else {\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t}\n\n\t\t\tthis.checkFormSetupSaved( last_index );\n\n\t\t}\n\n\t\tif ( key === 0 ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\t/**\n\t * Copied to ROEViewController as it doesn't share this base\n\t * FIXME: might need to go into BaseViewController eventually\n\t * @param label\n\t */\n\tcheckFormSetupSaved( last_index, label ) {\n\t\tvar $this = this;\n\n\t\tif ( label == undefined ) {\n\t\t\tlabel = $.i18n._( 'Form Setup' );\n\t\t}\n\n\t\tif ( last_index === 3 && this.form_setup_changed ) {\n\t\t\t$this.form_setup_changed = false;\n\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'You have modified' ) + ' ' + label + ' ' + $.i18n._( 'data without saving, would you like to save your data now?' ), '', function( flag ) {\n\t\t\t\tif ( flag ) {\n\t\t\t\t\t$this.onSaveSetup( label );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\tcleanUI() {\n\t\tfor ( var key in this.edit_view_form_item_dic ) {\n\t\t\tif ( !this.edit_view_form_item_dic.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar html_item = this.edit_view_form_item_dic[key];\n\n\t\t\t//Check if its a separator with a key of separated_X and skip removing it if it is.\n\t\t\t// FIXME: Would be nice to get a better way to detect a separator widget.\n\t\t\tif ( typeof html_item.getField === 'undefined' && key.indexOf('separated_') != -1 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\thtml_item.remove();\n\t\t}\n\n\t\t//Error: TypeError: this.edit_view_tab is null in /interface/html5/views/reports/ReportBaseViewController.js?v=8.0.4-20150320-094021 line 1100\n\t\tif ( this.edit_view_tab ) {\n\t\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\n\t\t\tvar tab0_column1 = tab_report.find( '.first-column' );\n\n\t\t\tvar clear_both_div = tab0_column1.find( '.clear-both-div' );\n\n\t\t\tclear_both_div.remove();\n\t\t}\n\t\t$( '.errortip-box' ).remove();\n\t\t$( '.errortip-box' ).remove();\n\t}\n\n\tremoveEditView() {\n\n\t\tsuper.removeEditView();\n\t\tthis.sub_custom_column_view_controller = null;\n\t\tthis.sub_saved_report_view_controller = null;\n\n\t\t//this is also happening in Ribbonviewcontoller in onSubMenuClick\n\t\tLocalCacheData.current_open_report_controller = null;\n\t}\n\n\t/* jshint ignore:start */\n\n\t//Get Widget base on field\n\tgetUIWidget( field ) {\n\t\tvar widget;\n\n\t\tif ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\twidget = this.getSimpleTComboBox( field, false );\n\t\t} else {\n\n\t\t\tswitch ( field ) {\n\t\t\t\tcase 'is_reprint':\n\t\t\t\t\twidget = this.getCheckBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'columns':\n\t\t\t\tcase 'sub_total':\n\t\t\t\tcase 'group':\n\t\t\t\tcase 'page_break':\n\t\t\t\tcase 'user_review_control_type_id':\n\t\t\t\tcase 'user_review_control_status_id':\n\t\t\t\tcase 'severity_id':\n\t\t\t\tcase 'term_id':\n\t\t\t\tcase 'kpi_type_id':\n\t\t\t\tcase 'kpi_status_id':\n\t\t\t\tcase 'fluency_id':\n\t\t\t\tcase 'qualification_type_id':\n\t\t\t\tcase 'proficiency_id':\n\t\t\t\tcase 'competency_id':\n\t\t\t\tcase 'ownership_id':\n\t\t\t\tcase 'invoice_status_id':\n\t\t\t\tcase 'user_status_id':\n\t\t\t\tcase 'pay_stub_status_id':\n\t\t\t\tcase 'filter':\n\t\t\t\tcase 'pay_period_time_sheet_verify_status_id':\n\t\t\t\tcase 'job_status_id':\n\t\t\t\tcase 'job_item_status_id':\n\t\t\t\tcase 'client_status_id':\n\t\t\t\tcase 'product_type_id':\n\t\t\t\tcase 'custom_filter':\n\t\t\t\tcase 'log_action_id':\n\t\t\t\tcase 'log_table_name_id':\n\t\t\t\tcase 'accrual_type_id':\n\t\t\t\tcase 'accrual_policy_type_id':\n\t\t\t\tcase 'exception_policy_severity_id':\n\t\t\t\tcase 'exception_policy_type_id':\n\t\t\t\tcase 'expense_policy_require_receipt_id':\n\t\t\t\tcase 'expense_policy_type_id':\n\t\t\t\tcase 'user_expense_payment_method_id':\n\t\t\t\tcase 'user_expense_status_id':\n\t\t\t\tcase 'job_applicant_sex_id':\n\t\t\t\tcase 'job_applicant_status_id':\n\t\t\t\tcase 'job_application_status_id':\n\t\t\t\tcase 'job_application_type_id':\n\t\t\t\tcase 'job_vacancy_employment_status_id':\n\t\t\t\tcase 'job_vacancy_level_id':\n\t\t\t\tcase 'job_vacancy_status_id':\n\t\t\t\tcase 'job_vacancy_type_id':\n\t\t\t\tcase 'job_vacancy_wage_type_id':\n\t\t\t\tcase 'pay_stub_run_id':\n\t\t\t\tcase 'pay_stub_type_id':\n\t\t\t\tcase 'remittance_source_account_type_id':\n\t\t\t\tcase 'transaction_type_id':\n\t\t\t\tcase 'transaction_status_id':\n\t\t\t\t\twidget = this.getSimpleTComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sort':\n\t\t\t\t\twidget = this.getSortComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'license_expiry_date':\n\t\t\t\tcase 'membership_renewal_date':\n\t\t\t\tcase 'skill_expiry_date':\n\t\t\t\tcase 'education_graduate_date':\n\t\t\t\t\twidget = this.getComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user_group_id':\n\t\t\t\tcase 'qualification_group_id':\n\t\t\t\tcase 'kpi_group_id':\n\t\t\t\tcase 'job_group_id':\n\t\t\t\tcase 'job_item_group_id':\n\t\t\t\tcase 'client_group_id':\n\t\t\t\tcase 'product_group_id':\n\t\t\t\t\twidget = this.getTreeModeAComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user_tag':\n\t\t\t\tcase 'review_tag':\n\t\t\t\tcase 'job_tag':\n\t\t\t\tcase 'job_item_tag':\n\t\t\t\t\twidget = this.getTag( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'include_user_id':\n\t\t\t\tcase 'exclude_user_id':\n\t\t\t\tcase 'client_sales_contact_id':\n\t\t\t\tcase 'created_by_id':\n\t\t\t\tcase 'updated_by_id':\n\t\t\t\tcase 'include_reviewer_user_id':\n\t\t\t\tcase 'exclude_reviewer_user_id':\n\t\t\t\tcase 'job_applicant_interviewer_user_id':\n\t\t\t\tcase 'job_application_interviewer_user_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_user', TTAPI.APIUser );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user_title_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_user_title', TTAPI.APIUserTitle );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'payroll_remittance_agency_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_payroll_remittance_agency', TTAPI.APIPayrollRemittanceAgency );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'legal_entity_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_legal_entity', TTAPI.APILegalEntity );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_branch_id':\n\t\t\t\tcase 'schedule_branch_id':\n\t\t\t\tcase 'punch_branch_id':\n\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_branch', TTAPI.APIBranch );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_department_id':\n\t\t\t\tcase 'schedule_department_id':\n\t\t\t\tcase 'punch_department_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_department', TTAPI.APIDepartment );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_job_id':\n\t\t\t\tcase 'punch_job_id':\n\t\t\t\tcase 'include_job_id':\n\t\t\t\tcase 'exclude_job_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job', TTAPI.APIJob );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_job_item_id':\n\t\t\t\tcase 'punch_job_item_id':\n\t\t\t\tcase 'include_job_item_id':\n\t\t\t\tcase 'exclude_job_item_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_item', TTAPI.APIJobItem );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'absence_policy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_absences', TTAPI.APIAbsencePolicy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'currency_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_currency', TTAPI.APICurrency );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'include_no_data_rows':\n\t\t\t\tcase 'exclude_ytd_adjustment':\n\t\t\t\tcase 'show_child_expenses':\n\t\t\t\t\twidget = this.getCheckBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'accrual_policy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_accrual', TTAPI.APIAccrualPolicy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pay_period_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_Pay_period', TTAPI.APIPayPeriod );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_id':\n\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\twidget = this.getTComboBox( field, 'global_job', TTAPI.APIJob );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_item_id':\n\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_item', TTAPI.APIJobItem );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'expense_policy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_expense_policy', TTAPI.APIExpensePolicy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pay_stub_entry_account_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_PayStubAccount', TTAPI.APIPayStubEntryAccount );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'product_id':\n\t\t\t\tcase 'exclude_product_id':\n\t\t\t\tcase 'include_product_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_product', TTAPI.APIProduct );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_client_id':\n\t\t\t\tcase 'exclude_client_id':\n\t\t\t\tcase 'include_client_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_client', TTAPI.APIClient );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'company_deduction_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_deduction', TTAPI.APICompanyDeduction );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'qualification_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_qualification', TTAPI.APIQualification );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'kpi_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_kpi', TTAPI.APIKPI );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_applicant_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_applicant', TTAPI.APIJobApplicant );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_vacancy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_vacancy', TTAPI.APIJobVacancy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'accrual_policy_account_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_accrual_policy_account', TTAPI.APIAccrualPolicyAccount );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( !Global.isSet( ReportBaseViewController.ReportMissedField ) ) {\n\t\t\t\t\t\tReportBaseViewController.ReportMissedField = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tReportBaseViewController.ReportMissedField[field] = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn widget;\n\t}\n\n\t/* jshint ignore:end */\n\tgetTag( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\twidget.TTagInput( { field: field } );\n\n\t\treturn widget;\n\t}\n\n\tgetTreeModeAComboBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\twidget = widget.AComboBox( {\n\t\t\ttree_mode: true,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_tree_column',\n\t\t\tset_empty: true,\n\t\t\tfield: field\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetCheckBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\n\t\twidget = widget.TCheckbox( {\n\t\t\tfield: field\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetTComboBox( field, layoutName, apiClass ) {\n\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\twidget = widget.AComboBox( {\n\t\t\tapi_class: apiClass,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: layoutName,\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: field\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetSortComboBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\twidget = widget.AComboBox( {\n\t\t\tfield: field,\n\t\t\tallow_drag_to_order: true,\n\t\t\tallow_multiple_selection: true,\n\t\t\tset_empty: true,\n\t\t\tlayout_name: 'global_sort_columns'\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetSimpleTComboBox( field, allowMultiple ) {\n\n\t\tif ( !Global.isSet( allowMultiple ) ) {\n\t\t\tallowMultiple = true;\n\t\t}\n\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\twidget = widget.AComboBox( {\n\t\t\tfield: field,\n\t\t\tset_empty: true,\n\t\t\tallow_multiple_selection: allowMultiple,\n\t\t\tlayout_name: 'global_option_column',\n\t\t\tkey: 'value'\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetComboBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\twidget = widget.TComboBox( {\n\t\t\tfield: field,\n\t\t\tset_empty: true\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\t/* jshint ignore:start */\n\tinitSourceData( field, widget ) {\n\n\t\tvar api_instance = null;\n\t\tvar option = '';\n\t\tvar $this = this;\n\n\t\tswitch ( field ) {\n\t\t\tcase 'sort':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'columns';\n\n\t\t\t\tapi_instance.getOptions( option, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tonResult( result );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tbreak;\n\t\t\tcase 'kpi_group_id':\n\t\t\t\tTTAPI.APIKPIGroup.getKPIGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'qualification_group_id':\n\t\t\t\tTTAPI.APIQualificationGroup.getQualificationGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'product_group_id':\n\t\t\t\tTTAPI.APIProductGroup.getProductGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'client_group_id':\n\t\t\t\tTTAPI.APIClientGroup.getClientGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'user_group_id':\n\t\t\t\tTTAPI.APIUserGroup.getUserGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'job_group_id':\n\t\t\t\tTTAPI.APIJobGroup.getJobGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_group_id':\n\t\t\t\tTTAPI.APIJobItemGroup.getJobItemGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_employment_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'employment_status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_level_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'level';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_wage_type_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'wage_type';\n\t\t\t\tbreak;\n\t\t\tcase 'job_application_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplication;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_application_type_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplication;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'job_applicant_sex_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplicant;\n\t\t\t\toption = 'sex';\n\t\t\t\tbreak;\n\t\t\tcase 'job_applicant_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplicant;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'user_review_control_type_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'user_review_control_status_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'severity_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'severity';\n\t\t\t\tbreak;\n\t\t\tcase 'term_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'term';\n\t\t\t\tbreak;\n\t\t\tcase 'kpi_status_id':\n\t\t\t\tapi_instance = TTAPI.APIKPI;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'kpi_type_id':\n\t\t\t\tapi_instance = TTAPI.APIKPI;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'proficiency_id':\n\t\t\t\tapi_instance = TTAPI.APIUserSkill;\n\t\t\t\toption = 'proficiency';\n\t\t\t\tbreak;\n\t\t\tcase 'fluency_id':\n\t\t\t\tapi_instance = TTAPI.APIUserLanguage;\n\t\t\t\toption = 'fluency';\n\t\t\t\tbreak;\n\t\t\tcase 'competency_id':\n\t\t\t\tapi_instance = TTAPI.APIUserLanguage;\n\t\t\t\toption = 'competency';\n\t\t\t\tbreak;\n\t\t\tcase 'user_status_id':\n\t\t\t\tapi_instance = TTAPI.APIUser;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_status_id':\n\t\t\t\tapi_instance = TTAPI.APIPayStub;\n\t\t\t\toption = 'filtered_status';\n\t\t\t\tbreak;\n\t\t\tcase 'ownership_id':\n\t\t\t\tapi_instance = TTAPI.APIUserMembership;\n\t\t\t\toption = 'ownership';\n\t\t\t\tbreak;\n\t\t\tcase 'license_expiry_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'license_expiry_date';\n\t\t\t\tbreak;\n\t\t\tcase 'membership_renewal_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'membership_renewal_date';\n\t\t\t\tbreak;\n\t\t\tcase 'skill_expiry_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'skill_expiry_date';\n\t\t\t\tbreak;\n\t\t\tcase 'education_graduate_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'education_graduate_date';\n\t\t\t\tbreak;\n\t\t\tcase 'group':\n\t\t\tcase 'sub_total':\n\t\t\tcase 'page_break':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'static_columns';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_period_time_sheet_verify_status_id':\n\t\t\t\tapi_instance = TTAPI.APIPayPeriodTimeSheetVerify;\n\t\t\t\t//show valid values specific to the report\n\t\t\t\toption = 'filter_report_status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJob;\n\t\t\t\toption = 'status';\n\n\t\t\t\tbreak;\n\t\t\tcase 'custom_filter':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'report_custom_filters';\n\t\t\t\tbreak;\n\n\t\t\tcase 'log_action_id':\n\n\t\t\t\tapi_instance = TTAPI.APILog;\n\t\t\t\toption = 'action';\n\n\t\t\t\tbreak;\n\t\t\tcase 'log_table_name_id':\n\n\t\t\t\tapi_instance = TTAPI.APILog;\n\t\t\t\toption = 'table_name';\n\n\t\t\t\tbreak;\n\t\t\tcase 'filter':\n\t\t\t\tif ( this.script_name === 'ScheduleSummaryReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APISchedule;\n\t\t\t\t\toption = 'status';\n\t\t\t\t} else if ( this.script_name === 'InvoiceTransactionSummaryReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APITransaction;\n\t\t\t\t\toption = 'type';\n\t\t\t\t} else if ( this.script_name === 'PayStubSummaryReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APIPayStub;\n\t\t\t\t\toption = 'status';\n\t\t\t\t} else if ( this.script_name === 'ActiveShiftReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APIUser;\n\t\t\t\t\toption = 'status';\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'accrual_policy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIAccrualPolicy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'accrual_type_id':\n\t\t\t\tapi_instance = TTAPI.APIAccrual;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'qualification_type_id':\n\t\t\t\tapi_instance = TTAPI.APIQualification;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'exception_policy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIExceptionPolicy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'exception_policy_severity_id':\n\t\t\t\tapi_instance = TTAPI.APIExceptionPolicy;\n\t\t\t\toption = 'severity';\n\t\t\t\tbreak;\n\t\t\tcase 'expense_policy_require_receipt_id':\n\t\t\t\tapi_instance = TTAPI.APIExpensePolicy;\n\t\t\t\toption = 'require_receipt';\n\t\t\t\tbreak;\n\t\t\tcase 'expense_policy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIExpensePolicy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'user_expense_payment_method_id':\n\t\t\t\tapi_instance = TTAPI.APIUserExpense;\n\t\t\t\toption = 'payment_method';\n\t\t\t\tbreak;\n\t\t\tcase 'user_expense_status_id':\n\t\t\t\tapi_instance = TTAPI.APIUserExpense;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobItem;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'client_status_id':\n\t\t\t\tapi_instance = TTAPI.APIClient;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'invoice_status_id':\n\t\t\t\tapi_instance = TTAPI.APIInvoice;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'invoice_transaction_type_id':\n\t\t\t\tapi_instance = TTAPI.APITransaction;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'product_type_id':\n\t\t\t\tapi_instance = TTAPI.APIProduct;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_type_id':\n\t\t\t\tapi_instance = TTAPI.APIPayStub;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'transaction_type_id':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'transaction_status_id':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_run_id':\n\t\t\t\tvar result = {};\n\t\t\t\tfor ( var i = 1; i <= 128; i++ ) {\n\t\t\t\t\tresult[i] = i;\n\t\t\t\t}\n\t\t\t\tresult = Global.buildRecordArray( result );\n\t\t\t\twidget.setSourceData( result );\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\t//Don't deal with awesomebox with api\n\t\t\t\tif ( widget.getAPI && widget.getAPI() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//Text Input or other no options widget\n\t\t\t\tif ( !widget.setSourceData ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfield.replace( '_id', '' );\n\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = field;\n\t\t\t\tif ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\t\t\toption = 'time_period';\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( api_instance ) {\n\n\t\t\tif ( this.need_refresh_display_columns && ( option === 'columns' || field == 'custom_filter' ) ) {\n\t\t\t\tapi_instance.getOptions( option, {\n\t\t\t\t\tnoCache: true, onResult: function( result ) {\n\n\t\t\t\t\t\tonResult( result );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tapi_instance.getOptions( option, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tonResult( result );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onResult( result ) {\n\n\t\t\tvar res_data = result.getResult();\n\t\t\tres_data = Global.buildRecordArray( res_data );\n\t\t\tif ( field === 'sort' ) {\n\t\t\t\tres_data = $this.buildSortSelectorUnSelectColumns( res_data );\n\t\t\t} else if ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\t\t$this.time_period_array = res_data;\n\t\t\t}\n\n\t\t\twidget.setSourceData( res_data );\n\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\tgetDatePicker( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\twidget.TDatePicker( { field: field } );\n\n\t\treturn widget;\n\t}\n\n\tputInputToInsideFormItem( form_item_input, label ) {\n\t\tvar form_item = $( Global.loadWidgetByName( WidgetNamesDic.EDIT_VIEW_SUB_FORM_ITEM ) );\n\t\tvar form_item_label = form_item.find( '.edit-view-form-item-label' );\n\t\tvar form_item_input_div = form_item.find( '.edit-view-form-item-input-div' );\n\t\tform_item.addClass( 'remove-margin' );\n\n\t\tform_item_label.text( $.i18n._( label ) + ': ' );\n\t\tform_item_input_div.append( form_item_input );\n\n\t\treturn form_item;\n\t}\n\n\tonLicenseExpiryDate( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.license_expiry_date = null;\n\t\tthis.visible_report_widgets.start_date_3 = null;\n\t\tthis.visible_report_widgets.end_date_3 = null;\n\t\tthis.visible_report_widgets.pay_period_id_3 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_3 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_3', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_3 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_3', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_3 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_3' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_3' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_3 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_3 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonEducationGraduateDate( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.education_graduate_date = null;\n\t\tthis.visible_report_widgets.start_date_4 = null;\n\t\tthis.visible_report_widgets.end_date_4 = null;\n\t\tthis.visible_report_widgets.pay_period_id_4 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_4 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_4', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_4 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_4', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_4 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_4' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_4' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_4 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_4 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonSkillExpiryDate( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.skill_expiry_date = null;\n\t\tthis.visible_report_widgets.start_date_2 = null;\n\t\tthis.visible_report_widgets.end_date_2 = null;\n\t\tthis.visible_report_widgets.pay_period_id_2 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_2 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_2', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_2 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_2', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_2 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_2' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_2' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_2 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_2 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonMembershipRenewalDateChange( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.membership_renewal_date = null;\n\t\tthis.visible_report_widgets.start_date_1 = null;\n\t\tthis.visible_report_widgets.end_date_1 = null;\n\t\tthis.visible_report_widgets.pay_period_id_1 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_1 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_1', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_1 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_1', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_1 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_1' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_1' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_1 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_1 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 62 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonTimePeriodChange( target, defaultValue ) {\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\t\tvar field = target.getField();\n\t\tthis.visible_report_widgets[field] = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' || value === 'this_year_this_pay_period' || value === 'this_year_last_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\t\t\t$this.initSourceData( field, time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\t\t\tpay_period.attr( 'time_period_key', field );\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\t\t\t$this.initSourceData( field, time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id', 'global_Pay_period', TTAPI.APIPayPeriod );\n\t\t\tpay_period.attr( 'time_period_key', field );\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( field, time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\t\t\t$this.initSourceData( field, time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date' );\n\t\t\tvar end_date = $this.getDatePicker( 'end_date' );\n\t\t\tstart_date.attr( 'time_period_key', field );\n\t\t\tend_date.attr( 'time_period_key', field );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 62 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\t//Override this if more than one tab\n\tsetErrorTips( result, dont_switch_tab ) {\n\t\tthis.clearErrorTips();\n\n\t\tvar details = result.getDetails();\n\t\tvar error_list = details[0];\n\n\t\tvar found_in_current_tab = false;\n\n\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\t\tvar tab_setup = this.edit_view_tab.find( '#tab_setup' );\n\n\t\tfor ( var key in error_list ) {\n\n\t\t\tif ( !error_list.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( !Global.isSet( this.edit_view_ui_dic[key] ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( key === 'time_period' ||\n\t\t\t\tkey === 'membership_renewal_date' ||\n\t\t\t\tkey === 'skill_expiry_date' ||\n\t\t\t\tkey === 'license_expiry_date' ||\n\t\t\t\tkey === 'education_graduate_date'\n\t\t\t) {\n\t\t\t\tif ( this.visible_report_widgets[key] && this.visible_report_widgets[key].is( ':visible' ) ) {\n\t\t\t\t\tthis.visible_report_widgets[key].setErrorStyle( error_list[key], true );\n\t\t\t\t\tfound_in_current_tab = true;\n\t\t\t\t} else if ( this.visible_report_widgets[key] ) {\n\t\t\t\t\tthis.visible_report_widgets[key].setErrorStyle( error_list[key] );\n\t\t\t\t}\n\t\t\t\tthis.edit_view_error_ui_dic[key] = this.visible_report_widgets[key];\n\t\t\t} else {\n\t\t\t\tif ( this.edit_view_ui_dic[key].is( ':visible' ) ) {\n\n\t\t\t\t\tthis.edit_view_ui_dic[key].setErrorStyle( error_list[key], true );\n\t\t\t\t\tfound_in_current_tab = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.edit_view_ui_dic[key].setErrorStyle( error_list[key] );\n\t\t\t\t}\n\t\t\t\tthis.edit_view_error_ui_dic[key] = this.edit_view_ui_dic[key];\n\t\t\t}\n\n\t\t}\n\n\t\tif ( !found_in_current_tab ) {\n\n\t\t\tthis.showEditViewError( result );\n\n\t\t}\n\t}\n\n\tbuildSortSelectorUnSelectColumns( display_columns ) {\n\t\tvar fina_array = [];\n\t\tvar i = 100;\n\t\t$.each( display_columns, function( index, content ) {\n\t\t\tvar new_content = $.extend( {}, content );\n\t\t\tnew_content.id = i; //Need\n\t\t\tnew_content.sort = 'asc';\n\t\t\tfina_array.push( new_content );\n\t\t\ti = i + 1;\n\t\t} );\n\n\t\treturn fina_array;\n\t}\n\n\tsetEditViewWidgetsMode() {\n\t\tvar did_clean_dic = {};\n\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\twidget.css( 'opacity', 1 );\n\t\t\tvar column = widget.parent().parent().parent();\n\t\t\tvar tab_id = column.parent().attr( 'id' );\n\t\t\tif ( !column.hasClass( 'v-box' ) ) {\n\t\t\t\tif ( !did_clean_dic[tab_id] ) {\n\t\t\t\t\tdid_clean_dic[tab_id] = true;\n\t\t\t\t}\n\t\t\t\tif ( Global.isSet( widget.setEnabled ) ) {\n\t\t\t\t\twidget.setEnabled( true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildReportUIBaseOnSetupFields() {\n\t\tvar setup_field = this.current_edit_record.setup_field;\n\t\tif ( setup_field && setup_field.length > 0 ) {\n\t\t\tthis.createUI( setup_field );\n\t\t}\n\t}\n\n\tgetFormValues() {\n\t\tvar other = {};\n\n\t\tother.page_orientation = this.current_edit_record.page_orientation;\n\t\tother.font_size = this.current_edit_record.font_size;\n\t\tother.auto_refresh = this.current_edit_record.auto_refresh;\n\t\tother.disable_grand_total = this.current_edit_record.disable_grand_total;\n\t\tother.maximum_page_limit = this.current_edit_record.maximum_page_limit;\n\t\tother.show_duplicate_values = this.current_edit_record.show_duplicate_values;\n\n\t\tif ( this.current_saved_report && Global.isSet( this.current_saved_report.name ) ) {\n\n\t\t\tother.report_name = this.current_saved_report.name;\n\t\t\tother.report_description = this.current_saved_report.description;\n\t\t}\n\n\t\treturn other;\n\t}\n\n\tgetChartValues() {\n\n\t\tvar chart = {};\n\n\t\tchart.enable = this.current_edit_record.enable;\n\t\tchart.display_mode = this.current_edit_record.display_mode;\n\t\tchart.type = this.current_edit_record.type;\n\t\tchart.include_sub_total = this.current_edit_record.include_sub_total;\n\t\tchart.axis_scale_static = this.current_edit_record.axis_scale_static;\n\t\tchart.combine_columns = this.current_edit_record.combine_columns;\n\n\t\treturn chart;\n\t}\n\n\tconvertSortValues( sort ) {\n\n\t\tvar result = [];\n\t\tfor ( var i = 0; i < sort.length; i++ ) {\n\t\t\tvar item = sort[i];\n\n\t\t\tif ( !Global.isSet( item.fullValue ) ) {\n\t\t\t\tresult = sort;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tvar new_item = {};\n\t\t\t\tnew_item[item.value] = item.sort;\n\t\t\t\tresult.push( new_item );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\taddOrderFix( report ) {\n\n\t\tvar new_report_fields = {};\n\n\t\tfor ( var key in report ) {\n\n\t\t\tif ( !report.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar order_fix = this.visible_report_widgets_order_fix[key];\n\n\t\t\tif ( order_fix > 0 ) {\n\t\t\t\tnew_report_fields['-' + order_fix + '-' + key] = report[key];\n\t\t\t}\n\t\t}\n\n\t\treturn new_report_fields;\n\t}\n\n\t//Make sure this.current_edit_record is updated before validate\n\tvalidate( synchronous ) {\n\t\tvar $this = this;\n\t\tvar other = this.getFormValues();\n\t\tvar chart = this.getChartValues();\n\n\t\t//#2293 - Refresh the report tab UI based on any changes to chart or setup tabs, or changes that hide and show fields will not validate properly.\n\t\tthis.buildReportUIBaseOnSetupFields();\n\n\t\tvar report = this.visible_report_values;\n\t\tif ( report.sort ) {\n\t\t\treport.sort = this.convertSortValues( report.sort );\n\t\t}\n\n\t\treport = this.addOrderFix( report );\n\n\t\tvar config = report;\n\t\tconfig['-' + 1000 + '-' + 'template'] = this.current_edit_record.template;\n\t\tconfig.other = other;\n\t\tconfig.chart = chart;\n\n\t\tif ( this.include_form_setup ) {\n\t\t\tconfig.form = this.getFormSetupData( true );\n\t\t}\n\n\t\tif ( report.sort ) {\n\t\t\treport.sort = this.convertSortValues( report.sort );\n\t\t}\n\n\t\tif ( !synchronous ) {\n\t\t\tthis.api['validateReport']( config, 'pdf', {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t$this.validateResult( result );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn null;\n\t\t} else {\n\t\t\t//#2293 - synchronous call to validation api allows us to return the value in realtime\n\t\t\tvar result = this.api['validateReport']( config, 'pdf', { async: false } );\n\t\t\tif ( result ) {\n\t\t\t\tthis.validateResult( result );\n\n\t\t\t\treturn result.getResult();\n\t\t\t}\n\t\t}\n\t}\n\n\tonViewExcelClick( message_override ) {\n\n\t\tvar config = this.getPostReportJson();\n\t\tvar post_data = { 0: config, 1: 'csv' };\n\n\t\tif ( this.include_form_setup ) {\n\n\t\t\tif ( this.show_empty_message ) {\n\t\t\t\tvar message = $.i18n._( 'Setup data for this report has not been completed yet. Please click on the Form Setup tab to do so now.' );\n\t\t\t\tif ( message_override ) {\n\t\t\t\t\tmessage = message_override;\n\t\t\t\t}\n\t\t\t\tTAlertManager.showAlert( message );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconfig.form = this.getFormSetupData( true );\n\t\t}\n\n\t\tthis.doFormIFrameCall( post_data );\n\n\t\tvar source = 'Excel'; // Backup value in case the url sm does not exist.\n\t\tif ( LocalCacheData.getAllURLArgs() && LocalCacheData.getAllURLArgs().sm ) {\n\t\t\tsource = LocalCacheData.getAllURLArgs().sm + '@Excel';\n\t\t}\n\t\t$().TFeedback( {\n\t\t\tsource: source,\n\t\t\tforce_source: true,\n\t\t\tdelay: 5000\n\t\t} );\n\t}\n\n\tgetVisibleReportValues() {\n\t\t//#2353 - cut out any zero uuid strings, they are likely --none-- in a multiselect\n\t\tfor ( var i in this.visible_report_values.filter ) {\n\t\t\tif ( this.visible_report_values.filter[i] == TTUUID.zero_id ) {\n\t\t\t\tdelete this.visible_report_values.filter[i];\n\t\t\t}\n\t\t}\n\t\treturn this.visible_report_values;\n\t}\n\n\tgetPostReportJson( noPreFix ) {\n\t\tvar other = this.getFormValues();\n\t\tvar chart = this.getChartValues();\n\t\tvar report = this.getVisibleReportValues();\n\n\t\tif ( report.sort ) {\n\t\t\treport.sort = this.convertSortValues( report.sort );\n\n\t\t\tif ( noPreFix ) { //no pre fix means save to userReport, use sort_ to match flex format\n\t\t\t\treport.sort_ = report.sort;\n\n\t\t\t\tdelete report.sort;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( !noPreFix ) {\n\t\t\treport = this.addOrderFix( report );\n\t\t}\n\n\t\tvar config = report;\n\t\tif ( !noPreFix ) {\n\t\t\tconfig['-' + 1000 + '-' + 'template'] = this.current_edit_record.template;\n\t\t} else {\n\t\t\tconfig['template'] = this.current_edit_record.template;\n\t\t}\n\n\t\tconfig.other = other;\n\t\tconfig.chart = chart;\n\n\t\treturn config;\n\t}\n\n\t//Reports don't share many icons with other views, so override the entire function here.\n\tonContextMenuClick( context_btn, menu_name ) {\n\t\tProgressBar.showOverlay();\n\t\t//this flag is turned off in ProgressBarManager::closeOverlay, or 2s whichever happens first\n\t\tif ( window.clickProcessing == true ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\twindow.clickProcessing = true;\n\t\t\twindow.clickProcessingHandle = window.setTimeout( function() {\n\t\t\t\tif ( window.clickProcessing == true ) {\n\t\t\t\t\twindow.clickProcessing = false;\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\tTTPromise.wait();\n\t\t\t\t}\n\t\t\t}, 1000 );\n\t\t}\n\t\tvar id;\n\t\tif ( Global.isSet( menu_name ) ) {\n\t\t\tid = menu_name;\n\t\t} else {\n\t\t\tcontext_btn = $( context_btn );\n\n\t\t\tid = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tif ( context_btn.hasClass( 'disable-image' ) ) {\n\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.view:\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.view_html:\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick( 'html' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.view_html_new_window:\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick( 'html', true );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\tthis.onViewExcelClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\tthis.onCancelClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.save_existed_report: //All report view\n\t\t\t\tthis.onSaveExistedReportClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.save_new_report: //All report view\n\t\t\t\tthis.onSaveNewReportClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.save_setup: //All report view\n\t\t\t\tthis.onSaveSetup();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.view_form: //All report view\n\t\t\t\tthis.onViewClick( 'pdf_form' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.e_file: //All report view\n\t\t\t\tthis.onViewClick( 'efile' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet_view: //All report view\n\t\t\t\tthis.onViewClick( 'pdf_timesheet' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet_view_detail: //All report view\n\t\t\t\tthis.onViewClick( 'pdf_timesheet_detail' );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\tthis.onCustomContextClick( id, context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t\tGlobal.triggerAnalyticsContextMenuClick( context_btn, menu_name );\n\t}\n\n\tonSaveSetup( label ) {\n\t\tvar $this = this;\n\t\tvar form_setup = this.getFormSetupData();\n\n\t\tif ( label == undefined ) {\n\t\t\tlabel = $.i18n._( 'Form setup' );\n\t\t}\n\n\t\t//Allows saving of all export config data for all export formats at once in PayrollExport\n\t\tif ( this.save_export_setup_data != undefined ) {\n\t\t\tform_setup = this.save_export_setup_data;\n\t\t}\n\n\t\t//do this before the api call for speed to stop #\n\t\t$this.show_empty_message = false;\n\t\t$this.form_setup_changed = false;\n\n\t\tif ( form_setup ) { //Don't save if form_setup is false.\n\t\t\tthis.api.setCompanyFormConfig( form_setup, {\n\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\tif ( result.isValid() ) {\n\n\t\t\t\t\t\tTAlertManager.showAlert( label + ' ' + $.i18n._( 'has been saved successfully' ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.show_empty_message = true;\n\t\t\t\t\t\t$this.form_setup_changed = true;\n\t\t\t\t\t\tTAlertManager.showAlert( label + ' ' + $.i18n._( 'save failed, please try again' ) );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tTAlertManager.showAlert( label + ' ' + $.i18n._( 'invalid, please try again' ) );\n\t\t}\n\t}\n\n\tgetFormSetupData() {\n\t\t//Always need override\n\t}\n\n\tonViewClick( key, new_window, message_override ) {\n//\t\tGlobal.loadPage('temp_page.html',function(result){\n//\t\t\tIndexViewController.openizard( 'ReportViewWizard', result);\n//\t\t});\n\t\tif ( !key ) {\n\t\t\tkey = 'pdf';\n\t\t}\n\n\t\t//#2293 - make validation call synchronously to stop the report from being shown if it fails.\n\t\tif ( !this.validate( true ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar config = this.getPostReportJson();\n\t\tvar post_data = { 0: config, 1: key };\n\t\tif ( this.include_form_setup ) {\n\t\t\tif ( this.show_empty_message ) {\n\t\t\t\tvar message = $.i18n._( 'Setup data for this report has not been completed yet. Please click on the Form Setup tab to do so now.' );\n\t\t\t\tif ( message_override ) {\n\t\t\t\t\tmessage = message_override;\n\t\t\t\t}\n\t\t\t\tTAlertManager.showAlert( message );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconfig.form = this.getFormSetupData( true );\n\t\t}\n\n//\t\tif ( key === 'pdf' ) {\n//\t\t\tthis.doFormIFrameCall( post_data );\n//\t\t}\n\t\tif ( key === 'html' ) {\n\t\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + this.api.className + '&Method=' + 'get' + this.api.key_name + '&v=2' );\n\t\t\tif ( Global.getStationID() ) {\n\t\t\t\turl = url + '&StationID=' + Global.getStationID();\n\t\t\t}\n\t\t\tvar message_id = TTUUID.generateUUID();\n\t\t\turl = url + '&MessageID=' + message_id;\n\n\t\t\tvar refresh_request = '<script>';\n\t\t\trefresh_request += 'var timeout_handler;';\n\t\t\trefresh_request += 'function remainTime() {';\n\t\t\trefresh_request += '\tif ( auto_refresh_time && auto_refresh_time >= 0 ) {';\n\t\t\trefresh_request += '\t\tif ( auto_refresh_time == 0 ) {';\n\t\t\trefresh_request += '\t\t\tclearTimeout( timeout_handler );';\n\t\t\trefresh_request += '\t\t\tstartRefresh();';\n\t\t\trefresh_request += '\t\t} else {';\n\t\t\trefresh_request += '\t\t\ttimeout_handler = setTimeout( \"remainTime()\", 1000 );';\n\t\t\trefresh_request += '\t\t\tauto_refresh_time = ( auto_refresh_time - 1 );';\n\t\t\trefresh_request += '\t\t}';\n\t\t\trefresh_request += '\t}';\n\t\t\trefresh_request += '}';\n\t\t\trefresh_request += 'function startRefresh() {';\n\t\t\trefresh_request += ' try {';\n\t\t\trefresh_request += '\t\t$.ajax({';\n\t\t\trefresh_request += '\t\t\tdataType: \"JSON\",';\n\t\t\trefresh_request += '\t\t\tdata: {json:\\'' + JSON.stringify( post_data ).replace( /'/g, '\\\\\\'' ) + '\\'},';\n\t\t\trefresh_request += '\t\t\ttype: \"POST\",';\n\t\t\trefresh_request += '            url: \\'' + url + '\\',';\n\t\t\trefresh_request += '\t\t\tsuccess: function(result) {';\n\t\t\trefresh_request += '\t\t\tif(console){ console.log( \"Auto refreshing report: \"+ Date() ) }';\n\t\t\trefresh_request += '\t\t\tvar newDoc = result.api_retval + $(\\'body\\').children(\\':last\\')[0].outerHTML; document.open(\"text/html\"); document.write(newDoc); document.close(); ';\n\t\t\trefresh_request += '\t\t\t}';\n\t\t\trefresh_request += '\t\t})';\n\t\t\trefresh_request += '\t} catch(e) {}';\n\t\t\trefresh_request += '}';\n\t\t\trefresh_request += 'remainTime();';\n\t\t\trefresh_request += '$( \"body\" ).mousemove( function( e ) {';\n\t\t\trefresh_request += '\twindow.parent.Global.doPingIfNecessary()';\n\t\t\trefresh_request += '} );';\n\t\t\trefresh_request += '</script>';\n\n\t\t\tthis.api['get' + this.api.key_name]( config, key, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tvar result = res.getResult();\n\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\tif ( Global.isEmpty( result ) === false ) {\n\t\t\t\t\t\t\tresult = result + refresh_request;\n\t\t\t\t\t\t\tif ( new_window ) {\n\t\t\t\t\t\t\t\tvar w = window.open();\n\t\t\t\t\t\t\t\tw.document.writeln( result );\n\t\t\t\t\t\t\t\tw.document.close();\n\t\t\t\t\t\t\t} else if ( result ) {\n\t\t\t\t\t\t\t\tIndexViewController.openWizard( 'ReportViewWizard', result );\n\t\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'NO DATA MATCHES CRITERIA', LocalCacheData.getApplicationName() ), $.i18n._( 'NOTICE' ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tTAlertManager.showErrorAlert( res );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else if ( key === 'pdf_form_publish_employee' ) {\n\t\t\tthis.api['get' + this.api.key_name]( config, key, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar retval = result.getResult();\n\t\t\t\t\tif ( retval ) {\n\t\t\t\t\t\tUserGenericStatusWindowController.open( retval, LocalCacheData.getLoginUser().id, function() {\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'NO DATA MATCHES CRITERIA', LocalCacheData.getApplicationName() ), $.i18n._( 'NOTICE' ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.doFormIFrameCall( post_data );\n\t\t\tProgressBar.closeOverlay();\n\n\t\t\tvar source = 'PDF'; // Backup value in case the url sm does not exist.\n\t\t\tif ( LocalCacheData.getAllURLArgs() && LocalCacheData.getAllURLArgs().sm ) {\n\t\t\t\tsource = LocalCacheData.getAllURLArgs().sm + '@PDF';\n\t\t\t}\n\t\t\t$().TFeedback( {\n\t\t\t\tsource: source,\n\t\t\t\tforce_source: true,\n\t\t\t\tdelay: 5000\n\t\t\t} );\n\t\t}\n\t}\n\n\tprocessTransactions( key ) {\n\t\tvar args = this.getPostReportJson( true );\n\t\tvar post_data = { 0: { filter_data: args }, 1: true, 2: key };\n\t\tvar pay_stub_api = TTAPI.APIPayStub;\n\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + pay_stub_api.className + '&Method=' + 'get' + pay_stub_api.key_name );\n\t\tGlobal.APIFileDownload( pay_stub_api.className, pay_stub_api.key_name, post_data, url );\n\t}\n\n\tsetEditMenuViewIcon( context_btn, pId ) {\n\t}\n\n\tdoFormIFrameCall( postData ) {\n\n\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + this.api.className + '&Method=' + 'get' + this.api.key_name );\n\n\t\tGlobal.APIFileDownload( this.api.className, this.api.key_name, postData, url );\n\t}\n\n\tonSaveNewReportClick() {\n\t\tvar $this = this;\n\t\tvar config = this.getPostReportJson( true );\n\t\tvar select_field = this.current_edit_record.setup_field;\n\n\t\tif ( config.template ) {\n\t\t\tselect_field.unshift( 'template' );\n\t\t}\n\n\t\tvar report_data = {};\n\t\treport_data.data = {};\n\t\treport_data.data.config = config;\n\t\treport_data.data.template = select_field;\n\t\treport_data.script = this.script_name;\n\n\t\tif ( !this.sub_saved_report_view_controller ) {\n\t\t\tthis.initSubSavedReportView( function() {\n\t\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t\t} );\n\t\t} else {\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t$this.sub_saved_report_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t}\n\t}\n\n\tonSaveExistedReportClick() {\n\t\tvar $this = this;\n\t\tvar config = this.getPostReportJson( true );\n\t\tvar select_field = this.current_edit_record.setup_field;\n\n\t\tif ( config.template ) {\n\t\t\tselect_field.unshift( 'template' );\n\t\t}\n\n\t\tvar report_data = this.current_saved_report;\n\n\t\tif ( !report_data ) {\n\t\t\treport_data = {};\n\t\t}\n\n\t\treport_data.data = {};\n\t\treport_data.data.config = config;\n\t\treport_data.data.template = select_field;\n\n\t\tif ( !report_data.script ) {\n\t\t\treport_data.script = this.script_name;\n\t\t}\n\n\t\tif ( !this.sub_saved_report_view_controller ) {\n\t\t\tthis.initSubSavedReportView( function() {\n\t\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t\t} );\n\t\t} else {\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t$this.sub_saved_report_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t}\n\t}\n\n\tonSaveDoneCallback( result, current_edit_record ) {\n\t\tvar new_id = result.getResult();\n\n\t\tif ( TTUUID.isUUID( new_id ) == false && current_edit_record && current_edit_record.id ) {\n\t\t\tnew_id = current_edit_record.id;\n\t\t}\n\t\tthis.refreshNav( new_id );\n\t}\n\n\trefreshNav( newId ) {\n\n\t\tvar $this = this;\n\n\t\tthis.navigation.setSourceData( null );\n\n\t\t$this.getReportData( function( result ) {\n\t\t\t// Waiting for the TTAPI.API returns data to set the current edit record.\n\n\t\t\tif ( result && result.length > 0 ) {\n\n\t\t\t\tif ( TTUUID.isUUID( newId ) ) {\n\t\t\t\t\tfor ( var i = 0; i < result.length; i++ ) {\n\t\t\t\t\t\tvar item = result[i];\n\n\t\t\t\t\t\tif ( item.id === newId ) {\n\t\t\t\t\t\t\t$this.current_saved_report = result[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t$this.current_saved_report = $this.getDefaultReport( result );\n\t\t\t\t}\n\n\t\t\t\t$this.saved_report_array = result;\n\t\t\t} else {\n\t\t\t\t$this.current_saved_report = null;\n\t\t\t\t$this.saved_report_array = [];\n\t\t\t}\n\n\t\t\t$this.current_edit_record = {};\n\t\t\t$this.visible_report_values = {};\n\n\t\t\t$this.initEditView();\n\n\t\t} );\n\t}\n\n\t//#2543 - fixing disconnected menu leading to page_orientation JavaScript exception\n\t//This caused a bug that if you go to Dashboard, then Report -> TimeSheet Report, then click the X at the top right, the ribbon menu would get out of sync and have the last \"Help\" top level menu selected.\n\t// onCloseIconClick: function() {\n\t// \tif ( LocalCacheData.current_open_sub_controller ) {\n\t// \t\tLocalCacheData.current_open_sub_controller.onCancelClick();\n\t// \t} else {\n\t// \t\tvar $this = this;\n\t// \t\tthis.onCancelClick( null, null, function() {\n\t// \t\t\tif ( !this.edit_view ) {\n\t// \t\t\t\t$this.parent_view_controller.buildContextMenu();\n\t// \t\t\t\t$this.parent_view_controller.setDefaultMenu();\n\t// \t\t\t\t//$this.onCancelClick();\n\t// \t\t\t} else {\n\t// \t\t\t\t$this.buildEditMenu();\n\t// \t\t\t}\n\t// \t\t} );\n\t// \t}\n\t// }\n\n}\n\nReportBaseViewController.ReportMissedField = null;"],"sourceRoot":""}