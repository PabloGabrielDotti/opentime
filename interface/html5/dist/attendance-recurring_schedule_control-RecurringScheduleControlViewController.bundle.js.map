{"version":3,"sources":["webpack://timetrex/./interface/html5/views/attendance/recurring_schedule_control/RecurringScheduleControlViewController.js"],"names":["RecurringScheduleControlViewController","BaseViewController","options","_","defaults","el","user_status_array","user_group_array","user_api","user_group_api","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIRecurringScheduleControl","APIUser","APIUserGroup","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","$this","initDropDownOption","res","getResult","Global","buildRecordArray","getUserGroup","onResult","buildTreeRecord","sub_view_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","buildEditViewUI","form_item_input","widgetContainer","tab_model","setTabModel","navigation","AComboBox","api_class","id","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_recurring_schedule_column1","edit_view_tab","find","edit_view_tabs","push","loadWidgetByName","FormItemType","AWESOME_BOX","APIRecurringScheduleTemplateControl","set_empty","field","addEditFieldToColumn","TEXT_INPUT","TTextInput","width","DATE_PICKER","TDatePicker","label","append","getProductEdition","CHECKBOX","TCheckbox","default_args","set_any","custom_first_label","empty_item","addition_source_function","target","source_data","first_item","createItem","TTUUID","zero_id","open_item","unshift","added_items","value","permission_section","setDefaultArgs","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","onEmployeeSourceCreate","tree_mode","APIUserTitle","APIBranch","APIDepartment","display_columns","getDisplayColumns","each","index","content","name","type","exclude","include","ContextMenuIconName","recurring_template","group","icon","Icons","schedule","export_excel","onNavigationClick","setEditViewDataDone","is_mass_editing","detachElement","attachElement","toString","indexOf","split","records","parseToRecordId","result_data","composite_id","getCurrentSelectedRecord","user_id","parseToUserId","i","length","record_id","filter","filter_data","is_add","is_viewing","LocalCacheData","current_doing_context_action","grid_selected_id_array","getGridSelectIdArray","mass_edit_record_ids","key_name","result","onEditClick","openEditView","unique_columns","result1","linked_columns","parent_key","parent_value","current_edit_record","initEditView","old_selected_id","copyIds","edit_view","is_changed","TAlertManager","showConfirmAlert","modify_alert_message","flag","_continueDoCopy","ProgressBar","closeOverlay","ids","slice","retval","iconName","selected_item","getSelectedItem","include_users","now_date","Date","isSet","include_user_ids","select_date","format","addViewTab","window","location","href","IndexViewController","goToView","temp_filter","filter_columns","recurring_schedule_template_control_id","onExportClick","selected_index","getSourceData","hash_arr","hash","hash_id","substring","doNotSetFocus","context_menu_array","selectContextMenu","setTotalDisplaySpan","len","grid_selected_length","context_btn","attr","removeClass","add","setDefaultMenuAddIcon","edit","setDefaultMenuEditIcon","view","setDefaultMenuViewIcon","mass_edit","setDefaultMenuMassEditIcon","copy","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","cancel","setDefaultMenuCancelIcon","setDefaultMenuRecurringTemplateIcon","setDefaultMenuScheduleIcon","setDefaultMenuExportIcon","setContextMenuGroupVisibility","pId","viewPermissionValidate","edit_only_mode","addClass","PermissionManager","checkTopLevelPermission","set_default_menu","page_action","page_number","callBack","getFilterColumnsFromDisplayColumns","filter_items_per_page","pager_data","paging_type","filter_page","next_page","previous_page","last_page_number","current_page","select_layout","data","getSubViewFilter","convertLayoutFilterToAPIFilter","filter_sort","last_select_ids","isArray","removeNoResultCover","__createRowId","formatGridData","showNoResultCover","getPagerData","paging_widget","setPagerData","paging_widget_2","grid","getGridParam","concat","item","setData","reSelectLastSelectItems","setGridCellBackGround","setDefaultMenu","is_last_page","css","autoOpenEditViewIfNecessary","searchDone","column_filter","_getFilterColumnsFromDisplayColumns","setEditMenuSaveIcon","setEditMenuAddIcon","setEditMenuEditIcon","setEditMenuViewIcon","setEditMenuMassEditIcon","setEditMenuCopyIcon","setEditMenuDeleteIcon","setEditMenuDeleteAndNextIcon","setEditMenuSaveAndContinueIcon","setEditMenuSaveAndAddIcon","setEditMenuSaveAndNextIcon","setEditMenuSaveAndCopyIcon","setEditMenuCopyAndAddIcon","setEditMenuRecurringTemplateIcon","setEditMenuScheduleIcon"],"mappings":"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","file":"attendance-recurring_schedule_control-RecurringScheduleControlViewController.bundle.js?v=699904b46c5d6cf080a2","sourcesContent":["export class RecurringScheduleControlViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#recurring_schedule_control_view_container',\n\n\n\t\t\tuser_status_array: null,\n\n\t\t\tuser_group_array: null,\n\t\t\tuser_api: null,\n\n\t\t\tuser_group_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'RecurringScheduleControlEditView.html';\n\t\tthis.permission_id = 'recurring_schedule';\n\t\tthis.viewId = 'RecurringScheduleControl';\n\t\tthis.script_name = 'RecurringScheduleControlView';\n\t\tthis.table_name_key = 'recurring_schedule_control';\n\t\tthis.context_menu_name = $.i18n._( 'Recurring Schedules' );\n\t\tthis.navigation_label = $.i18n._( 'Recurring Schedule' ) + ':';\n\t\tthis.api = TTAPI.APIRecurringScheduleControl;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status', 'user_status_id', this.user_api, function( res ) {\n\t\t\tres = res.getResult();\n\t\t\t$this.user_status_array = Global.buildRecordArray( res );\n\t\t} );\n\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\n\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_recurring_schedule': { 'label': $.i18n._( 'Recurring Schedule' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIRecurringScheduleControl,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_recurring_schedule_control',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_recurring_schedule = this.edit_view_tab.find( '#tab_recurring_schedule' );\n\n\t\tvar tab_recurring_schedule_column1 = tab_recurring_schedule.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_recurring_schedule_column1 );\n\n\t\t// Template\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIRecurringScheduleTemplateControl,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_recurring_template_control',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'recurring_schedule_template_control_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Template' ), form_item_input, tab_recurring_schedule_column1, '' );\n\n\t\t// Start Week\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'start_week', width: 40 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Template Start Week' ), form_item_input, tab_recurring_schedule_column1 );\n\n\t\t// Start Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'start_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Start Date' ), form_item_input, tab_recurring_schedule_column1, '', null );\n\n\t\t// End Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'end_date' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tvar label = $( '<span class=\\'widget-right-label\\'>' + $.i18n._( '(Leave blank for no end date)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'End Date' ), form_item_input, tab_recurring_schedule_column1, '', widgetContainer );\n\n\t\t// Display Weeks\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'display_weeks', width: 20 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Display Weeks' ), form_item_input, tab_recurring_schedule_column1, '', null );\n\n\t\tif ( ( Global.getProductEdition() >= 15 ) ) {\n\t\t\t// Auto-Punch\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_input.TCheckbox( { field: 'auto_fill' } );\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\t\tlabel = $( '<span class=\\'widget-right-label t-checkbox-padding-left\\'> (' + $.i18n._( 'Punches employees in/out automatically' ) + ')</span>' );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\twidgetContainer.append( label );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Auto-Punch' ), form_item_input, tab_recurring_schedule_column1, '', widgetContainer );\n\t\t}\n\n\t\t// Employees\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tvar default_args = {};\n\t\tif ( ( Global.getProductEdition() >= 15 ) ) {\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tallow_multiple_selection: true,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_any: true,\n\t\t\t\tfield: 'user',\n\t\t\t\tcustom_first_label: Global.empty_item,\n\t\t\t\taddition_source_function: function( target, source_data ) {\n\n\t\t\t\t\tif ( !source_data ) {\n\t\t\t\t\t\treturn source_data;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar first_item = form_item_input.createItem( TTUUID.zero_id, Global.open_item );\n\t\t\t\t\tsource_data.unshift( first_item );\n\t\t\t\t\treturn source_data;\n\n\t\t\t\t},\n\t\t\t\tadded_items: [\n\t\t\t\t\t{ value: TTUUID.zero_id, label: Global.open_item }\n\t\t\t\t]\n\n\t\t\t} );\n\n\t\t\tdefault_args.permission_section = 'recurring_schedule';\n\t\t\tform_item_input.setDefaultArgs( default_args );\n\t\t} else {\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tallow_multiple_selection: true,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_any: true,\n\t\t\t\tcustom_first_label: Global.empty_item,\n\t\t\t\tfield: 'user'\n\t\t\t} );\n\t\t\tdefault_args.permission_section = 'recurring_schedule';\n\t\t\tform_item_input.setDefaultArgs( default_args );\n\t\t}\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employees' ), form_item_input, tab_recurring_schedule_column1, '', null, true );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Template' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'recurring_schedule_template_control_id',\n\t\t\t\tlayout_name: 'global_recurring_template_control',\n\t\t\t\tapi_class: TTAPI.APIRecurringScheduleTemplateControl,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\taddition_source_function: this.onEmployeeSourceCreate,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 1,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'BranchView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'DepartmentView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tonEmployeeSourceCreate( target, source_data ) {\n\n\t\tif ( Global.getProductEdition() <= 10 ) {\n\t\t\treturn source_data;\n\t\t}\n\n\t\tvar display_columns = target.getDisplayColumns();\n\t\tvar first_item = {};\n\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\tfirst_item.id = TTUUID.zero_id;\n\t\t\tfirst_item[content.name] = Global.open_item;\n\n\t\t\treturn false;\n\t\t} );\n\n\t\t//Error: Object doesn't support property or method 'unshift' in /interface/html5/line 6953\n\t\tif ( !source_data || $.type( source_data ) !== 'array' ) {\n\t\t\tsource_data = [];\n\t\t}\n\t\tsource_data.unshift( first_item );\n\n\t\treturn source_data;\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Recurring<br>Templates' ),\n\t\t\t\t\tid: ContextMenuIconName.recurring_template,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.recurring_template\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Schedules' ),\n\t\t\t\t\tid: ContextMenuIconName.schedule,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.schedule\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.recurring_template:\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//set tab 0 visible after all data set done. This be hide when init edit view data\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\t//Do not show the employee dropdown for mass edit, because that does not make sense.\n\t\t\tthis.detachElement( 'user' );\n\t\t} else {\n\t\t\tthis.attachElement( 'user' );\n\t\t}\n\t}\n\n\tparseToUserId( id ) {\n\t\tif ( !id ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tid = id.toString();\n\n\t\tif ( id.indexOf( '_' ) > 0 ) {\n\t\t\treturn id.split( '_' )[1];\n\t\t}\n\n\t\treturn id;\n\t}\n\n\tparseToRecordId( id ) {\n\n\t\tif ( !id ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tid = id.toString();\n\n\t\tif ( id.indexOf( '_' ) > 0 ) {\n\t\t\treturn id.split( '_' )[0];\n\t\t}\n\n\t\treturn id;\n\t}\n\n\tuniformVariable( records ) {\n\t\trecords.id = this.parseToRecordId( records.id );\n\n\t\treturn records;\n\t}\n\n\t/*\n \t* Common functions used by view and edit onclick logic\n \t*/\n\n\tprocessAPICallbackResult( result_data ) {\n\t\tvar composite_id = this.getCurrentSelectedRecord();\n\t\tvar user_id = this.parseToUserId( composite_id );\n\n\t\tif ( !result_data ) {\n\t\t\tresult_data = [];\n\t\t}\n\t\tvar index = 0;\n\n\t\tfor ( var i = 0; i < result_data.length; i++ ) {\n\t\t\t//FIXES: js error id is undefined.\n\t\t\t//weird because id is always set as a filter. we don't need it in this if.\n\t\t\t//if ( result_data[i].id == id && result_data[i].user_id == user_id ) {\n\t\t\tif ( result_data[i].user_id == user_id ) {\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t}\n\t\tresult_data[index].id = composite_id; // Copied from edit in #2644, not needed in view, but test if actually used in edit. testing shows no errors.\n\n\t\treturn [result_data[index]]; // Wrapped in array as BaseViewController.handleViewAPICallbackResult() pulls off the first record after getting this result back.\n\t}\n\n\tgetAPIFilters() {\n\t\tvar composite_id = this.getCurrentSelectedRecord();\n\t\tvar record_id = this.parseToRecordId( composite_id );\n\n\t\tvar filter = {};\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = [record_id];\n\n\t\treturn filter;\n\t}\n\n\tonMassEditClick() {\n\n\t\tvar $this = this;\n\t\t$this.is_add = false;\n\t\t$this.is_viewing = false;\n\t\t$this.is_mass_editing = true;\n\t\tLocalCacheData.current_doing_context_action = 'mass_edit';\n\t\tvar filter = {};\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tthis.mass_edit_record_ids = [];\n\n\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t$this.mass_edit_record_ids.push( value );\n\t\t} );\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.mass_edit_record_ids;\n\n\t\tthis.api['getCommon' + this.api.key_name + 'Data']( filter, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( result_data.id ) {\n\t\t\t\t\t$this.onEditClick( result_data.id );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$this.openEditView();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\t$this.api['getOptions']( 'unique_columns', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.unique_columns = result.getResult();\n\t\t\t\t\t\t$this.api['getOptions']( 'linked_columns', {\n\t\t\t\t\t\t\tonResult: function( result1 ) {\n\t\t\t\t\t\t\t\t$this.linked_columns = result1.getResult();\n\n\t\t\t\t\t\t\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\t\t\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$this.current_edit_record = result_data;\n\t\t\t\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetCopyAsNewFilter( filter ) {\n\t\tvar old_selected_id = filter.filter_data.id[0];\n\t\tfilter.filter_data.id = [this.parseToRecordId( old_selected_id )];\n\t\treturn filter;\n\t}\n\n\tonCopyClick() {\n\t\tvar $this = this;\n\t\tvar copyIds = [];\n\t\t$this.is_add = false;\n\t\tif ( $this.edit_view ) {\n\t\t\tcopyIds.push( $this.current_edit_record.id );\n\t\t\tif ( this.is_changed ) {\n\t\t\t\tTAlertManager.showConfirmAlert( Global.modify_alert_message, null, function( flag ) {\n\t\t\t\t\tif ( flag === true ) {\n\t\t\t\t\t\t$this.is_changed = false;\n\t\t\t\t\t\t$this._continueDoCopy( copyIds );\n\t\t\t\t\t}\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t$this._continueDoCopy( copyIds );\n\t\t\t}\n\t\t} else {\n\t\t\tvar ids = $this.getGridSelectIdArray().slice();\n\t\t\tfor ( var i = 0; i < ids.length; i++ ) {\n\t\t\t\tvar record_id = ids[i].split( '_' )[0];\n\t\t\t\tcopyIds.push( record_id );\n\t\t\t}\n\t\t\t$this._continueDoCopy( copyIds );\n\t\t}\n\t}\n\n\tgetDeleteSelectedRecordId() {\n\t\tvar retval = {};\n\t\tif ( this.edit_view ) {\n\t\t\tretval[this.parseToRecordId( this.current_edit_record.id )] = [this.parseToUserId( this.current_edit_record.id )];\n\t\t} else {\n\t\t\tvar grid_selected_id_array = this.getGridSelectIdArray().slice();\n\t\t\tfor ( var i = 0; i < grid_selected_id_array.length; i++ ) {\n\t\t\t\tvar record_id = this.parseToRecordId( grid_selected_id_array[i] );\n\t\t\t\tvar user_id = this.parseToUserId( grid_selected_id_array[i] );\n\n\t\t\t\tif ( retval[record_id] ) {\n\t\t\t\t\tretval[record_id].push( user_id );\n\t\t\t\t} else {\n\t\t\t\t\tretval[record_id] = [user_id];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn retval;\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.schedule:\n\n\t\t\t\tvar filter = { filter_data: {} };\n\t\t\t\tvar selected_item = this.getSelectedItem();\n\t\t\t\tvar include_users = null;\n\t\t\t\tvar now_date = new Date();\n\n\t\t\t\tif ( !Global.isSet( selected_item.user_id ) ) {\n\n\t\t\t\t\tvar temp_filter = {};\n\t\t\t\t\ttemp_filter.filter_data = {};\n\t\t\t\t\ttemp_filter.filter_data.id = [selected_item.id];\n\t\t\t\t\ttemp_filter.filter_columns = { user_id: true };\n\n\t\t\t\t\tthis.api['get' + this.api.key_name]( temp_filter, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\t\t\tinclude_users = [result_data.user_id];\n\n\t\t\t\t\t\t\tfilter.filter_data.include_user_ids = { value: include_users };\n\t\t\t\t\t\t\tfilter.select_date = now_date.format();\n\t\t\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Recurring Schedules' ), window.location.href );\n\t\t\t\t\t\t\tIndexViewController.goToView( 'Schedule', filter );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\tinclude_users = [selected_item.user_id];\n\t\t\t\t\tfilter.filter_data.include_user_ids = { value: include_users };\n\t\t\t\t\tfilter.select_date = now_date.format();\n\n\t\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Recurring Schedules' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'Schedule', filter );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.recurring_template:\n\n\t\t\t\tfilter = { filter_data: {} };\n\t\t\t\tselected_item = this.getSelectedItem();\n\n\t\t\t\tif ( !Global.isSet( selected_item.recurring_schedule_template_control_id ) ) {\n\n\t\t\t\t\ttemp_filter = {};\n\t\t\t\t\ttemp_filter.filter_data = {};\n\t\t\t\t\ttemp_filter.filter_data.id = [this.parseToRecordId( selected_item.id )];\n\n\t\t\t\t\tthis.api['get' + this.api.key_name]( temp_filter, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\t\t\tfilter.filter_data.id = [result_data.recurring_schedule_template_control_id];\n\n\t\t\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Recurring Schedules' ), window.location.href );\n\t\t\t\t\t\t\tIndexViewController.goToView( 'RecurringScheduleTemplateControl', filter );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\tfilter.filter_data.id = [selected_item.recurring_schedule_template_control_id];\n\n\t\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Recurring Schedules' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'RecurringScheduleTemplateControl', filter );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\tthis.onExportClick( 'exportRecurringScheduleControl' );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetRightArrowClickSelectedIndex( selected_index ) {\n\t\tif ( selected_index == 0 ) {\n\t\t\t//selected_index is wrong because of the underscore in id.\n\t\t\tvar source_data = this.navigation.getSourceData();\n\t\t\tvar hash_arr = window.location.hash.split( '&' );\n\t\t\tvar hash_id = '0_0';\n\t\t\tfor ( var i = 0; i < hash_arr.length; i++ ) {\n\t\t\t\tif ( hash_arr[i].indexOf( 'id=' ) != -1 ) {\n\t\t\t\t\thash_id = hash_arr[i].substring( 3 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( hash_id.indexOf( '_' ) != -1 ) {\n\t\t\t\tfor ( var i = 0; i < source_data.length; i++ ) {\n\t\t\t\t\tif ( hash_id == source_data[i].id ) {\n\t\t\t\t\t\tselected_index = i;\n\t\t\t\t\t\tbreak; //exit loop\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn selected_index;\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.recurring_template:\n\t\t\t\t\tthis.setDefaultMenuRecurringTemplateIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setDefaultMenuScheduleIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetDefaultMenuRecurringTemplateIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuScheduleIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( !PermissionManager.checkTopLevelPermission( 'Schedule' ) || this.edit_only_mode ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsearch( set_default_menu, page_action, page_number, callBack ) {\n\n\t\tif ( !Global.isSet( set_default_menu ) ) {\n\t\t\tset_default_menu = true;\n\t\t}\n\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_columns = this.getFilterColumnsFromDisplayColumns();\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\n\t\tif ( this.pager_data ) {\n\n\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\tif ( page_action === 'next' ) {\n\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t} else {\n\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tswitch ( page_action ) {\n\t\t\t\t\tcase 'next':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'last':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.previous_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'start':\n\t\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.last_page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'go_to':\n\t\t\t\t\t\tfilter.filter_page = page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.current_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\n\t\tif ( this.sub_view_mode && this.parent_key ) {\n\t\t\tthis.select_layout.data.filter_data[this.parent_key] = this.parent_value;\n\t\t}\n\t\t//If sub view controller set custom filters, get it\n\t\tif ( Global.isSet( this.getSubViewFilter ) ) {\n\n\t\t\tthis.select_layout.data.filter_data = this.getSubViewFilter( this.select_layout.data.filter_data );\n\n\t\t}\n\n\t\t//select_layout will not be null, it's set in setSelectLayout function\n\t\tfilter.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\tfilter.filter_sort = this.select_layout.data.filter_sort;\n\n\t\tthis.last_select_ids = this.getGridSelectIdArray();\n\n\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t} else {\n\t\t\t\t\t$this.removeNoResultCover();\n\t\t\t\t\tif ( Global.isSet( $this.__createRowId ) ) {\n\t\t\t\t\t\tresult_data = $this.__createRowId( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_data = Global.formatGridData( result_data, $this.api.key_name );\n\t\t\t\t}\n\t\t\t\t//Set Page data to widget, next show display info when setDefault Menu\n\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\t//CLick to show more mode no need this step\n\t\t\t\tif ( LocalCacheData.paging_type !== 0 ) {\n\t\t\t\t\t$this.paging_widget.setPagerData( $this.pager_data );\n\t\t\t\t\t$this.paging_widget_2.setPagerData( $this.pager_data );\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.paging_type === 0 && page_action === 'next' ) {\n\t\t\t\t\tvar current_data = $this.grid.getGridParam( 'data' );\n\t\t\t\t\tresult_data = current_data.concat( result_data );\n\t\t\t\t}\n\n\t\t\t\t///Override to reset id, because id of each record is the same if employess assigned to this id.\n\t\t\t\tvar len = result_data.length;\n\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar item = result_data[i];\n\n\t\t\t\t\titem.id = item.id + '_' + item.user_id;\n\t\t\t\t}\n\n\t\t\t\tif ( $this.grid ) {\n\t\t\t\t\t$this.grid.setData( result_data );\n\n\t\t\t\t\t$this.reSelectLastSelectItems();\n\t\t\t\t}\n\n\t\t\t\t$this.setGridCellBackGround(); //Set cell background for some views\n\n\t\t\t\tProgressBar.closeOverlay(); //Add this in initData\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.setDefaultMenu( true );\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\tif ( !$this.pager_data || $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'none' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'block' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( callBack ) {\n\t\t\t\t\tcallBack( result );\n\t\t\t\t}\n\n\t\t\t\t// when call this from save and new result, we don't call auto open, because this will call onAddClick twice\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.autoOpenEditViewIfNecessary();\n\t\t\t\t}\n\n\t\t\t\t$this.searchDone();\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.user_id = true;\n\n\t\treturn this._getFilterColumnsFromDisplayColumns( column_filter, true );\n\t}\n\n\tsetEditMenu() {\n\n\t\tthis.selectContextMenu();\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\tswitch ( id ) {\n\t\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setEditMenuAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setEditMenuMassEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setEditMenuCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setEditMenuDeleteIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setEditMenuDeleteAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setEditMenuSaveAndContinueIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setEditMenuSaveAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setEditMenuSaveAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setEditMenuSaveAndCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setEditMenuCopyAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.recurring_template:\n\t\t\t\t\tthis.setEditMenuRecurringTemplateIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setEditMenuScheduleIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetEditMenuRecurringTemplateIcon( context_btn, pId ) {\n\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuScheduleIcon( context_btn, pId ) {\n\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\n\t}\n}\n"],"sourceRoot":""}