{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/awesomebox/AComboBox.js"],"names":["$","jQuery","fn","AComboBox","options","validation_field","$this","opts","extend","defaults","label_span","a_dropdown","layout_name","pager_data","api_class","api","allow_multiple_selection","do_not_get_real_data","set_any","set_empty","set_special_empty","set_open","set_default","set_all","select_item","select_items","field","user_generic_api","display_columns","possible_display_columns","list_view_default_columns","display_columns_in_columnEditor","all_columns","source_data","id","get_real_data_when_open","set_select_items_when_set_data_provider","a_dropdown_div","is_mouse_over","row_per_page","show_all","Global","addCss","error_tip_box","show_search_inputs","tree_mode","on_tree_grid_row_select","key","error_string","this","total_header_width","unselect_grid_search_result","quick_search_timer","extendDataProcessWhenSearch","check_box","enabled","allow_drag_to_order","navigation_mode","args_from_saved_layout","default_args","cached_search_inputs_filter","cached_select_grid_search_inputs_filter","cached_sort_filter","cached_selected_grid_sort_filter","navigation_mode_source_data_before_open","set_default_args_manually","addition_source_function","custom_key_name","setRealValueCallBack","custom_first_label","added_items","column_option_key","dontOpen","init_data_immediately","always_search_full_columns","quick_search_dic","quick_search_typed_keys","current_open_page","always_include_columns","customSearchFilter","getCurrentOpenPage","getPagerData","getHeaderWidth","setKey","val","getDisplayColumns","getLayout","ALayoutCache","layout_dic","getAPI","getScriptName","getScriptNameByAPI","setCachedSortFilter","setCachedSelectedGridSortFilter","setCachedSearchInputsFilter","setCachedSelectGridSearchInputsFilter","setAllowMultipleSelection","length","getEnabled","setEnabled","addClass","hide","children","eq","text","i18n","_","removeClass","show","setCheckBox","checked","isChecked","setMassEditMode","insertBefore","change","trigger","remove","getItemByIndex","index","target_source_data","getSelectIndex","len","i","item","getNextSelectItemId","next_select_item","getSourceData","setErrorStyle","errStr","isWarning","showErrorTip","sec","isSet","loadWidgetByName","WidgetNamesDic","ERROR_TOOLTIP","ErrorTipBox","hasClass","hideErrorTip","clearErrorStyle","setField","getField","getValidationField","getValue","return_full_value","return_value","isArray","each","content","isString","type","push","TTUUID","not_exist_id","zero_id","setSourceData","createFirstItem","setValue","getStaticSourceData","getRowPerPage","setAllColumns","value","setDisplayColumnsForEditor","getAllColumns","getDisplayColumnsForEditor","setEmptyValueAndShowLoading","current_width","find","width","loading_label","setSelectItems","setSelectItem","getAllowMultipleSelection","getRealData","isUUID","parseInt","getLocalSelectItem","filter","filter_data","permission_section","onResult","result","result_data","getResult","getColumnFilter","column_filter","className","pay_period_schedule_id","policy_group_id","hire_date","termination_date","name","cleanDropDownValues","setSelectGridData","setLabel","setEmptyLabel","getRealSelectItemsFromSourceData","select_items_len","res","select_value","j","source_item","label_arr","Array","display_column_len","y","hidden","undefined","c_value","column","label","join","any_item","root_item","empty_item","default_item","open_item","first_item","hasOwnProperty","onColumnSettingSaveFromLayout","layout","is_default","data","layout_id","setUserGenericData","initColumns","onColumnSettingSave","seletedColumns","rowsPerPageNumber","select_columns_in_JSON","column_in_JSON","orderValue","TTAPI","APIUserGenericData","map","obj","getUserGenericData","filterBaseOnPossibleColumns","convertColumnsTojGridFormat","filter_sort","initSourceData","script","resData","columns_result_data","getOptions","async","buildColumnArray","saved_layout_result","deleted","saved_layout","slice","new_data","buildDisplayColumns","convertLayoutFilterToAPIFilter","dis_column","found","getId","updateSelectItem","new_item","getADropDown","onClose","e","target","Debug","Text","TTPromise","isPendingPromises","getSelectItems","getSelectItem","_id_","LocalCacheData","openAwesomeBox","isChanged","setTimeout","focus","selectNextItem","next_index","target_grid","select_index","keyCode","preventDefault","setIsChanged","onUnSelectGridDoubleClick","onSelectGridDoubleClick","clearTimeout","focus_target","String","fromCharCode","which","toLowerCase","trimmed_quick_search_typed_keys","trim","getFocusInSeletGrid","getSelectGrid","getUnSelectGrid","td","search_index","tds","grid","indexOf","unSelectAll","grid_data","getData","z","parents","attr","parent","gridScrollTop","gridScrollDown","selectAll","getIsMouseOver","onShowAll","isShowAll","args","buildUnSelectGridFilter","formatGridData","key_name","selected_items","x","setUnselectedGridData","setPagerData","filter_columns","filter_items_per_page","clone","getUnSelectGridMap","getUnSelectGridSortMap","second_parameter","selected_ids","exclude_id","buildSelectGridFilter","getSelectGridMap","getSelectGridSortMap","searchIsEmpty","inputs","onADropDownSearch","targetName","page_action","default_select_item","callBack","trigger_form_item_change","this_val","paging_type","filter_page","next_page","previous_page","last_page_number","current_page","focused_element","getUnSelectGridData","concat","showNoResultCover","removeNoResultCover","setSelectGridSearchResult","clearGridData","setSelectGridDragAble","api_display_columns","len1","buildDisplayColumnsForEditor","result_display_columns","getFirstItem","all_item","target_data","no_first_item","unshift","checkIfLayoutChanged","newDisplayColumns","display_column","setDefaultArgs","setDisPlayColumns","setPossibleDisplayColumns","default_columns","setRowPerPage","shouldInitColumns","createItem","addHideIdColumn","o","meta","focus_input","script_name","css","search_panel_model","is_static_width","$$this","setADropDownSelectValues","openADropDown","loadWidget","display_show_all","ADropDown","comboBox","search_input_filter","select_grid_search_input_filter","default_sort_filter","default_select_grid_sort_filter","display_column_settings","append","mouseenter","mouseleave","wait","setGridColumnsWidths","doNext","setRealSelectItems","tables","setUnSelectGridDragAble","bind","current_display_columns","current_row_per_page","setColumns","sort_by_array","sort_by_select_columns","sort_by_unselect_columns","dropdown_width","getBoxWidth","offset","left","bodyWidth","top","bodyHeight","index1","content1","sort","resolve","local_data","isEmpty","unbind","stopPropagation","add","click","current_open_sub_controller","edit_view","is_viewing","current_open_primary_controller","view_mode_message","mouseover","mouseout","getDefaultColumn"],"mappings":"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","file":"awesomebox-AComboBox.bundle.js?v=a9f3e16aa307a4a561a4","sourcesContent":["( function( $ ) {\n\n\t$.fn.AComboBox = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.AComboBox.defaults, options );\n\n\t\tvar label_span = null;\n\n\t\tvar a_dropdown = null;\n\n\t\tvar layout_name = '';\n\n\t\tvar pager_data = null; //use to reset pager data when open dropdown\n\n\t\tvar api_class = null;\n\n\t\tvar api = null; //Related TTAPI.API instance, use to get data\n\n\t\tvar default_columns = null;\t //Default coluns when no layout saved\n\n\t\tvar allow_multiple_selection = false;\n\n\t\tvar do_not_get_real_data = false; //Get full data when only pass id to select Value.\n\n\t\tvar set_any = false;\n\n\t\tvar set_empty = false;\n\n\t\tvar set_special_empty = false;\n\n\t\tvar set_open = false;\n\n\t\tvar set_default = false;\n\n\t\tvar set_all = false;\n\n\t\tvar select_item = null;\n\n\t\tvar select_items = null;\n\n\t\tvar field = '';\n\n\t\tvar validation_field;\n\n\t\tvar user_generic_api = null;\n\n\t\tvar display_columns = null; //Display columns in ADropDown in jGrid model format\n\n\t\tvar possible_display_columns = null; //Only these columns can be shown when init dispaly columns.\n\n\t\tvar list_view_default_columns = null; //Only these columns can be shown when init dispaly columns.\n\n\t\tvar display_columns_in_columnEditor = null; //Display columns in edit columns\n\n\t\tvar all_columns = null; // All columns when edit columns\n\n\t\tvar column_editor = null;\n\n\t\tvar source_data = null; // This will never change when search in search input. Set it back to dropdown every time when open\n\n\t\tvar id = '';\n\n\t\tvar get_real_data_when_open = false;\n\n\t\tvar set_select_items_when_set_data_provider = false;\n\n\t\tvar $this = null;\n\n\t\tvar a_dropdown_div = null;\n\n\t\tvar is_mouse_over = false;\n\n\t\tvar row_per_page = 0;\n\n\t\tvar show_all = false;\n\n\t\tvar args = null;\n\n\t\tGlobal.addCss( 'global/widgets/awesomebox/AComboBox.css' );\n\n\t\tvar show_search_inputs = false;\n\n\t\tvar tree_mode = false;\n\n\t\tvar on_tree_grid_row_select = false;\n\n\t\tvar key = 'id';\n\n\t\tvar error_string = '';\n\n\t\tvar error_tip_box;\n\n\t\t$this = this;\n\n\t\tvar mass_edit_mode = false;\n\n\t\tvar check_box = null;\n\n\t\tvar enabled = true;\n\n\t\tvar allow_drag_to_order = false;\n\n\t\tvar navigation_mode = false;\n\n\t\tvar args_from_saved_layout = null;\n\n\t\tvar default_args = null;\n\t\t//Use this in Navigation Mode, Keep search filter when open. Don't clean it in onClose if navigation_mode\n\t\t// Now we di this in both navigation and normal (2014/6/7)\n\t\tvar cached_search_inputs_filter = null;\n\n\t\tvar cached_select_grid_search_inputs_filter = null;\n\n\t\tvar cached_sort_filter = null; //Same as above\n\n\t\tvar cached_selected_grid_sort_filter = null; //Same as above\n\n\t\tvar script_name = '';\n\n\t\tvar navigation_mode_source_data_before_open = null;\n\n\t\tvar set_default_args_manually = false; //If set default args outside\n\n\t\tvar addition_source_function = null;\n\n\t\tvar custom_key_name = null;\n\n\t\tvar setRealValueCallBack = null; //Set real data call back function\n\n\t\tvar custom_first_label = null;\n\n\t\tvar added_items = null;\n\n\t\tvar column_option_key = 'columns';\n\n\t\t// set this when close, don't allow awesomebox open until 0.3 sec, this prevent awesomebox close in mousedown, and open in click.\n\t\tvar dontOpenTimer = null;\n\n\t\tvar dontOpen = false;\n\n\t\tvar total_header_width;\n\n\t\t//if init source data right after initcolumns complete\n\t\tvar init_data_immediately = false;\n\n\t\tvar unselect_grid_search_result;\n\n\t\t// don't do column filter base on display columns, use all instead\n\t\t//Use in report edit view. load saved report navigation\n\t\tvar always_search_full_columns = false;\n\n\t\t//Save what letter user current use to do the search\n\t\tvar quick_search_dic = {};\n\n\t\t//Save multi key typed when quick search\n\t\tvar quick_search_typed_keys = '';\n\n\t\tvar select_grid_search_result;\n\n\t\t//use to juedge if need to clear quick_search_typed_keys\n\t\tvar quick_search_timer;\n\n\t\tvar current_open_page = 1;\n\n\t\t//deal with result when doing dropdown search, TimesheetAuthorizationViewControl need this.\n\t\tvar extendDataProcessWhenSearch;\n\n\t\tvar always_include_columns = false;\n//\n//\t\t//Used for modify search result when doing Paging or Searching, For example, used in AccrualBalanceViewController to set correct ids\n//\t\tthis.customSearchResultHandler = null;\n\n\t\t//Used for modify search filter when open awesomebox or do search/sorting and paging. First used in Timehsheet absency_policy awesomebox\n\t\tthis.customSearchFilter = null;\n\n\t\tthis.getCurrentOpenPage = function() {\n\t\t\treturn current_open_page;\n\t\t};\n\n\t\tthis.getPagerData = function() {\n\t\t\treturn pager_data;\n\t\t};\n\n\t\tthis.getHeaderWidth = function() {\n\t\t\treturn total_header_width;\n\t\t};\n\n\t\tthis.setKey = function( val ) {\n\t\t\tkey = val;\n\t\t};\n\n\t\tthis.getDisplayColumns = function() {\n\t\t\treturn display_columns;\n\t\t};\n\n\t\tthis.getLayout = function() {\n\n\t\t\treturn ALayoutCache.layout_dic[layout_name];\n\t\t};\n\n\t\tthis.getAPI = function() {\n\t\t\treturn api;\n\t\t};\n\n\t\tthis.getScriptName = function() {\n\n\t\t\tscript_name = Global.getScriptNameByAPI( api_class );\n\n\t\t\treturn script_name;\n\t\t};\n\n\t\tthis.setCachedSortFilter = function( val ) {\n\t\t\tcached_sort_filter = val;\n\t\t};\n\n\t\tthis.setCachedSelectedGridSortFilter = function( val ) {\n\t\t\tcached_selected_grid_sort_filter = val;\n\t\t};\n\n\t\tthis.setCachedSearchInputsFilter = function( val ) {\n\t\t\tcached_search_inputs_filter = val;\n\t\t};\n\n\t\tthis.setCachedSelectGridSearchInputsFilter = function( val ) {\n\t\t\tcached_select_grid_search_inputs_filter = val;\n\t\t};\n\n\t\tthis.setAllowMultipleSelection = function( val ) {\n\t\t\tallow_multiple_selection = val;\n\n\t\t\tif ( val == true ) {\n\t\t\t\tif ( select_item ) {\n\t\t\t\t\tselect_items = [select_item];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( select_items && select_items.length > 0 ) {\n\t\t\t\t\tselect_item = select_items[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\t$this.addClass( 'a-combobox-readonly' );\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.hide();\n\t\t\t\t}\n\t\t\t\tif ( !this.children().eq( 1 ).text() ) {\n\t\t\t\t\tthis.children().eq( 1 ).text( $.i18n._( 'N/A' ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$this.removeClass( 'a-combobox-readonly' );\n\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.show();\n\t\t\t\t}\n\t\t\t\tif ( !this.children().eq( 1 ).text() === $.i18n._( 'N/A' ) ) {\n\t\t\t\t\tthis.children().eq( 1 ).text( '' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tif ( check_box ) {\n\t\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t\t}\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getItemByIndex = function( index ) {\n\t\t\tvar target_source_data;\n\n\t\t\tif ( navigation_mode && !source_data ) {\n\t\t\t\ttarget_source_data = navigation_mode_source_data_before_open;\n\t\t\t} else {\n\t\t\t\ttarget_source_data = source_data;\n\n\t\t\t\t//Only for single mode\n\t\t\t\tif ( unselect_grid_search_result && unselect_grid_search_result.length > 0 ) {\n\t\t\t\t\ttarget_source_data = unselect_grid_search_result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !target_source_data ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar result = null;\n\t\t\tresult = target_source_data[index];\n\t\t\treturn result;\n\n\t\t};\n\n\t\tthis.getSelectIndex = function() {\n\n\t\t\tvar target_source_data;\n\n\t\t\tif ( navigation_mode && !source_data ) {\n\t\t\t\ttarget_source_data = navigation_mode_source_data_before_open;\n\t\t\t} else {\n\t\t\t\ttarget_source_data = source_data;\n\n\t\t\t\t//Only for single mode\n\t\t\t\tif ( unselect_grid_search_result && unselect_grid_search_result.length > 0 ) {\n\t\t\t\t\ttarget_source_data = unselect_grid_search_result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !select_item || !target_source_data ) { // can't get correct index if source_data is null\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tvar len = target_source_data.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar item = target_source_data[i];\n\t\t\t\tif ( select_item[key] === item[key] ) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t};\n\n\t\tthis.getNextSelectItemId = function() {\n\t\t\tvar retval = null;\n\t\t\t// This function is commonly used by edit views to get the id of the next record from the navigation box, such as during Delete&Next\n\t\t\tvar next_select_item = this.getSelectIndex() + 1;\n\t\t\tvar source_data = this.getSourceData();\n\t\t\tif ( source_data && next_select_item < source_data.length ) {\n\t\t\t\tretval = this.getItemByIndex( next_select_item );\n\t\t\t} else {\n\t\t\t\tretval = null;\n\t\t\t}\n\n\t\t\treturn retval;\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\t$( this ).addClass( 'a-warning-tip' );\n\t\t\t} else {\n\t\t\t\t$( this ).addClass( 'a-error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( $( this ).hasClass( 'a-warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\t\t\t$( this ).removeClass( 'a-error-tip' );\n\t\t\t$( this ).removeClass( 'a-warning-tip' );\n\t\t\terror_string = '';\n\t\t\tthis.hideErrorTip();\n\t\t};\n\n\t\tthis.setField = function( val ) {\n\t\t\tfield = val;\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValidationField = function() {\n\t\t\treturn validation_field;\n\t\t};\n\n\t\tthis.getValue = function( return_full_value ) {\n\t\t\tvar return_value = null;\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tif ( return_full_value ) {\n\t\t\t\t\treturn_value = select_items;\n\t\t\t\t} else {\n\t\t\t\t\treturn_value = [];\n\t\t\t\t\tif ( Global.isArray( select_items ) ) {\n\t\t\t\t\t\t$.each( select_items, function( index, content ) {\n\t\t\t\t\t\t\t// In 1891, one value in select items is null\n\t\t\t\t\t\t\tif ( content ) {\n\t\t\t\t\t\t\t\tif ( Global.isString( content ) || $.type( content ) === 'number' ) {\n\t\t\t\t\t\t\t\t\treturn_value.push( content );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn_value.push( content[key] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tif ( select_items.length === 0 ) {\n\t\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\t\treturn_value.push( TTUUID.not_exist_id ); // In fact, if the columns can be multiple selected. and no have any options selected, it's should be return an array.\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\treturn_value.push( TTUUID.not_exist_id ); // In fact, if the columns can be multiple selected. and no have any options selected, it's should be return an array.\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Return false when no selected value\n\t\t\t\t\tif ( return_value.length === 0 ) {\n\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_empty ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_special_empty ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.zero_id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( return_full_value ) {\n\t\t\t\t\treturn_value = select_item;\n\t\t\t\t} else {\n\t\t\t\t\tif ( select_item ) {\n\n\t\t\t\t\t\tif ( Global.isSet( select_item[key] ) ) {\n\t\t\t\t\t\t\treturn_value = select_item[key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn_value = select_item;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\treturn TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_empty ) {\n\t\t\t\t\t\t\treturn TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_special_empty ) {\n\t\t\t\t\t\t\treturn TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\t\t\treturn TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\t\t\treturn TTUUID.zero_id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn return_value;\n\t\t};\n\n\t\tthis.setSourceData = function( val ) {\n\t\t\tsource_data = val;\n\n\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\tif ( val && val.length > 0 ) {\n\t\t\t\t\tif ( set_empty || set_any || set_default || set_open || set_all || set_special_empty ) {\n\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( !select_item ) {\n\t\t\t\t\t\t\t//Related to 1825, directly use item not item id, since use item id willl\n\t\t\t\t\t\t\t// trigger getReal data which case problems and not necessary.\n\t\t\t\t\t\t\tthis.setValue( val[0] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( val && val.length > 0 ) {\n\t\t\t\t\tif ( set_all ) {\n\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( set_select_items_when_set_data_provider && source_data ) {\n\n\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\tthis.setValue( select_items );\n\t\t\t\t} else {\n\t\t\t\t\tthis.setValue( select_item );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.getSourceData = function() {\n\n\t\t\tif ( navigation_mode && navigation_mode_source_data_before_open ) {\n\t\t\t\treturn navigation_mode_source_data_before_open;\n\t\t\t}\n\n\t\t\t//if done search, return the result o\n\t\t\tif ( unselect_grid_search_result ) {\n\t\t\t\treturn unselect_grid_search_result;\n\t\t\t}\n\n\t\t\treturn source_data;\n\t\t};\n\n\t\t//Always return source data only\n\t\tthis.getStaticSourceData = function() {\n\t\t\treturn source_data;\n\t\t};\n\n\t\tthis.getRowPerPage = function() {\n\t\t\treturn row_per_page;\n\t\t};\n\n\t\tthis.setAllColumns = function( value ) {\n\t\t\tall_columns = value;\n\t\t};\n\n\t\tthis.setDisplayColumnsForEditor = function( value ) {\n\t\t\tdisplay_columns_in_columnEditor = value;\n\t\t};\n\n\t\tthis.getAllColumns = function() {\n\n\t\t\tif ( possible_display_columns ) {\n\t\t\t\treturn possible_display_columns;\n\t\t\t}\n\t\t\treturn all_columns;\n\t\t};\n\n\t\tthis.getDisplayColumnsForEditor = function() {\n\t\t\treturn display_columns_in_columnEditor;\n\t\t};\n\n\t\tthis.setEmptyValueAndShowLoading = function() {\n\t\t\tvar current_width = $this.find( '.a-combobox-label' ).width();\n\t\t\tthis.setValue( null );\n\t\t\tlabel_span.text( Global.loading_label );\n\t\t\t$this.find( '.a-combobox-label' ).width( current_width + 'px' );\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\t// Related to 1891, one case is value is [null] in vacatuon_psea_ids in ROE edit view\n\t\t\tif ( _.isArray( val ) && val.length === 1 && val[0] === null ) {\n\t\t\t\tval = null;\n\t\t\t}\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tif ( !val || $.type( val ) === 'array' ) {\n\t\t\t\t\tthis.setSelectItems( val );\n\t\t\t\t} else if ( $.type( val ) === 'string' || $.type( val ) === 'number' ) {\n\t\t\t\t\tthis.setSelectItems( [val] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( $.type( val ) === 'array' && val.length > 0 ) {\n\t\t\t\t\tval = val[0];\n\t\t\t\t}\n\t\t\t\t//If no default value set first item as default select item\n\t\t\t\t//#1187 - this fix might cause problems but is needed to allow proper selection of default value when zero_uuid is selected.\n\t\t\t\tif ( !val || val == TTUUID.zero_id ) {\n\t\t\t\t\t// if ( !val ) {\n\t\t\t\t\tif ( !set_empty && !set_any && !set_default && !set_open && !set_all && !set_special_empty && source_data && source_data.length > 0 ) {\n\t\t\t\t\t\tthis.setValue( source_data[0] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setSelectItem( null );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.setSelectItem( val );\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getAllowMultipleSelection = function() {\n\t\t\treturn allow_multiple_selection;\n\t\t};\n\n\t\t//Get full data from api, if get a id\n\t\tthis.getRealData = function( val ) {\n\n\t\t\tif ( Global.isSet( api_class ) ) {\n\n\t\t\t\t//Try api awesomebox first\n\t\t\t\tif ( ( !TTUUID.isUUID( val ) && parseInt( val ) <= 0 ) || val == TTUUID.zero_id || val == TTUUID.not_exist_id ) {\n\n\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t$this.setValue( [this.getLocalSelectItem( val )] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.setValue( this.getLocalSelectItem( val ) );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar filter = {};\n\t\t\t\t//id is a public member of this class which contains the field id, so we wrapped 'id' in quotes here to show it's not the public member from above.\n\t\t\t\tfilter.filter_data = { 'id': val };\n\n\t\t\t\t//#2289 - If you have an employee who can view subordinate punches but not view subordinate employee, you will see permission denied without sending the permission section.\n\t\t\t\tif ( default_args && Global.isSet( default_args.permission_section ) ) {\n\t\t\t\t\tfilter.permission_section = default_args.permission_section;\n\t\t\t\t}\n\n\t\t\t\tif ( this.customSearchFilter ) {\n\t\t\t\t\tfilter = this.customSearchFilter( filter );\n\t\t\t\t}\n\n\t\t\t\tlabel_span.text( Global.loading_label );\n\n\t\t\t\tapi['get' + custom_key_name]( filter, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\n\t\t\t\t\t\t\tvar value;\n\t\t\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t\t\tvalue = result_data;\n\t\t\t\t\t\t\t\t$this.setValue( result_data );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = result_data[0];\n\t\t\t\t\t\t\t\t$this.setValue( result_data[0] );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\t\t\tsetRealValueCallBack( value );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tif ( source_data && source_data.length > 0 ) {\n\t\t\t\t\t$.each( source_data, function( index, content ) {\n\n\t\t\t\t\t\t//Make the id match when val is string or number. use == instead ===.\n\t\t\t\t\t\tif ( content[key] == val ) {\n\n\t\t\t\t\t\t\t$this.setValue( content );\n\t\t\t\t\t\t\treturn false; //This is a boolean false, not an integer or UUID.\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\tset_select_items_when_set_data_provider = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getColumnFilter = function() {\n\n\t\t\tif ( always_search_full_columns ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tvar column_filter = {};\n\t\t\tcolumn_filter.is_owner = true;\n\t\t\tcolumn_filter.id = true;\n\t\t\tcolumn_filter.is_child = true;\n\t\t\tcolumn_filter.user_id = true;\n\t\t\tcolumn_filter.first_name = true; //always contains this if it exists\n\t\t\tcolumn_filter.last_name = true; //always contains this if it exists\n\t\t\tcolumn_filter.object_type_id = true;\n\t\t\tcolumn_filter.manual_id = true;\n\t\t\tcolumn_filter.default_item_id = true;\n\t\t\tcolumn_filter.accrual_policy_id = true;\n\t\t\tcolumn_filter.pay_code_id = true;\n\t\t\tcolumn_filter.start_date = true;\n\t\t\tcolumn_filter.end_date = true;\n\t\t\tcolumn_filter.pay_period_id = true;\n\n\t\t\tif ( api && api.className === 'APIUser' ) {\n\t\t\t\tcolumn_filter.pay_period_schedule_id = true;\n\t\t\t\tcolumn_filter.policy_group_id = true;\n\t\t\t\tcolumn_filter.hire_date = true;\n\t\t\t\tcolumn_filter.termination_date = true;\n\t\t\t}\n\n\t\t\t$.each( display_columns, function( key, item ) {\n\t\t\t\tcolumn_filter[item.name] = true;\n\t\t\t} );\n\n\t\t\tif ( always_include_columns && always_include_columns.length > 0 ) {\n\t\t\t\t$.each( always_include_columns, function( key, item ) {\n\t\t\t\t\tcolumn_filter[item] = true;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn column_filter;\n\t\t};\n\n\t\tthis.cleanDropDownValues = function() {\n\t\t\tif ( a_dropdown ) {\n\t\t\t\ta_dropdown.setSelectGridData( [] );\n\t\t\t}\n\t\t};\n\n\t\tthis.setSelectItem = function( val ) {\n\t\t\t//When setting select_item, clear out the select_items (plural) variable so it doesn't contain old data if the dropdown box happens to get switched back to it.\n\t\t\tselect_items = null;\n\n\t\t\tselect_item = val;\n\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\tthis.setLabel( val );\n\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\tsetRealValueCallBack( false );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( $.type( val ) === 'string' || $.type( val ) === 'number' ) {\n\t\t\t\tthis.getRealData( val );\n\t\t\t} else {\n\t\t\t\tthis.setLabel();\n\t\t\t}\n\t\t};\n\n\t\tthis.setSelectItems = function( val ) {\n\t\t\t//When setting select_items (plural), clear out the select_item variable so it doesn't contain old data if the dropdown box happens to get switched back to it.\n\t\t\tselect_item = null;\n\n\t\t\tif ( !val || val.length < 1 ) {\n\t\t\t\tthis.setEmptyLabel();\n\t\t\t\tselect_items = null;\n\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\tsetRealValueCallBack( false );\n\t\t\t\t}\n\n\t\t\t\tthis.cleanDropDownValues();\n\n\t\t\t\treturn;\n\t\t\t} else if ( val == TTUUID.not_exist_id && set_any ) {\n\t\t\t\tselect_items = val;\n\t\t\t\tthis.setEmptyLabel();\n\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\tsetRealValueCallBack( false );\n\t\t\t\t}\n\t\t\t\tthis.cleanDropDownValues();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselect_items = val;\n\n\t\t\tvar len = val.length;\n\n\t\t\tif ( len > 1 ) {\n\t\t\t\tvar item = val[0];\n\t\t\t\tif ( $.type( item ) === 'string' || $.type( item ) === 'number' ) {\n\t\t\t\t\tif ( !do_not_get_real_data ) {\n\t\t\t\t\t\tget_real_data_when_open = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setLabel();\n\n\t\t\t} else {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\titem = val[i];\n\t\t\t\t\tif ( $.type( item ) === 'string' ||\n\t\t\t\t\t\t$.type( item ) === 'number' ) {\n\t\t\t\t\t\tif ( !do_not_get_real_data ) {\n\t\t\t\t\t\t\tthis.getRealData( item );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( !source_data ) {\n\t\t\t\t\t\t\t\tset_select_items_when_set_data_provider = true;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//set select items\twhich only contains value to select items have label and value\n\t\t\t\t\t\t\tthis.setSelectItems( this.getRealSelectItemsFromSourceData() );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor ( var key in item ) {\n\t\t\t\t\t\t\t//speical handle for sort field\n\t\t\t\t\t\t\tif ( item[key] === 'asc' || item[key] === 'desc' ) {\n\t\t\t\t\t\t\t\tif ( !source_data ) {\n\t\t\t\t\t\t\t\t\tset_select_items_when_set_data_provider = true;\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setLabel();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getRealSelectItemsFromSourceData = function() {\n\t\t\tvar len = source_data.length;\n\t\t\tvar select_items_len = select_items ? select_items.length : 0; // Fix for JS Exception if select_items is null.\n\t\t\tvar res = [];\n\n\t\t\tfor ( var i = 0; i < select_items_len; i++ ) {\n\t\t\t\tvar select_value = select_items[i];\n\t\t\t\tfor ( var j = 0; j < len; j++ ) {\n\t\t\t\t\tvar source_item = source_data[j];\n\n\t\t\t\t\t//Could be string or number, use ==\n\t\t\t\t\tif ( select_value == source_item[key] ) {\n\t\t\t\t\t\tres.push( source_item );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn res;\n\t\t};\n\n\t\tthis.setLabel = function() {\n\t\t\tvar label_arr = Array();\n\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tif ( !select_items ) {\n\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar len = select_items.length;\n\t\t\t\tif ( len === 1 ) {\n\n\t\t\t\t\tvar display_column_len = display_columns.length;\n\t\t\t\t\tfor ( y = 0; y < display_column_len; y++ ) {\n\n\t\t\t\t\t\tif ( display_columns[y].hidden === true ) { //Hidden field for jGgrid, usually is id\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( layout_name === 'global_sort_columns' && select_items[0][display_columns[y].name] === undefined ) {\n\t\t\t\t\t\t\tvar item = select_items[0];\n\n\t\t\t\t\t\t\tfor ( var key in item ) {\n\t\t\t\t\t\t\t\tvar c_value = key + ' | ' + item[key];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//When sort field has source data, use proper label shown on the dropdown.\n\t\t\t\t\t\t\tif ( source_data ) {\n\t\t\t\t\t\t\t\tfor ( var i = 0; i < source_data.length; i++ ) {\n\t\t\t\t\t\t\t\t\tvar column = source_data[i];\n\n\t\t\t\t\t\t\t\t\tif ( column.value === key ) {\n\t\t\t\t\t\t\t\t\t\tvar c_value = column.label + ' | ' + item[key];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( !c_value || c_value == '' ) {\n\t\t\t\t\t\t\t\tc_value = '--';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel_arr.push( c_value );\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar c_value = select_items[0][display_columns[y].name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( c_value == '' ) {\n\t\t\t\t\t\t\tc_value = '--';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( c_value ) {\n\t\t\t\t\t\t\tlabel_arr.push( c_value );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( label_arr.length > 0 ) {\n\t\t\t\t\t\tlabel_span.text( label_arr.join( ' | ' ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlabel_span.text( len + ' ' + $.i18n._( 'items selected' ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Error: Uncaught TypeError: Cannot read property 'length' of null in interface/html5/global/widgets/awesomebox/AComboBox.js?v=9.0.6-20151231-140748 line 902\n\t\t\t\tif ( !select_item || !display_columns ) {\n\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdisplay_column_len = display_columns.length;\n\t\t\t\tfor ( var y = 0; y < display_column_len; y++ ) {\n\t\t\t\t\tif ( display_columns[y].hidden === true ) { //Hidden field for jGgrid, usually is id\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tc_value = select_item[display_columns[y].name];\n\n\t\t\t\t\tif ( c_value == '' ) {\n\t\t\t\t\t\tc_value = '--';\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( c_value ) {\n\t\t\t\t\t\tlabel_arr.push( c_value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( label_arr.length > 0 ) {\n\t\t\t\t\tlabel_span.text( label_arr.join( ' | ' ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$this.find( '.a-combobox-label' ).width( 'auto' );\n\t\t};\n\n\t\tthis.setEmptyLabel = function() {\n\t\t\tif ( set_any ) {\n\t\t\t\tlabel_span.text( Global.any_item );\n\t\t\t} else if ( set_empty || set_special_empty ) {\n\t\t\t\tif ( layout_name === 'global_tree_column' ) {\n\t\t\t\t\tlabel_span.text( Global.root_item );\n\t\t\t\t} else {\n\t\t\t\t\tlabel_span.text( Global.empty_item );\n\t\t\t\t}\n\t\t\t} else if ( set_default ) {\n\t\t\t\tlabel_span.text( Global.default_item );\n\t\t\t} else if ( set_open ) {\n\t\t\t\tlabel_span.text( Global.open_item );\n\t\t\t} else {\n\t\t\t\tif ( source_data && source_data.length > 0 ) {\n\t\t\t\t\tvar first_item = source_data[0];\n\n\t\t\t\t\tif ( first_item.hasOwnProperty( 'label' ) ) {\n\t\t\t\t\t\tlabel_span.text( first_item.label );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( custom_first_label ) {\n\t\t\t\tlabel_span.text( custom_first_label );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.onColumnSettingSaveFromLayout = function( layout ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.script = 'global_awesomebox_columns';\n\t\t\tfilter.name = layout_name;\n\t\t\tfilter.is_default = 'false';\n\n\t\t\tfilter.data = layout.data;\n\t\t\tfilter.data.type = 10;\n\t\t\tfilter.data.layout_id = layout.id;\n\n\t\t\tif ( ALayoutCache.layout_dic[layout_name] ) {\n\t\t\t\tfilter.id = ALayoutCache.layout_dic[layout_name].id;\n\t\t\t}\n\n\t\t\tuser_generic_api.setUserGenericData( filter, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tALayoutCache.layout_dic[layout_name] = null;\n\t\t\t\t\t$this.initColumns();\n\t\t\t\t\tsource_data = null; //Reload source data if column changed\n\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tthis.onColumnSettingSave = function( seletedColumns, rowsPerPageNumber, layout_id, filter_data ) {\n\n\t\t\tvar filter = {};\n\t\t\tfilter.script = 'global_awesomebox_columns';\n\t\t\tfilter.name = layout_name;\n\t\t\tfilter.is_default = 'false';\n\t\t\tfilter.type = 1; //ALayoutType.customize\n\n\t\t\tif ( ALayoutCache.layout_dic[layout_name] ) {\n\t\t\t\tfilter.id = ALayoutCache.layout_dic[layout_name].id;\n\t\t\t}\n\n\t\t\tvar select_columns_in_JSON = [];\n\t\t\tvar len = seletedColumns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_in_JSON = {\n\t\t\t\t\tlabel: seletedColumns[i].label,\n\t\t\t\t\tvalue: seletedColumns[i].value,\n\t\t\t\t\torderValue: seletedColumns[i].orderValue\n\t\t\t\t};\n\t\t\t\tselect_columns_in_JSON.push( column_in_JSON );\n\t\t\t}\n\n\t\t\tfilter.data = {\n\t\t\t\tdisplay_columns: select_columns_in_JSON,\n\t\t\t\trow_per_page: rowsPerPageNumber,\n\t\t\t\tlayout_id: layout_id,\n\t\t\t\tfilter_data: filter_data\n\t\t\t};\n\n\t\t\t//Error: TypeError: user_generic_api is null in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=9.0.0-20150822-090205 line 987\n\t\t\tif ( !user_generic_api ) {\n\t\t\t\tuser_generic_api = TTAPI.APIUserGenericData;\n\t\t\t}\n\t\t\tuser_generic_api.setUserGenericData( filter, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tALayoutCache.layout_dic[layout_name] = null;\n\n\t\t\t\t\t$this.initColumns();\n\n\t\t\t\t\tsource_data = null; //Reload source data if column changed\n\n\t\t\t\t\t//Reload real data if columns have changed, so they display data for any new columns\n\t\t\t\t\t// We can't just pass in the selected_items verbatim here, we need to parse off the 'id' fields and pass that in as an array instead.\n\t\t\t\t\tif ( $.type( select_items ) === 'array' ) {\n\t\t\t\t\t\tselect_items = select_items.map( function( obj ) {\n\t\t\t\t\t\t\tif ( obj.hasOwnProperty( 'id' ) ) {\n\t\t\t\t\t\t\t\treturn obj['id'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\t//Don't try to load data from the API if there is no filter criteria, as everything is likely be returned and therefore will be selected.\n\t\t\t\t\t// This would manifest itself by expanding a dropdown without anything selected in it, then changing the columns.\n\t\t\t\t\tif ( select_items ) {\n\t\t\t\t\t\t$this.getRealData( select_items );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t};\n\n\t\t//Set columns, display columns will be used when open AwesomeBox. If no layout saved. Display columns are the default ones set in this.each\n\t\tthis.initColumns = function() {\n\n\t\t\tuser_generic_api = TTAPI.APIUserGenericData;\n\n\t\t\t//Error: TypeError: 'undefined' is not a function (evaluating 'user_generic_api.getUserGenericData') in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141117-095711 line 1044\n\t\t\tif ( !user_generic_api || !user_generic_api.getUserGenericData || typeof ( user_generic_api.getUserGenericData ) !== 'function' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( ALayoutCache.layout_dic[layout_name] ) ) {\n\n\t\t\t\t//Set this here so Column setting dialog can get correct display columns before open Awesomebox\n\t\t\t\tif ( Global.isSet( ALayoutCache.layout_dic[layout_name].data ) ) {\n\n\t\t\t\t\tvar data = ALayoutCache.layout_dic[layout_name].data;\n\n\t\t\t\t\tif ( Global.isSet( data.type ) && data.type === 10 ) {\n\t\t\t\t\t\tdisplay_columns = data.display_columns;\n\n\t\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else if ( list_view_default_columns ) {\n\t\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\targs_from_saved_layout = {};\n\t\t\t\t\t\targs_from_saved_layout.filter_data = data.filter_data;\n\t\t\t\t\t\targs_from_saved_layout.filter_sort = data.filter_sort;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdisplay_columns = data.display_columns;\n\n\t\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else if ( possible_display_columns ) {\n\t\t\t\t\t\t\tdisplay_columns = possible_display_columns;\n\t\t\t\t\t\t}\n\t\t\t\t\t\trow_per_page = data.row_per_page;\n\t\t\t\t\t\tif ( !navigation_mode && !set_default_args_manually ) {\n\t\t\t\t\t\t\tdefault_args = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( list_view_default_columns ) {\n\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\trow_per_page = 0;\n\t\t\t\t}\n\t\t\t\tif ( init_data_immediately ) {\n\t\t\t\t\t$this.initSourceData();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tvar filter = {};\n\t\t\t\tfilter.filter_data = { script: 'global_awesomebox_columns', name: layout_name };\n\t\t\t\tuser_generic_api.getUserGenericData( filter, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tvar resData = res.getResult();\n\t\t\t\t\t\t//Set this here so Column setting dialog can get correct display columns before open Awesomebox\n\t\t\t\t\t\tif ( resData && resData.length > 0 ) {\n\n\t\t\t\t\t\t\tvar data = resData[0].data;\n\n\t\t\t\t\t\t\t//if saved layout is saved view layout. get it\n\t\t\t\t\t\t\tif ( data.type === 10 ) {\n\n\t\t\t\t\t\t\t\tvar columns_result_data = api.getOptions( column_option_key, { async: false } ).getResult();\n\t\t\t\t\t\t\t\tall_columns = Global.buildColumnArray( columns_result_data );\n\n\t\t\t\t\t\t\t\tvar saved_layout_result = user_generic_api.getUserGenericData( {\n\t\t\t\t\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\t\t\t\t\tid: data.layout_id,\n\t\t\t\t\t\t\t\t\t\tdeleted: false\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, { async: false } ).getResult();\n\n\t\t\t\t\t\t\t\tif ( saved_layout_result && saved_layout_result.length > 0 ) {\n\t\t\t\t\t\t\t\t\tvar saved_layout = saved_layout_result.slice()[0];\n\t\t\t\t\t\t\t\t\tvar new_data = saved_layout.data;\n\t\t\t\t\t\t\t\t\tnew_data.display_columns = $this.buildDisplayColumns( new_data.display_columns );\n\t\t\t\t\t\t\t\t\tnew_data.filter_data = Global.convertLayoutFilterToAPIFilter( saved_layout );\n\t\t\t\t\t\t\t\t\tresData[0].data.display_columns = new_data.display_columns;\n\t\t\t\t\t\t\t\t\tresData[0].data.filter_data = new_data.filter_data;\n\n\t\t\t\t\t\t\t\t\tdata = resData[0].data;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdata.filter_data = []; // if saved layou is deleted.\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tALayoutCache.layout_dic[layout_name] = resData[0];\n\n\t\t\t\t\t\t\tALayoutCache.layout_dic[$this.getScriptName()] = layout_name; // bind current view name to layout name;\n\n\t\t\t\t\t\t\tif ( Global.isSet( data.type ) && data.type === 10 ) {\n\n\t\t\t\t\t\t\t\tdisplay_columns = data.display_columns;\n\t\t\t\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else if ( list_view_default_columns ) {\n\t\t\t\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\targs_from_saved_layout = {};\n\t\t\t\t\t\t\t\targs_from_saved_layout.filter_data = data.filter_data;\n\t\t\t\t\t\t\t\targs_from_saved_layout.filter_sort = data.filter_sort;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdisplay_columns = data.display_columns;\n\n\t\t\t\t\t\t\t\t//Happen when save no columns in column setting for navigation mode\n\t\t\t\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else if ( list_view_default_columns ) {\n\t\t\t\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\trow_per_page = data.row_per_page;\n\t\t\t\t\t\t\t\targs_from_saved_layout = null;\n//\t\t\t\t\t\t\tif ( !navigation_mode && !set_default_args_manually ) {\n//\t\t\t\t\t\t\t\tdefault_args = null;\n//\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//If set possible columns, use it\n\t\t\t\t\t\t\tif ( list_view_default_columns ) {\n\t\t\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tALayoutCache.layout_dic[layout_name] = false;\n\t\t\t\t\t\t\trow_per_page = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( init_data_immediately ) {\n\t\t\t\t\t\t\t$this.initSourceData();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar filterBaseOnPossibleColumns = function( display_columns ) {\n\n\t\t\t//Error: Unable to get property 'length' of undefined or null reference in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141230-125406 line 1169\n\t\t\tif ( !possible_display_columns ) {\n\t\t\t\treturn display_columns;\n\t\t\t}\n\n\t\t\tvar len = possible_display_columns.length;\n\n\t\t\tvar result = [];\n\t\t\tfor ( var j = 0; j < display_columns.length; j++ ) {\n\t\t\t\tvar dis_column = display_columns[j];\n\t\t\t\tvar found = false;\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar column = possible_display_columns[i];\n\t\t\t\t\tif ( column.value === dis_column.value ) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( found ) {\n\t\t\t\t\tresult.push( dis_column );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( result.length === 0 ) {\n\t\t\t\tresult = possible_display_columns;\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t\tthis.getId = function() {\n\t\t\treturn id;\n\t\t};\n\n\t\t//update source data to new saved item, happens in timesheet view, edit employee\n\t\tthis.updateSelectItem = function( new_item ) {\n\t\t\tselect_item = new_item;\n\t\t\tif ( source_data ) {\n\n\t\t\t\tfor ( var i = 0; i < source_data.length; i++ ) {\n\t\t\t\t\tvar content = source_data[i];\n\t\t\t\t\tif ( content.id === new_item.id ) {\n\t\t\t\t\t\tsource_data[i] = new_item;\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getADropDown = function() {\n\t\t\treturn a_dropdown_div;\n\t\t};\n\n\t\tthis.onClose = function( e, target ) {\n\t\t\tif ( a_dropdown == undefined ) {\n\t\t\t\tDebug.Text( 'ERROR: Unable to close AComboBox check to make sure it wasn\\'t instantiated twice.', 'ACombobox.js', 'ACombobox', 'onClose', 10 );\n\t\t\t}\n\n\t\t\t//In the case where a user double clicks a drop-down box to expand it, that can cause it to open the close again immediately, and show a \"-- NONE --\" even though something was previously selected.\n\t\t\t//  Therefore if the 'init' promise is still pending because the data is still loading, simply don't close it yet.\n\t\t\tvar pending_promise = TTPromise.isPendingPromises( 'AComboBox', 'init' );\n\t\t\tif ( pending_promise == false ) {\n\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t//Re load source_data if select items\n\t\t\t\t\tvar select_items = a_dropdown.getSelectItems();\n\t\t\t\t\t$this.setValue( select_items );\n\t\t\t\t} else {\n\t\t\t\t\tvar select_item = a_dropdown.getSelectItem();\n\t\t\t\t\tif ( select_item ) { // #2593 - null is not an object (evaluating 'select_item._id_')\n\t\t\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\t\t\t$this.setValue( select_item );\n\t\t\t\t\t\t} else if ( select_item._id_ ) {\n\t\t\t\t\t\t\t$this.setValue( select_item._id_ );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tDebug.Text( 'WARNING: AComboBox::Init promise still pending, cant call setValue()...', 'ACombobox.js', 'ACombobox', 'onClose', 10 );\n\t\t\t}\n\n\t\t\ta_dropdown_div.remove();\n\t\t\tis_mouse_over = false; //When close from esc, this maybe true\n\t\t\tLocalCacheData.openAwesomeBox = null;\n\t\t\tif ( a_dropdown.isChanged() || layout_name === 'global_sort_columns' ) {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t}\n\t\t\tdontOpen = true;\n\t\t\tdontOpenTimer = setTimeout( function() {\n\t\t\t\tdontOpen = false;\n\t\t\t}, 200 );\n\t\t\t$this.find( '.focus-input' ).focus();\n\t\t};\n\n\t\t//set next or last item when key down, call from main.js\n\t\tthis.selectNextItem = function( e ) {\n\n\t\t\tvar select_index = this.getSelectIndex();\n\t\t\tvar next_index;\n\t\t\tvar target_grid;\n\t\t\tif ( e.keyCode === 40 ) { //Down\n\t\t\t\te.preventDefault();\n\t\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\t\tif ( select_index === 0 ) {\n\t\t\t\t\t\tnext_index = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext_index = select_index + 1;\n\t\t\t\t\t}\n\t\t\t\t\tvar next_select_item = this.getItemByIndex( next_index );\n\n\t\t\t\t\tif ( !next_select_item ) {\n\t\t\t\t\t\tnext_index = next_index - 1;\n\t\t\t\t\t\tnext_select_item = this.getItemByIndex( next_index );\n\t\t\t\t\t}\n\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\ta_dropdown.setSelectItem( next_select_item );\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else if ( e.keyCode === 38 ) { //Up\n\t\t\t\te.preventDefault();\n\t\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\t\tif ( select_index === 0 ) {\n\t\t\t\t\t\tnext_index = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext_index = select_index - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tnext_select_item = this.getItemByIndex( next_index );\n\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\ta_dropdown.setSelectItem( next_select_item );\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else if ( e.keyCode === 39 ) { //right\n\t\t\t\tif ( allow_multiple_selection && !$( e.target ).hasClass( 'search-input' ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ta_dropdown.onUnSelectGridDoubleClick();\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else if ( e.keyCode === 37 ) { //left\n\t\t\t\tif ( allow_multiple_selection && !$( e.target ).hasClass( 'search-input' ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ta_dropdown.onSelectGridDoubleClick();\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( quick_search_timer ) {\n\t\t\t\t\tclearTimeout( quick_search_timer );\n\t\t\t\t}\n\t\t\t\tvar focus_target = $( ':focus' );\n\t\t\t\tif ( focus_target.length > 0 && $( focus_target[0] ).hasClass( 'search-input' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tquick_search_timer = setTimeout( function() {\n\t\t\t\t\tquick_search_typed_keys = '';\n\t\t\t\t}, 750 );\n\t\t\t\te.preventDefault();\n\n\t\t\t\tquick_search_typed_keys = quick_search_typed_keys + String.fromCharCode( e.which ).toLowerCase();\n\t\t\t\tDebug.Text( 'Quick search typed keys: ' + quick_search_typed_keys, 'AComboBox.js', 'AComboBox', 'selectNextItem', 10 );\n\t\t\t\tvar trimmed_quick_search_typed_keys = quick_search_typed_keys.trim();\n\n\t\t\t\tif ( allow_multiple_selection || tree_mode ) {\n\t\t\t\t\tif ( trimmed_quick_search_typed_keys ) {\n\t\t\t\t\t\ttarget_grid = a_dropdown.getFocusInSeletGrid() ? a_dropdown.getSelectGrid() : a_dropdown.getUnSelectGrid();\n\n\t\t\t\t\t\tvar search_index = quick_search_dic[trimmed_quick_search_typed_keys] ? quick_search_dic[trimmed_quick_search_typed_keys] : 0;\n\t\t\t\t\t\tvar tds = $( target_grid.grid.find( 'tr' ).find( 'td:eq(1)' ).filter( function() {\n\t\t\t\t\t\t\treturn $.text( [this] ).toLowerCase().indexOf( trimmed_quick_search_typed_keys ) == 0;\n\t\t\t\t\t\t} ) );\n\t\t\t\t\t\tvar td;\n\t\t\t\t\t\tif ( search_index > 0 && search_index < tds.length ) {\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearch_index = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttd = $( tds[search_index] );\n\t\t\t\t\t\ta_dropdown.unSelectAll( target_grid.grid, true );\n\t\t\t\t\t\t//next_index = td.parent().index() - 1;\n\n\t\t\t\t\t\tvar next_select_item = false;\n\t\t\t\t\t\tvar grid_data = target_grid.getData();\n\t\t\t\t\t\tfor ( var z = 0; z < grid_data.length; z++ ) {\n\t\t\t\t\t\t\tif ( grid_data[z].id == td.parents( 'tr' ).attr( 'id' ) ) {\n\t\t\t\t\t\t\t\tnext_select_item = grid_data[z];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tselect_item = next_select_item;\n\n\t\t\t\t\t\ta_dropdown.setSelectItem( next_select_item, target_grid );\n\t\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t\t\tquick_search_dic = {};\n\t\t\t\t\t\tquick_search_dic[trimmed_quick_search_typed_keys] = search_index + 1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( trimmed_quick_search_typed_keys ) {\n\t\t\t\t\t\tsearch_index = quick_search_dic[trimmed_quick_search_typed_keys] ? quick_search_dic[trimmed_quick_search_typed_keys] : 0;\n\t\t\t\t\t\ttds = $( a_dropdown.getUnSelectGrid().grid.find( 'tr' ).find( 'td:first' ).filter( function() {\n\t\t\t\t\t\t\treturn $.text( [this] ).toLowerCase().indexOf( trimmed_quick_search_typed_keys ) == 0;\n\t\t\t\t\t\t} ) );\n\t\t\t\t\t\tif ( search_index > 0 && search_index < tds.length ) {\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearch_index = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttd = $( tds[search_index] );\n\t\t\t\t\t\tnext_index = td.parent().index() - 1;\n\t\t\t\t\t\tnext_select_item = this.getItemByIndex( next_index );\n\t\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\t\ta_dropdown.setSelectItem( next_select_item );\n\t\t\t\t\t\tquick_search_dic = {};\n\t\t\t\t\t\tquick_search_dic[trimmed_quick_search_typed_keys] = search_index + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.gridScrollTop = function() {\n\n\t\t\tif ( !a_dropdown ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ta_dropdown.gridScrollTop();\n\t\t};\n\n\t\tthis.gridScrollDown = function() {\n\n\t\t\tif ( !a_dropdown ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ta_dropdown.gridScrollDown();\n\t\t};\n\n\t\tthis.selectAll = function() {\n\t\t\tif ( !a_dropdown || tree_mode || !allow_multiple_selection ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ta_dropdown.selectAll();\n\n\t\t};\n\n\t\tthis.getIsMouseOver = function() {\n\t\t\treturn is_mouse_over;\n\t\t};\n\n\t\tthis.onShowAll = function( isShowAll ) {\n\n\t\t\tshow_all = isShowAll;\n\n\t\t\tvar args = this.buildUnSelectGridFilter();\n\n\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tpager_data = result.getPagerData();\n\t\t\t\t\tsource_data = result_data;\n\n\t\t\t\t\tif ( Global.isSet( api ) ) {\n\t\t\t\t\t\tsource_data = Global.formatGridData( source_data, api.key_name );\n\t\t\t\t\t}\n\n\t\t\t\t\t//#2353 - don't lose selection on showall button\n\t\t\t\t\tif ( !show_all ) {\n\t\t\t\t\t\tvar selected_items = a_dropdown.getSelectItems();\n\t\t\t\t\t\tfor ( var i in selected_items ) {\n\t\t\t\t\t\t\tfor ( var x in source_data ) {\n\t\t\t\t\t\t\t\tif ( selected_items[i].id == source_data[x].id ) {\n\t\t\t\t\t\t\t\t\tsource_data = source_data.slice( x );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t//a_dropdown.setSelectGridData( a_dropdown.getSelectItems() );\n\t\t\t\t\ta_dropdown.setPagerData( pager_data );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tthis.buildUnSelectGridFilter = function() {\n\t\t\tvar args = {};\n\t\t\targs.filter_data = {};\n\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\targs.filter_items_per_page = row_per_page;\n\n\t\t\tif ( a_dropdown ) {\n\t\t\t\t//use clone so the view search condition not be set when set default args\n\t\t\t\targs.filter_data = Global.clone( a_dropdown.getUnSelectGridMap() );\n\t\t\t\targs.filter_sort = Global.clone( a_dropdown.getUnSelectGridSortMap() );\n\t\t\t}\n\n\t\t\tif ( args_from_saved_layout ) {\n\t\t\t\tif ( Global.isSet( args_from_saved_layout.filter_data ) ) {\n\t\t\t\t\tfor ( var key in args_from_saved_layout.filter_data ) {\n\t\t\t\t\t\tif ( !args.filter_data.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\targs.filter_data[key] = args_from_saved_layout.filter_data[key];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( args_from_saved_layout && Global.isSet( args_from_saved_layout.permission_section ) ) {\n\t\t\t\t\targs.permission_section = args_from_saved_layout.permission_section;\n\t\t\t\t}\n\n\t\t\t\t//Do not override sort condition\n\t\t\t\tif ( Global.isSet( args_from_saved_layout.filter_sort ) && !args.filter_sort ) {\n\n\t\t\t\t\targs.filter_sort = args_from_saved_layout.filter_sort;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//default_args is set when navigation mode usually. To keep search filter same as list view grid\n\t\t\t//. In BaseController, setEditViewData function\n\t\t\tif ( default_args ) {\n\n\t\t\t\tif ( Global.isSet( default_args.filter_data ) ) {\n\t\t\t\t\tfor ( var key in default_args.filter_data ) {\n\t\t\t\t\t\tif ( !args.filter_data.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\targs.filter_data[key] = default_args.filter_data[key];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( default_args && Global.isSet( default_args.permission_section ) ) {\n\t\t\t\t\targs.permission_section = default_args.permission_section;\n\t\t\t\t}\n\n\t\t\t\t//Do not override sort condition\n\t\t\t\tif ( Global.isSet( default_args.filter_sort ) && !args.filter_sort ) {\n\n\t\t\t\t\targs.filter_sort = default_args.filter_sort;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//If it has additional search condition from outside viewcontroller\n\t\t\tif ( this.customSearchFilter ) {\n\t\t\t\targs = this.customSearchFilter( args );\n\t\t\t}\n\n\t\t\tif ( show_all ) {\n\t\t\t\targs.second_parameter = true;\n\t\t\t}\n\n\t\t\tif ( a_dropdown ) { //#2353 - js exception when a_dropdown is not defined yet\n\t\t\t\t// var selected_ids = a_dropdown.getSelectItems();\n\t\t\t\t// if ( selected_ids.length > 0 && selected_ids[0] != TTUUID.zero_id ) {\n\t\t\t\t// \targs.filter_data.exclude_id = [];\n\t\t\t\t// \tfor ( var x in selected_ids ) {\n\t\t\t\t// \t\targs.filter_data.exclude_id.push( selected_ids[x].id );\n\t\t\t\t// \t}\n\t\t\t\t// }\n\n\t\t\t\t//When using ACombo, at this point a_dropdown.getSelectItems() might be empty, but $this.getValue()/select_items has the selected IDs instead. They are in a different format though.\n\t\t\t\tvar selected_ids = select_items;\n\t\t\t\tif ( selected_ids && Global.isArray( selected_ids ) && selected_ids.length > 0 && selected_ids[0] != TTUUID.zero_id ) {\n\t\t\t\t\targs.filter_data.exclude_id = [];\n\t\t\t\t\tfor ( var x in selected_ids ) {\n\t\t\t\t\t\targs.filter_data.exclude_id.push( selected_ids[x] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn args;\n\t\t};\n\n\t\tthis.buildSelectGridFilter = function() {\n\t\t\tvar args = {};\n\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\targs.filter_items_per_page = row_per_page;\n\t\t\targs.filter_data = a_dropdown.getSelectGridMap();\n\t\t\targs.filter_sort = a_dropdown.getSelectGridSortMap();\n\t\t\targs.second_parameter = true; //Always set true because we want alwasy set all data out in select grid\n\n\t\t\treturn args;\n\t\t};\n\n\t\tthis.searchIsEmpty = function( a_dropdown ) {\n\t\t\tvar inputs = a_dropdown.find( 'input.search-input' );\n\t\t\tfor ( var i = 0; i < inputs.length; i++ ) {\n\t\t\t\tif ( $( inputs[i] ).val() != $.i18n._( 'click to search' ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\tthis.onADropDownSearch = function( targetName, page_action, default_select_item, callBack, trigger_form_item_change = true ) {\n\t\t\tvar this_val = this.getValue();\n\t\t\tif ( targetName == 'select_grid' && this_val.length == 0 || ( targetName == 'select_grid' && this_val.length == 1 && this_val[0] == TTUUID.not_exist_id ) ) {\n\t\t\t\t//#2353 - prevent bug where sorted empty select grid selects everything\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar args = {};\n\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\targs.filter_items_per_page = row_per_page;\n\t\t\tif ( targetName === 'unselect_grid' ) {\n\t\t\t\targs = this.buildUnSelectGridFilter();\n\n\t\t\t\t//Error: Unable to get property 'current_page' of undefined or null reference in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=7.4.6-20141027-070003 line 1489\n\t\t\t\tif ( a_dropdown && a_dropdown.getPagerData() ) {\n\t\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\t\tif ( page_action === 'next' ) {\n\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData().next_page;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\targs.filter_page = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch ( page_action ) {\n\t\t\t\t\t\t\tcase 'next':\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData().next_page;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'last':\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData().previous_page;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'start':\n\t\t\t\t\t\t\t\targs.filter_page = 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData().last_page_number;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData().current_page;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( parseInt( page_action ) >= 1 ) {\n\t\t\t\t\targs.filter_page = page_action;\n\t\t\t\t}\n\n\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t\tvar focused_element = $( ':focus' );\n\n\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//set this outside, to add more data to source_data\n\t\t\t\t\t\tif ( addition_source_function ) {\n\t\t\t\t\t\t\tresult_data = addition_source_function( $this, result_data );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( LocalCacheData.paging_type === 0 && page_action === 'next' ) {\n\t\t\t\t\t\t\tvar current_data = a_dropdown.getUnSelectGridData();\n\t\t\t\t\t\t\tresult_data = current_data.concat( result_data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( navigation_mode ) {\n\t\t\t\t\t\t\tsource_data = result_data;\n\t\t\t\t\t\t\tpager_data = result.getPagerData();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tunselect_grid_search_result = result_data;\n\t\t\t\t\t\t\tcurrent_open_page = result.getPagerData().current_page;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( $.type( result_data ) != 'array' ) {\n\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\t\t\t\t$this.createFirstItem( result_data );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult_data = Global.formatGridData( result_data, api.key_name );\n\n\t\t\t\t\t\tif ( extendDataProcessWhenSearch ) {\n\t\t\t\t\t\t\tresult_data = extendDataProcessWhenSearch( result_data );\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta_dropdown && a_dropdown.setUnselectedGridData( result_data );\n\n\t\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.setSelectGridData( a_dropdown.getSelectItems(), true );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.setSelectItem( a_dropdown.getSelectItem() );\n\t\t\t\t\t\t\tif ( default_select_item == 'first' ) {\n\t\t\t\t\t\t\t\t$this.setValue( result_data[0] );\n\t\t\t\t\t\t\t\tif ( trigger_form_item_change == true ) {\n\t\t\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\t\t\t\tcallBack( result_data[0] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( default_select_item == 'last' ) {\n\t\t\t\t\t\t\t\t$this.setValue( result_data[result_data.length - 1] );\n\t\t\t\t\t\t\t\tif ( trigger_form_item_change == true ) {\n\t\t\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\t\t\t\tcallBack( result_data[result_data.length - 1] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ta_dropdown && a_dropdown.setPagerData( result.getPagerData() );\n\n\t\t\t\t\t\tif ( result_data.length < 1 && a_dropdown.getSelectItems().length < 1 ) {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.showNoResultCover( 'unselect_grid' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.removeNoResultCover( 'unselect_grid' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ta_dropdown && a_dropdown.getUnSelectGrid().grid.show();\n\n\t\t\t\t\t\tif ( focused_element.length ) {\n\t\t\t\t\t\t\tfocused_element.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\targs = this.buildSelectGridFilter();\n\t\t\t\tif ( args.filter_data.id && args.filter_data.id !== false ) { //prevent returning all available rows when nothing is selected\n\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\t\t\tvar focused_element = $( ':focus' );\n\n\t\t\t\t\t\t\tif ( $.type( result_data ) != 'array' ) {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresult_data = Global.formatGridData( result_data, api.key_name );\n\n\t\t\t\t\t\t\ta_dropdown.setSelectGridSearchResult( result_data ); //set as search result\n\n\t\t\t\t\t\t\tif ( result_data.length < 1 ) {\n\t\t\t\t\t\t\t\ta_dropdown.getSelectGrid().grid.clearGridData();\n\t\t\t\t\t\t\t\ta_dropdown.showNoResultCover( 'select_grid' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ta_dropdown.removeNoResultCover( 'select_grid' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ta_dropdown.setSelectGridDragAble();\n\n\t\t\t\t\t\t\ta_dropdown.getSelectGrid().grid.show();\n\n\t\t\t\t\t\t\tif ( focused_element.length > 0 ) {\n\t\t\t\t\t\t\t\tfocused_element.focus();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.buildDisplayColumns = function( api_display_columns ) {\n\t\t\tvar len = all_columns.length;\n\t\t\tvar len1 = api_display_columns.length;\n\t\t\tvar display_columns = [];\n\n\t\t\tfor ( var j = 0; j < len1; j++ ) {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( api_display_columns[j] === all_columns[i].value ) {\n\t\t\t\t\t\tdisplay_columns.push( all_columns[i] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn display_columns;\n\t\t};\n\n\t\tthis.buildDisplayColumnsForEditor = function() {\n\t\t\tvar len = all_columns.length;\n\t\t\tvar len1 = display_columns.length;\n\t\t\tvar result_display_columns = [];\n\t\t\tfor ( var j = 0; j < len1; j++ ) {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( !display_columns[j] ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif ( Global.isSet( display_columns[j].name ) ) { //jQgrid column format\n\t\t\t\t\t\tvar name = display_columns[j].name;\n\t\t\t\t\t} else if ( Global.isSet( display_columns[j].value ) ) {  //ViewColumn format,\tlabel and value\n\t\t\t\t\t\tname = display_columns[j].value;\n\t\t\t\t\t}\n\t\t\t\t\tif ( name === all_columns[i].value ) {\n\t\t\t\t\t\tresult_display_columns.push( all_columns[i] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t;\n\t\t\t}\n\n\t\t\treturn result_display_columns;\n\n\t\t};\n\n\t\tthis.getLocalSelectItem = function( val ) {\n\n\t\t\tif ( added_items ) {\n\t\t\t\tfor ( var i = 0; i < added_items.length; i++ ) {\n\t\t\t\t\tif ( val == added_items[i].value ) { //sometime the value is not number\n\t\t\t\t\t\tvar item = {};\n\n\t\t\t\t\t\titem[key] = val;\n\n\t\t\t\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\t\t\t\titem[content.name] = added_items[i].label;\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this.getFirstItem();\n\t\t\t} else {\n\t\t\t\treturn this.getFirstItem();\n\t\t\t}\n\t\t};\n\n\t\tthis.getFirstItem = function() {\n\t\t\tvar first_item = {};\n\n\t\t\tfirst_item[key] = TTUUID.zero_id;\n\n\t\t\tif ( set_any || set_all ) {\n\t\t\t\tfirst_item[key] = TTUUID.not_exist_id;\n\t\t\t} else {\n\t\t\t\tfirst_item[key] = TTUUID.zero_id;\n\t\t\t}\n\n\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\tif ( key !== 'id' ) {\n\t\t\t\t\t//first_item.id = 999; //records id start from 10000\n\t\t\t\t\tfirst_item.id = TTUUID.not_exist_id;\n\t\t\t\t}\n\t\t\t\tif ( set_all ) {\n\t\t\t\t\tfirst_item[content.name] = Global.all_item;\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tfirst_item[content.name] = Global.any_item;\n\t\t\t\t} else if ( set_empty || set_special_empty ) {\n\n\t\t\t\t\tfirst_item[content.name] = Global.empty_item;\n\n\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\tfirst_item[content.name] = Global.open_item;\n\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\tfirst_item[content.name] = Global.default_item;\n\t\t\t\t}\n\n\t\t\t\tif ( custom_first_label ) {\n\t\t\t\t\tfirst_item[content.name] = custom_first_label;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\treturn first_item;\n\t\t};\n\n\t\tthis.createFirstItem = function( target_data ) {\n\n\t\t\tvar no_first_item = false;\n\t\t\tif ( !target_data ) {\n\t\t\t\ttarget_data = source_data;\n\t\t\t}\n\n\t\t\tif ( target_data.hasOwnProperty( 0 ) ) {\n\t\t\t\tif ( set_any || set_all ) {\n\t\t\t\t\tif ( target_data[0][key] === TTUUID.not_exist_id ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( target_data[0][key] === TTUUID.zero_id ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar first_item = {};\n\n\t\t\tfirst_item[key] = TTUUID.zero_id;\n\n\t\t\tif ( set_any || set_all || set_special_empty ) {\n\t\t\t\tfirst_item[key] = TTUUID.not_exist_id;\n\t\t\t} else {\n\t\t\t\tfirst_item[key] = TTUUID.zero_id;\n\t\t\t}\n\n\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\tif ( key !== 'id' ) {\n\t\t\t\t\t//first_item.id = 999; //records id start from 10000\n\t\t\t\t\tfirst_item.id = TTUUID.not_exist_id; //records id start from 10000\n\t\t\t\t}\n\t\t\t\tif ( set_all ) {\n\t\t\t\t\tfirst_item[content.name] = Global.all_item;\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tfirst_item[content.name] = Global.any_item;\n\t\t\t\t} else if ( set_empty || set_special_empty ) {\n\t\t\t\t\tfirst_item[content.name] = Global.empty_item;\n\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\tfirst_item[content.name] = Global.open_item;\n\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\tfirst_item[content.name] = Global.default_item;\n\t\t\t\t} else {\n\t\t\t\t\tno_first_item = true;\n\t\t\t\t}\n\n\t\t\t\tif ( custom_first_label ) {\n\t\t\t\t\tfirst_item[content.name] = custom_first_label;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\tif ( !no_first_item ) {\n\t\t\t\ttarget_data.unshift( first_item );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.checkIfLayoutChanged = function( newDisplayColumns ) {\n\n\t\t\tif ( !display_columns ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( !newDisplayColumns ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( display_columns.length !== newDisplayColumns.length ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar display_column = display_columns[i];\n\t\t\t\tvar found = false;\n\t\t\t\tfor ( var j = 0; j < len; j++ ) {\n\t\t\t\t\tvar new_display_column = newDisplayColumns[j];\n\t\t\t\t\tif ( new_display_column.name === display_column.name ) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( !found ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t\tthis.setDefaultArgs = function( val ) {\n\t\t\t$this.default_args = val;\n\t\t\tset_default_args_manually = true;\n\t\t\tdefault_args = val;\n\n\t\t};\n\n\t\tthis.setDisPlayColumns = function( val ) {\n\n\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( val, layout_name );\n\t\t};\n\n\t\t//Only these columns can be shown no matter\n\t\tthis.setPossibleDisplayColumns = function( val, default_columns ) {\n\t\t\tpossible_display_columns = val;\n\n\t\t\tif ( default_columns ) {\n\t\t\t\tlist_view_default_columns = default_columns;\n\t\t\t} else {\n\t\t\t\tlist_view_default_columns = val;\n\t\t\t}\n\n\t\t\tif ( layout_name !== 'global_option_column' && //Simple options\n\t\t\t\tlayout_name !== 'global_tree_column' && //Tree Mode\n\t\t\t\tlayout_name !== 'global_sort_columns' &&\n\t\t\t\tlayout_name !== 'global_timesheet' &&\n\t\t\t\tlayout_name !== 'global_absence' ) {\n\t\t\t\tthis.initColumns();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setRowPerPage = function( val ) {\n\t\t\trow_per_page = val;\n\t\t};\n\n\t\tthis.setPagerData = function( val ) {\n\t\t\tpager_data = val;\n\t\t};\n\n\t\tthis.shouldInitColumns = function() {\n\t\t\tif ( layout_name === 'global_option_column' || //Simple options\n\t\t\t\tlayout_name === 'global_tree_column' || //Tree Mode\n\t\t\t\tlayout_name === 'global_sort_columns' ||\n\t\t\t\tlayout_name === 'global_timesheet' ||\n\t\t\t\tlayout_name === 'global_absence' ||\n\t\t\t\tlayout_name === 'global_simple_name' ||\n\t\t\t\tlayout_name === 'global_simple_name' + '_navigation' ) {\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tthis.createItem = function( val, label ) {\n\t\t\tvar item = {};\n\n\t\t\titem[key] = val;\n\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\tif ( key !== 'id' ) {\n\t\t\t\t\titem.id = 20000; //records id start from 10000\n\t\t\t\t}\n\t\t\t\titem[content.name] = label;\n\t\t\t\treturn false;\n\n\t\t\t} );\n\n\t\t\treturn item;\n\n\t\t};\n\n\t\tthis.initSourceData = function() {\n\t\t\tvar args = $this.buildUnSelectGridFilter();\n\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tsource_data = result_data;\n\t\t\t\t\tpager_data = result.getPagerData();\n\n\t\t\t\t\t$this.trigger( 'initSourceComplete', [$this] );\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t//only do this once\n\t\t\tinit_data_immediately = false;\n\t\t};\n\n\t\tthis.addHideIdColumn = function( display_columns ) {\n\t\t\tvar id_column = { name: 'id', index: 'id', label: '', width: 0, hidden: true };\n\n\t\t\tdisplay_columns.push( id_column );\n\n\t\t\treturn display_columns;\n\t\t};\n\n\t\tvar buildSortBySelectColumns = function( array ) {\n\t\t\tvar sort_by_array = array;\n\t\t\tvar sort_by_select_columns = [];\n\t\t\tvar sort_by_unselect_columns = source_data;\n\n\t\t\tif ( sort_by_array ) {\n\t\t\t\t$.each( sort_by_array, function( index, content ) {\n\t\t\t\t\tfor ( var key in content ) {\n\t\t\t\t\t\tif ( key === 'label' || key === 'value' || key === 'fullValue' ) {\n\t\t\t\t\t\t\tsort_by_select_columns = sort_by_array;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$.each( sort_by_unselect_columns, function( index1, content1 ) {\n\t\t\t\t\t\t\tif ( content1.value === key ) {\n\t\t\t\t\t\t\t\tcontent1.sort = content[key];\n\t\t\t\t\t\t\t\tsort_by_select_columns.push( content1 );\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn sort_by_select_columns;\n\n\t\t};\n\n\t\t//For multiple items like .xxx could contains a few widgets.\n\t\tthis.each( function() {\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\t\t\tlabel_span = $( this ).find( '.a-combobox-label' );\n\t\t\tvar focus_input = $( this ).find( '.focus-input' );\n\n\t\t\tif ( o.always_include_columns ) {\n\t\t\t\talways_include_columns = o.always_include_columns;\n\t\t\t}\n\n\t\t\tif ( o.extendDataProcessWhenSearch ) {\n\t\t\t\textendDataProcessWhenSearch = o.extendDataProcessWhenSearch;\n\t\t\t}\n\n\t\t\tif ( o.always_search_full_columns ) {\n\t\t\t\talways_search_full_columns = o.always_search_full_columns;\n\t\t\t}\n\n\t\t\t//source_data id that add from outsite, used to set value before open awesomebox\n\t\t\tif ( o.added_items ) {\n\t\t\t\tadded_items = o.added_items;\n\t\t\t}\n\n\t\t\tif ( o.init_data_immediately ) {\n\t\t\t\tinit_data_immediately = o.init_data_immediately;\n\t\t\t}\n\n\t\t\t//first item label , like -- No Meal -- in Policy -> Schedule Policies\n\t\t\tif ( o.custom_first_label ) {\n\t\t\t\tcustom_first_label = o.custom_first_label;\n\t\t\t}\n\n\t\t\tif ( o.script_name ) {\n\t\t\t\tscript_name = o.script_name;\n\t\t\t}\n\n\t\t\tif ( o.setRealValueCallBack ) {\n\t\t\t\tsetRealValueCallBack = o.setRealValueCallBack;\n\t\t\t}\n\n\t\t\tif ( o.navigation_mode ) {\n\t\t\t\tnavigation_mode = o.navigation_mode;\n\t\t\t\t$( this ).children().eq( 1 ).css( 'max-width', 132 );\n\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', 132 );\n\t\t\t}\n\n\t\t\tif ( o.search_panel_model ) {\n\t\t\t\t$( this ).children().eq( 1 ).css( 'max-width', 132 );\n\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', 132 );\n\t\t\t}\n\n\t\t\tif ( o.width ) {\n\t\t\t\t$( this ).children().eq( 1 ).css( 'max-width', o.width );\n\t\t\t\tif ( o.is_static_width ) {\n\t\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', o.width );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', 132 );\n\t\t\t}\n\n\t\t\tif ( o.api_class ) {\n\t\t\t\tapi_class = o.api_class;\n\t\t\t\tapi = o.api_class;\n\t\t\t}\n\n\t\t\tif ( o.custom_key_name ) {\n\t\t\t\tcustom_key_name = o.custom_key_name;\n\t\t\t} else {\n\n\t\t\t\tif ( api ) {\n\t\t\t\t\tcustom_key_name = api.key_name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( o.allow_multiple_selection ) {\n\t\t\t\tallow_multiple_selection = o.allow_multiple_selection;\n\t\t\t}\n\n\t\t\tif ( o.set_any ) {\n\t\t\t\tset_any = o.set_any;\n\t\t\t}\n\n\t\t\tif ( o.set_empty ) {\n\t\t\t\tset_empty = o.set_empty;\n\t\t\t}\n\n\t\t\tif ( o.set_special_empty ) {\n\t\t\t\tset_special_empty = o.set_special_empty;\n\t\t\t}\n\n\t\t\tif ( o.set_open ) {\n\t\t\t\tset_open = o.set_open;\n\t\t\t}\n\n\t\t\tif ( o.set_default ) {\n\t\t\t\tset_default = o.set_default;\n\t\t\t}\n\n\t\t\tif ( o.set_all ) {\n\t\t\t\tset_all = o.set_all;\n\t\t\t}\n\n\t\t\tif ( o.addition_source_function ) {\n\t\t\t\taddition_source_function = o.addition_source_function;\n\t\t\t}\n\n\t\t\tif ( o.column_option_key ) {\n\t\t\t\tcolumn_option_key = o.column_option_key;\n\t\t\t}\n\n\t\t\tfield = o.field;\n\n\t\t\tif ( o.validation_field ) {\n\t\t\t\tvalidation_field = o.validation_field;\n\t\t\t}\n\n\t\t\tif ( o.layout_name ) {\n\t\t\t\tif ( navigation_mode ) {\n\t\t\t\t\tlayout_name = o.layout_name + '_navigation';\n\t\t\t\t} else {\n\t\t\t\t\tlayout_name = o.layout_name;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( o.show_search_inputs ) {\n\t\t\t\tshow_search_inputs = o.show_search_inputs;\n\t\t\t}\n\n\t\t\tif ( o.tree_mode ) {\n\t\t\t\ttree_mode = o.tree_mode;\n\t\t\t}\n\n\t\t\tif ( o.on_tree_grid_row_select ) {\n\t\t\t\ton_tree_grid_row_select = o.on_tree_grid_row_select;\n\t\t\t}\n\n\t\t\t//Always set this true;\n\t\t\tallow_drag_to_order = true;\n\n\t\t\tif ( o.key ) {\n\t\t\t\tkey = o.key;\n\t\t\t}\n\n\t\t\tif ( o.args ) {\n\t\t\t\t$this.args = o.args;\n\t\t\t}\n\n\t\t\tif ( o.customSearchFilter ) {\n\t\t\t\t$this.customSearchFilter = o.customSearchFilter;\n\t\t\t}\n\n\t\t\t//Set default args use when init source;\n\t\t\tif ( o.default_args ) {\n\t\t\t\t$this.setDefaultArgs( o.default_args );\n\t\t\t}\n\n\t\t\tvar $$this = this;\n\t\t\tfocus_input.unbind( 'keydown' ).bind( 'keydown', function( e ) {\n\t\t\t\t//Stop click event to top, prevent the body click event\n\t\t\t\tif ( e.keyCode === 13 || e.keyCode === 32 ) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tTTPromise.add( 'AComboBox', 'init' );\n\t\t\t\t\topenADropDown();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tfocus_input.bind( 'focusin', function() {\n\t\t\t\t$( $$this ).addClass( 'focus' );\n\t\t\t} );\n\n\t\t\tfocus_input.bind( 'focusout', function() {\n\t\t\t\t$( $$this ).removeClass( 'focus' );\n\t\t\t} );\n\n\t\t\t$( this ).click( function( e ) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( dontOpen === true ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tTTPromise.add( 'AComboBox', 'init' );\n\t\t\t\t\topenADropDown();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).mouseover( function() {\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 1000 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).mouseout( function() {\n\t\t\t\t$this.hideErrorTip();\n\t\t\t} );\n\n\t\t\tif ( !o.width ) {\n\t\t\t\t$( this ).css( 'min-width', '169px' );\n\t\t\t} else {\n\t\t\t\t$( this ).css( 'min-width', ( o.width + 33 ) + 'px' );\n\t\t\t}\n\n\t\t\tif ( !$this.shouldInitColumns() ) { //Sort Selector in search panel\n\t\t\t\tdo_not_get_real_data = true; // For Simple OPTIONS mode\n\n\t\t\t}\n\n\t\t\tdisplay_columns = ALayoutCache.getDefaultColumn( layout_name ); //Get Default columns base on different layout name\n\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name ); //Convert to jQgrid format\n\n\t\t\tif ( $this.shouldInitColumns() && !navigation_mode ) { //Sort Selector in search panel\n\n\t\t\t\t//init columnd when set possible columns for navigation mode\n\t\t\t\t$this.initColumns();\n\t\t\t}\n\n\t\t\tif ( o.id ) {\n\t\t\t\t$( this ).attr( 'id', o.id + '_AComboBox' );\n\t\t\t\tid = o.id;\n\t\t\t} else {\n\t\t\t\t$( this ).attr( 'id', field + '_AComboBox' );\n\t\t\t\tid = o.field;\n\t\t\t}\n\n\t\t\t$this.setEmptyLabel();\n\n\t\t\t//Open ADropDown\n\n\t\t\tfunction setADropDownSelectValues( select_items ) {\n\n\t\t\t\tif ( !( set_any && select_items == TTUUID.not_exist_id ) ) {\n\t\t\t\t\ta_dropdown.setSelectGridData( select_items );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction openADropDown() {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.openAwesomeBox ) {\n\t\t\t\t\tif ( LocalCacheData.openAwesomeBox.getId() === id ) {\n\t\t\t\t\t\tLocalCacheData.openAwesomeBox.onClose();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tLocalCacheData.openAwesomeBox.onClose();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tLocalCacheData.openAwesomeBox = $this;\n\n\t\t\t\t//Create and open ADropDown\n\t\t\t\ta_dropdown = Global.loadWidget( 'global/widgets/awesomebox/ADropDown.html' );\n\t\t\t\ta_dropdown = $( a_dropdown );\n\n\t\t\t\tvar display_show_all = false;\n\t\t\t\tif ( $this.shouldInitColumns() && !navigation_mode ) {\n\t\t\t\t\tdisplay_show_all = true;\n\t\t\t\t}\n\n\t\t\t\tif ( navigation_mode && default_args && default_args.filter_sort && !cached_sort_filter ) {\n\t\t\t\t\tcached_sort_filter = default_args.filter_sort;\n\t\t\t\t}\n\n\t\t\t\t//Create ADropDown\n\t\t\t\ta_dropdown = a_dropdown.ADropDown( {\n\t\t\t\t\tdisplay_show_all: display_show_all,\n\t\t\t\t\tallow_drag_to_order: allow_drag_to_order,\n\t\t\t\t\tallow_multiple_selection: allow_multiple_selection,\n\t\t\t\t\tshow_all: show_all,\n\t\t\t\t\tkey: key,\n\t\t\t\t\tid: id,\n\t\t\t\t\tcomboBox: $this,\n\t\t\t\t\tshow_search_inputs: show_search_inputs,\n\t\t\t\t\tsearch_input_filter: cached_search_inputs_filter,\n\t\t\t\t\tselect_grid_search_input_filter: cached_select_grid_search_inputs_filter,\n\t\t\t\t\tdefault_sort_filter: cached_sort_filter,\n\t\t\t\t\tdefault_select_grid_sort_filter: cached_selected_grid_sort_filter,\n\t\t\t\t\ttree_mode: tree_mode,\n\t\t\t\t\tcolumn_option_key: column_option_key,\n\t\t\t\t\tapi: api,\n\t\t\t\t\tdisplay_column_settings: $this.shouldInitColumns(),\n\n\t\t\t\t\ton_tree_grid_row_select: on_tree_grid_row_select\n\t\t\t\t} );\n\n\t\t\t\ta_dropdown_div = $( '<div id=\\'' + id + 'a_dropdown_div\\' class=\\'a-dropdown-div\\'></div>' );\n\n\t\t\t\ta_dropdown_div.append( a_dropdown );\n\n\t\t\t\ta_dropdown_div.mouseenter( function() {\n\t\t\t\t\tis_mouse_over = true;\n\t\t\t\t} );\n\n\t\t\t\ta_dropdown_div.mouseleave( function() {\n\t\t\t\t\tis_mouse_over = false;\n\t\t\t\t} );\n\n\t\t\t\t$( 'body' ).append( a_dropdown_div );\n\n\t\t\t\tTTPromise.wait( 'AComboBox', 'init', function() {\n\t\t\t\t\ta_dropdown.setGridColumnsWidths();\n\n\t\t\t\t\tif ( allow_multiple_selection && $this.getValue().length > 0 && api ) {\n\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\targs.filter_data = { id: $this.getValue() };\n\t\t\t\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\t\t\t\targs.filter_items_per_page = 10000;\n\n\t\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\tdoNext( result );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdoNext();\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction doNext( result ) {\n\t\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\t\ta_dropdown.setRealSelectItems( result.getResult(), $this.getValue() );\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta_dropdown_div.css( 'opacity', '1' );\n\n\t\t\t\t\t\t//#2353 - remove the right side border from jqgrid.\n\t\t\t\t\t\tvar tables = $this.find( '.ui-jqgrid' ).find( 'table' );\n\t\t\t\t\t\tif ( tables.length > 0 ) {\n\t\t\t\t\t\t\tfor ( var i = 0; i < tables.length; i++ ) {\n\t\t\t\t\t\t\t\t//resize awesomebox grid tables to remove right-size gap.\n\t\t\t\t\t\t\t\tvar width = $( tables[0] ).parents( '.ui-jqgrid' ).find( '.ui-jqgrid-bdiv' ).width() - 11;\n\t\t\t\t\t\t\t\t$( tables[0] ).parents( '.ui-jqgrid' ).find( '.ui-jqgrid-view' ).width( width );\n\t\t\t\t\t\t\t\t$( tables[i] ).width( width );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ta_dropdown.setUnSelectGridDragAble();\n\t\t\t\t\t\ta_dropdown.setSelectGridDragAble();\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\ta_dropdown.bind( 'close', $this.onClose );\n\n\t\t\t\tvar layout = ALayoutCache.layout_dic[layout_name];\n\n\t\t\t\t//Always use columns from global cache if columns is not default\n\t\t\t\tif ( layout_name && layout && Global.isSet( layout.data ) ) {\n\n\t\t\t\t\tvar current_display_columns = layout.data.display_columns;\n\n\t\t\t\t\t//Happen when save no columns in column setting for navigation mode\n\t\t\t\t\tif ( current_display_columns.length > 0 ) {\n\t\t\t\t\t\t//Only check possible columns if any\n\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\tcurrent_display_columns = filterBaseOnPossibleColumns( current_display_columns );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( list_view_default_columns ) {\n\t\t\t\t\t\t\tcurrent_display_columns = list_view_default_columns;\n\t\t\t\t\t\t\tcurrent_display_columns = filterBaseOnPossibleColumns( current_display_columns );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent_display_columns = Global.convertColumnsTojGridFormat( current_display_columns, layout_name );\n\n\t\t\t\t\tvar current_row_per_page = layout.data.row_per_page;\n\n\t\t\t\t\t//If current columns or row_per_page not same as saved layout. Reload data base on current setting\n\t\t\t\t\tif ( $this.checkIfLayoutChanged( current_display_columns ) || ( row_per_page !== current_row_per_page && !navigation_mode ) ) {\n\n\t\t\t\t\t\tdisplay_columns = current_display_columns;\n\t\t\t\t\t\tsource_data = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !navigation_mode ) {\n\t\t\t\t\t\trow_per_page = current_row_per_page;\n\n\t\t\t\t\t\tif ( !set_default_args_manually ) {\n\t\t\t\t\t\t\tif ( Global.isSet( layout.data.type ) && layout.data.type === 10 ) {\n\t\t\t\t\t\t\t\tvar default_args = {};\n\t\t\t\t\t\t\t\tdefault_args.filter_data = layout.data.filter_data;\n\t\t\t\t\t\t\t\tdefault_args.filter_sort = layout.data.filter_sort;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdefault_args = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//Set columns first\n\t\t\t\ta_dropdown.setColumns( display_columns );\n\n\t\t\t\t//Set DropDown position\n\t\t\t\t//use default with since .width()  not return correct width when first open\n\n\t\t\t\tvar dropdown_width = a_dropdown.getBoxWidth();\n\n\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\tdropdown_width = dropdown_width * 2 + 30 + 15;\n\t\t\t\t}\n\n\t\t\t\tif ( ( dropdown_width + $( $this ).offset().left + 50 ) > Global.bodyWidth() ) {\n\t\t\t\t\ta_dropdown_div.css( 'left', ( Global.bodyWidth() - dropdown_width - 50 ) );\n\t\t\t\t} else {\n\t\t\t\t\ta_dropdown_div.css( 'left', $( $this ).offset().left );\n\t\t\t\t}\n\n\t\t\t\t// makes sure it shown on the screen, will calculte position after source setting\n\t\t\t\tif ( ( $( $this ).offset().top + 25 + 275 ) < Global.bodyHeight() ) {\n\t\t\t\t\ta_dropdown_div.css( 'top', ( $( $this ).offset().top + 25 ) );\n\t\t\t\t} else {\n\t\t\t\t\ta_dropdown_div.css( 'top', ( $( $this ).offset().top - 275 ) );\n\t\t\t\t}\n\n\t\t\t\t// This will never change when search in search input. Set it back to dropdown every time when open\n\t\t\t\tif ( !source_data ) {\n\t\t\t\t\tvar args = $this.buildUnSelectGridFilter();\n\n\t\t\t\t\t//Error: TypeError: api is null in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141117-112033 line 2364\n\t\t\t\t\tif ( !api ) {\n\n\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsource_data = result_data;\n\n\t\t\t\t\t\t\t//set this outside, to add more data to source_data\n\t\t\t\t\t\t\tif ( addition_source_function ) {\n\t\t\t\t\t\t\t\tsource_data = addition_source_function( $this, source_data );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnavigation_mode_source_data_before_open = null;\n\n\t\t\t\t\t\t\tif ( Global.isSet( api ) ) {\n\t\t\t\t\t\t\t\tsource_data = Global.formatGridData( source_data, api.key_name );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t\t\tif ( set_all ) {\n\t\t\t\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// For select items which only contains ids, like all awesomeboxes in edit view\n\t\t\t\t\t\t\t\t// Similar code is also below in the } else { clause of this IF statement.\n\t\t\t\t\t\t\t\tif ( get_real_data_when_open ) {\n\t\t\t\t\t\t\t\t\tget_real_data_when_open = false;\n\n\t\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\n\t\t\t\t\t\t\t\t\tif ( !select_items || ( select_items && select_items.length == 1 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) ) {\n\t\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\t\t\t\t\targs.filter_data = { id: select_items };\n\t\t\t\t\t\t\t\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\t\t\t\t\t\t\t\targs.filter_items_per_page = 10000;\n\n\t\t\t\t\t\t\t\t\t\t//Error: TypeError: null is not an object (evaluating 'select_items.length') in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141230-113526 line 2441\n\t\t\t\t\t\t\t\t\t\t//if select items contains data like 0, for example Employee in Recurring Schedule edit view\n\t\t\t\t\t\t\t\t\t\tvar local_data = false;\n\t\t\t\t\t\t\t\t\t\tif ( select_items && select_items.length > 0 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) {\n\t\t\t\t\t\t\t\t\t\t\tlocal_data = $this.getLocalSelectItem( select_items[0] );\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\t\t\t\t\tselect_items = result.getResult();\n\n\t\t\t\t\t\t\t\t\t\t\t\tif ( local_data ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tselect_items.unshift( local_data );\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t//a_dropdown.setSelectGridData( select_items ); //set Selected Data after set sourceData\n\t\t\t\t\t\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t\t\t//a_dropdown.setSelectGridData( select_items ); //set Selected Data after set sourceData\n\t\t\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( set_empty || set_any || set_default || set_open || set_special_empty ) {\n\t\t\t\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t\ta_dropdown.setSelectItem( select_item );\n\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpager_data = result.getPagerData();\n\t\t\t\t\t\t\ta_dropdown.setPagerData( pager_data );\n\n\t\t\t\t\t\t\tif ( !Global.isEmpty( cached_search_inputs_filter ) || !Global.isEmpty( cached_sort_filter ) ) {\n\t\t\t\t\t\t\t\ta_dropdown.getUnSelectGrid().grid.hide();\n\t\t\t\t\t\t\t\t$this.onADropDownSearch( 'unselect_grid' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( !Global.isEmpty( cached_select_grid_search_inputs_filter ) || !Global.isEmpty( cached_selected_grid_sort_filter ) ) {\n\t\t\t\t\t\t\t\ta_dropdown.getSelectGrid().grid.hide();\n\t\t\t\t\t\t\t\t$this.onADropDownSearch( 'select_grid' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else { //Use cache if already loaded data before\n\n\t\t\t\t\tif ( Global.isSet( api ) ) {\n\t\t\t\t\t\tsource_data = Global.formatGridData( source_data, api.key_name );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( allow_multiple_selection ) {\n\n\t\t\t\t\t\tif ( layout_name === 'global_sort_columns' ) {\n\t\t\t\t\t\t\tselect_items = buildSortBySelectColumns( select_items );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Similar code is also below in the above TRUE IF statement clause.\n\t\t\t\t\t\tif ( get_real_data_when_open ) {\n\t\t\t\t\t\t\tget_real_data_when_open = false;\n\n\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\n\t\t\t\t\t\t\tif ( !select_items || ( select_items && select_items.length == 1 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) ) {\n\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\t\t\targs.filter_data = { id: select_items };\n\t\t\t\t\t\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\t\t\t\t\t\targs.filter_items_per_page = 10000;\n\n\t\t\t\t\t\t\t\t//Error: TypeError: null is not an object (evaluating 'select_items.length') in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141230-113526 line 2441\n\t\t\t\t\t\t\t\t//if select items contains data like 0, for example Employee in Recurring Schedule edit view\n\t\t\t\t\t\t\t\tvar local_data = false;\n\t\t\t\t\t\t\t\tif ( select_items && select_items.length > 0 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) {\n\t\t\t\t\t\t\t\t\tlocal_data = $this.getLocalSelectItem( select_items[0] );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\t\t\tselect_items = result.getResult();\n\n\t\t\t\t\t\t\t\t\t\tif ( local_data ) {\n\t\t\t\t\t\t\t\t\t\t\tselect_items.unshift( local_data );\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t\t\t\t//a_dropdown.setSelectGridData( select_items ); //set Selected Data after set sourceData\n\t\t\t\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t//a_dropdown.setSelectGridData( select_items );\n\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\ta_dropdown.setSelectItem( select_item );\n\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t}\n\n\t\t\t\t\ta_dropdown.setPagerData( pager_data );\n\n\t\t\t\t\tif ( !Global.isEmpty( cached_search_inputs_filter ) || !Global.isEmpty( cached_sort_filter ) ) {\n\t\t\t\t\t\ta_dropdown.getUnSelectGrid().grid.hide();\n\t\t\t\t\t\t$this.onADropDownSearch( 'unselect_grid' );\n\t\t\t\t\t\tcurrent_open_page = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( current_open_page > 1 && current_open_page <= pager_data.last_page_number ) {\n\t\t\t\t\t\t\ta_dropdown.getUnSelectGrid().grid.hide();\n\t\t\t\t\t\t\t$this.onADropDownSearch( 'unselect_grid', current_open_page );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !Global.isEmpty( cached_select_grid_search_inputs_filter ) || !Global.isEmpty( cached_selected_grid_sort_filter ) ) {\n\t\t\t\t\t\t//a_dropdown.getSelectGrid().grid.hide(); //#2721 - This helps fixes a bug where if you expand a awesomebox (ie: Edit Policy Group, Absence Policys), on right-hand side click clear search. Click Move All on right-hand side. Collapse, expand, click move All left-hand side. Both sides are now blank because the right grid had a display: none attached to it.\n\t\t\t\t\t\t$this.onADropDownSearch( 'select_grid' );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.AComboBox.defaults = {};\n\n} )( jQuery );"],"sourceRoot":""}