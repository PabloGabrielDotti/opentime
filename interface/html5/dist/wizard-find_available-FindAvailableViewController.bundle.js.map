{"version":3,"sources":["webpack://timetrex/./interface/html5/views/wizard/find_available/FindAvailableViewController.js"],"names":["FindAvailableViewController","BaseViewController","options","_","defaults","el","status_array","sex_array","user_group_array","country_array","province_array","company_api","super","this","permission_id","viewId","script_name","api","TTAPI","APIScheduleAdvanced","APICompany","$","css","render","initData","target_type","show_new_btn","showNoResultCover","$this","grid","setGridWidth","width","setGridHeight","height","search_panel","window","off","on","set_default_menu","page_action","page_number","setGridSize","Global","isSet","filter","filter_columns","getFilterColumnsFromDisplayColumns","filter_items_per_page","pager_data","LocalCacheData","paging_type","filter_page","next_page","previous_page","last_page_number","current_page","sub_view_mode","parent_key","select_layout","data","filter_data","parent_value","getSubViewFilter","convertLayoutFilterToAPIFilter","filter_sort","TTUUID","isUUID","refresh_id","id","getScheduleAvailableUsers","onResult","result","result_data","getResult","isArray","removeNoResultCover","__createRowId","formatGridData","key_name","grid_source_data","getData","len","length","type","found","new_record","i","setRowData","push","setData","getPagerData","paging_widget","setPagerData","paging_widget_2","getGridParam","concat","setGridCellBackGround","ProgressBar","closeOverlay","setDefaultMenu","is_last_page","autoOpenEditViewIfNecessary","searchDone","removeClass","setTotalDisplaySpan","ui_id","sub_view_grid_autosize","TTPromise","resolve","current_view_div","find","saved_layout_li","parent","offset_left","offset","left","bodyWidth","callBack","APIUser","APIUserGroup","option_name","field_name","initDropDownOptions","getUserGroup","res","buildTreeRecord","edit_only_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","getSelectTabIndex","select_value","getValue","setProvince","change","proxy","selectVal","setValue","val","m","getOptions","buildRecordArray","buildSearchFields","search_fields","SearchField","label","i18n","in_column","field","multiple","basic_search","adv_search","layout_name","form_item_type","FormItemType","AWESOME_BOX","TEXT_INPUT","TAG_INPUT","tree_mode","api_class","APIBranch","APIDepartment","COMBO_BOX","APIUserTitle"],"mappings":"uMAAO,MAAMA,UAAoCC,mBAChD,YAAaC,EAAU,IACtBC,EAAEC,SAAUF,EAAS,CACpBG,GAAI,iCACJC,aAAc,KACdC,UAAW,KACXC,iBAAkB,KAClBC,cAAe,KACfC,eAAgB,KAEhBC,YAAa,OAGdC,MAAOV,GAGR,KAAMA,GAELW,KAAKC,cAAgB,OACrBD,KAAKE,OAAS,gBACdF,KAAKG,YAAc,oBAEnBH,KAAKI,IAAMC,MAAMC,oBACjBN,KAAKF,YAAcO,MAAME,WAEzBC,EAAGR,KAAKR,IAAKiB,IAAK,UAAW,GAC7BT,KAAKU,SAELV,KAAKW,WAIN,mBAAoBC,IAIpB,kBAAmBC,GAClBd,MAAMe,mBAAmB,GAG1B,cACC,IAAIC,EAAQf,KACZA,KAAKgB,KAAKC,aAAcT,EAAGR,KAAKR,IAAK0B,SACrClB,KAAKgB,KAAKG,cAAeX,EAAGR,KAAKR,IAAK4B,SAAWpB,KAAKqB,aAAaD,SAAW,IAC9EZ,EAAGc,QAASC,IAAK,UAAWC,GAAI,UAAU,WACzCT,EAAMC,KAAKC,aAAcT,EAAGO,EAAMvB,IAAK0B,SACvCH,EAAMC,KAAKG,cAAeX,EAAGO,EAAMvB,IAAK4B,SAAWL,EAAMM,aAAaD,SAAW,OAInF,OAAQK,EAAkBC,EAAaC,GAEtC3B,KAAK4B,cACCC,OAAOC,MAAOL,KACnBA,GAAmB,GAGpB,IAAIV,EAAQf,KACR+B,EAAS,CACb,YAAqB,GACrB,YAAqB,IAIrB,GAHAA,EAAOC,eAAiBhC,KAAKiC,qCAC7BF,EAAOG,sBAAwB,EAE1BlC,KAAKmC,WAET,GAAoC,IAA/BC,eAAeC,YAElBN,EAAOO,YADa,SAAhBZ,EACiB1B,KAAKmC,WAAWI,UAEhB,OAItB,OAASb,GACR,IAAK,OACJK,EAAOO,YAActC,KAAKmC,WAAWI,UACrC,MACD,IAAK,OACJR,EAAOO,YAActC,KAAKmC,WAAWK,cACrC,MACD,IAAK,QACJT,EAAOO,YAAc,EACrB,MACD,IAAK,MACJP,EAAOO,YAActC,KAAKmC,WAAWM,iBACrC,MACD,IAAK,QACJV,EAAOO,YAAcX,EACrB,MACD,QACCI,EAAOO,YAActC,KAAKmC,WAAWO,kBAOxCX,EAAOO,YAAc,EAGjBtC,KAAK2C,eAAiB3C,KAAK4C,aAC/B5C,KAAK6C,cAAcC,KAAKC,YAAY/C,KAAK4C,YAAc5C,KAAKgD,cAGxDnB,OAAOC,MAAO9B,KAAKiD,oBAEvBjD,KAAK6C,cAAcC,KAAKC,YAAc/C,KAAKiD,iBAAkBjD,KAAK6C,cAAcC,KAAKC,cAMtFhB,EAAOgB,YAAclB,OAAOqB,+BAAgClD,KAAK6C,eACjEd,EAAOoB,YAAcnD,KAAK6C,cAAcC,KAAKK,YAExCC,OAAOC,OAAQrD,KAAKsD,cACxBvB,EAAOgB,YAAc,GACrBhB,EAAOgB,YAAYQ,GAAK,CAACvD,KAAKsD,aAG/BtD,KAAKI,IAAIoD,0BAA2BzB,EAAQ,CAC3C0B,SAAU,SAAUC,GAEnB,IAAIC,EAAcD,EAAOE,YAYzB,GAXM/B,OAAOgC,QAASF,IAGrB5C,EAAM+C,sBACDjC,OAAOC,MAAOf,EAAMgD,iBACxBJ,EAAc5C,EAAMgD,cAAeJ,IAGpCA,EAAc9B,OAAOmC,eAAgBL,EAAa5C,EAAMX,IAAI6D,WAP5DlD,EAAMD,oBAUFsC,OAAOC,OAAQtC,EAAMuC,YAAe,CACxCvC,EAAMuC,WAAa,KACnB,IAAIY,EAAmBnD,EAAMC,KAAKmD,UAC9BC,EAAMF,EAAiBG,OAES,UAA/B7D,EAAE8D,KAAMJ,KACZA,EAAmB,IAKpB,IAFA,IAAIK,GAAQ,EACRC,EAAab,EAAY,GACnBc,EAAI,EAAGA,EAAIL,EAAKK,IAAM,CAQ/B,GAPaP,EAAiBO,GAOlBlB,IAAMiB,EAAWjB,GAAK,CACjCxC,EAAMC,KAAK0D,WAAYF,EAAWjB,GAAIiB,GACtCD,GAAQ,EACR,OAIIA,IACLL,EAAiBS,KAAMH,GACvBzD,EAAMC,KAAK4D,QAASV,QAGf,CAWN,GARAnD,EAAMoB,WAAauB,EAAOmB,eAGU,IAA/BzC,eAAeC,cACnBtB,EAAM+D,cAAcC,aAAchE,EAAMoB,YACxCpB,EAAMiE,gBAAgBD,aAAchE,EAAMoB,aAGP,IAA/BC,eAAeC,aAAqC,SAAhBX,EAExCiC,EADmB5C,EAAMC,KAAKiE,aAAc,QACjBC,OAAQvB,GAGpC5C,EAAMC,KAAK4D,QAASjB,GAGrB5C,EAAMoE,wBAENC,YAAYC,eACP5D,GACJV,EAAMuE,gBAAgB,GAGa,IAA/BlD,eAAeC,eACbtB,EAAMoB,YAAcpB,EAAMoB,WAAWoD,aAC1CxE,EAAM+D,cAAcrE,IAAK,UAAW,QAEpCM,EAAM+D,cAAcrE,IAAK,UAAW,UAGtCM,EAAMyE,8BAENzE,EAAM0E,gBAMT,aAGCjF,EAAG,kBAAmBkF,YAAa,iBAEnC1F,KAAK2F,sBAEL3F,KAAK4B,YAAa5B,KAAK4F,MAAO5F,KAAK2C,cAAe3C,KAAK6F,uBAAwB7F,KAAKmC,YACpF2D,UAAUC,QAAS,OAAQ,QAE3BvF,EAAGR,KAAKR,IAAKiB,IAAK,UAAW,GAK9B,yBACC,IAAIuF,EAAmBhG,KAAKqB,aAAa4E,KAAM,wBAC3CC,EAAkBlG,KAAKqB,aAAa4E,KAAM,yBAA4BE,SACtEC,EAAcF,EAAgBG,SAASC,MAASzE,OAAO0E,YAAc,EAAI,KAE7EP,EAAiBvF,IAAK,OAAQ2F,EAAcF,EAAgBhF,QAAU,IAGvE,YAAasF,GAEZ,IAAIzF,EAAQf,KACRI,EAAMC,MAAMoG,QACZ9G,EAAmBU,MAAMqG,aACzBrH,EAAU,CACb,CAAEsH,YAAa,SAAUC,WAAY,KAAMxG,IAAKA,GAChD,CAAEuG,YAAa,MAAOC,WAAY,KAAMxG,IAAKA,GAC7C,CAAEuG,YAAa,UAAWC,WAAY,UAAWxG,IAAKJ,KAAKF,cAG5DE,KAAK6G,oBAAqBxH,GAAS,SAAUqE,GAE5C/D,EAAiBmH,aAAc,IAAI,GAAO,EAAO,CAChDrD,SAAU,SAAUsD,GAEnBA,EAAMA,EAAInD,YACVmD,EAAMlF,OAAOmF,gBAAiBD,GAExBhG,EAAMkG,iBACLlG,EAAM4B,eAAiB5B,EAAMmG,0BAAoC,WACtEnG,EAAMmG,0BAAoC,SAAEC,cAAeJ,GAC3DhG,EAAMqG,wBAAkC,SAAED,cAAeJ,IAK3DhG,EAAMpB,iBAAmBoH,EAEpBP,GACJA,EAAU9C,SAQf,4BACC,GAA+C,IAA1C1D,KAAKqB,aAAagG,oBAA4B,CAClD,IACIC,EADQtH,KAAKoH,wBAAiC,QACzBG,WACzBvH,KAAKwH,YAAaF,IAIpB,yBAC2BtH,KAAKqB,aAAa4E,KAAM,qBAGnD,uBAECjG,KAAKoH,wBAAiC,QAAEK,OAAQjH,EAAEkH,OAAO,WACxD,IACIC,EADQ3H,KAAKoH,wBAAiC,QAC5BG,WAEtBvH,KAAKwH,YAAaG,GAElB3H,KAAKoH,wBAAkC,SAAEQ,SAAU,QAEjD5H,OAGJ,YAAa6H,EAAKC,GACjB,IAAI/G,EAAQf,KAEN6H,GAAe,OAARA,GAAwB,MAARA,EAK5B7H,KAAKF,YAAYiI,WAAY,WAAYF,EAAK,CAC7CpE,SAAU,SAAUsD,IACnBA,EAAMA,EAAInD,eAETmD,EAAM,IAGPhG,EAAMlB,eAAiBgC,OAAOmG,iBAAkBjB,GAChDhG,EAAMqG,wBAAkC,SAAED,cAAepG,EAAMlB,oBAZjEkB,EAAMlB,eAAiB,GACvBG,KAAKoH,wBAAkC,SAAED,cAAe,KAkB1D,oBAECpH,MAAMkI,oBAENjI,KAAKkI,cAAgB,CAEpB,IAAIC,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,UACjBgJ,UAAW,EACXC,MAAO,YACPC,UAAU,EACVC,cAAc,EACdC,YAAY,EACZC,YAAa,uBACbC,eAAgBC,aAAaC,cAE9B,IAAIX,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,cACjBgJ,UAAW,EACXC,MAAO,aACPE,cAAc,EACdC,YAAY,EACZE,eAAgBC,aAAaE,aAE9B,IAAIZ,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,aACjBiJ,MAAO,YACPE,cAAc,EACdC,YAAY,EACZJ,UAAW,EACXM,eAAgBC,aAAaE,aAE9B,IAAIZ,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,cACjBiJ,MAAO,aACPE,cAAc,EACdC,YAAY,EACZJ,UAAW,EACXM,eAAgBC,aAAaE,aAE9B,IAAIZ,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,QACjBiJ,MAAO,MACPE,cAAc,EACdC,YAAY,EACZJ,UAAW,EACXM,eAAgBC,aAAaG,YAE9B,IAAIb,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,mBACjBiJ,MAAO,kBACPE,cAAc,EACdC,YAAY,EACZJ,UAAW,EACXM,eAAgBC,aAAaE,aAE9B,IAAIZ,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,OACjBgJ,UAAW,EACXC,MAAO,SACPC,UAAU,EACVC,cAAc,EACdC,YAAY,EACZC,YAAa,uBACbC,eAAgBC,aAAaC,cAE9B,IAAIX,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,SACjBgJ,UAAW,EACXE,UAAU,EACVD,MAAO,WACPI,YAAa,qBACbM,WAAW,EACXR,cAAc,EACdC,YAAY,EACZE,eAAgBC,aAAaC,cAE9B,IAAIX,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,kBACjBgJ,UAAW,EACXC,MAAO,oBACPI,YAAa,gBACbO,UAAW7I,MAAM8I,UACjBX,UAAU,EACVC,cAAc,EACdC,YAAY,EACZE,eAAgBC,aAAaC,cAE9B,IAAIX,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,sBACjBiJ,MAAO,wBACPD,UAAW,EACXK,YAAa,oBACbO,UAAW7I,MAAM+I,cACjBZ,UAAU,EACVC,cAAc,EACdC,YAAY,EACZE,eAAgBC,aAAaC,cAE9B,IAAIX,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,WACjBgJ,UAAW,EACXC,MAAO,UACPC,UAAU,EACVC,cAAc,EACdC,YAAY,EACZC,YAAa,uBACbC,eAAgBC,aAAaQ,YAE9B,IAAIlB,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,kBACjBgJ,UAAW,EACXC,MAAO,WACPC,UAAU,EACVC,cAAc,EACdC,YAAY,EACZC,YAAa,uBACbC,eAAgBC,aAAaC,cAE9B,IAAIX,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,QACjBiJ,MAAO,OACPE,cAAc,EACdC,YAAY,EACZJ,UAAW,EACXM,eAAgBC,aAAaE,aAE9B,IAAIZ,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,SACjBiJ,MAAO,WACPD,UAAW,EACXK,YAAa,mBACbO,UAAW7I,MAAMiJ,aACjBd,UAAU,EACVC,cAAc,EACdC,YAAY,EACZE,eAAgBC,aAAaC,cAE9B,IAAIX,YAAa,CAChBC,MAAO5H,EAAE6H,KAAK/I,EAAG,4BACjBiJ,MAAO,6BACPE,cAAc,EACdC,YAAY,EACZJ,UAAW,EACXM,eAAgBC,aAAaE","file":"wizard-find_available-FindAvailableViewController.bundle.js?v=1b49e40626098434d774","sourcesContent":["export class FindAvailableViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#find_available_view_container',\n\t\t\tstatus_array: null,\n\t\t\tsex_array: null,\n\t\t\tuser_group_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\tcompany_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.permission_id = 'user';\n\t\tthis.viewId = 'FindAvailable';\n\t\tthis.script_name = 'PopUpEmployeeView';\n\n\t\tthis.api = TTAPI.APIScheduleAdvanced;\n\t\tthis.company_api = TTAPI.APICompany;\n\n\t\t$( this.el ).css( 'opacity', 0 );\n\t\tthis.render();\n\n\t\tthis.initData();\n\t}\n\n\t//No right click menu for this\n\tinitRightClickMenu( target_type ) {\n\t\treturn;\n\t}\n\n\tshowNoResultCover( show_new_btn ) {\n\t\tsuper.showNoResultCover( false );\n\t}\n\n\tsetGridSize() {\n\t\tvar $this = this;\n\t\tthis.grid.setGridWidth( $( this.el ).width() );\n\t\tthis.grid.setGridHeight( $( this.el ).height() - this.search_panel.height() - 65 );\n\t\t$( window ).off( 'resize' ).on( 'resize', function() {\n\t\t\t$this.grid.setGridWidth( $( $this.el ).width() );\n\t\t\t$this.grid.setGridHeight( $( $this.el ).height() - $this.search_panel.height() - 65 );\n\t\t} );\n\t}\n\n\tsearch( set_default_menu, page_action, page_number ) {\n\n\t\tthis.setGridSize();\n\t\tif ( !Global.isSet( set_default_menu ) ) {\n\t\t\tset_default_menu = true;\n\t\t}\n\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_columns = this.getFilterColumnsFromDisplayColumns();\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\n\t\tif ( this.pager_data ) {\n\n\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\tif ( page_action === 'next' ) {\n\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t} else {\n\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tswitch ( page_action ) {\n\t\t\t\t\tcase 'next':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'last':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.previous_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'start':\n\t\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.last_page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'go_to':\n\t\t\t\t\t\tfilter.filter_page = page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.current_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\n\t\tif ( this.sub_view_mode && this.parent_key ) {\n\t\t\tthis.select_layout.data.filter_data[this.parent_key] = this.parent_value;\n\t\t}\n\t\t//If sub view controller set custom filters, get it\n\t\tif ( Global.isSet( this.getSubViewFilter ) ) {\n\n\t\t\tthis.select_layout.data.filter_data = this.getSubViewFilter( this.select_layout.data.filter_data );\n\n\t\t}\n\n\t\t//select_layout will not be null, it's set in setSelectLayout function\n\n\t\tfilter.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\tfilter.filter_sort = this.select_layout.data.filter_sort;\n\n\t\tif ( TTUUID.isUUID( this.refresh_id ) ) {\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = [this.refresh_id];\n\t\t}\n\n\t\tthis.api.getScheduleAvailableUsers( filter, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t} else {\n\t\t\t\t\t$this.removeNoResultCover();\n\t\t\t\t\tif ( Global.isSet( $this.__createRowId ) ) {\n\t\t\t\t\t\tresult_data = $this.__createRowId( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_data = Global.formatGridData( result_data, $this.api.key_name );\n\t\t\t\t}\n\n\t\t\t\tif ( TTUUID.isUUID( $this.refresh_id ) ) {\n\t\t\t\t\t$this.refresh_id = null;\n\t\t\t\t\tvar grid_source_data = $this.grid.getData();\n\t\t\t\t\tvar len = grid_source_data.length;\n\n\t\t\t\t\tif ( $.type( grid_source_data ) !== 'array' ) {\n\t\t\t\t\t\tgrid_source_data = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tvar found = false;\n\t\t\t\t\tvar new_record = result_data[0];\n\t\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\t\tvar record = grid_source_data[i];\n\n\t\t\t\t\t\t//Fixed === issue. The id set by jQGrid is string type.\n\t\t\t\t\t\t// if ( !isNaN( parseInt( record.id ) ) ) {\n\t\t\t\t\t\t// \trecord.id = parseInt( record.id );\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\tif ( record.id == new_record.id ) {\n\t\t\t\t\t\t\t$this.grid.setRowData( new_record.id, new_record );\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !found ) {\n\t\t\t\t\t\tgrid_source_data.push( new_record );\n\t\t\t\t\t\t$this.grid.setData( grid_source_data );\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//Set Page data to widget, next show display info when setDefault Menu\n\t\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\t\t//CLick to show more mode no need this step\n\t\t\t\t\tif ( LocalCacheData.paging_type !== 0 ) {\n\t\t\t\t\t\t$this.paging_widget.setPagerData( $this.pager_data );\n\t\t\t\t\t\t$this.paging_widget_2.setPagerData( $this.pager_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( LocalCacheData.paging_type === 0 && page_action === 'next' ) {\n\t\t\t\t\t\tvar current_data = $this.grid.getGridParam( 'data' );\n\t\t\t\t\t\tresult_data = current_data.concat( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.grid.setData( result_data );\n\t\t\t\t}\n\n\t\t\t\t$this.setGridCellBackGround(); //Set cell background for some views\n\n\t\t\t\tProgressBar.closeOverlay(); //Add this in initData\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.setDefaultMenu( true );\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\tif ( !$this.pager_data || $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'none' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'block' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$this.autoOpenEditViewIfNecessary();\n\n\t\t\t\t$this.searchDone();\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsearchDone() {\n\t\t//the rotate icon from search panel\n\t\tvar $this = this;\n\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tthis.setGridSize( this.ui_id, this.sub_view_mode, this.sub_view_grid_autosize, this.pager_data );\n\t\tTTPromise.resolve( 'init', 'init' );\n\n\t\t$( this.el ).css( 'opacity', 1 );\n\t}\n\n\t//\n\n\tsetCurrentViewPosition() {\n\t\tvar current_view_div = this.search_panel.find( '.layout-selector-div' );\n\t\tvar saved_layout_li = this.search_panel.find( 'a[ref=\\'saved_layout\\']' ).parent();\n\t\tvar offset_left = saved_layout_li.offset().left - ( Global.bodyWidth() / 2 - 500 );\n\n\t\tcurrent_view_div.css( 'left', offset_left + saved_layout_li.width() + 20 );\n\t}\n\n\tinitOptions( callBack ) {\n\n\t\tvar $this = this;\n\t\tvar api = TTAPI.APIUser;\n\t\tvar user_group_array = TTAPI.APIUserGroup;\n\t\tvar options = [\n\t\t\t{ option_name: 'status', field_name: null, api: api },\n\t\t\t{ option_name: 'sex', field_name: null, api: api },\n\t\t\t{ option_name: 'country', field_name: 'country', api: this.company_api }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\n\t\t\tuser_group_array.getUserGroup( '', false, false, {\n\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tres = Global.buildTreeRecord( res );\n\n\t\t\t\t\tif ( !$this.edit_only_mode ) {\n\t\t\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} );\n\t}\n\n\tonSetSearchFilterFinished() {\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildBasicUIFinished() {\n\t\tvar basicSearchTabPanel = this.search_panel.find( 'div #basic_search' );\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tfield: 'last_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Home Phone' ),\n\t\t\t\tfield: 'home_phone',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Number' ),\n\t\t\t\tfield: 'employee_number',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Sex' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'sex_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Min. Time Between Shifts' ),\n\t\t\t\tfield: 'minimum_time_between_shift',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t];\n\n\t}\n\n}"],"sourceRoot":""}