{"version":3,"sources":["webpack://timetrex/./interface/html5/views/invoice/client_contact/ClientContactViewController.js"],"names":["ClientContactViewController","BaseViewController","options","_","defaults","el","status_array","type_array","country_array","province_array","e_province_array","district_array","company_api","area_policy_api","sub_document_view_controller","document_object_type_id","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIClientContact","APICompany","APIAreaPolicy","render","buildContextMenu","sub_view_mode","initData","setSelectRibbonMenuIfNecessary","initDropDownOption","column_filter","_getFilterColumnsFromDisplayColumns","context_menu_model","exclude","include","label","id","ContextMenuIconName","add_company","group","icon","Icons","companies","map","push","export_excel","edit_client","client","invoice","transaction","payment_method","context_btn","grid_selected_length","PermissionManager","validate","addClass","removeClass","doNotSetFocus","context_menu_array","Global","isSet","selectContextMenu","setTotalDisplaySpan","len","length","getGridSelectIdArray","i","find","attr","add","setDefaultMenuAddIcon","edit","setDefaultMenuEditIcon","view","setDefaultMenuViewIcon","mass_edit","setDefaultMenuMassEditIcon","copy","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","cancel","setDefaultMenuCancelIcon","setDefaultMenuEditClientIcon","setDefaultMenuAddCompanyIcon","setDefaultMenuExportIcon","setDefaultMenuMapIcon","setContextMenuGroupVisibility","is_mass_editing","setEditMenuSaveIcon","setEditMenuAddIcon","setEditMenuEditIcon","setEditMenuViewIcon","setEditMenuMassEditIcon","setEditMenuCopyIcon","setEditMenuDeleteIcon","setEditMenuDeleteAndNextIcon","setEditMenuSaveAndContinueIcon","setEditMenuSaveAndAddIcon","setEditMenuSaveAndNextIcon","setEditMenuSaveAndCopyIcon","setEditMenuCopyAndAddIcon","setEditMenuEditClientIcon","setEditMenuAddCompanyIcon","pId","current_edit_record","getProductEdition","is_viewing","ProgressBar","showProgressBar","data","filter_columns","first_name","last_name","type","address1","address2","city","province","country","postal_code","latitude","longitude","ids","filter_data","convertLayoutFilterToAPIFilter","select_layout","cells","getClientContact","async","getResult","then","module","processed_data_for_map","TTConvertMapData","processBasicFromGenericViewController","IndexViewController","openEditView","catch","importErrorHandler","onNavigationClick","onAddCompanyClick","onMapClick","$this","edit_view","addCompany","onResult","result","isValid","search","TAlertManager","showErrorAlert","iconName","grid_selected_id_array","filter","client_ids","client_id","each","index","value","grid_selected_row","getRecordFromGridById","addViewTab","window","location","href","goToView","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","APIUserTitle","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_contact_information","edit_view_tab","tab_contact_information_column1","edit_view_tabs","form_item_input","loadWidgetByName","FormItemType","AWESOME_BOX","APIClient","set_empty","field","addEditFieldToColumn","COMBO_BOX","TComboBox","setSourceData","CHECKBOX","TCheckbox","APICurrency","TEXT_INPUT","TTextInput","width","parent","TAG_INPUT","TTagInput","object_type_id","tab_contact_information_column2","change","proxy","c","edit_view_ui_dic","getValue","p","setDistrict","TEXT_AREA","TTextArea","tab_policy_column1","APITaxPolicy","tab_portal_column1","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser","setSelectLayout","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","widget","setValue","onCountryChange","onEditClick","setCountryValue","collectUIDataToCurrentEditRecord","setEditViewDataDone","search_panel","getSelectTabIndex","select_value","adv_search_field_ui_dic","setProvince","val","m","getOptions","res","buildRecordArray","refresh","province_widget","district_widget","getDistrictOptions","selectVal","removeEditView","sub_client_contact_view_controller","loadSubView","container","beforeViewLoadedFun","afterViewLoadedFun","loadViewSource","template","html"],"mappings":"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","file":"invoice-client_contact-ClientContactViewController.bundle.js?v=7ae6514bc450c588d88e","sourcesContent":["export class ClientContactViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#client_contact_view_container',\n\n\t\t\tstatus_array: null,\n\t\t\ttype_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\te_province_array: null,\n\n\t\t\tdistrict_array: null,\n\n\t\t\tcompany_api: null,\n\t\t\tarea_policy_api: null,\n\t\t\tsub_document_view_controller: null,\n\t\t\tdocument_object_type_id: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'ClientContactEditView.html';\n\t\tthis.permission_id = 'client';\n\t\tthis.viewId = 'ClientContact';\n\t\tthis.script_name = 'ClientContactView';\n\t\tthis.table_name_key = 'client_contact';\n\t\tthis.document_object_type_id = 85;\n\t\tthis.context_menu_name = $.i18n._( 'Client Contacts' );\n\t\tthis.navigation_label = $.i18n._( 'Client Contact' ) + ':';\n\t\tthis.api = TTAPI.APIClientContact;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.area_policy_api = TTAPI.APIAreaPolicy;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status' );\n\t\tthis.initDropDownOption( 'type' );\n\t\tthis.initDropDownOption( 'country', 'country', this.company_api );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.client_id = true;\n\t\tthis._getFilterColumnsFromDisplayColumns( column_filter, true );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [], //This is modified below.\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Add<br>Company' ),\n\t\t\t\t\tid: ContextMenuIconName.add_company,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.companies\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Map' ),\n\t\t\t\t\tid: ContextMenuIconName.map,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.map\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tcontext_menu_model.exclude.push( ContextMenuIconName.export_excel ); //Hide Export icon.\n\t\t} else {\n\t\t\tcontext_menu_model.include.push(\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Client' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_client,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.client\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Invoices' ),\n\t\t\t\t\tid: ContextMenuIconName.invoice,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.invoice\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Transactions' ),\n\t\t\t\t\tid: ContextMenuIconName.transaction,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.transaction\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Payment Methods' ),\n\t\t\t\t\tid: ContextMenuIconName.payment_method,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.payment_method\n\t\t\t\t},\n\t\t\t\tContextMenuIconName.export_excel\n\t\t\t);\n\t\t}\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetDefaultMenuAddCompanyIcon( context_btn, grid_selected_length ) {\n\n\t\tif ( !PermissionManager.validate( 'company', 'enabled' ) || !PermissionManager.validate( 'company', 'add' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\t/* jshint ignore:start */\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_client:\n\t\t\t\t\tthis.setDefaultMenuEditClientIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.add_company:\n\t\t\t\t\tthis.setDefaultMenuAddCompanyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.map:\n\t\t\t\t\tthis.setDefaultMenuMapIcon( context_btn );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\t/* jshint ignore:end */\n\n\t/* jshint ignore:start */\n\tsetEditMenu() {\n\n\t\tthis.selectContextMenu();\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\tswitch ( id ) {\n\t\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setEditMenuAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setEditMenuMassEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setEditMenuCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setEditMenuDeleteIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setEditMenuDeleteAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setEditMenuSaveAndContinueIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setEditMenuSaveAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setEditMenuSaveAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setEditMenuSaveAndCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setEditMenuCopyAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_client:\n\t\t\t\t\tthis.setEditMenuEditClientIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.add_company:\n\t\t\t\t\tthis.setEditMenuAddCompanyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\t/* jshint ignore:end */\n\n\tsetEditMenuAddCompanyIcon( context_btn, pId ) {\n\n\t\tif ( this.current_edit_record.id ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuEditClientIcon( context_btn, pId ) {\n\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuEditClientIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tonMapClick() {\n\t\t// only trigger map load in specific product editions.\n\t\tif ( ( Global.getProductEdition() >= 15 ) ) {\n\t\t\tthis.is_viewing = false;\n\t\t\tProgressBar.showProgressBar();\n\t\t\tvar data = {\n\t\t\t\tfilter_columns: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tclient: true,\n\t\t\t\t\tfirst_name: true,\n\t\t\t\t\tlast_name: true,\n\t\t\t\t\ttype: true,\n\t\t\t\t\taddress1: true,\n\t\t\t\t\taddress2: true,\n\t\t\t\t\tcity: true,\n\t\t\t\t\tprovince: true,\n\t\t\t\t\tcountry: true,\n\t\t\t\t\tpostal_code: true,\n\t\t\t\t\tlatitude: true,\n\t\t\t\t\tlongitude: true\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar ids = this.getGridSelectIdArray();\n\t\t\tdata.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\t\tif ( ids.length > 0 ) {\n\t\t\t\tdata.filter_data.id = ids;\n\t\t\t}\n\t\t\tvar cells = this.api.getClientContact( data, { async: false } ).getResult();\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\timport( /* webpackChunkName: \"leaflet-timetrex\" */ '@/framework/leaflet/leaflet-timetrex' ).then(( module )=>{\n\t\t\t\t\tvar processed_data_for_map = module.TTConvertMapData.processBasicFromGenericViewController( cells );\n\t\t\t\t\tIndexViewController.openEditView( this, 'Map', processed_data_for_map );\n\t\t\t\t}).catch( Global.importErrorHandler );\n\t\t\t}\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.edit_client:\n\t\t\tcase ContextMenuIconName.invoice:\n\t\t\tcase ContextMenuIconName.transaction:\n\t\t\tcase ContextMenuIconName.payment_method:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.add_company:\n\t\t\t\tthis.onAddCompanyClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.map:\n\t\t\t\tthis.onMapClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonAddCompanyClick() {\n\n\t\tvar $this = this;\n\t\tvar id = '';\n\n\t\tif ( this.edit_view ) {\n\t\t\tid = this.current_edit_record.id;\n\t\t} else {\n\t\t\tid = this.getGridSelectIdArray()[0];\n\t\t}\n\n\t\tthis.api.addCompany( id, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( !result.isValid() ) {\n\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t} else {\n\t\t\t\t\t$this.search();\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = { filter_data: {} };\n\n\t\tvar client_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tclient_ids.push( $this.current_edit_record.client_id );\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tclient_ids.push( grid_selected_row.client_id );\n\t\t\t} );\n\t\t}\n\n\t\tfilter.filter_data.client_id = client_ids;\n\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.edit_client:\n\t\t\t\tif ( client_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Client', client_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.invoice:\n\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Client Contacts' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'Invoice', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.transaction:\n\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Client Contacts' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'InvoiceTransaction', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.payment_method:\n\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Client Contacts' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'ClientPayment', filter );\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_contact_information': { 'label': $.i18n._( 'Contact Information' ) },\n\t\t\t'tab_policy': { 'label': $.i18n._( 'Policy' ) },\n\t\t\t'tab_portal': { 'label': $.i18n._( 'Portal' ) },\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_client_contact',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_contact_information = this.edit_view_tab.find( '#tab_contact_information' );\n\n\t\tvar tab_contact_information_column1 = tab_contact_information.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_contact_information_column1 );\n\n\t\t//Client\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIClient,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_client',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'client_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Client' ), form_item_input, tab_contact_information_column1, '' );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_contact_information_column1 );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_contact_information_column1 );\n\n\t\t// Default\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'is_default' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Default' ), form_item_input, tab_contact_information_column1 );\n\n\t\t// Currency\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APICurrency,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_currency',\n\t\t\tshow_search_inputs: true,\n\t\t\tfield: 'currency_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Currency' ), form_item_input, tab_contact_information_column1 );\n\n\t\t// First Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'first_name', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'First Name' ), form_item_input, tab_contact_information_column1 );\n\n\t\t// Last Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'last_name', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Last Name' ), form_item_input, tab_contact_information_column1 );\n\n\t\t// Address(Line 1)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'address1', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address(Line 1)' ), form_item_input, tab_contact_information_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Address(Line 2)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'address2', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address(Line 2)' ), form_item_input, tab_contact_information_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Address(Line 3)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'address3', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address(Line 3)' ), form_item_input, tab_contact_information_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 810 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_contact_information_column1, '', null, null, true );\n\n\t\tvar tab_contact_information_column2 = tab_contact_information.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0].push( tab_contact_information_column2 );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'city', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_contact_information_column2, '' );\n\n\t\t//Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'country', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_contact_information_column2 );\n\n\t\t//Province / State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'province' } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province / State' ), form_item_input, tab_contact_information_column2 );\n\n\t\tform_item_input.change( $.proxy( function() {\n\t\t\tvar c = this.edit_view_ui_dic['country'].getValue();\n\t\t\tvar p = this.edit_view_ui_dic['province'].getValue();\n\t\t\tthis.setDistrict( c, p );\n\n\t\t}, this ) );\n\n\t\t// District\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'invoice_district_id', set_empty: true } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'District' ), form_item_input, tab_contact_information_column2 );\n\n\t\t// Postal / ZIP Code\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'postal_code', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_contact_information_column2 );\n\n\t\t//Work Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'work_phone', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Work Phone' ), form_item_input, tab_contact_information_column2 );\n\n\t\t//Mobile Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'mobile_phone', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Mobile Phone' ), form_item_input, tab_contact_information_column2 );\n\n\t\t//Fax\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'fax_phone', width: 150 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fax' ), form_item_input, tab_contact_information_column2 );\n\n\t\t// Email\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'email', width: 220 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Email' ), form_item_input, tab_contact_information_column2 );\n\n\t\t//Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'note', width: '100%' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_contact_information_column2, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\tvar tab_policy = this.edit_view_tab.find( '#tab_policy' );\n\n\t\tvar tab_policy_column1 = tab_policy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[1] = [];\n\n\t\tthis.edit_view_tabs[1].push( tab_policy_column1 );\n\n\t\t// Include Tax Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APITaxPolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_tax_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'include_tax_policy'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Include Tax Policy' ), form_item_input, tab_policy_column1, '' );\n\n\t\t// Exclude Tax Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APITaxPolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_tax_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'exclude_tax_policy'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Exclude Tax Policy' ), form_item_input, tab_policy_column1, '' );\n\n\t\tvar tab_portal = this.edit_view_tab.find( '#tab_portal' );\n\n\t\tvar tab_portal_column1 = tab_portal.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[2] = [];\n\n\t\tthis.edit_view_tabs[2].push( tab_portal_column1 );\n\n\t\t// User Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'user_name', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'User Name' ), form_item_input, tab_portal_column1, '' );\n\n\t\t// Password\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'password', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Password' ), form_item_input, tab_portal_column1 );\n\n\t\t// Password(confirm)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'password2', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Password (Confirm)' ), form_item_input, tab_portal_column1, '' );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Client' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'client_id',\n\t\t\t\tlayout_name: 'global_client',\n\t\t\t\tapi_class: TTAPI.APIClient,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'last_name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tobject_type_id: 810,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Phone' ),\n\t\t\t\tfield: 'any_phone',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Email' ),\n\t\t\t\tfield: 'email',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tsetSelectLayout() {\n\t\tif ( this.sub_view_mode ) {\n\t\t\tsuper.setSelectLayout( ['client'] );\n\t\t} else {\n\t\t\tsuper.setSelectLayout();\n\t\t}\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\n\t\tthis.current_edit_record[key] = target.getValue();\n\n\t\tswitch ( key ) {\n\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t\tcase 'province':\n\t\t\t\twidget = this.edit_view_ui_dic['invoice_district_id'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tonGridDblClickRow() {\n\t\t//Shorten the path. it's only ever an edit click\n\t\tthis.onEditClick();\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'province': //popular case\n\t\t\t\t\t\tthis.setDistrict( this.current_edit_record['country'], this.current_edit_record[key] );\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tonSetSearchFilterFinished() {\n\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tsetDistrict( c, p ) {\n\t\tvar $this = this;\n\t\tvar district_widget = $this.edit_view_ui_dic['invoice_district_id'];\n\n\t\tif ( !Global.isSet( c ) || c === '-1' || c === '0' || !Global.isSet( p ) || p === '-1' || p === '0' ) {\n\t\t\t$this.district_array = [];\n\t\t\tdistrict_widget.setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.area_policy_api.getDistrictOptions( c, p, {\n\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.district_array = Global.buildRecordArray( res );\n\t\t\t\t\tdistrict_widget.setSourceData( $this.district_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tremoveEditView() {\n\t\tsuper.removeEditView();\n\t\tthis.sub_client_contact_view_controller = null;\n\t}\n}\n\nClientContactViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'ClientContact', 'SubClientContactView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_client_contact_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};"],"sourceRoot":""}