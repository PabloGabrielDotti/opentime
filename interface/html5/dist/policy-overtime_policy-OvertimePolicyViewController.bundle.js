(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["policy-overtime_policy-OvertimePolicyViewController"],{7645:(e,i,t)=>{"use strict";t.r(i),t.d(i,{"OvertimePolicyViewController":()=>o});class o extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#overtime_policy_view_container",type_array:null,branch_selection_type_array:null,department_selection_type_array:null,job_group_selection_type_array:null,job_selection_type_array:null,job_group_array:null,job_item_group_array:null,job_item_group_selection_type_array:null,job_item_selection_type_array:null,job_group_api:null,job_item_group_api:null}),super(e)}init(e){this.edit_view_tpl="OvertimePolicyEditView.html",this.permission_id="over_time_policy",this.viewId="OvertimePolicy",this.script_name="OvertimePolicyView",this.table_name_key="over_time_policy",this.context_menu_name=$.i18n._("Overtime Policy"),this.navigation_label=$.i18n._("Overtime Policy")+":",this.api=TTAPI.APIOverTimePolicy,Global.getProductEdition()>=20&&(this.job_group_api=TTAPI.APIJobGroup,this.job_item_group_api=TTAPI.APIJobItemGroup),this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary()}initOptions(){var e=this;this.initDropDownOption("type"),this.initDropDownOption("branch_selection_type"),this.initDropDownOption("department_selection_type"),this.initDropDownOption("job_group_selection_type"),this.initDropDownOption("job_selection_type"),this.initDropDownOption("job_item_group_selection_type"),this.initDropDownOption("job_item_selection_type"),Global.getProductEdition()>=20&&(this.job_group_api.getJobGroup("",!1,!1,{onResult:function(i){i=i.getResult(),i=Global.buildTreeRecord(i),e.job_group_array=i}}),this.job_item_group_api.getJobItemGroup("",!1,!1,{onResult:function(i){i=i.getResult(),i=Global.buildTreeRecord(i),e.job_item_group_array=i}}))}buildEditViewUI(){super.buildEditViewUI();var e=this,i={"tab_overtime_policy":{"label":$.i18n._("Overtime Policy")},"tab_differential_criteria":{"label":$.i18n._("Differential Criteria"),"init_callback":"initSubDifferentialCriteriaView"},"tab_audit":!0};this.setTabModel(i),this.navigation.AComboBox({api_class:TTAPI.APIOverTimePolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_over_time",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var t,o,l=this.edit_view_tab.find("#tab_overtime_policy").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(l),(t=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),t,l,""),t.parent().width("45%"),(t=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),t,l,"",null,null,!0),t.parent().width("45%"),(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIContributingShiftPolicy,allow_multiple_selection:!1,layout_name:"global_contributing_shift_policy",show_search_inputs:!0,set_empty:!0,field:"contributing_shift_policy_id"}),this.addEditFieldToColumn($.i18n._("Contributing Shift Policy"),t,l),(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"type_id",set_empty:!1}),t.setSourceData(e.type_array),this.addEditFieldToColumn($.i18n._("Type"),t,l),(t=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"trigger_time",mode:"time_unit",need_parser_sec:!0});var a=Global.loadWidgetByName(FormItemType.AWESOME_BOX);a.AComboBox({api_class:TTAPI.APIContributingShiftPolicy,allow_multiple_selection:!1,layout_name:"global_contributing_shift_policy",show_search_inputs:!0,set_empty:!0,field:"trigger_time_adjust_contributing_shift_policy_id"}),o=$("<div class='widget-h-box '></div>");var _=$("<span class='widget-right-label'> "+$.i18n._("Adjusted By")+": </span>");o.append(t),Global.getProductEdition()>=15&&(o.append(_),o.append(a)),this.addEditFieldToColumn($.i18n._("Active After"),[t,a],l,"",o),(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayCode,allow_multiple_selection:!1,layout_name:"global_pay_code",show_search_inputs:!0,set_empty:!0,field:"pay_code_id"}),this.addEditFieldToColumn($.i18n._("Pay Code"),t,l),(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayFormulaPolicy,allow_multiple_selection:!1,layout_name:"global_pay_formula_policy",show_search_inputs:!0,set_empty:!0,field:"pay_formula_policy_id",custom_first_label:$.i18n._("-- Defined By Pay Code --"),added_items:[{value:TTUUID.zero_id,label:$.i18n._("-- Defined By Pay Code --")}]}),this.addEditFieldToColumn($.i18n._("Pay Formula Policy"),t,l);var n=this.edit_view_tab.find("#tab_differential_criteria").find(".first-column");this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(n);var d=$("<div class='v-box'></div>");(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"branch_selection_type_id",set_empty:!1}),t.setSourceData(e.branch_selection_type_array),r=this.putInputToInsideFormItem(t,"Selection Type"),d.append(r),d.append("<div class='clear-both-div'></div>");var s=Global.loadWidgetByName(FormItemType.AWESOME_BOX);s.AComboBox({api_class:TTAPI.APIBranch,allow_multiple_selection:!0,layout_name:"global_branch",show_search_inputs:!0,set_empty:!0,field:"branch"});var r=this.putInputToInsideFormItem(s,"Selection");d.append(r);var p=Global.loadWidgetByName(FormItemType.CHECKBOX);p.TCheckbox({field:"exclude_default_branch"}),r=this.putInputToInsideFormItem(p,"Exclude Default"),d.append(r),this.addEditFieldToColumn($.i18n._("Branches"),[t,s,p],n,"",d,!1,!0),d=$("<div class='v-box'></div>"),(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"department_selection_type_id",set_empty:!1}),t.setSourceData(e.department_selection_type_array),r=this.putInputToInsideFormItem(t,"Selection Type"),d.append(r),d.append("<div class='clear-both-div'></div>"),(s=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIDepartment,allow_multiple_selection:!0,layout_name:"global_department",show_search_inputs:!0,set_empty:!0,field:"department"}),r=this.putInputToInsideFormItem(s,"Selection"),d.append(r),(p=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"exclude_default_department"}),r=this.putInputToInsideFormItem(p,"Exclude Default"),d.append(r),this.addEditFieldToColumn($.i18n._("Departments"),[t,s,p],n,"",d,!1,!0),Global.getProductEdition()>=20&&(d=$("<div class='v-box'></div>"),(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_group_selection_type_id",set_empty:!1}),t.setSourceData(e.job_group_selection_type_array),r=this.putInputToInsideFormItem(t,"Selection Type"),d.append(r),d.append("<div class='clear-both-div'></div>"),(s=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"job_group"}),s.setSourceData(e.job_group_array),r=this.putInputToInsideFormItem(s,"Selection"),d.append(r),this.addEditFieldToColumn($.i18n._("Job Groups"),[t,s],n,"",d,!1,!0),d=$("<div class='v-box'></div>"),(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_selection_type_id",set_empty:!1}),t.setSourceData(e.job_selection_type_array),r=this.putInputToInsideFormItem(t,"Selection Type"),d.append(r),d.append("<div class='clear-both-div'></div>"),(s=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJob,allow_multiple_selection:!0,layout_name:"global_job",show_search_inputs:!0,set_empty:!0,field:"job"}),r=this.putInputToInsideFormItem(s,"Selection"),d.append(r),(p=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"exclude_default_job"}),r=this.putInputToInsideFormItem(p,"Exclude Default"),d.append(r),this.addEditFieldToColumn($.i18n._("Jobs"),[t,s,p],n,"",d,!1,!0),d=$("<div class='v-box'></div>"),(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_item_group_selection_type_id",set_empty:!1}),t.setSourceData(e.job_item_group_selection_type_array),r=this.putInputToInsideFormItem(t,"Selection Type"),d.append(r),d.append("<div class='clear-both-div'></div>"),(s=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"job_item_group"}),s.setSourceData(e.job_item_group_array),r=this.putInputToInsideFormItem(s,"Selection"),d.append(r),this.addEditFieldToColumn($.i18n._("Task Groups"),[t,s],n,"",d,!1,!0),d=$("<div class='v-box'></div>"),(t=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_item_selection_type_id",set_empty:!1}),t.setSourceData(e.job_item_selection_type_array),r=this.putInputToInsideFormItem(t,"Selection Type"),d.append(r),d.append("<div class='clear-both-div'></div>"),(s=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!0,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,field:"job_item"}),r=this.putInputToInsideFormItem(s,"Selection"),d.append(r),(p=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"exclude_default_job_item"}),r=this.putInputToInsideFormItem(p,"Exclude Default"),d.append(r),this.addEditFieldToColumn($.i18n._("Tasks"),[t,s,p],n,"",d,!1,!0))}onFormItemChange(e,i){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var t=e.getField(),o=e.getValue();this.current_edit_record[t]=o,"branch_selection_type_id"===t&&this.onBranchSelectionTypeChange(),"department_selection_type_id"===t&&this.onDepartmentSelectionTypeChange(),"job_group_selection_type_id"===t&&this.onJobGroupSelectionTypeChange(),"job_selection_type_id"===t&&this.onJobSelectionTypeChange(),"job_item_group_selection_type_id"===t&&this.onJobItemGroupSelectionTypeChange(),"job_item_selection_type_id"===t&&this.onJobItemSelectionTypeChange(),i||this.validate()}setCurrentEditRecordData(){for(var e in this.setDefaultData({"branch_selection_type_id":10,"department_selection_type_id":10,"job_group_selection_type_id":10,"job_selection_type_id":10,"job_item_group_selection_type_id":10,"job_item_selection_type_id":10}),this.current_edit_record){var i=this.edit_view_ui_dic[e];Global.isSet(i)&&i.setValue(this.current_edit_record[e])}this.onBranchSelectionTypeChange(),this.onDepartmentSelectionTypeChange(),this.onJobGroupSelectionTypeChange(),this.onJobSelectionTypeChange(),this.onJobItemGroupSelectionTypeChange(),this.onJobItemSelectionTypeChange(),this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onBranchSelectionTypeChange(){10==this.current_edit_record.branch_selection_type_id?this.edit_view_ui_dic.branch.setEnabled(!1):this.edit_view_ui_dic.branch.setEnabled(!0)}onDepartmentSelectionTypeChange(){10==this.current_edit_record.department_selection_type_id?this.edit_view_ui_dic.department.setEnabled(!1):this.edit_view_ui_dic.department.setEnabled(!0)}onJobGroupSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_group_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job_group.setEnabled(!1):this.edit_view_ui_dic.job_group.setEnabled(!0))}onJobSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job.setEnabled(!1):this.edit_view_ui_dic.job.setEnabled(!0))}onJobItemGroupSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_item_group_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job_item_group.setEnabled(!1):this.edit_view_ui_dic.job_item_group.setEnabled(!0))}onJobItemSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_item_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job_item.setEnabled(!1):this.edit_view_ui_dic.job_item.setEnabled(!0))}setEditViewDataDone(){super.setEditViewDataDone()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Type"),in_column:1,field:"type_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Pay Code"),in_column:1,field:"pay_code_id",layout_name:"global_pay_code",api_class:TTAPI.APIPayCode,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Pay Formula Policy"),in_column:1,field:"pay_formula_policy_id",layout_name:"global_pay_formula_policy",api_class:TTAPI.APIPayFormulaPolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Contributing Shift Policy"),in_column:2,field:"contributing_shift_policy_id",layout_name:"global_contributing_shift_policy",api_class:TTAPI.APIContributingShiftPolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}initSubDifferentialCriteriaView(){Global.getProductEdition()>=15?(this.edit_view_tab.find("#tab_differential_criteria").find(".first-column").css("display","block"),this.edit_view.find(".permission-defined-div").css("display","none"),this.buildContextMenu(!0),this.setEditMenu()):(this.edit_view_tab.find("#tab_differential_criteria").find(".first-column").css("display","none"),this.edit_view.find(".permission-defined-div").css("display","block"),this.edit_view.find(".permission-message").html(Global.getUpgradeMessage()))}}}}]);
//# sourceMappingURL=policy-overtime_policy-OvertimePolicyViewController.bundle.js.map?v=24cf0268597391324bda