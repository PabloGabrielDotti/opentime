(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["company-payroll_remittance_agency-PayrollRemittanceAgencyEventViewController"],{542:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"PayrollRemittanceAgencyEventViewController":()=>i});class i extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#payroll_remittance_agency_event_view_container",user_api:null,status_array:null,action_array:null,agency_array:null,payment_frequency_array:null,report_frequency_array:null,country_array:null,province_array:null,district_array:null,month_of_year_array:null,month_of_quarter_array:null,week_interval_array:null,day_of_month_array:null,day_of_week_array:null,remittance_source_account_array:null,sub_event_view_controller:null}),super(e)}init(e){this.edit_view_tpl="PayrollRemittanceAgencyEventEditView.html",this.permission_id="payroll_remittance_agency",this.script_name="PayrollRemittanceAgencyEventView",this.table_name_key="payroll_remittance_agency_event",this.viewId="PayrollRemittanceAgencyEvent",this.context_menu_name=$.i18n._("Remittance Agency Event"),this.navigation_label=$.i18n._("Remittance Agency Event")+":",this.api=TTAPI.APIPayrollRemittanceAgencyEvent,this.user_group_api=TTAPI.APIUserGroup,this.company_api=TTAPI.APICompany,this.date_api=TTAPI.APITTDate,this.api_user_report=TTAPI.APIUserReportData,this.month_of_quarter_array=Global.buildRecordArray({1:1,2:2,3:3}),this.render(),this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.sub_view_mode||this.initData(),this.setSelectRibbonMenuIfNecessary()}_setGridSizeGridWidthOfSubViewMode(){this.grid.setGridWidth($(this.el).parents(".edit-view-tab").parent().parent().width()-10)}initOptions(){var e=this;this.initDropDownOption("status"),this.initDropDownOption("frequency"),this.api.getOptions("week_interval",{onResult:function(t){t=t.getResult(),e.week_interval_array=t}}),this.date_api.getMonthOfYearArray({onResult:function(t){t=t.getResult(),e.month_of_year_array=t}}),this.date_api.getDayOfMonthArray({onResult:function(t){t=t.getResult(),e.day_of_month_array=Global.buildRecordArray(t)}}),this.date_api.getDayOfWeekArray({onResult:function(t){t=t.getResult(),e.day_of_week_array=t}})}getTypeOptions(){var e=this,t={"payroll_remittance_agency_id":this.edit_view_ui_dic.payroll_remittance_agency_id.getValue()};this.api.getOptions("type",t,{onResult:function(t){t=t.getResult(),e.edit_view_ui_dic.type_id.setSourceData(Global.buildRecordArray(t)),e.edit_view_ui_dic.type_id.setSourceData(Global.buildRecordArray(t)),e.current_edit_record.type_id=e.edit_view_ui_dic.type_id.getValue(),TTPromise.resolve("PayrollRemittanceAgencyEvent","updateUI")}})}getReportOptions(){var e=this;this.api_user_report.getUserReportData({filter_data:{include_user_report_id:this.current_edit_record.user_report_data_id}},{onResult:function(t){e.edit_view_ui_dic.user_report_data_id.setSourceData(t.getResult())}})}setEditViewDataDone(){super.setEditViewDataDone(),this.onFrequencyChange(),void 0===this.current_edit_record.id&&this.detachElement("enable_recalculate_dates"),this.getTypeOptions(),this.getReportOptions(),this.confirm_on_exit=!1}onFormItemChange(e,t){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var a=e.getField(),i=e.getValue();switch(Debug.Text("key: "+a+" value: "+i,"PayrollRemittanceAgencyEventViewController.js","PayrollRemittanceAgencyEventViewController","onFormItemChange",10),TTPromise.add("PayrollRemittanceAgencyEvent","updateUI"),a){case"payroll_remittance_agency_id":this.getTypeOptions();break;case"frequency_id":this.onFrequencyChange(i),this.current_edit_record[a]=i,this.validate(),this.updateFutureDates(),TTPromise.reject("PayrollRemittanceAgencyEvent","updateUI");break;default:TTPromise.resolve("PayrollRemittanceAgencyEvent","updateUI")}var d=this;TTPromise.wait("PayrollRemittanceAgencyEvent","updateUI",(function(){d.onFrequencyChange(),d.current_edit_record[a]=i,d.validate(),d.updateFutureDates()}))}updateFutureDates(){Debug.Text("Updating remittance agency event dates.",null,null,null,10);var e=this;this.api.calculateNextRunDate(this.current_edit_record,{onResult:function(t){t=t.getResult(),e.edit_view_ui_dic.start_date.setValue(t.start_date),e.edit_view_ui_dic.end_date.setValue(t.end_date),e.edit_view_ui_dic.due_date.setValue(t.due_date),e.edit_view_ui_dic.next_reminder_date.setValue(t.next_reminder_date)}})}onFrequencyChange(e){Global.isSet(e)||(Global.isSet(this.current_edit_record.frequency_id)||(this.current_edit_record.frequency_id=10),e=this.current_edit_record.frequency_id),Debug.Text("Selected Frequency: "+e,null,null,null,10),this.detachElement("week"),this.detachElement("primary_month"),this.detachElement("primary_day_of_month"),this.detachElement("secondary_month"),this.detachElement("secondary_day_of_month"),this.detachElement("day_of_week"),this.detachElement("due_date_delay_days"),this.detachElement("quarter_month"),this.detachElement("pay_period_schedule_id"),1e3==e?(this.attachElement("pay_period_schedule_id"),this.attachElement("due_date_delay_days")):2e3==e?(this.attachElement("primary_month"),this.edit_view_ui_dic.primary_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Month"),this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month")):2100==e?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month"),this.attachElement("primary_month"),this.edit_view_ui_dic.primary_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Month"),this.attachElement("due_date_delay_days")):2200==e?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Primary Day Of Month"),this.attachElement("primary_month"),this.edit_view_ui_dic.primary_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Primary Month"),this.attachElement("secondary_month"),this.attachElement("secondary_day_of_month"),this.attachElement("due_date_delay_days")):3e3==e?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month"),this.attachElement("quarter_month")):4100==e?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month")):4200==e?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Primary Day Of Month"),this.attachElement("secondary_day_of_month"),this.attachElement("due_date_delay_days")):5100==e?this.attachElement("day_of_week"):90100==e||90200==e?this.attachElement("due_date_delay_days"):90310==e&&(this.attachElement("pay_period_schedule_id"),this.attachElement("due_date_delay_days")),this.editFieldResize()}setDefaultMenuMassEditIcon(e,t){e.addClass("invisible-image")}setDefaultMenuSaveAndCopyIcon(e,t){e.addClass("invisible-image")}setDefaultMenuImportIcon(e,t,a){}copyAsNewResetIds(e){return e.id="",e.start_date="",e.end_date="",e.due_date="",e.last_due_date="",e.next_reminder_date="",e.last_reminder_date="",e}onCustomContextClick(e){switch(e){case ContextMenuIconName.import_icon:this.onImportClick()}}setEditMenuSaveAndContinueIcon(e,t){this.saveAndContinueValidate(e),this.current_edit_record&&this.current_edit_record.id||e.addClass("disable-image")}setEditMenuSaveAndAddIcon(e,t){this.saveAndNewValidate(e),this.current_edit_record&&this.current_edit_record.id||e.addClass("disable-image")}setEditMenuSaveAndCopyIcon(e,t){this.saveAndContinueValidate(e),this.current_edit_record&&this.current_edit_record.id||e.addClass("disable-image")}buildEditViewUI(){super.buildEditViewUI();var e,t=this,a={"tab_payroll_remittance_agency_event":{"label":$.i18n._("Remittance Agency Event")},"tab_audit":!0};this.setTabModel(a),this.navigation.AComboBox({api_class:TTAPI.APIPayrollRemittanceAgencyEvent,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_payroll_remittance_agency",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_payroll_remittance_agency_event");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var d=i.find(".first-column");(e=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayrollRemittanceAgency,allow_multiple_selection:!1,layout_name:"global_payroll_remittance_agency",show_search_inputs:!0,set_empty:!1,field:"payroll_remittance_agency_id"}),this.addEditFieldToColumn($.i18n._("Remittance Agency"),e,d),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"status_id"}),e.setSourceData(t.status_array),this.addEditFieldToColumn($.i18n._("Status"),e,d),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"type_id"}),this.addEditFieldToColumn($.i18n._("Type"),e,d),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"frequency_id"}),e.setSourceData(t.frequency_array),this.addEditFieldToColumn($.i18n._("Frequency"),e,d),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"primary_month"}),e.setSourceData(Global.buildRecordArray(t.month_of_year_array)),this.addEditFieldToColumn($.i18n._("Primary Month"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"primary_day_of_month"});var l=Global.addLastItemToArray(t.day_of_month_array,-1,$.i18n._("- Last Day Of Month -"));e.setSourceData(l),this.addEditFieldToColumn($.i18n._("Primary Day of Month"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"secondary_month"}),e.setSourceData(Global.buildRecordArray(t.month_of_year_array)),this.addEditFieldToColumn($.i18n._("Secondary Month"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"secondary_day_of_month"}),e.setSourceData(l),this.addEditFieldToColumn($.i18n._("Secondary Day of Month"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"week"}),e.setSourceData(Global.buildRecordArray(t.week_interval_array)),this.addEditFieldToColumn($.i18n._("Week"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"quarter_month"}),e.setSourceData(t.month_of_quarter_array),this.addEditFieldToColumn($.i18n._("Month of Quarter"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"day_of_week"}),e.setSourceData(Global.buildRecordArray(t.day_of_week_array)),this.addEditFieldToColumn($.i18n._("Day of week"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayPeriodSchedule,allow_multiple_selection:!0,layout_name:"global_pay_period_schedule",show_search_inputs:!0,set_special_empty:!0,set_any:!0,field:"pay_period_schedule_id"}),e.setSourceData(t.saved_report_array),this.addEditFieldToColumn($.i18n._("Pay Period Schedule"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"due_date_delay_days",width:50}),this.addEditFieldToColumn($.i18n._("Due Date Delay Days"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"effective_date"}),this.addEditFieldToColumn($.i18n._("Effective Date"),e,d),(e=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!1,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"reminder_user_id"}),this.addEditFieldToColumn($.i18n._("Send Reminder To"),e,d),(e=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({allow_multiple_selection:!1,layout_name:"global_user_report_data",show_search_inputs:!0,set_default:!0,field:"user_report_data_id"}),this.addEditFieldToColumn($.i18n._("Saved Report"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"reminder_days",width:50}),this.addEditFieldToColumn($.i18n._("Reminder Days"),e,d,""),(e=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"note",width:"100%",rows:5}),this.addEditFieldToColumn($.i18n._("Notes"),e,d,"",null,!0,!0),e.parent().width("50%"),(e=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"enable_recalculate_dates"}),this.addEditFieldToColumn($.i18n._("Recalculate Dates"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"recalculate_date"}),this.addEditFieldToColumn($.i18n._("Recalculate Dates From"),e,d),(e=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"start_date"}),this.addEditFieldToColumn($.i18n._("Start Date"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"end_date"}),this.addEditFieldToColumn($.i18n._("End Date"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"due_date"}),this.addEditFieldToColumn($.i18n._("Due Date"),e,d,"",null,!0),(e=Global.loadWidgetByName(FormItemType.TEXT)).TText({field:"next_reminder_date"}),this.addEditFieldToColumn($.i18n._("Reminder Date"),e,d,"",null,!0)}}i.loadSubView=function(e,t,a){Global.loadViewSource("PayrollRemittanceAgencyEvent","SubPayrollRemittanceAgencyEventView.html",(function(i){var d=_.template(i);Global.isSet(t)&&t(),Global.isSet(e)&&(e.html(d({})),Global.isSet(a)&&a(sub_payroll_remittance_agency_event_controller))}))}}}]);
//# sourceMappingURL=company-payroll_remittance_agency-PayrollRemittanceAgencyEventViewController.bundle.js.map?v=224604ec896363a2ec7b