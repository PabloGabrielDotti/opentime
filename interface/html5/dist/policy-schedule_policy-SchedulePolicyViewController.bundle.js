(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["policy-schedule_policy-SchedulePolicyViewController"],{7911:(e,i,l)=>{"use strict";l.r(i),l.d(i,{"SchedulePolicyViewController":()=>t});class t extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#schedule_policy_view_container",over_time_policy_api:null}),super(e)}init(e){this.edit_view_tpl="SchedulePolicyEditView.html",this.permission_id="schedule_policy",this.viewId="SchedulePolicy",this.script_name="SchedulePolicyView",this.table_name_key="schedule_policy",this.context_menu_name=$.i18n._("Schedule Policy"),this.navigation_label=$.i18n._("Schedule Policy")+":",this.api=TTAPI.APISchedulePolicy,this.over_time_policy_api=TTAPI.APIOverTimePolicy,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary("SchedulePolicy")}buildEditViewUI(){super.buildEditViewUI();var e={"tab_schedule_policy":{"label":$.i18n._("Schedule Policy")},"tab_audit":!0};this.setTabModel(e),this.navigation.AComboBox({api_class:TTAPI.APISchedulePolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_schedule",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_schedule_policy").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var l=Global.loadWidgetByName(FormItemType.TEXT_INPUT);l.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),l,i,""),l.parent().width("45%"),(l=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),l,i,"",null,null,!0),l.parent().width("45%"),(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIMealPolicy,allow_multiple_selection:!0,layout_name:"global_meal",show_search_inputs:!0,set_any:!0,field:"meal_policy",custom_first_label:$.i18n._("-- No Meal --"),addition_source_function:this.onMealOrBreakSourceCreate,added_items:[{value:TTUUID.zero_id,label:$.i18n._("-- Defined By Policy Group --")}]}),this.addEditFieldToColumn($.i18n._("Meal Policy"),l,i),(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIBreakPolicy,allow_multiple_selection:!0,layout_name:"global_break",show_search_inputs:!0,set_any:!0,field:"break_policy",custom_first_label:"-- "+$.i18n._("No Break")+" --",addition_source_function:this.onMealOrBreakSourceCreate,added_items:[{value:TTUUID.zero_id,label:"-- "+$.i18n._("Defined By Policy Group")+" --"}]}),this.addEditFieldToColumn($.i18n._("Break Policy"),l,i);var t=$("<div class='v-box'></div>");(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIRegularTimePolicy,allow_multiple_selection:!0,layout_name:"global_regular_time",show_search_inputs:!0,set_empty:!0,field:"include_regular_time_policy"});var a=this.putInputToInsideFormItem(l,$.i18n._("Include"));t.append(a),t.append("<div class='clear-both-div'></div>");var o=Global.loadWidgetByName(FormItemType.AWESOME_BOX);o.AComboBox({api_class:TTAPI.APIRegularTimePolicy,allow_multiple_selection:!0,layout_name:"global_regular_time",show_search_inputs:!0,set_empty:!0,field:"exclude_regular_time_policy"}),a=this.putInputToInsideFormItem(o,$.i18n._("Exclude")),t.append(a),this.addEditFieldToColumn($.i18n._("Regular Time Policy"),[l,o],i,"",t,!1,!0),t=$("<div class='v-box'></div>");var _={filter_data:{}};_.filter_data.type_id=[10,40,50,60,70,80,90,100,180,200],(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIOverTimePolicy,allow_multiple_selection:!0,layout_name:"global_over_time",show_search_inputs:!0,set_empty:!0,field:"include_over_time_policy"}),l.setDefaultArgs(_),a=this.putInputToInsideFormItem(l,$.i18n._("Include")),t.append(a),t.append("<div class='clear-both-div'></div>"),(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIOverTimePolicy,allow_multiple_selection:!0,layout_name:"global_over_time",show_search_inputs:!0,set_empty:!0,field:"exclude_over_time_policy"}),o.setDefaultArgs(_),a=this.putInputToInsideFormItem(o,$.i18n._("Exclude")),t.append(a),this.addEditFieldToColumn($.i18n._("Overtime Policy"),[l,o],i,"",t,!1,!0),t=$("<div class='v-box'></div>"),(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPremiumPolicy,allow_multiple_selection:!0,layout_name:"global_premium",show_search_inputs:!0,set_empty:!0,field:"include_premium_policy"}),a=this.putInputToInsideFormItem(l,$.i18n._("Include")),t.append(a),t.append("<div class='clear-both-div'></div>"),(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPremiumPolicy,allow_multiple_selection:!0,layout_name:"global_premium",show_search_inputs:!0,set_empty:!0,field:"exclude_premium_policy"}),a=this.putInputToInsideFormItem(o,$.i18n._("Exclude")),t.append(a),this.addEditFieldToColumn($.i18n._("Premium Policy"),[l,o],i,"",t,!1,!0),(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIAbsencePolicy,allow_multiple_selection:!1,layout_name:"global_absences",show_search_inputs:!0,set_empty:!0,field:"full_shift_absence_policy_id"}),this.addEditFieldToColumn($.i18n._("Full Shift Undertime Absence Policy"),l,i),(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIAbsencePolicy,allow_multiple_selection:!1,layout_name:"global_absences",show_search_inputs:!0,set_empty:!0,field:"partial_shift_absence_policy_id"}),this.addEditFieldToColumn($.i18n._("Partial Shift Undertime Absence Policy"),l,i),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"start_stop_window",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn($.i18n._("Start / Stop Window"),l,i,"",null)}onMealOrBreakSourceCreate(e,i){var l=e.getDisplayColumns(),t={};return $.each(l,(function(e,i){return t.id=TTUUID.zero_id,t[i.name]=$.i18n._("-- Defined By Policy Group --"),!1})),i.unshift(t),i}setCurrentEditRecordData(){for(var e in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(e)){var i=this.edit_view_ui_dic[e];if(Global.isSet(i))switch(e){case"country":this.setCountryValue(i,e);break;default:i.setValue(this.current_edit_record[e])}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onFormItemChange(e,i){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var l=e.getField(),t=e.getValue();this.current_edit_record[l]=t,i||this.validate()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Full Shift Absence Policy"),in_column:1,field:"full_shift_absence_policy_id",layout_name:"global_absences",api_class:TTAPI.APIAbsencePolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Partial Shift Absence Policy"),in_column:1,field:"partial_shift_absence_policy_id",layout_name:"global_absences",api_class:TTAPI.APIAbsencePolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}}}]);
//# sourceMappingURL=policy-schedule_policy-SchedulePolicyViewController.bundle.js.map?v=d109b6b46303a51356a8