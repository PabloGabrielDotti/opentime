{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/timepicker/TTimePicker.js"],"names":["$","jQuery","fn","TTimePicker","options","field","validation_field","time_picker_input","icon","error_tip_box","focus_out_timer","opts","extend","defaults","$this","this","error_string","check_box","enabled","is_open","is_static_width","stepMinute","getEnabled","setEnabled","val","addClass","css","attr","removeClass","removeAttr","setCheckBox","children","eq","checked","isChecked","setMassEditMode","insertBefore","change","trigger","remove","setErrorStyle","errStr","show","isWarning","showErrorTip","sec","Global","isSet","loadWidgetByName","WidgetNamesDic","ERROR_TOOLTIP","ErrorTipBox","hasClass","hideErrorTip","clearErrorStyle","getField","getValidationField","getDefaultFormatValue","strToDate","format","setPlaceHolder","getValue","setValue","autoResize","setDefaultWidgetValue","content_width","example_width","calculateTextWidth","LocalCacheData","getLoginUserPreference","time_format_display","min_width","max_width","padding","width","each","o","meta","data","time_format","time_format_1","find","getRealImagePath","bind","clearTimeout","timepicker","close_text","i18n","_","showMillisec","showMicrosec","showTimezone","showHeader","timeFormat","showOn","closeText","showAnim","beforeShow","onClose","setTimeout","loginUserPreference","off","on","e","mouseover","length","mouseout","is","focusin","current_open_sub_controller","edit_view","is_viewing","current_open_primary_controller","view_mode_message","focusout"],"mappings":"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","file":"timepicker-TTimePicker.bundle.js?v=a771c24bd5baa085fbe1","sourcesContent":["( function( $ ) {\n\n\t$.fn.TTimePicker = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TTimePicker.defaults, options );\n\t\t//Global.addCss( 'global/widgets/timepicker/TTimePicker.css' );\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar validation_field;\n\t\tvar time_picker_input;\n\t\tvar icon;\n\t\tvar error_string = '';\n\t\tvar error_tip_box;\n\t\tvar mass_edit_mode = false;\n\t\tvar check_box = null;\n\t\tvar enabled = true;\n\t\tvar is_open = false;\n\t\tvar focus_out_timer;\n\t\tvar can_open = false; //default when the calender can be open, we only open it when click on the icon\n\t\tvar is_static_width = false;\n\t\tvar stepMinute = 15;\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\ttime_picker_input.addClass( 't-time-picker-readonly' );\n\t\t\t\ticon.css( 'display', 'none' );\n\t\t\t\ttime_picker_input.attr( 'readonly', 'readonly' );\n\t\t\t} else {\n\t\t\t\ttime_picker_input.removeClass( 't-time-picker-readonly' );\n\t\t\t\ticon.css( 'display', 'inline' );\n\t\t\t\ttime_picker_input.removeAttr( 'readonly' );\n\t\t\t}\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\ttime_picker_input.addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\ttime_picker_input.addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( time_picker_input.hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\t\t};\n\n\t\t// Error: TypeError: time_picker_input is undefined in /interface/html5/global/widgets/datepicker/TTimePicker.js?v=8.0.3-20150313-161037 line 122\n\t\tthis.clearErrorStyle = function() {\n\t\t\tif ( !time_picker_input ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttime_picker_input.removeClass( 'error-tip' );\n\t\t\ttime_picker_input.removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValidationField = function() {\n\t\t\treturn validation_field;\n\t\t};\n\n\t\tthis.getDefaultFormatValue = function() {\n\t\t\tvar val = time_picker_input.val();\n\n\t\t\tval = Global.strToDate( val ).format( 'YYYY-MM-DD' );\n\n\t\t\treturn val;\n\t\t};\n\n\t\tthis.setPlaceHolder = function( val ) {\n\t\t\ttime_picker_input.attr( 'placeholder', val );\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn time_picker_input.val();\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\t//Error: Uncaught TypeError: Cannot read property 'val' of undefined in /interface/html5/global/widgets/datepicker/TTimePicker.js?v=8.0.0-20141230-130626 line 144\n\t\t\tif ( !time_picker_input ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\t\t\ttime_picker_input.val( val );\n\t\t\tthis.autoResize();\n\t\t};\n\n\t\tthis.setDefaultWidgetValue = function() {\n\t\t\tif ( $( this ).attr( 'widget-value' ) ) {\n\t\t\t\tthis.setValue( $( this ).attr( 'widget-value' ) );\n\t\t\t}\n\t\t};\n\n\t\tthis.autoResize = function() {\n\t\t\tvar content_width, example_width;\n\t\t\tif ( !is_static_width ) {\n\t\t\t\texample_width = Global.calculateTextWidth( LocalCacheData.getLoginUserPreference().time_format_display );\n\t\t\t\tcontent_width = Global.calculateTextWidth( time_picker_input.val(), {\n\t\t\t\t\tmin_width: example_width,\n\t\t\t\t\tmax_width: ( example_width + 100 ),\n\t\t\t\t\tpadding: 28\n\t\t\t\t} );\n\t\t\t\t$this.width( content_width + 'px' );\n\t\t\t}\n\t\t};\n\n\t\tthis.each( function() {\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\t\t\tvar time_format = 'h:mm TT';\n\t\t\tif ( LocalCacheData.getLoginUserPreference() ) {\n\t\t\t\ttime_format = LocalCacheData.getLoginUserPreference().time_format_1;\n\t\t\t}\n\t\t\tfield = o.field;\n\t\t\tif ( o.validation_field ) {\n\t\t\t\tvalidation_field = o.validation_field;\n\t\t\t}\n\t\t\ticon = $( this ).find( '.t-time-picker-icon' );\n\t\t\ttime_picker_input = $( this ).find( '.t-time-picker' );\n\t\t\ticon.attr( 'src', Global.getRealImagePath( 'images/time.png' ) );\n\t\t\ticon.bind( 'mouseup', function() {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( !is_open ) {\n\t\t\t\t\ttime_picker_input.timepicker( 'show' );\n\t\t\t\t\tis_open = true;\n\t\t\t\t} else {\n\t\t\t\t\tis_open = false;\n\t\t\t\t\tif ( focus_out_timer ) {\n\t\t\t\t\t\tclearTimeout( focus_out_timer );\n\t\t\t\t\t\tfocus_out_timer = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tif ( o.stepMinute ) {\n\t\t\t\tstepMinute = o.stepMinute;\n\t\t\t}\n\n\t\t\tvar close_text = $.i18n._( 'Close' );\n\t\t\ttime_picker_input = time_picker_input.timepicker( {\n\t\t\t\tshowMillisec: false,\n\t\t\t\tshowMicrosec: false,\n\t\t\t\tshowTimezone: false,\n\t\t\t\tshowHeader: false,\n\t\t\t\ttimeFormat: time_format,\n\t\t\t\tshowOn: '',\n\t\t\t\tstepMinute: stepMinute,\n\t\t\t\tcloseText: close_text,\n\t\t\t\tshowAnim: '',\n\t\t\t\tbeforeShow: function() {\n\t\t\t\t\tif ( o.beforeShow ) {\n\t\t\t\t\t\to.beforeShow();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClose: function() {\n\t\t\t\t\tfocus_out_timer = setTimeout( function() {\n\t\t\t\t\t\tis_open = false;\n\t\t\t\t\t\t$this.autoResize();\n\t\t\t\t\t\tif ( o.onClose ) {\n\t\t\t\t\t\t\to.onClose();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100 );\n\t\t\t\t}\n\t\t\t} );\n\t\t\t$this.setPlaceHolder( LocalCacheData.loginUserPreference.time_format_display );\n\n\t\t\t//hack to stop automatic rounding of typed dates to stepMinute increment\n\t\t\ttime_picker_input.off( 'keyup' ).off( 'keydown' ).off( 'keypress' );\n\n\t\t\ttime_picker_input.off( 'change' ).on( 'change', function( e ) {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t$this.autoResize();\n\t\t\t} );\n\t\t\ttime_picker_input.mouseover( function() {\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\ttime_picker_input.mouseout( function() {\n\t\t\t\tif ( !$( $this ).is( ':focus' ) ) {\n\t\t\t\t\t$this.hideErrorTip();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\ttime_picker_input.focusin( function( e ) {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( !check_box ) {\n\t\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\ttime_picker_input.focusout( function() {\n\t\t\t\t$this.hideErrorTip();\n\n\t\t\t} );\n\t\t\tif ( o.width > 0 ) {\n\t\t\t\t$this.width( o.width );\n\t\t\t\tis_static_width = true;\n\t\t\t} else {\n\t\t\t\t$this.autoResize();\n\t\t\t\tis_static_width = false;\n\t\t\t}\n\t\t\t$this.setDefaultWidgetValue();\n\t\t} );\n\t\treturn this;\n\t};\n\n\t$.fn.TTimePicker.defaults = {};\n\n} )( jQuery );"],"sourceRoot":""}