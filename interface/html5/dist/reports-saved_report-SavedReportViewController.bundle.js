(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["reports-saved_report-SavedReportViewController"],{9372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"SavedReportViewController":()=>i});class i extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#saved_report_view_container",sub_report_schedule_view_controller:null,edit_view_tpl:"SavedReportEditView.html",permission_id:"report",viewId:"SavedReport",script_name:"UserReportDataView",table_name_key:"user_report_data",context_menu_name:$.i18n._("Reports"),navigation_label:$.i18n._("Saved Report")+":",api:TTAPI.APIUserReportData}),super(e)}init(e){this.render(),this.sub_view_mode?this.buildContextMenu(!0):(this.buildContextMenu(),this.sub_view_mode||this.initData(),this.setSelectRibbonMenuIfNecessary())}onDeleteResult(e,t){var r=this;ProgressBar.closeOverlay(),e.isValid()?(r.search(),r.onDeleteDone(e),r.edit_view&&r.removeEditView(),this.sub_view_mode&&this.parent_view_controller&&this.parent_view_controller.onSavedReportDelete()):TAlertManager.showErrorAlert(e)}onCustomContextClick(e){switch(e){case ContextMenuIconName.share_report:if(Global.getProductEdition()>=15){var t=[];this.edit_view&&this.current_edit_record.id?t.push(this.current_edit_record.id):this.edit_view||(t=this.getGridSelectIdArray()),IndexViewController.openWizard("ShareReportWizard",t)}else TAlertManager.showAlert(Global.getUpgradeMessage())}}onGridDblClickRow(){ProgressBar.showOverlay(),this.sub_view_mode?this.onEditClick():this.onViewClick()}getCustomContextMenuModel(){var e={groups:{share:{label:$.i18n._("Share"),id:this.viewId+"Share"}},exclude:["default"],include:[ContextMenuIconName.edit,ContextMenuIconName.delete_icon,ContextMenuIconName.delete_and_next,ContextMenuIconName.save,ContextMenuIconName.save_and_continue,ContextMenuIconName.save_and_next,ContextMenuIconName.cancel,{label:$.i18n._("Share<br>Report"),id:ContextMenuIconName.share_report,group:"share",icon:Icons.copy_as_new}]};return this.sub_view_mode||e.include.unshift({label:$.i18n._("Report"),id:ContextMenuIconName.view,group:"editor",icon:Icons.hr_reports}),e}removeEditView(){super.removeEditView(),this.sub_report_schedule_view_controller=null}getGridSetup(){var e=this,t={container_selector:this.sub_view_mode?"#tab_saved_reports":".view",sub_grid_mode:this.sub_view_mode,onSelectRow:function(){e.onGridSelectRow()},onCellSelect:function(){e.onGridSelectRow()},onSelectAll:function(){e.onGridSelectAll()},ondblClickRow:function(t){e.onGridDblClickRow(t)},onRightClickRow:function(t){e.getGridSelectIdArray().indexOf(t)<0&&(e.grid.grid.resetSelection(),e.grid.grid.setSelection(t),e.onGridSelectRow())}};return this.sub_view_mode&&(t.setGridSize=function(){e.sub_view_mode&&e.baseViewSubTabGridResize("#tab_saved_reports")},t.onResizeGrid=function(){e.sub_view_mode&&e.baseViewSubTabGridResize("#tab_saved_reports")}),t}onViewClick(e,t){var r=this.getGridSelectIdArray()[0],i=this.getRecordFromGridById(r);if(i&&i.script){var o=i.script;switch(LocalCacheData.current_doing_context_action="view",LocalCacheData.default_edit_id_for_next_open_edit_view=r,o){case"AccrualBalanceSummaryReport":case"ActiveShiftReport":case"AuditTrailReport":case"Form1099NecReport":case"Form940Report":case"Form941Report":case"FormW2Report":case"GeneralLedgerSummaryReport":case"InvoiceTransactionSummaryReport":case"JobInformationReport":case"JobItemInformationReport":case"JobSummaryReport":case"KPIReport":case"PayrollExportReport":case"PayStubTransactionSummaryReport":case"PayStubSummaryReport":case"PunchSummaryReport":case"RemittanceSummaryReport":case"ScheduleSummaryReport":case"T4ASummaryReport":case"T4SummaryReport":case"TaxSummaryReport":case"TimesheetDetailReport":case"TimesheetSummaryReport":case"UserQualificationReport":case"UserRecruitmentDetailReport":case"UserRecruitmentSummaryReport":case"UserSummaryReport":break;case"UserExpenseReport":o="ExpenseSummaryReport";break;case"ExceptionReport":o="ExceptionSummaryReport";break;case"JobDetailReport":o="JobAnalysisReport";break;case"AffordableCareReport":10==Global.getProductEdition()&&(TAlertManager.showAlert(Global.getUpgradeMessage()),o=null);break;default:ProgressBar.closeOverlay(),Debug.Text("ERROR: Saved Report name not defined: "+o,"SavedReportViewController.js","","onViewClick",10),o=null}Global.isSet(o)&&o&&IndexViewController.openReport(this,o)}}buildEditViewUI(){super.buildEditViewUI();var e={"tab_report":{"label":$.i18n._("Report")},"tab_schedule":{"label":$.i18n._("Schedule"),"init_callback":"initSubReportScheduleView"},"tab_audit":!0};this.setTabModel(e),this.edit_only_mode||(this.navigation.AComboBox({api_class:TTAPI.APIUserReportData,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_user_report_data",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation());var t=this.edit_view_tab.find("#tab_report").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(t);var r=Global.loadWidgetByName(FormItemType.TEXT_INPUT);r.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),r,t,""),r.parent().width("45%"),(r=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"is_default"}),this.addEditFieldToColumn($.i18n._("Default"),r,t),(r=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),r,t,"",null,null,!0),r.parent().width("45%")}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Description"),field:"description",basic_search:!0,adv_search:!1,in_column:1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,script_name:"EmployeeView",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,script_name:"EmployeeView",form_item_type:FormItemType.AWESOME_BOX})]}initSubReportScheduleView(){var e=this;if(this.current_edit_record.id)if(Global.getProductEdition()>=15){if(this.sub_report_schedule_view_controller)return this.sub_report_schedule_view_controller.buildContextMenu(!0),this.sub_report_schedule_view_controller.setDefaultMenu(),e.sub_report_schedule_view_controller.parent_value=e.current_edit_record.id,e.sub_report_schedule_view_controller.parent_edit_record=e.current_edit_record,void e.sub_report_schedule_view_controller.initData();Global.loadViewSource("ReportSchedule","ReportScheduleViewController.js",(function(){var i=e.edit_view_tab.find("#tab_schedule").find(".first-column-sub-view");TTPromise.add("initSubReportScheduleView","init"),TTPromise.wait("initSubReportScheduleView","init",(function(){i.css("opacity","1")})),i.css("opacity","0"),Global.trackView("SubReportScheduleView"),ReportScheduleViewController.loadSubView(i,t,r)}))}else this.edit_view_tab.find("#tab_schedule").find(".first-column-sub-view").css("display","none"),this.edit_view.find(".permission-defined-div").css("display","block"),this.edit_view.find(".permission-message").html(Global.getUpgradeMessage()),this.edit_view.find(".save-and-continue-button-div").css("display","none");else TTPromise.resolve("BaseViewController","onTabShow");function t(){}function r(t){e.sub_report_schedule_view_controller=t,e.sub_report_schedule_view_controller.parent_key="user_report_data_id",e.sub_report_schedule_view_controller.parent_value=e.current_edit_record.id,e.sub_report_schedule_view_controller.parent_edit_record=e.current_edit_record,e.sub_report_schedule_view_controller.parent_view_controller=e,e.sub_report_schedule_view_controller.sub_view_mode=!0,e.sub_report_schedule_view_controller.initData()}}uniformVariable(e){return e}onSaveDone(e){this.parent_view_controller&&this.parent_view_controller.onSaveDoneCallback&&this.parent_view_controller.onSaveDoneCallback(e,this.current_edit_record)}onSaveAndContinueDone(e){this.onSaveDone(e)}onSaveAndNextDone(e){this.onSaveDone(e)}getFilterColumnsFromDisplayColumns(){var e={id:!0,is_owner:!0,is_child:!0,script:!0},t=[];if(this.grid&&(t=this.grid.getGridParam("colModel")),t)for(var r=t.length,i=0;i<r;i++){e[t[i].name]=!0}return e}onAddClick(e){ProgressBar.closeOverlay();var t=this;this.setCurrentEditViewState("new"),t.openEditView(),t.current_edit_record=e,t.initEditView()}searchDone(){$("window").trigger("resize"),this.sub_view_mode&&TTPromise.resolve("SubSavedReportView","init"),super.searchDone()}}i.loadSubView=function(e,t,r){Global.loadViewSource("SavedReport","SubSavedReportView.html",(function(i){var o=_.template(i);Global.isSet(t)&&t(),Global.isSet(e)&&(e.html(o({})),Global.isSet(r)&&TTPromise.wait("BaseViewController","initialize",(function(){r(sub_saved_report_controller)})))}))}}}]);
//# sourceMappingURL=reports-saved_report-SavedReportViewController.bundle.js.map?v=8af6c8fc54556a32e8e4