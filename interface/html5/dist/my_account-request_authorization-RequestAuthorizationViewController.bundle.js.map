{"version":3,"sources":["webpack://timetrex/./interface/html5/views/my_account/request_authorization/RequestAuthorizationViewController.js"],"names":["RequestAuthorizationViewController","RequestViewCommonController","options","_","defaults","el","type_array","hierarchy_level_array","messages","authorization_api","api_request","api_absence_policy","message_control_api","authorization_history_columns","authorization_history_default_display_columns","authorization_history_grid","pre_request_schedule","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIRequest","APIAuthorization","APIAbsencePolicy","APIMessageControl","Global","getProductEdition","job_api","APIJob","job_item_api","APIJobItem","initPermission","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","$this","initDropDownOption","data","getHierarchyLevelOptions","async","getResult","buildRecordArray","isSet","basic_search_field_ui_dic","setSourceData","jobUIValidate","show_job_ui","jobItemUIValidate","show_job_item_ui","branchUIValidate","show_branch_ui","departmentUIValidate","show_department_ui","company_api","APICompany","isFunction","isBranchAndDepartmentAndJobAndJobItemEnabled","result","branch","department","job","job_item","groups","action","label","id","authorization","objects","exclude","include","ContextMenuIconName","view","group","icon","Icons","sort_order","edit","send","cancel","pass","decline","authorization_request","selected","permission_result","PermissionManager","checkTopLevelPermission","authorization_timesheet","authorization_expense","timesheet","schedule","edit_employee","employee","export_excel","doNotSetFocus","LocalCacheData","isLocalCacheExists","selectContextMenu","context_menu_array","setTotalDisplaySpan","len","length","grid_selected_length","getGridSelectIdArray","i","context_btn","find","attr","removeClass","setDefaultMenuEditIcon","setDefaultMenuViewIcon","setDefaultMenuSaveIcon","setDefaultMenuCancelIcon","setDefaultMenuAuthorizationIcon","setDefaultMenuPassIcon","setDefaultMenuDeclineIcon","setDefaultMenuAuthorizationRequestIcon","setDefaultMenuAuthorizationTimesheetIcon","setDefaultMenuEditEmployeeIcon","setDefaultMenuAuthorizationExpenseIcon","setDefaultMenuExportIcon","setContextMenuGroupVisibility","pId","addClass","setEditMenuEditIcon","setEditMenuViewIcon","setEditMenuSaveIcon","setEditMenuAuthorizationIcon","setEditMenuPassIcon","setEditMenuDeclineIcon","setEditMenuAuthorizationRequestIcon","setEditMenuAuthorizationTimesheetIcon","setEditMenuNavViewIcon","setEditMenuNavEditIcon","setEditMenuAuthorizationExpenseIcon","current_edit_record","onSaveClick","onAuthorizationClick","onPassClick","onDeclineClick","onAuthorizationRequestClick","onAuthorizationTimesheetClick","onAuthorizationExpenseClick","onNavigationClick","onViewclick","AuthorizationHistory","init","IndexViewController","goToView","ignoreWarning","is_edit","record","is_add","uniformVariable","EmbeddedMessage","reply","isValid","removeEditView","onViewClick","setErrorTips","setErrorMenu","request_data","type_id","buildDataForAPI","getSelectedItem","enable_edit_view_ui","onResult","res","authorizeRequest","filter","object_id","object_type_id","hierarchy_type_id","is_changed","onRightArrowClick","search","TFeedback","source","doNext","TAlertManager","showConfirmAlert","modify_alert_message","flag","records","uniformMessageVariable","ProgressBar","showOverlay","result_data","edit_only_mode","refresh_id","TTUUID","isUUID","zero_id","not_exist_id","onSaveDone","editPermissionValidate","buildSearchFields","search_fields","SearchField","in_column","field","layout_name","api_class","APIUser","multiple","basic_search","adv_search","form_item_type","FormItemType","AWESOME_BOX","DATE_PICKER","set_any","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","c_value","getValue","edit_view_ui_dic","setValue","manual_id","setJobItemValueWhenJobChanged","setCheckBox","onJobQuickSearch","onTypeChanged","onDateStampChanged","onWorkingStatusChanged","getScheduleTotalTime","onStartDateChanged","start_date","date_stamp","end_date","selected_absence_policy_record","absence_policy_id","getAvailableBalance","user_id","onAvailableBalanceChange","validate","did_clean_dic","hasOwnProperty","widget","css","column","parent","tab_id","hasClass","setEnabled","current_doing_context_action","setURL","hierarchy_level","filter_data","value","buildEditViewUI","tab_model","setTabModel","edit_view","tab_request","edit_view_tab","tab_request_column1","tab_request_column2","edit_view_tabs","push","form_item_input","loadWidgetByName","TEXT_INPUT","TTextInput","width","addEditFieldToColumn","TEXT_AREA","TTextArea","height","set_default_menu","page_action","page_number","callBack","subject","setEditViewDataDone","is_viewing","isChecked","getEnabled","key_name","validateResult","initEditViewUI"],"mappings":"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","file":"my_account-request_authorization-RequestAuthorizationViewController.bundle.js?v=26c5419df9d5ee01e5cb","sourcesContent":["export class RequestAuthorizationViewController extends RequestViewCommonController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#request_authorization_view_container',\n\n\t\t\ttype_array: null,\n\t\t\thierarchy_level_array: null,\n\n\t\t\tmessages: null,\n\n\t\t\tauthorization_api: null,\n\t\t\tapi_request: null,\n\t\t\tapi_absence_policy: null,\n\t\t\tmessage_control_api: null,\n\n\t\t\tauthorization_history_columns: [],\n\n\t\t\tauthorization_history_default_display_columns: [],\n\n\t\t\tauthorization_history_grid: null,\n\t\t\tpre_request_schedule: true\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'RequestAuthorizationEditView.html';\n\t\tthis.permission_id = 'request';\n\t\tthis.viewId = 'RequestAuthorization';\n\t\tthis.script_name = 'RequestAuthorizationView';\n\t\tthis.table_name_key = 'request';\n\t\tthis.context_menu_name = $.i18n._( 'Request (Authorizations)' );\n\t\tthis.navigation_label = $.i18n._( 'Requests' ) + ':';\n\t\tthis.api = TTAPI.APIRequest;\n\t\tthis.authorization_api = TTAPI.APIAuthorization;\n\t\tthis.api_request = TTAPI.APIRequest;\n\t\tthis.api_absence_policy = TTAPI.APIAbsencePolicy;\n\t\tthis.message_control_api = TTAPI.APIMessageControl;\n\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\tthis.job_api = TTAPI.APIJob;\n\t\t\tthis.job_item_api = TTAPI.APIJobItem;\n\t\t}\n\t\tthis.message_control_api = TTAPI.APIMessageControl;\n\n\t\tthis.initPermission();\n\t\tthis.render();\n\n\t\tthis.buildContextMenu( true );\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'type' );\n\t\tvar res = this.api.getHierarchyLevelOptions( [-1], { async: false } );\n\t\tvar data = res.getResult();\n\t\t$this['hierarchy_level_array'] = Global.buildRecordArray( data );\n\t\tif ( Global.isSet( $this.basic_search_field_ui_dic['hierarchy_level'] ) ) {\n\t\t\t$this.basic_search_field_ui_dic['hierarchy_level'].setSourceData( Global.buildRecordArray( data ) );\n\t\t}\n\t}\n\n\tinitPermission() {\n\t\tsuper.initPermission();\n\n\t\tif ( this.jobUIValidate() ) {\n\t\t\tthis.show_job_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_ui = false;\n\t\t}\n\n\t\tif ( this.jobItemUIValidate() ) {\n\t\t\tthis.show_job_item_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_item_ui = false;\n\t\t}\n\n\t\tif ( this.branchUIValidate() ) {\n\t\t\tthis.show_branch_ui = true;\n\t\t} else {\n\t\t\tthis.show_branch_ui = false;\n\t\t}\n\n\t\tif ( this.departmentUIValidate() ) {\n\t\t\tthis.show_department_ui = true;\n\t\t} else {\n\t\t\tthis.show_department_ui = false;\n\t\t}\n\n\t\t// Error: Uncaught TypeError: (intermediate value).isBranchAndDepartmentAndJobAndJobItemEnabled is not a function on line 207\n\t\tvar company_api = TTAPI.APICompany;\n\t\tif ( company_api && _.isFunction( company_api.isBranchAndDepartmentAndJobAndJobItemEnabled ) ) {\n\t\t\tvar result = company_api.isBranchAndDepartmentAndJobAndJobItemEnabled( { async: false } ).getResult();\n\t\t}\n\n\t\tif ( !result ) {\n\t\t\tthis.show_branch_ui = false;\n\t\t\tthis.show_department_ui = false;\n\t\t\tthis.show_job_ui = false;\n\t\t\tthis.show_job_item_ui = false;\n\t\t} else {\n\t\t\tif ( !result.branch ) {\n\t\t\t\tthis.show_branch_ui = false;\n\t\t\t}\n\n\t\t\tif ( !result.department ) {\n\t\t\t\tthis.show_department_ui = false;\n\t\t\t}\n\n\t\t\tif ( !result.job ) {\n\t\t\t\tthis.show_job_ui = false;\n\t\t\t}\n\n\t\t\tif ( !result.job_item ) {\n\t\t\t\tthis.show_job_item_ui = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\tgroups: {\n\t\t\t\taction: {\n\t\t\t\t\tlabel: $.i18n._( 'Action' ),\n\t\t\t\t\tid: this.script_name + 'action'\n\t\t\t\t},\n\t\t\t\tauthorization: {\n\t\t\t\t\tlabel: $.i18n._( 'Authorization' ),\n\t\t\t\t\tid: this.script_name + 'authorization'\n\t\t\t\t},\n\t\t\t\tobjects: {\n\t\t\t\t\tlabel: $.i18n._( 'Objects' ),\n\t\t\t\t\tid: this.script_name + 'objects'\n\t\t\t\t}\n\t\t\t},\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'View' ),\n\t\t\t\t\tid: ContextMenuIconName.view,\n\t\t\t\t\tgroup: 'action',\n\t\t\t\t\ticon: Icons.view,\n\t\t\t\t\tsort_order: 1011\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Reply' ),\n\t\t\t\t\tid: ContextMenuIconName.edit,\n\t\t\t\t\tgroup: 'action',\n\t\t\t\t\ticon: Icons.edit,\n\t\t\t\t\tsort_order: 1021\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Send' ),\n\t\t\t\t\tid: ContextMenuIconName.send,\n\t\t\t\t\tgroup: 'action',\n\t\t\t\t\ticon: Icons.send,\n\t\t\t\t\tsort_order: 1031\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Cancel' ),\n\t\t\t\t\tid: ContextMenuIconName.cancel,\n\t\t\t\t\tgroup: 'action',\n\t\t\t\t\ticon: Icons.cancel,\n\t\t\t\t\tsort_order: 1131\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Authorize' ),\n\t\t\t\t\tid: ContextMenuIconName.authorization,\n\t\t\t\t\tgroup: 'authorization',\n\t\t\t\t\ticon: Icons.authorization\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pass' ),\n\t\t\t\t\tid: ContextMenuIconName.pass,\n\t\t\t\t\tgroup: 'authorization',\n\t\t\t\t\ticon: Icons.pass\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Decline' ),\n\t\t\t\t\tid: ContextMenuIconName.decline,\n\t\t\t\t\tgroup: 'authorization',\n\t\t\t\t\ticon: Icons.decline\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Request<br>Authorizations' ),\n\t\t\t\t\tid: ContextMenuIconName.authorization_request,\n\t\t\t\t\tgroup: 'objects',\n\t\t\t\t\ticon: Icons.authorization_request,\n\t\t\t\t\tselected: true,\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'RequestAuthorization' )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet<br>Authorizations' ),\n\t\t\t\t\tid: ContextMenuIconName.authorization_timesheet,\n\t\t\t\t\tgroup: 'objects',\n\t\t\t\t\ticon: Icons.authorization_timesheet,\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'TimeSheetAuthorization' )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Expense<br>Authorizations' ),\n\t\t\t\t\tid: ContextMenuIconName.authorization_expense,\n\t\t\t\t\tgroup: 'objects',\n\t\t\t\t\ticon: Icons.authorization_expense,\n\t\t\t\t\tselected: false,\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ExpenseAuthorization' )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.timesheet\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Schedule' ),\n\t\t\t\t\tid: ContextMenuIconName.schedule,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.schedule\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit<br>Employee' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Export' ),\n\t\t\t\t\tid: ContextMenuIconName.export_excel,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.export_excel,\n\t\t\t\t\tsort_order: 9000\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\t\t//Check if there is a current_company object at all.\n\t\tif ( LocalCacheData.isLocalCacheExists( 'current_company' ) == false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t\t/* jshint ignore:start */\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.send:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization:\n\t\t\t\t\tthis.setDefaultMenuAuthorizationIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pass:\n\t\t\t\t\tthis.setDefaultMenuPassIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.decline:\n\t\t\t\t\tthis.setDefaultMenuDeclineIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization_request:\n\t\t\t\t\tthis.setDefaultMenuAuthorizationRequestIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization_timesheet:\n\t\t\t\t\tthis.setDefaultMenuAuthorizationTimesheetIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization_expense:\n\t\t\t\t\tthis.setDefaultMenuAuthorizationExpenseIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t/* jshint ignore:end */\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetDefaultMenuAuthorizationExpenseIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( !( Global.getProductEdition() >= 25 ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tcontext_btn.removeClass( 'disable-image' );\n\t}\n\n\tsetEditMenu() {\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t\t/* jshint ignore:start */\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn, 'request' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.send:\n\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization:\n\t\t\t\t\tthis.setEditMenuAuthorizationIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pass:\n\t\t\t\t\tthis.setEditMenuPassIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.decline:\n\t\t\t\t\tthis.setEditMenuDeclineIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization_request:\n\t\t\t\t\tthis.setEditMenuAuthorizationRequestIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization_timesheet:\n\t\t\t\t\tthis.setEditMenuAuthorizationTimesheetIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setEditMenuNavViewIcon( context_btn, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setEditMenuNavViewIcon( context_btn, 'schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setEditMenuNavEditIcon( context_btn, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.authorization_expense:\n\t\t\t\t\tthis.setEditMenuAuthorizationExpenseIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\t/* jshint ignore:end */\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetEditMenuAuthorizationExpenseIcon( context_btn, pId ) {\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.send:\n\t\t\t\tthis.onSaveClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.authorization:\n\t\t\t\tthis.onAuthorizationClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pass:\n\t\t\t\tthis.onPassClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.decline:\n\t\t\t\tthis.onDeclineClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.authorization_request:\n\t\t\t\tthis.onAuthorizationRequestClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.authorization_timesheet:\n\t\t\t\tthis.onAuthorizationTimesheetClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.authorization_expense:\n\t\t\t\tthis.onAuthorizationExpenseClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonViewclick() {\n\t\tsuper.onViewclick();\n\t\tAuthorizationHistory.init( this );\n\t}\n\n\tonAuthorizationExpenseClick() {\n\t\tIndexViewController.goToView( 'ExpenseAuthorization' );\n\t}\n\n\tonSaveClick( ignoreWarning ) {\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tif ( this.is_edit ) {\n\n\t\t\tvar $this = this;\n\t\t\tvar record;\n\t\t\tthis.is_add = false;\n\n\t\t\trecord = this.current_edit_record;\n\n\t\t\trecord = this.uniformVariable( record );\n\n\t\t\tEmbeddedMessage.reply( record, ignoreWarning, function( result ) {\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\tvar id = $this.current_edit_record.id;\n\n\t\t\t\t\t//see #2224 - Unable to get property 'find' of undefined\n\t\t\t\t\t$this.removeEditView();\n\t\t\t\t\t$this.onViewClick( id );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t\t$this.setErrorMenu();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonAuthorizationClick() {\n\t\tvar $this = this;\n\n\t\t//Error: TypeError: $this.current_edit_record is null in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 629\n\t\tif ( !$this.current_edit_record ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar request_data;\n\t\tif ( Global.getProductEdition() >= 15 && ( this.current_edit_record.type_id == 30 || this.current_edit_record.type_id == 40 ) ) {\n\t\t\trequest_data = $this.buildDataForAPI( this.current_edit_record );\n\t\t} else {\n\t\t\trequest_data = this.getSelectedItem();\n\t\t}\n\n\t\t//Check if Edit permissions exist, if not, only authorize the request to avoid a API permission error.\n\t\tif ( this.enable_edit_view_ui == true ) {\n\t\t\t$this.api_request['setRequest']( request_data, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( res.getResult() != false ) {\n\t\t\t\t\t\tauthorizeRequest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.setErrorMenu();\n\t\t\t\t\t\t$this.setErrorTips( res, true );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t} );\n\t\t} else {\n\t\t\tauthorizeRequest();\n\t\t}\n\n\t\tfunction authorizeRequest() {\n\t\t\tif ( $this.current_edit_record ) {\n\t\t\t\tvar filter = {};\n\t\t\t\tfilter.authorized = true;\n\t\t\t\tfilter.object_id = $this.current_edit_record.id;\n\t\t\t\tfilter.object_type_id = $this.current_edit_record.hierarchy_type_id;\n\n\t\t\t\t$this.authorization_api['setAuthorization']( [filter], {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar retval = result.getResult();\n\t\t\t\t\t\tif ( retval != false ) {\n\t\t\t\t\t\t\t$this.is_changed = false;\n\t\t\t\t\t\t\t$this.onRightArrowClick( function() {\n\t\t\t\t\t\t\t\t// Note: if side effects occur here, previously the search(false) function was accidentally called as a evaluated param (run each time, parallel), rather than callback (run at the end, on last record)\n\t\t\t\t\t\t\t\t$this.search();\n\t\t\t\t\t\t\t\t$().TFeedback( {\n\t\t\t\t\t\t\t\t\tsource: 'Authorize'\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$this.setErrorMenu();\n\t\t\t\t\t\t\t$this.setErrorTips( result, true );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tonPassClick() {\n\t\tvar $this = this;\n\n\t\tfunction doNext() {\n\t\t\t$this.onRightArrowClick( function() {\n\t\t\t\t$this.search();\n\t\t\t\t$().TFeedback( {\n\t\t\t\t\tsource: 'Pass'\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tif ( this.is_changed ) {\n\t\t\tTAlertManager.showConfirmAlert( Global.modify_alert_message, null, function( flag ) {\n\t\t\t\tif ( flag === true ) {\n\t\t\t\t\tdoNext();\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tdoNext();\n\t\t}\n\t}\n\n\tonAuthorizationRequestClick() {\n\t\tthis.search( false );\n\t}\n\n\tonDeclineClick() {\n\t\tvar $this = this;\n\n\t\tfunction doNext() {\n\t\t\tvar filter = {};\n\n\t\t\tfilter.authorized = false;\n\t\t\tfilter.object_id = $this.current_edit_record.id;\n\t\t\tfilter.object_type_id = $this.current_edit_record.hierarchy_type_id;\n\n\t\t\t$this.authorization_api['setAuthorization']( [filter], {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t$this.onRightArrowClick( function() {\n\t\t\t\t\t\t$this.search();\n\t\t\t\t\t\t$().TFeedback( {\n\t\t\t\t\t\t\tsource: 'Decline'\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tif ( this.is_changed ) {\n\t\t\tTAlertManager.showConfirmAlert( Global.modify_alert_message, null, function( flag ) {\n\t\t\t\tif ( flag === true ) {\n\t\t\t\t\tdoNext();\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tdoNext();\n\t\t}\n\t}\n\n\tonAuthorizationTimesheetClick() {\n\t\tIndexViewController.goToView( 'TimeSheetAuthorization' );\n\t}\n\n\tuniformVariable( records ) {\n\t\tif ( this.is_edit ) {\n\t\t\treturn this.uniformMessageVariable( records );\n\t\t}\n\t\treturn records;\n\t}\n\n\tonGridDblClickRow() {\n\n\t\tProgressBar.showOverlay();\n\t\tthis.onViewClick();\n\t}\n\n\tsetEditMenuViewIcon( context_btn, pId ) {\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tonSaveResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result.isValid() ) {\n\n\t\t\t$this.is_add = false;\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( !this.edit_only_mode ) {\n\t\t\t\tif ( result_data === true ) {\n\t\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t$this.refresh_id = result_data;\n\t\t\t\t}\n\n\t\t\t\t$this.search();\n\t\t\t}\n\n\t\t\t$this.onSaveDone( result );\n\n\t\t\tif ( $this.is_edit ) {\n\t\t\t\t$this.onViewClick( $this.current_edit_record.id );\n\t\t\t} else {\n\n\t\t\t\t$this.removeEditView();\n\t\t\t}\n\n\t\t} else {\n\t\t\t$this.setErrorMenu();\n\t\t\t$this.setErrorTips( result );\n\n\t\t}\n\t}\n\n\tsetEditMenuAuthorizationIcon( context_btn, pId ) {\n\t\tif ( this.is_edit ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuPassIcon( context_btn, pId ) {\n\t\tif ( this.is_edit ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuDeclineIcon( context_btn, pId ) {\n\t\tif ( this.is_edit ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuAuthorizationRequestIcon( context_btn, pId ) {\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuAuthorizationTimesheetIcon( context_btn, pId ) {\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuSaveIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tsetDefaultMenuEditIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tsetDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.editPermissionValidate( 'user' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuAuthorizationIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tsetDefaultMenuPassIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tsetDefaultMenuDeclineIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tsetDefaultMenuAuthorizationRequestIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.removeClass( 'disable-image' );\n\t}\n\n\tsetDefaultMenuAuthorizationTimesheetIcon( context_btn, grid_selected_length, pId ) {\n\t\tcontext_btn.removeClass( 'disable-image' );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Start Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'start_date',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'End Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'end_date',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Hierarchy Level' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: false,\n\t\t\t\tfield: 'hierarchy_level',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tset_any: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tthis.current_edit_record[key] = c_value;\n\t\tswitch ( key ) {\n\t\t\tcase 'job_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.setJobItemValueWhenJobChanged( target.getValue( true ), 'job_item_id' );\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_quick_search':\n\t\t\tcase 'job_item_quick_search':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.onJobQuickSearch( key, c_value, 'job_id', 'job_item_id' );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'type_id':\n\t\t\t\tthis.onTypeChanged();\n\t\t\t\tbreak;\n\n\t\t\tcase 'date_stamp':\n\t\t\t\tthis.onDateStampChanged();\n\t\t\t\tbreak;\n\t\t\tcase 'request_schedule_status_id':\n\t\t\t\tthis.onWorkingStatusChanged();\n\t\t\t\tbreak;\n\t\t\tcase 'start_date':\n\t\t\t\t$this.getScheduleTotalTime();\n\t\t\t\t$this.onStartDateChanged();\n\t\t\t\t$this.current_edit_record.start_date = $this.edit_view_ui_dic.start_date.getValue();\n\t\t\t\t$this.current_edit_record.date_stamp = $this.edit_view_ui_dic.start_date.getValue();\n\t\t\t\tif ( $this.edit_view_ui_dic.date_stamp ) {\n\t\t\t\t\t$this.edit_view_ui_dic.date_stamp.setValue( $this.edit_view_ui_dic.start_date.getValue() );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'end_date':\n\t\t\t\t$this.getScheduleTotalTime();\n\t\t\t\t$this.current_edit_record.end_date = $this.edit_view_ui_dic.end_date.getValue();\n\t\t\t\tbreak;\n\t\t\tcase 'sun':\n\t\t\tcase 'tue':\n\t\t\tcase 'wed':\n\t\t\tcase 'thu':\n\t\t\tcase 'fri':\n\t\t\tcase 'sat':\n\t\t\tcase 'start_time':\n\t\t\tcase 'end_time':\n\t\t\tcase 'schedule_policy_id':\n\t\t\t\t$this.getScheduleTotalTime();\n\t\t\t\tbreak;\n\t\t\tcase'absence_policy_id':\n\t\t\t\tthis.selected_absence_policy_record = this.edit_view_ui_dic.absence_policy_id.getValue();\n\t\t\t\tthis.getAvailableBalance();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( key === 'date_stamp' ||\n\t\t\tkey === 'start_date_stamps' ||\n\t\t\tkey === 'start_date_stamp' ||\n\t\t\tkey === 'start_time' ||\n\t\t\tkey === 'end_time' ||\n\t\t\tkey === 'schedule_policy_id' ||\n\t\t\tkey === 'absence_policy_id' ) {\n\n\t\t\tif ( this.current_edit_record['date_stamp'] !== '' &&\n\t\t\t\tthis.current_edit_record['start_time'] !== '' &&\n\t\t\t\tthis.current_edit_record['end_time'] !== '' ) {\n\n\t\t\t\tvar startTime = this.current_edit_record['date_stamp'] + ' ' + this.current_edit_record['start_time'];\n\t\t\t\tvar endTime = this.current_edit_record['date_stamp'] + ' ' + this.current_edit_record['end_time'];\n\t\t\t\tvar schedulePolicyId = this.current_edit_record['schedule_policy_id'];\n\t\t\t\tvar user_id = this.current_edit_record.user_id;\n\n\t\t\t\tthis.getScheduleTotalTime();\n\n\t\t\t} else {\n\t\t\t\tthis.onAvailableBalanceChange();\n\t\t\t}\n\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\t//set widget disablebility if view mode or edit mode\n\tsetEditViewWidgetsMode() {\n\t\tvar did_clean_dic = {};\n\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\twidget.css( 'opacity', 1 );\n\t\t\tvar column = widget.parent().parent().parent();\n\t\t\tvar tab_id = column.parent().attr( 'id' );\n\t\t\tif ( !column.hasClass( 'v-box' ) ) {\n\t\t\t\tif ( !did_clean_dic[tab_id] ) {\n\t\t\t\t\tdid_clean_dic[tab_id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( Global.isSet( widget.setEnabled ) ) {\n\t\t\t\twidget.setEnabled( this.enable_edit_view_ui );\n\t\t\t}\n\t\t}\n\t}\n\n\tonAvailableBalanceChange() {\n\t\tthis.getAvailableBalance();\n\t}\n\n\tsetURL() {\n\n\t\tif ( LocalCacheData.current_doing_context_action === 'edit' ) {\n\t\t\tLocalCacheData.current_doing_context_action = '';\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.setURL();\n\t}\n\n\tgetSubViewFilter( filter ) {\n\t\tif ( filter.length === 0 ) {\n\t\t\tfilter = {};\n\t\t}\n\n\t\tif ( !Global.isSet( filter.type_id ) ) {\n\t\t\tfilter['type_id'] = [-1];\n\t\t}\n\n\t\tif ( !Global.isSet( filter.hierarchy_level ) ) {\n\t\t\tfilter['hierarchy_level'] = 1;\n\t\t\tthis.filter_data['hierarchy_level'] = {\n\t\t\t\tfield: 'hierarchy_level',\n\t\t\t\tid: '',\n\t\t\t\tvalue: this.basic_search_field_ui_dic['hierarchy_level'].getValue( true )\n\t\t\t};\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar tab_model = {\n\t\t\t'tab_request': { 'label': $.i18n._( 'Message' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\t//This hides the audit tab as this view is always used for creating/replying to an existing request.\n\t\t//For some reason removing 'tab_audit' from the model above results in a blank tab appearing.\n\t\tvar tab_audit_label = this.edit_view.find( 'a[ref=tab_audit]' );\n\t\ttab_audit_label.css( 'display', 'none' );\n\n\t\t//Tab 0 start\n\n\t\tvar tab_request = this.edit_view_tab.find( '#tab_request' );\n\n\t\tvar tab_request_column1 = tab_request.find( '.first-column' );\n\n\t\tvar tab_request_column2 = tab_request.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_request_column1 );\n\n\t\t// Subject\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'subject', width: 359 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Subject' ), form_item_input, tab_request_column1, '' );\n\n\t\t// Body\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'body', width: 600, height: 400 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Body' ), form_item_input, tab_request_column1, '', null, null, true );\n\n\t\ttab_request_column2.css( 'display', 'none' );\n\t}\n\n\tsearch( set_default_menu, page_action, page_number, callBack ) {\n\t\tthis.refresh_id = null;\n\t\tsuper.search( set_default_menu, page_action, page_number, callBack );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'full_name':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record['first_name'] + ' ' + this.current_edit_record['last_name'] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'subject':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tif ( this.is_edit ) {\n\t\t\t\t\t\t\twidget.setValue( 'Re: ' + this.messages[0].subject );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tvar $this = this;\n\t\tsuper.setEditViewDataDone();\n\t\tif ( !this.is_viewing ) {\n\t\t\tif ( Global.isSet( $this.messages ) ) {\n\t\t\t\t$this.messages = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t//Make sure this.current_edit_record is updated before validate\n\tvalidate() {\n\t\tvar $this = this;\n\n\t\tvar record = {};\n\n\t\tif ( this.is_edit ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\n\t\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\trecord = this.buildDataForAPI( this.current_edit_record );\n\t\t}\n\n\t\trecord = this.uniformVariable( record );\n\t\tif ( this.is_edit ) {\n\t\t\tthis.message_control_api['validate' + this.message_control_api.key_name]( record, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t$this.validateResult( result );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else if ( this.is_viewing ) {\n\t\t\tthis.api_request['validate' + this.api.key_name]( record, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t$this.validateResult( result );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\topenAuthorizationView() {\n\t\tif ( !this.edit_view ) {\n\t\t\tthis.initEditViewUI( this.viewId, this.edit_view_tpl );\n\t\t}\n\t}\n\n}"],"sourceRoot":""}