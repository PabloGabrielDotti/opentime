{"version":3,"sources":["webpack://timetrex/./interface/html5/views/portal/hr/my_profile/DocumentSubViewController.js","webpack://timetrex/./interface/html5/views/portal/hr/my_profile/JobApplicantSubBaseViewController.js"],"names":["DocumentSubViewController","JobApplicantSubBaseViewController","options","_","defaults","super","this","document_api","attachment_data","$this","list_tpl","Global","loadWidget","unique_id","sub_view_id","model","id","sub_view","template","table_container","find","length","html","tbody","$","attr","append","thead","column","display_columns","column_val","hasOwnProperty","get","i18n","unbind","bind","e","filter","filter_data","onResult","result_data","downloadFile","setEditView","onDeleteClick","data","getResult","document_id","document_revision_id","url","LocalCacheData","getAllURLArgs","company_id","APIFileDownload","callback","api","result","isValid","set","showErrorAlert","ProgressBar","closeOverlay","field_selector","field_control","key","setCurrentEditRecordData","attributes","has","prop","removeAttr","val","size","edit_view_error_ui_dic","getPortalLoginUser","first_name","last_name","toJSON","onSaveResult","changeProgressBarMessage","closeEditView","_delegate","refreshProfile","setErrorTips","document_result","file","files","form","FormData","document_name","revision","addAttachment","async","uploadFile","file_data","className","message_id","showProgressBar","ajax","headers","getCookie","type","success","res","removeProgressBar","error","IndexViewController","instance","router","showTipModal","cache","contentType","processData","doNotValidate","currentTarget","name","is","validate","PortalBaseViewController","events","qualification_api","company_api","available_fields","enable_add_qualification","render","args","type_id","qualification_type_id","filter_columns","getQualification","i","row","setSourceData","elem","parent","document","createEvent","initMouseEvent","window","dispatchEvent","element","fireEvent","tpl","setElement","initOptions","registerDatePicker","openEditView","showConfirmModal","delete_confirm_message","title","actions","label","isClose","callBack","closeConfirmModal","showOverlay","setSubViews","field","source_data","set_empty","empty","isSet","option_name","text","each","value","selectpicker","focus_out_timer","is_open","day_name_min","month_name_short","showTime","dateFormat","showHour","showMinute","changeMonth","changeYear","showButtonPanel","duration","showAnim","yearRange","showOn","dayNamesMin","currentText","monthNamesShort","closeText","beforeShow","onSelect","dateText","change","onClose","setTimeout","datepicker","clearTimeout","next","prev","trigger","self","unindexed_array","serializeArray","map","getQualificationWidget","setQualification","new_id","selected","appendTo","getAddQualificationContainer","container","css","off","on","addQualification","qualification_widget","keyCode","showFormModal","$el","clearErrorTips","onSaveClick","hideFormModal","hideConfirmModal","showAddQualificationContainer","hideAddQualificationContainer","validateResult","clear_all","removeClass","tooltip","error_list","getDetails","field_obj","error_string","parents","addClass","isArray","details","getDescription","index","showAlert","content"],"mappings":"oTAKO,MAAMA,UAAkC,EAAAC,kCAC9C,YAAaC,EAAU,IACtBC,EAAEC,SAAUF,EAAS,IAGrBG,MAAOH,GAGR,KAAMA,GACLI,KAAKC,aAAe,sBACpBD,KAAKE,gBAAkB,KAGxB,SACC,IAAIC,EAAQH,KACRI,EAAWC,OAAOC,WAAY,oDAC9BC,EAAYP,KAAKQ,YAAc,IAAMR,KAAKS,MAAMC,GAMpD,GALAV,KAAKO,UAAYA,EACjBP,KAAKW,SAAWd,EAAEe,SAAUR,EAAZP,CAAwB,IACuB,GAA1DG,KAAKa,gBAAgBC,KAAM,oBAAqBC,QACpDf,KAAKa,gBAAgBG,KAAM,kJAEiC,IAAxDhB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYQ,OAAe,CAChE,IAAIE,EAAQC,EAAG,QAASC,KAAM,KAAMZ,GACpCW,EAAGlB,KAAKa,gBAAgBC,KAAM,SAAU,IAAKM,OAAQH,QAErDjB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYS,KAAM,IAEpD,IAAIK,EAAQH,EAAG,QACf,IAAM,IAAII,KAAUtB,KAAKuB,gBAAkB,CAI1C,IAAIC,EAHJ,GAAMxB,KAAKuB,gBAAgBE,eAAgBH,GASxCE,EAHKxB,KAAKS,MAAMiB,IAAKJ,GAGRtB,KAAKS,MAAMiB,IAAKJ,GAFhB,GAIE,SAAXA,EACJtB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYa,OAAQ,iEAAmEI,EAAa,aAErIxB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYa,OAAQ,OAASI,EAAa,SAI9EH,EAAMD,OAAQ,OAASpB,KAAKuB,gBAAgBD,GAAU,SAEvDD,EAAMD,OAAQ,OAASF,EAAES,KAAK9B,EAAG,UAAa,SACO,KAAhDG,KAAKa,gBAAgBC,KAAM,SAAUE,QACzChB,KAAKa,gBAAgBC,KAAM,SAAUE,KAAMK,GAE5CrB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYa,OAAQpB,KAAKW,UAC1DX,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYO,KAAM,wBAAyBc,OAAQ,SAAUC,KAAM,SAAS,SAAUC,GACtH,IAAIC,EAAS,CACb,YAAqB,IACrBA,EAAOC,YAAYtB,GAAKP,EAAMM,MAAMC,GACpCP,EAAMF,aAA4B,cAAG8B,EAAQ,CAC5CE,SAAU,SAAUC,GACnB/B,EAAMgC,aAAcD,SAIvBlC,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYO,KAAM,cAAec,OAAQ,SAAUC,KAAM,SAAS,SAAUC,GAC5G3B,EAAM,MAAQA,EAAMK,cAAc,WACjCL,EAAMiC,oBAGRpC,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYO,KAAM,gBAAiBc,OAAQ,SAAUC,KAAM,SAAS,SAAUC,GAC9G3B,EAAM,MAAQA,EAAMK,cAAc,WACjCL,EAAMkC,sBAKT,aAAcH,GACb,IACII,EAAOJ,EAAYK,YACvB,GAAKD,EAAKvB,OAAS,EAAI,CACtB,IAAIyB,EAAcF,EAAK,GAAG5B,GACtB+B,EAAuBH,EAAK,GAAGG,qBAE/BC,EAAM,cAAyB,yDAC9BC,eAAeC,gBAAgBC,aACnCH,EAAMA,EAAM,eAAiBC,eAAeC,gBAAgBC,YAG7DH,EAAMA,EAAM,cAAgBF,EAAc,cAAgBC,EAE1DpC,OAAOyC,gBAAiB,KAAM,KAAM,KAAMJ,IAI5C,eAIA,YAAaK,GACZ,IAAI5C,EAAQH,KACR+B,EAAS,CACb,YAAqB,IACrBA,EAAOC,YAAYtB,GAAKV,KAAKS,MAAMC,GACnCV,KAAKgD,IAAiB,YAAGjB,EAAQ,CAChCE,SAAU,SAAUgB,GACnB,GAAKA,EAAOC,UAAY,CACvB,IAAIhB,EAAce,EAAOV,YACnBL,IACLA,EAAc,IAEfA,EAAcA,EAAY,GAC1B/B,EAAMM,MAAM0C,IAAKjB,GACZa,GACJA,SAGD5C,EAAMiD,eAAgBH,GACtBI,YAAYC,kBAMhB,2BAEC,IAAIC,EACAC,EAEJ,IAAM,IAAIC,KAJV1D,MAAM2D,2BAIW1D,KAAKS,MAAMkD,WAC3B,GAAM3D,KAAKS,MAAMmD,IAAKH,GAGtB,OAASA,GACR,IAAK,UACL,IAAK,WACJF,EAAiB,eAAiBE,EAAM,MACT,IAA1BzD,KAAKS,MAAMiB,IAAK+B,GACpBzD,KAAKkB,EAAGqC,GAAiBM,KAAM,UAAW,YACL,IAA1B7D,KAAKS,MAAMiB,IAAK+B,IAC3BzD,KAAKkB,EAAGqC,GAAiBO,WAAY,WAEtC,MACD,SACgC,IAA1B9D,KAAKS,MAAMiB,IAAK+B,IACpBzD,KAAKS,MAAM0C,IAAKM,EAAK,IAEtBF,EAAiB,uBAAyBE,EAAM,MAChDD,EAAgBxD,KAAKkB,EAAGqC,KACFC,EAAc,IACnCxD,KAAKkB,EAAGqC,GAAiBQ,IAAK/D,KAAKS,MAAMiB,IAAK+B,KAQnD,cACC,IAAItD,EAAQH,KACPH,EAAEmE,KAAMhE,KAAKiE,wBAA2B,IAGvCjE,KAAKS,MAAMiB,IAAK,SACrB1B,KAAKS,MAAM0C,IAAK,OAAQ,YAAmBR,eAAeuB,qBAAqBC,WAAa,IAAMxB,eAAeuB,qBAAqBE,WAEvIpE,KAAKgD,IAAI,MAAQhD,KAAKQ,aAAcR,KAAKS,MAAM4D,SAAU,CACxDpC,SAAU,SAAUgB,GACnB,GAAKA,EAAOC,UAAY,CACvB,IAAIhB,EAAce,EAAOV,aACJ,IAAhBL,GAAwB,WAAeA,IAAiBA,GAAe,aAAkBA,GAAe,kBAC5G/B,EAAMM,MAAM0C,IAAK,KAAMjB,GAExB/B,EAAMmE,aAAcrB,GAAQ,WAC3B9C,EAAM,MAAQA,EAAMK,cAAc,WACjC6C,YAAYkB,yBAA0B,iBAEtCpE,EAAMqE,gBACNrE,EAAMsE,UAAUC,4BAIlBvE,EAAMwE,aAAc1B,OAMxB,aAAc2B,EAAiB7B,GAC9B,IAAIP,EAAcoC,EAAgBrC,YAK9BsC,EAAO7E,KAAKkB,EAAG,0BAA2B,GAAG4D,MAAM,GACnDC,EAAO,IAAIC,SAKf,IAJqB,IAAhBxC,IACJA,EAAcxC,KAAKS,MAAMC,IAGrBmE,EAAO,CACX,IAAII,EAAgBjF,KAAKS,MAAMiB,IAAK,QAChCwD,EAAWlF,KAAKS,MAAMiB,IAAK,YAC3Be,EAAuBzC,KAAKC,aAAakF,cAAeF,EAAezC,EAAa0C,EAAU,CAAEE,OAAO,IAAU7C,YAAkC,qBACvJwC,EAAK3D,OAAQ,WAAYyD,GACzB7E,KAAKqF,WAAYN,EAAMtC,EAAsBM,QAE7CA,IAIF,WAAYuC,EAAW7C,EAAsBM,GAC5C,IAAIL,EAAM,cAAyB,SAAW1C,KAAKC,aAAasF,UAA7B,gCAC9B5C,eAAeC,gBAAgBC,aACnCH,EAAMA,EAAM,eAAiBC,eAAeC,gBAAgBC,YAE7DH,EAAMA,EAAM,cAAgBD,EAC5B,IAAI+C,EAAa,mBACjBnC,YAAYoC,gBAAiBD,GAC7BnC,YAAYkB,yBAA0B,kBACtCrD,EAAEwE,KAAM,CACPhD,IAAKA,EACLiD,QAAS,CAER,cAAe,mBACf,eAAgBC,UAAW,eAE5BC,KAAM,OACNvD,KAAMgD,EACNQ,QAAS,SAAUC,GAClB1C,YAAY2C,oBACPD,EAAIE,MAAMlF,OAAS,EACvBmF,oBAAoBC,SAASC,OAAOC,aAAcN,EAAIE,OAGvDlD,KAEDuD,OAAO,EACPC,aAAa,EACbC,aAAa,IAIf,iBAAkB1E,EAAG2E,GACpB,IAAIhD,EAAM3B,EAAE4E,cAAcC,KAE1B,OADA3G,KAAKS,MAAM0C,IAAKM,EAAKvC,EAAGY,EAAE4E,eAAgB3C,OACjCN,GAMR,IAAK,UACL,IAAK,WACCvC,EAAGY,EAAE4E,eAAgBE,GAAI,YAC7B5G,KAAKS,MAAM0C,IAAKM,GAAK,GAErBzD,KAAKS,MAAM0C,IAAKM,GAAK,GAIlBgD,GACLzG,KAAK6G,c,sHCvQD,MAAMlH,UAA0C,EAAAmH,yBACtD,YAAalH,EAAU,IACtBC,EAAEC,SAAUF,EAAS,CACpBmH,OAAQ,CACP,4BAA6B,mBAC7B,gCAAiC,mBACjC,6BAA8B,mBAC9B,+BAAgC,sBAKlChH,MAAOH,GAGR,QAASA,GACRI,KAAKgD,IAAM,0BACXhD,KAAKgH,kBAAoB,2BACzBhH,KAAKiH,YAAc,qBACnBjH,KAAKQ,YAAcZ,EAAQY,YAC3BR,KAAKuB,gBAAkB3B,EAAQ2B,gBAC/BvB,KAAKa,gBAAkBjB,EAAQiB,gBAC/Bb,KAAKkH,iBAAmBtH,EAAQsH,iBAChClH,KAAKyE,UAAY7E,EAAQ6E,UACzBzE,KAAKiE,uBAAyB,GAC9BjE,KAAKmH,yBAA2BvH,EAAQuH,2BAA4B,EAIrE,WACOnH,KAAKS,MAAMC,GAGhBV,KAAKoH,SAFLpH,KAAKoC,cAMP,SACC,IAAIjC,EAAQH,KACRI,EAAWC,OAAOC,WAAY,oDAC9BC,EAAYP,KAAKQ,YAAc,IAAMR,KAAKS,MAAMC,GAMpD,GALAV,KAAKO,UAAYA,EACjBP,KAAKW,SAAWd,EAAEe,SAAUR,EAAZP,CAAwB,IACuB,GAA1DG,KAAKa,gBAAgBC,KAAM,oBAAqBC,QACpDf,KAAKa,gBAAgBG,KAAM,kJAEiC,IAAxDhB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYQ,OAAe,CAChE,IAAIE,EAAQC,EAAG,QAASC,KAAM,KAAMZ,GACpCW,EAAGlB,KAAKa,gBAAgBC,KAAM,SAAU,IAAKM,OAAQH,QAErDjB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYS,KAAM,IAEpD,IAAIK,EAAQH,EAAG,QACf,IAAM,IAAII,KAAUtB,KAAKuB,gBACxB,GAAMvB,KAAKuB,gBAAgBE,eAAgBH,GAA3C,CAOA,IAAIE,EACJ,OAASF,GACR,IAAK,sBACL,IAAK,uBAEHE,EADIxB,KAAKS,MAAMiB,IAAKJ,GACPJ,EAAES,KAAK9B,EAAG,OAEVqB,EAAES,KAAK9B,EAAG,MAExB,MACD,QAIE2B,EAHKxB,KAAKS,MAAMiB,IAAKJ,GAGRtB,KAAKS,MAAMiB,IAAKJ,GAFhB,GAMhBD,EAAMD,OAAQ,OAASpB,KAAKuB,gBAAgBD,GAAU,SACtDtB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYa,OAAQ,OAASI,EAAa,SAE5EH,EAAMD,OAAQ,OAASF,EAAES,KAAK9B,EAAG,UAAa,SACO,KAAhDG,KAAKa,gBAAgBC,KAAM,SAAUE,QACzChB,KAAKa,gBAAgBC,KAAM,SAAUE,KAAMK,GAE5CrB,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYa,OAAQpB,KAAKW,UAC1DX,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYO,KAAM,cAAec,OAAQ,SAAUC,KAAM,SAAS,SAAUC,GAC5G3B,EAAM,MAAQA,EAAMK,cAAc,WACjCL,EAAMiC,oBAGRpC,KAAKa,gBAAgBC,KAAM,IAAMP,GAAYO,KAAM,gBAAiBc,OAAQ,SAAUC,KAAM,SAAS,SAAUC,GAC9G3B,EAAM,MAAQA,EAAMK,cAAc,WACjCL,EAAMkC,sBAKT,cACC,IAAIlC,EAAQH,KACRqH,EAAO,GACPrF,EAAc,GAClBA,EAAYsF,QAAU,CAACtH,KAAKuH,uBAC5BF,EAAKrF,YAAcA,EACnBqF,EAAKG,eAAiB,CACrB,MAAM,EACN,QAAQ,GAETxH,KAAKgH,kBAAkBS,iBAAkBJ,GAAM,EAAM,CACpDpF,SAAU,SAAUgB,GACnB,IAAI8C,EAAM9C,EAAOV,YACb3C,EAAU,GACd,IAAM,IAAI8H,KAAK3B,EACd,GAAMA,EAAItE,eAAgBiG,GAA1B,CAGA,IAAIC,EAAM5B,EAAI2B,GACd9H,EAAQ+H,EAAIjH,IAAMQ,EAAES,KAAK9B,EAAG8H,EAAIhB,MAEjCxG,EAAMyH,cAAe,mBAAoBhI,GAAS,MAKrD,cAAekC,GACd,IAAI+F,EAAO3G,EAAGY,EAAE4E,eAAgBoB,SAAShH,KAAM,UAC1CiH,SAASC,cACTlG,EAAIiG,SAASC,YAAa,gBAC5BC,eAAgB,aAAa,GAAM,EAAMC,OAAQ,EAAG,EAAG,EAAG,EAAG,GAAG,GAAO,GAAO,GAAO,EAAO,EAAG,MACjGL,EAAK,GAAGM,cAAerG,IACZsG,QAAQC,WACnBR,EAAK,GAAGQ,UAAW,eAIrB,cACC,IAAIC,EAAMjI,OAAOC,WAAY,8BAAgCN,KAAKQ,YAAc,oBAChFR,KAAKuI,WAAY1I,EAAEe,SAAU0H,EAAZzI,CAAmB,CACnCqH,iBAAkBlH,KAAKkH,iBACvBC,yBAA0BnH,KAAKmH,4BAEhCnH,KAAKwI,cACLxI,KAAKyI,qBACLzI,KAAK0D,2BACL1D,KAAK0I,eAGN,gBACC,IAAIvI,EAAQH,KACZkG,oBAAoBC,SAASC,OAAOuC,iBAAkBtI,OAAOuI,uBAAwB,CACpFC,MAAO,GACPC,QAAS,CACR,CAAEC,MAAO,KAAMC,SAAS,GACxB,CACCD,MAAO,MAAOE,SAAU,SAAUnH,GACjC3B,EAAM+I,oBACN7F,YAAY8F,cACZhJ,EAAM6C,IAAI,SAAW7C,EAAMK,aAAcL,EAAMM,MAAMC,GAAI,CACxDuB,SAAU,SAAUgB,GACnBI,YAAYC,eACPL,EAAOC,UAGX/C,EAAMsE,UAAU2E,YAAajJ,EAAMK,YAAaL,EAAMoB,iBAEtDpB,EAAMiD,eAAgBH,WAU9B,cAAeoG,EAAOC,EAAaC,GAClC,IAAIpJ,EAAQH,KACRuD,EAAiB,gBAAkB8F,EAAQ,KAC/C,GAAKrJ,KAAKkB,EAAGqC,IAAoBvD,KAAKkB,EAAGqC,GAAiB,GAY1D,OAXCvD,KAAKkB,EAAGqC,GAAiBiG,QAIpBnJ,OAAOoJ,MAAOzJ,KAAKS,MAAMiB,IAAK2H,KACnCrJ,KAAKS,MAAM0C,IAAKkG,EAAO,IAEM,GAAzBxJ,EAAEmE,KAAMsF,KACZC,GAAY,EACZvJ,KAAKS,MAAM0C,IAAKkG,EAAO,KAEfA,GACR,IAAK,mBACJ,GAAKrJ,KAAKmH,yBAA2B,CACpC,IAAIuC,EACJ,OAAS1J,KAAKQ,aACb,IAAK,oBACJkJ,EAAcxI,EAAES,KAAK9B,EAAG,iBACxB,MACD,IAAK,wBACJ6J,EAAcxI,EAAES,KAAK9B,EAAG,kBACxB,MACD,IAAK,sBACJ6J,EAAcxI,EAAES,KAAK9B,EAAG,gBACxB,MACD,IAAK,uBACJ6J,EAAcxI,EAAES,KAAK9B,EAAG,oBACxB,MACD,IAAK,yBACJ6J,EAAcxI,EAAES,KAAK9B,EAAG,sBAG1B0J,GAAY,EACZvJ,KAAKkB,EAAGqC,GAAiBnC,OAAQF,EAAG,qBAAsB2C,KAAM,QAAS,IAAK8F,KAAM,MAAQD,EAAc,QAG5G,SACoB,IAAdH,GACJvJ,KAAKkB,EAAGqC,GAAiBnC,OAAQF,EAAG,qBAAsB2C,KAAM,QAAS,IAAK8F,KAAM,MAAQzI,EAAES,KAAK9B,EAAG,QAAW,QAE7GA,EAAEmE,KAAMsF,GAAgB,GAC5BpI,EAAE0I,KAAMN,GAAa,SAAUO,EAAOd,GACrC5I,EAAMe,EAAGqC,GAAiBnC,OAAQF,EAAG,qBAAsB2C,KAAM,QAASgG,GAAQF,KAAMZ,IACnF5I,EAAMM,MAAMiB,IAAK2H,IAAWQ,GAChC1J,EAAMe,EAAGqC,GAAiBQ,IAAK8F,MAIlC1J,EAAMe,EAAGqC,GAAiBuG,gBAK7B,qBACC,IAEIC,EACAC,GAAU,EAMVC,EAAe,CAClB/I,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAChDqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,QAEhEqK,EAAmB,CACtBhJ,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAC7BqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAChDqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAChDqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAASqB,EAAES,KAAK9B,EAAG,OAChDqB,EAAES,KAAK9B,EAAG,QAIPD,EAAU,CACbuK,UAAU,EACVC,WAvBY,SAwBZC,UAAU,EACVC,YAAY,EACZC,aAAa,EACbC,YAAY,EACZC,iBAAiB,EACjBC,SAAU,GACVC,SAAU,GACVC,UAAW,WACXC,OAAQ,GACRC,YAAab,EACbc,YAfkB7J,EAAES,KAAK9B,EAAG,SAgB5BmL,gBAAiBd,EACjBe,UAhBgB/J,EAAES,KAAK9B,EAAG,SAiB1BqL,WAAY,aAEZC,SAAU,SAAUC,GACnBlK,EAAGlB,MAAOqL,UAEXC,QAAS,WACRvB,EAAkBwB,YAAY,WAC7BvB,GAAU,IACR,OAILhK,KAAKkB,EAAG,iCAAkCsK,WAAY5L,GACtDI,KAAKkB,EAAG,iCAAkCC,KAAM,cAAe,aAC/DnB,KAAKkB,EAAG,iCAAkCW,KAAM,WAAW,WACpDmI,GAILA,GAAU,EACLD,IACJ0B,aAAc1B,GACdA,EAAkB,QANnB7I,EAAGlB,MAAOwL,WAAY,QACtBxB,GAAU,MAQR0B,KAAK,cAAc7J,KAAM,WAAW,WAAaX,EAAElB,MAAM2L,OAAOC,QAAS,cAG9E,2BACC,IAAIC,EAAO7L,KACP8L,EAAkB9L,KAAKkB,EAAG,gBAAiB6K,iBAC/C7K,EAAE8K,IAAKF,GAAiB,SAAUnE,EAAKD,GAChCrH,OAAOoJ,MAAOoC,EAAKpL,MAAMiB,IAAKiG,EAAU,QAC7CkE,EAAKpL,MAAM0C,IAAKwE,EAAU,KAAGA,EAAW,UAGpC3H,KAAKS,MAAMmD,IAAK,qBACrB5D,KAAKS,MAAM0C,IAAK,oBAAoB,GAItC,mBACC,IAAIhD,EAAQH,KACRqH,EAAO,GACXA,EAAKC,QAAUtH,KAAKuH,sBACpB,IAAIZ,EAAOU,EAAKV,KAAO3G,KAAKiM,yBAAyBlI,MACrD/D,KAAKgH,kBAAkBkF,iBAAkB7E,EAAM,CAC9CpF,SAAU,SAAU8D,GACnB,GAAMA,EAAI7C,UAEH,CACN/C,EAAMe,EAAG,mCAAsC4I,aAAc,WAC7D,IAAIqC,EAASpG,EAAIxD,YACjBrB,EAAG,YAAaC,KAAM,CACrBiL,SAAU,WACVvC,MAAOsC,IACJxC,KAAMhD,GAAO0F,SAAUlM,EAAMe,EAAG,oCACpCf,EAAMe,EAAG,mCAAsC4I,eAC/C3J,EAAMe,EAAG,mCAAsC0K,QAAS,eATxDzL,EAAMwE,aAAcoB,MAexB,+BACC,OAAO/F,KAAKkB,EAAG,gCAGhB,yBACC,OAAOlB,KAAKsM,+BAA+BxL,KAAM,sBAGlD,gCACC,IAAIX,EAAQH,KACRuM,EAAYvM,KAAKsM,+BACrBC,EAAUC,IAAK,UAAW,SAC1BD,EAAUE,IAAK,SAAUC,GAAI,SAAS,WACrCvM,EAAMwM,sBAEP,IAAIC,EAAuB5M,KAAKiM,yBAOhC,OANAW,EAAqB7I,IAAK,IAC1B6I,EAAqBhL,OAAQ,WAAYC,KAAM,WAAW,SAAUC,GAChD,KAAdA,EAAE+K,SACN1M,EAAMwM,sBAGDJ,EAGR,gCACC,IAAIA,EAAYvM,KAAKsM,+BAErB,OADAC,EAAUC,IAAK,UAAW,QACnBD,EAQR,eACC,IAAIpM,EAAQH,KACZkG,oBAAoBC,SAASC,OAAO0G,cAAe9M,KAAK+M,IAAK,CAC5DlE,MAAO,GACPC,QAAS,CACR,CACCC,MAAO,QAASC,SAAS,EAAMC,SAAU,SAAUnH,GAClD3B,EAAM6M,gBAAgB,KAGxB,CACCjE,MAAO,eAAgBE,SAAU,SAAUnH,GAC1C3B,EAAM8M,mBAOX,gBACC/G,oBAAoBC,SAASC,OAAO8G,gBAGrC,oBACChH,oBAAoBC,SAASC,OAAO+G,mBAGrC,iBAAkBrL,EAAG2E,GACpB,IAAIhD,EAAM3B,EAAE4E,cAAcC,KAE1B,OADA3G,KAAKS,MAAM0C,IAAKM,EAAKvC,EAAGY,EAAE4E,eAAgB3C,OACjCN,GACR,IAAK,OACJgD,GAAgB,EAChB,MACD,IAAK,mBAC2B,KAA1BzG,KAAKS,MAAMiB,IAAK+B,IAAgBzD,KAAKmH,0BACzCnH,KAAKoN,gCACL3G,GAAgB,GAEhBzG,KAAKqN,gCAIF5G,GACLzG,KAAK6G,WAIP,WACC,IAAI1G,EAAQH,KAGZA,KAAKgD,IAAI,WAAahD,KAAKQ,aAAcR,KAAKS,MAAM4D,SAAU,CAC7DpC,SAAU,SAAUgB,GACnB9C,EAAMmN,eAAgBrK,MAKzB,eAAgBA,GAEfjD,KAAK2E,aAAc1B,GAGpB,eAAgBsK,GACf,IAAM,IAAI9J,KAAOzD,KAAKiE,wBAC2B,KAA3CjE,KAAKiE,uBAAuBR,GAAKM,OAAgBwJ,KACrDvN,KAAKiE,uBAAuBR,GAAK+J,YAAa,aAC9CxN,KAAKiE,uBAAuBR,GAAKgK,UAAUA,QAAS,YAMvD,aAAcxK,GACbjD,KAAKgN,gBAAgB,GACrB,IAAIU,EAAazK,EAAO0K,aAAe1K,EAAO0K,aAAa,GAAK,GAIhE,IAAM,IAAIlK,KAHLiK,GAAcA,EAAWjM,eAAgB,WAC7CiM,EAAaA,EAAWzH,OAERyH,EAAa,CAI7B,IAAIE,EAUCC,EAbL,GAAMH,EAAWjM,eAAgBgC,GAWjC,GAPKzD,KAAKkB,EAAG,eAAiBuC,EAAM,MAAO,GAC1CmK,EAAY5N,KAAKkB,EAAG,eAAiBuC,EAAM,MAChCzD,KAAKkB,EAAG,gBAAkBuC,EAAM,MAAO,GAClDmK,EAAY5N,KAAKkB,EAAG,gBAAkBuC,EAAM,MAAOqK,QAAS,kBACjD9N,KAAKkB,EAAG,kBAAoBuC,EAAM,MAAO,KACpDmK,EAAY5N,KAAKkB,EAAG,kBAAoBuC,EAAM,OAE1CmK,EACJA,EAAUG,SAAU,aAGnBF,EADIhO,EAAEmO,QAASN,EAAWjK,IACXiK,EAAWjK,GAAK,GAEhBiK,EAAWjK,GAE3BmK,EAAUH,QAAS,CAClB5E,MAAOgF,EACPtB,UAAW,OACXX,QAAS,gBAIVgC,EAAUH,QAAS,QAEnBzN,KAAKiE,uBAAuBR,GAAOmK,GAKtC,eAAgB3K,GACf,IAAIgL,EAAUhL,EAAO0K,aAEhBM,EAAQxM,eAAgB,SAGvBwM,IACLA,EAAUhL,EAAOiL,kBAElB,IAAIL,EAAe,GAEdxN,OAAO2N,QAASC,IAAgC,iBAAZA,EAExC/M,EAAE0I,KAAMqE,GAAS,SAAUE,EAAOpK,GAMjC,IAAM,IAAIN,KAJLM,EAAItC,eAAgB,WACxBsC,EAAMA,EAAIkC,OAGMlC,EAChB8J,EAAeA,EAAe9J,EAAIN,GAAO,UAK3CoK,EAAeI,EAGhBjO,KAAKoO,UAAWP,GAGjB,cACC,IAAI1N,EAAQH,KAIZA,KAAKgD,IAAI,MAAQhD,KAAKQ,aAAcR,KAAKS,MAAM4D,SAAU,CACxDpC,SAAU,SAAUgB,GACnB,GAAKA,EAAOC,UAAY,CACvB,IAAIhB,EAAce,EAAOV,aACJ,IAAhBL,GAAwB,WAAeA,IAAiBA,GAAe,aAAkBA,GAAe,kBAC5G/B,EAAMM,MAAM0C,IAAK,KAAMjB,GAExB/B,EAAM8D,uBAAyB,GAC/B9D,EAAM,MAAQA,EAAMK,cAAc,WACjCL,EAAMiH,SACNjH,EAAMqE,wBAGPrE,EAAMwE,aAAc1B,MAMxB,UAAWoL,GACVnI,oBAAoBC,SAASC,OAAOC,aAAcgI","file":"DocumentSubViewController.bundle.js?v=b043377f1c37fdf836e1","sourcesContent":["import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { TTUUID } from '@/global/TTUUID';\nimport { ServiceCaller } from '@/services/ServiceCaller';\n\nexport class DocumentSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.document_api = TTAPI.APIDocumentPortal;\n\t\tthis.attachment_data = null;\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tvar list_tpl = Global.loadWidget( 'views/portal/hr/my_profile/MyProfileSubView.html' );\n\t\tvar unique_id = this.sub_view_id + '-' + this.model.id;\n\t\tthis.unique_id = unique_id;\n\t\tthis.sub_view = _.template( list_tpl )( {} );\n\t\tif ( this.table_container.find( '.table-container' ).length == 0 ) {\n\t\t\tthis.table_container.html( '<div class=\"table-responsive\"><table class=\"table table-condensed table-bordered table-container\"><thead></thead><tbody></tbody></table></div>' );\n\t\t}\n\t\tif ( this.table_container.find( '#' + unique_id ).length === 0 ) {\n\t\t\tvar tbody = $( '<tr>' ).attr( 'id', unique_id );\n\t\t\t$( this.table_container.find( 'tbody' )[0] ).append( tbody );\n\t\t} else {\n\t\t\tthis.table_container.find( '#' + unique_id ).html( '' );\n\t\t}\n\t\tvar thead = $( '<tr>' );\n\t\tfor ( var column in this.display_columns ) {\n\t\t\tif ( !this.display_columns.hasOwnProperty( column ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar column_val;\n\t\t\tswitch ( column ) {\n\t\t\t\tdefault:\n\t\t\t\t\tif ( !this.model.get( column ) ) {\n\t\t\t\t\t\tcolumn_val = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn_val = this.model.get( column );\n\t\t\t\t\t}\n\t\t\t\t\tif ( column === 'name' ) {\n\t\t\t\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td><a class=\"download-attachment\" href=\"javascript:void(0);\">' + column_val + '</a></td>' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td>' + column_val + '</td>' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthead.append( '<th>' + this.display_columns[column] + '</th>' );\n\t\t}\n\t\tthead.append( '<th>' + $.i18n._( 'Action' ) + '</th>' );\n\t\tif ( this.table_container.find( 'thead' ).html() === '' ) {\n\t\t\tthis.table_container.find( 'thead' ).html( thead );\n\t\t}\n\t\tthis.table_container.find( '#' + unique_id ).append( this.sub_view );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.download-attachment' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = $this.model.id;\n\t\t\t$this.document_api['getAttachment']( filter, {\n\t\t\t\tonResult: function( result_data ) {\n\t\t\t\t\t$this.downloadFile( result_data );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.edit-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.setEditView();\n\t\t\t} );\n\t\t} );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.delete-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.onDeleteClick();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tdownloadFile( result_data ) {\n\t\tvar $this = this;\n\t\tvar data = result_data.getResult();\n\t\tif ( data.length > 0 ) {\n\t\t\tvar document_id = data[0].id;\n\t\t\tvar document_revision_id = data[0].document_revision_id;\n\n\t\t\tvar url = ServiceCaller.getAPIURL( 'Class=APIDocumentPortal&Method=downloadAttachment' + '&v=2' );\n\t\t\tif ( LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\t\turl = url + '&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\t\t}\n\n\t\t\turl = url + '&parent_id=' + document_id + '&object_id=' + document_revision_id;\n\n\t\t\tGlobal.APIFileDownload( null, null, null, url );\n\t\t}\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t}\n\n\tgetDocument( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getDocument']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'private':\n\t\t\t\tcase 'template':\n\t\t\t\t\tfield_selector = 'input[name=\"' + key + '\"]';\n\t\t\t\t\tif ( this.model.get( key ) === true ) {\n\t\t\t\t\t\tthis.$( field_selector ).prop( 'checked', 'checked' );\n\t\t\t\t\t} else if ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.$( field_selector ).removeAttr( 'checked' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t}\n\n\tonSaveClick() {\n\t\tvar $this = this;\n\t\tif ( _.size( this.edit_view_error_ui_dic ) > 0 ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( !this.model.get( 'name' ) ) {\n\t\t\tthis.model.set( 'name', 'Resume' + ' - ' + LocalCacheData.getPortalLoginUser().first_name + ' ' + LocalCacheData.getPortalLoginUser().last_name );\n\t\t}\n\t\tthis.api['set' + this.sub_view_id]( this.model.toJSON(), {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data !== true && TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.model.set( 'id', result_data );\n\t\t\t\t\t}\n\t\t\t\t\t$this.onSaveResult( result, function() {\n\t\t\t\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t\t\t\tProgressBar.changeProgressBarMessage( 'Processing...' );\n\t\t\t\t\t\t\t// $this.render();\n\t\t\t\t\t\t\t$this.closeEditView();\n\t\t\t\t\t\t\t$this._delegate.refreshProfile();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveResult( document_result, callback ) {\n\t\tvar document_id = document_result.getResult();\n\t\tvar $this = this;\n\n\t\t// var file = this.attachment_data;\n\n\t\tvar file = this.$( 'input[name=\"filedata\"]' )[0].files[0];\n\t\tvar form = new FormData();\n\t\tif ( document_id === true ) { // edit\n\t\t\tdocument_id = this.model.id;\n\t\t}\n\t\t//Save a document revision data if has upload file, otherwise don't\n\t\tif ( file ) {\n\t\t\tvar document_name = this.model.get( 'name' );\n\t\t\tvar revision = this.model.get( 'revision' );\n\t\t\tvar document_revision_id = this.document_api.addAttachment( document_name, document_id, revision, { async: false } ).getResult()['document_revision_id'];\n\t\t\tform.append( 'filedata', file );\n\t\t\tthis.uploadFile( form, document_revision_id, callback );\n\t\t} else {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\tuploadFile( file_data, document_revision_id, callback ) {\n\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + this.document_api.className + '&Method=uploadAttachment' + '&v=2' );\n\t\tif ( LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\turl = url + '&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\t}\n\t\turl = url + '&object_id=' + document_revision_id;\n\t\tvar message_id = TTUUID.generateUUID();\n\t\tProgressBar.showProgressBar( message_id );\n\t\tProgressBar.changeProgressBarMessage( 'File Uploading' );\n\t\t$.ajax( {\n\t\t\turl: url, //Server script to process data\n\t\t\theaders: {\n\t\t\t\t//Handle CSRF tokens and related headers here.\n\t\t\t\t'X-Client-ID': 'Browser-TimeTrex',\n\t\t\t\t'X-CSRF-Token': getCookie( 'CSRF-Token' ),\n\t\t\t},\n\t\t\ttype: 'POST',\n\t\t\tdata: file_data,\n\t\t\tsuccess: function( res ) {\n\t\t\t\tProgressBar.removeProgressBar();\n\t\t\t\tif ( res.error.length > 0 ) {\n\t\t\t\t\tIndexViewController.instance.router.showTipModal( res.error );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t},\n\t\t\tcache: false,\n\t\t\tcontentType: false,\n\t\t\tprocessData: false\n\t\t} );\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\tswitch ( key ) {\n\t\t\t// case 'country':\n\t\t\t// case 'identification_country':\n\t\t\t// \tvar widget = this.$('select[name=\"' + key + '\"]');\n\t\t\t// \twidget.val( null );\n\t\t\t// \tbreak;\n\t\t\tcase 'private':\n\t\t\tcase 'template':\n\t\t\t\tif ( $( e.currentTarget ).is( ':checked' ) ) {\n\t\t\t\t\tthis.model.set( key, true );\n\t\t\t\t} else {\n\t\t\t\t\tthis.model.set( key, false );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n}","import { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { TTUUID } from '@/global/TTUUID';\n\nexport class JobApplicantSubBaseViewController extends PortalBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tevents: {\n\t\t\t\t'change input[type=\"text\"]': 'onFormItemChange',\n\t\t\t\t'change input[type=\"checkbox\"]': 'onFormItemChange',\n\t\t\t\t'change select.form-control': 'onFormItemChange',\n\t\t\t\t'change textarea.form-control': 'onFormItemChange'\n\t\t\t\t// 'click .styled-select .glyphicon': 'onSelectClick',\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tpreInit( options ) { //Since this is an intermediary class between *SubViewController and PortalBaseViewController, we need to use preInit() so this is called before init() of each child class.\n\t\tthis.api = TTAPI.APIJobApplicantPortal;\n\t\tthis.qualification_api = TTAPI.APIQualificationPortal;\n\t\tthis.company_api = TTAPI.APICompanyPortal;\n\t\tthis.sub_view_id = options.sub_view_id;\n\t\tthis.display_columns = options.display_columns;\n\t\tthis.table_container = options.table_container;\n\t\tthis.available_fields = options.available_fields;\n\t\tthis._delegate = options._delegate;\n\t\tthis.edit_view_error_ui_dic = {};\n\t\tthis.enable_add_qualification = options.enable_add_qualification || false;\n\n\t}\n\n\tpostInit() {\n\t\tif ( !this.model.id ) {\n\t\t\tthis.setEditView();\n\t\t} else {\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tvar list_tpl = Global.loadWidget( 'views/portal/hr/my_profile/MyProfileSubView.html' );\n\t\tvar unique_id = this.sub_view_id + '-' + this.model.id;\n\t\tthis.unique_id = unique_id;\n\t\tthis.sub_view = _.template( list_tpl )( {} );\n\t\tif ( this.table_container.find( '.table-container' ).length == 0 ) {\n\t\t\tthis.table_container.html( '<div class=\"table-responsive\"><table class=\"table table-condensed table-bordered table-container\"><thead></thead><tbody></tbody></table></div>' );\n\t\t}\n\t\tif ( this.table_container.find( '#' + unique_id ).length === 0 ) {\n\t\t\tvar tbody = $( '<tr>' ).attr( 'id', unique_id );\n\t\t\t$( this.table_container.find( 'tbody' )[0] ).append( tbody );\n\t\t} else {\n\t\t\tthis.table_container.find( '#' + unique_id ).html( '' );\n\t\t}\n\t\tvar thead = $( '<tr>' );\n\t\tfor ( var column in this.display_columns ) {\n\t\t\tif ( !this.display_columns.hasOwnProperty( column ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// comment this, this will cause some default display columns cannot be shown.\n\t\t\t// if ( !this.available_fields.hasOwnProperty( column ) ) {\n\t\t\t// \tcontinue;\n\t\t\t// }\n\t\t\tvar column_val;\n\t\t\tswitch ( column ) {\n\t\t\t\tcase 'is_current_employer':\n\t\t\t\tcase 'is_contact_available':\n\t\t\t\t\tif ( this.model.get( column ) ) {\n\t\t\t\t\t\tcolumn_val = $.i18n._( 'Yes' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn_val = $.i18n._( 'No' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( !this.model.get( column ) ) {\n\t\t\t\t\t\tcolumn_val = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn_val = this.model.get( column );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthead.append( '<th>' + this.display_columns[column] + '</th>' );\n\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td>' + column_val + '</td>' );\n\t\t}\n\t\tthead.append( '<th>' + $.i18n._( 'Action' ) + '</th>' );\n\t\tif ( this.table_container.find( 'thead' ).html() === '' ) {\n\t\t\tthis.table_container.find( 'thead' ).html( thead );\n\t\t}\n\t\tthis.table_container.find( '#' + unique_id ).append( this.sub_view );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.edit-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.setEditView();\n\t\t\t} );\n\t\t} );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.delete-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.onDeleteClick();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [this.qualification_type_id];\n\t\targs.filter_data = filter_data;\n\t\targs.filter_columns = {\n\t\t\t'id': true,\n\t\t\t'name': true\n\t\t};\n\t\tthis.qualification_api.getQualification( args, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar res = result.getResult();\n\t\t\t\tvar options = {};\n\t\t\t\tfor ( var i in res ) {\n\t\t\t\t\tif ( !res.hasOwnProperty( i ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar row = res[i];\n\t\t\t\t\toptions[row.id] = $.i18n._( row.name );\n\t\t\t\t}\n\t\t\t\t$this.setSourceData( 'qualification_id', options, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSelectClick( e ) {\n\t\tvar elem = $( e.currentTarget ).parent().find( 'select' );\n\t\tif ( document.createEvent ) {\n\t\t\tvar e = document.createEvent( 'MouseEvents' );\n\t\t\te.initMouseEvent( 'mousedown', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null );\n\t\t\telem[0].dispatchEvent( e );\n\t\t} else if ( element.fireEvent ) {\n\t\t\telem[0].fireEvent( 'onmousedown' );\n\t\t}\n\t}\n\n\tsetEditView() {\n\t\tvar tpl = Global.loadWidget( 'views/portal/hr/my_profile/' + this.sub_view_id + 'SubEditView.html' );\n\t\tthis.setElement( _.template( tpl )( {\n\t\t\tavailable_fields: this.available_fields,\n\t\t\tenable_add_qualification: this.enable_add_qualification\n\t\t} ) );\n\t\tthis.initOptions();\n\t\tthis.registerDatePicker();\n\t\tthis.setCurrentEditRecordData();\n\t\tthis.openEditView();\n\t}\n\n\tonDeleteClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.instance.router.showConfirmModal( Global.delete_confirm_message, {\n\t\t\ttitle: '',\n\t\t\tactions: [\n\t\t\t\t{ label: 'No', isClose: true },\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Yes', callBack: function( e ) {\n\t\t\t\t\t\t$this.closeConfirmModal();\n\t\t\t\t\t\tProgressBar.showOverlay();\n\t\t\t\t\t\t$this.api['delete' + $this.sub_view_id]( $this.model.id, {\n\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\t\t\t\t\t// $this.remove();\n\t\t\t\t\t\t\t\t\t// $this.table_container.find('#'+$this.unique_id).remove();\n\t\t\t\t\t\t\t\t\t$this._delegate.setSubViews( $this.sub_view_id, $this.display_columns );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n\n\tsetSourceData( field, source_data, set_empty ) {\n\t\tvar $this = this;\n\t\tvar field_selector = 'select[name=\"' + field + '\"]';\n\t\tif ( this.$( field_selector ) && this.$( field_selector )[0] ) {\n\t\t\tthis.$( field_selector ).empty();\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tif ( !Global.isSet( this.model.get( field ) ) ) {\n\t\t\tthis.model.set( field, '' ); // initialize a value;\n\t\t}\n\t\tif ( _.size( source_data ) == 0 ) {\n\t\t\tset_empty = true;\n\t\t\tthis.model.set( field, '' );\n\t\t}\n\t\tswitch ( field ) {\n\t\t\tcase 'qualification_id':\n\t\t\t\tif ( this.enable_add_qualification ) {\n\t\t\t\t\tvar option_name;\n\t\t\t\t\tswitch ( this.sub_view_id ) {\n\t\t\t\t\t\tcase 'JobApplicantSkill':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Skill' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantEducation':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Course' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantLicense':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Type' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantLanguage':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Language' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantMembership':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Membership' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tset_empty = false;\n\t\t\t\t\tthis.$( field_selector ).append( $( '<option></option>' ).prop( 'value', '' ).text( '-- ' + option_name + ' --' ) );\n\t\t\t\t}\n\t\t\t//break; -- Do not break here, it should fall through to default.\n\t\t\tdefault:\n\t\t\t\tif ( set_empty === true ) {\n\t\t\t\t\tthis.$( field_selector ).append( $( '<option></option>' ).prop( 'value', '' ).text( '-- ' + $.i18n._( 'None' ) + ' --' ) );\n\t\t\t\t}\n\t\t\t\tif ( _.size( source_data ) > 0 ) {\n\t\t\t\t\t$.each( source_data, function( value, label ) {\n\t\t\t\t\t\t$this.$( field_selector ).append( $( '<option></option>' ).prop( 'value', value ).text( label ) );\n\t\t\t\t\t\tif ( $this.model.get( field ) == value ) {\n\t\t\t\t\t\t\t$this.$( field_selector ).val( value );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\t$this.$( field_selector ).selectpicker();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tregisterDatePicker() {\n\t\tvar time_format = 'h:mm TT';\n\t\tvar format = 'dd-M-y';\n\t\tvar focus_out_timer;\n\t\tvar is_open = false;\n\t\t// When portal mode, no user preference.\n\t\t// if ( LocalCacheData.getLoginUserPreference() ) {\n\t\t// \tformat = LocalCacheData.getLoginUserPreference().date_format_1;\n\t\t// \ttime_format = LocalCacheData.getLoginUserPreference().time_format_1;\n\t\t// }\n\t\tvar day_name_min = [\n\t\t\t$.i18n._( 'Sun' ), $.i18n._( 'Mon' ), $.i18n._( 'Tue' ),\n\t\t\t$.i18n._( 'Wed' ), $.i18n._( 'Thu' ), $.i18n._( 'Fri' ), $.i18n._( 'Sat' )\n\t\t];\n\t\tvar month_name_short = [\n\t\t\t$.i18n._( 'Jan' ), $.i18n._( 'Feb' ),\n\t\t\t$.i18n._( 'Mar' ), $.i18n._( 'Apr' ), $.i18n._( 'May' ),\n\t\t\t$.i18n._( 'Jun' ), $.i18n._( 'Jul' ), $.i18n._( 'Aug' ),\n\t\t\t$.i18n._( 'Sep' ), $.i18n._( 'Oct' ), $.i18n._( 'Nov' ),\n\t\t\t$.i18n._( 'Dec' )\n\t\t];\n\t\tvar current_text = $.i18n._( 'Today' );\n\t\tvar close_text = $.i18n._( 'Close' );\n\t\tvar options = {\n\t\t\tshowTime: false,\n\t\t\tdateFormat: format,\n\t\t\tshowHour: false,\n\t\t\tshowMinute: false,\n\t\t\tchangeMonth: true,\n\t\t\tchangeYear: true,\n\t\t\tshowButtonPanel: true,\n\t\t\tduration: '',\n\t\t\tshowAnim: '',\n\t\t\tyearRange: '-100:+10',\n\t\t\tshowOn: '',\n\t\t\tdayNamesMin: day_name_min,\n\t\t\tcurrentText: current_text,\n\t\t\tmonthNamesShort: month_name_short,\n\t\t\tcloseText: close_text,\n\t\t\tbeforeShow: function() {\n\t\t\t},\n\t\t\tonSelect: function( dateText ) {\n\t\t\t\t$( this ).change();\n\t\t\t},\n\t\t\tonClose: function() {\n\t\t\t\tfocus_out_timer = setTimeout( function() {\n\t\t\t\t\tis_open = false;\n\t\t\t\t}, 100 );\n\t\t\t}\n\n\t\t};\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).datepicker( options );\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).attr( 'placeholder', 'dd-mmm-yy' );\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).bind( 'mouseup', function() {\n\t\t\tif ( !is_open ) {\n\t\t\t\t$( this ).datepicker( 'show' );\n\t\t\t\tis_open = true;\n\t\t\t} else {\n\t\t\t\tis_open = false;\n\t\t\t\tif ( focus_out_timer ) {\n\t\t\t\t\tclearTimeout( focus_out_timer );\n\t\t\t\t\tfocus_out_timer = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} ).next('.glyphicon').bind( 'mouseup', function() { $(this).prev().trigger( 'mouseup' ) } ); // this allows clicking on the calendar icon as well as the input box\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tvar self = this;\n\t\tvar unindexed_array = this.$( '.detail-form' ).serializeArray();\n\t\t$.map( unindexed_array, function( row, i ) {\n\t\t\tif ( !Global.isSet( self.model.get( row['name'] ) ) ) {\n\t\t\t\tself.model.set( row['name'], row['value'] );\n\t\t\t}\n\t\t} );\n\t\tif ( !this.model.has( 'qualification_id' ) ) {\n\t\t\tthis.model.set( 'qualification_id', false );\n\t\t}\n\t}\n\n\taddQualification() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.type_id = this.qualification_type_id;\n\t\tvar name = args.name = this.getQualificationWidget().val();\n\t\tthis.qualification_api.setQualification( args, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tif ( !res.isValid() ) {\n\t\t\t\t\t$this.setErrorTips( res );\n\t\t\t\t} else {\n\t\t\t\t\t$this.$( 'select[name=\\'qualification_id\\']' ).selectpicker( 'destroy' );\n\t\t\t\t\tvar new_id = res.getResult();\n\t\t\t\t\t$( '<option>' ).attr( {\n\t\t\t\t\t\tselected: 'selected',\n\t\t\t\t\t\tvalue: new_id\n\t\t\t\t\t} ).text( name ).appendTo( $this.$( 'select[name=\\'qualification_id\\']' ) );\n\t\t\t\t\t$this.$( 'select[name=\\'qualification_id\\']' ).selectpicker();\n\t\t\t\t\t$this.$( 'select[name=\\'qualification_id\\']' ).trigger( 'change' );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetAddQualificationContainer() {\n\t\treturn this.$( '.add-qualification-container' );\n\t}\n\n\tgetQualificationWidget() {\n\t\treturn this.getAddQualificationContainer().find( 'input[name=\"name\"]' );\n\t}\n\n\tshowAddQualificationContainer() {\n\t\tvar $this = this;\n\t\tvar container = this.getAddQualificationContainer();\n\t\tcontainer.css( 'display', 'table' );\n\t\tcontainer.off( 'click' ).on( 'click', function() {\n\t\t\t$this.addQualification();\n\t\t} );\n\t\tvar qualification_widget = this.getQualificationWidget();\n\t\tqualification_widget.val( '' );\n\t\tqualification_widget.unbind( 'keydown' ).bind( 'keydown', function( e ) {\n\t\t\tif ( e.keyCode === 13 ) {\n\t\t\t\t$this.addQualification();\n\t\t\t}\n\t\t} );\n\t\treturn container;\n\t}\n\n\thideAddQualificationContainer() {\n\t\tvar container = this.getAddQualificationContainer();\n\t\tcontainer.css( 'display', 'none' );\n\t\treturn container;\n\t}\n\n\t// showAddQualificationErrorTip: function () {\n\t// \tvar container = this.getAddQualificationContainer();\n\t//\n\t// },\n\n\topenEditView() {\n\t\tvar $this = this;\n\t\tIndexViewController.instance.router.showFormModal( this.$el, {\n\t\t\ttitle: '',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Close', isClose: true, callBack: function( e ) {\n\t\t\t\t\t\t$this.clearErrorTips( true );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Save Changes', callBack: function( e ) {\n\t\t\t\t\t\t$this.onSaveClick();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n\n\tcloseEditView() {\n\t\tIndexViewController.instance.router.hideFormModal();\n\t}\n\n\tcloseConfirmModal() {\n\t\tIndexViewController.instance.router.hideConfirmModal();\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\tswitch ( key ) {\n\t\t\tcase 'name': // change qualification name not to do the validation for itself\n\t\t\t\tdoNotValidate = true;\n\t\t\t\tbreak;\n\t\t\tcase 'qualification_id':\n\t\t\t\tif ( this.model.get( key ) === '' && this.enable_add_qualification ) {\n\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\tdoNotValidate = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.hideAddQualificationContainer();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tvalidate() {\n\t\tvar $this = this;\n\t\t// var record = this.current_edit_record;\n\t\t// this.api.setJobApplicant\n\t\tthis.api['validate' + this.sub_view_id]( this.model.toJSON(), {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tvalidateResult( result ) {\n\t\t// this.clearErrorTips();\n\t\tthis.setErrorTips( result );\n\t}\n\n\tclearErrorTips( clear_all ) {\n\t\tfor ( var key in this.edit_view_error_ui_dic ) {\n\t\t\tif ( this.edit_view_error_ui_dic[key].val() !== '' || clear_all ) {\n\t\t\t\tthis.edit_view_error_ui_dic[key].removeClass( 'error-tip' );\n\t\t\t\tthis.edit_view_error_ui_dic[key].tooltip().tooltip( 'dispose' );\n\t\t\t}\n\t\t}\n\t\t// this.edit_view_error_ui_dic = {};\n\t}\n\n\tsetErrorTips( result ) {\n\t\tthis.clearErrorTips( true );\n\t\tvar error_list = result.getDetails() ? result.getDetails()[0] : {};\n\t\tif ( error_list && error_list.hasOwnProperty( 'error' ) ) {\n\t\t\terror_list = error_list.error;\n\t\t}\n\t\tfor ( var key in error_list ) {\n\t\t\tif ( !error_list.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar field_obj;\n\t\t\tif ( this.$( 'input[name=\"' + key + '\"]' )[0] ) {\n\t\t\t\tfield_obj = this.$( 'input[name=\"' + key + '\"]' );\n\t\t\t} else if ( this.$( 'select[name=\"' + key + '\"]' )[0] ) {\n\t\t\t\tfield_obj = this.$( 'select[name=\"' + key + '\"]' ).parents( '.styled-select' );\n\t\t\t} else if ( this.$( 'textarea[name=\"' + key + '\"]' )[0] ) {\n\t\t\t\tfield_obj = this.$( 'textarea[name=\"' + key + '\"]' );\n\t\t\t}\n\t\t\tif ( field_obj ) {\n\t\t\t\tfield_obj.addClass( 'error-tip' );\n\t\t\t\tvar error_string;\n\t\t\t\tif ( _.isArray( error_list[key] ) ) {\n\t\t\t\t\terror_string = error_list[key][0];\n\t\t\t\t} else {\n\t\t\t\t\terror_string = error_list[key];\n\t\t\t\t}\n\t\t\t\tfield_obj.tooltip( {\n\t\t\t\t\ttitle: error_string,\n\t\t\t\t\tcontainer: 'body',\n\t\t\t\t\ttrigger: 'hover focus'\n\t\t\t\t\t// placement: 'right'\n\t\t\t\t\t// delay: { \"show\": 0, \"hide\": 0 }\n\t\t\t\t} );\n\t\t\t\tfield_obj.tooltip( 'show' );\n\t\t\t\t// field_obj.tooltip('show');\n\t\t\t\tthis.edit_view_error_ui_dic[key] = field_obj;\n\t\t\t}\n\t\t}\n\t}\n\n\tshowErrorAlert( result ) {\n\t\tvar details = result.getDetails();\n\n\t\tif ( details.hasOwnProperty( 'error' ) ) {\n\n\t\t}\n\t\tif ( !details ) {\n\t\t\tdetails = result.getDescription(); // If the details is empty, try to get description to show.\n\t\t}\n\t\tvar error_string = '';\n\n\t\tif ( Global.isArray( details ) || typeof details === 'object' ) {\n\n\t\t\t$.each( details, function( index, val ) {\n\n\t\t\t\tif ( val.hasOwnProperty( 'error' ) ) {\n\t\t\t\t\tval = val.error;\n\t\t\t\t}\n\n\t\t\t\tfor ( var key in val ) {\n\t\t\t\t\terror_string = error_string + val[key] + '<br>';\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\n\t\t\terror_string = details;\n\t\t}\n\n\t\tthis.showAlert( error_string );\n\t}\n\n\tonSaveClick() {\n\t\tvar $this = this;\n\t\t// if ( _.size(this.edit_view_error_ui_dic) > 0 ) {\n\t\t// \treturn;\n\t\t// }\n\t\tthis.api['set' + this.sub_view_id]( this.model.toJSON(), {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data !== true && TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.model.set( 'id', result_data );\n\t\t\t\t\t}\n\t\t\t\t\t$this.edit_view_error_ui_dic = {};\n\t\t\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t\t\t$this.render();\n\t\t\t\t\t\t$this.closeEditView();\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tshowAlert( content ) {\n\t\tIndexViewController.instance.router.showTipModal( content );\n\t}\n}"],"sourceRoot":""}