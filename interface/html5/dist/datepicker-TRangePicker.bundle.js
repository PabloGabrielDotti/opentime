(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["datepicker-TRangePicker"],{9300:()=>{var e;(e=jQuery).fn.TRangePicker=function(t){var a,i,n,r,o,s,l,d,c,h,u,_,g=e.extend({},e.fn.TRangePicker.defaults,t),f=this,p="",w=null,m=!0,v=!1,b=!1,y=!1;this.getEnabled=function(){return m},this.setEnabled=function(e){m=e,!1===e||""===e?(f.attr("disabled","true"),n.addClass("t-date-picker-readonly"),r.css("display","none")):(f.removeAttr("disabled"),n.removeClass("t-date-picker-readonly"),r.css("display","inline"))},this.setCheckBox=function(e){w&&(w.children().eq(0)[0].checked=e)},this.isChecked=function(){return!(!w||!0!==w.children().eq(0)[0].checked)},this.setMassEditMode=function(t){t?((w=e(' <div class="mass-edit-checkbox-wrapper"><input type="checkbox" class="mass-edit-checkbox"></input><label for="checkbox-input-1" class="input-helper input-helper--checkbox"></label></div>')).insertBefore(e(this)),w.change((function(){f.trigger("formItemChange",[f])}))):w&&(w.remove(),w=null)},this.setErrorStyle=function(e,t,a){a?n.addClass("warning-tip"):n.addClass("error-tip"),p=e,t&&this.showErrorTip()},this.showErrorTip=function(e){Global.isSet(e)||(e=2),o||(o=(o=Global.loadWidgetByName(WidgetNamesDic.ERROR_TOOLTIP)).ErrorTipBox()),n.hasClass("warning-tip")?o.show(this,p,e,!0):o.show(this,p,e)},this.hideErrorTip=function(){Global.isSet(o)&&o.remove()},this.clearErrorStyle=function(){n.removeClass("error-tip"),n.removeClass("warning-tip"),this.hideErrorTip(),p=""},this.getField=function(){return a},this.getValidationField=function(){return i},this.getDefaultFormatValue=function(){var e=n.val();return e=Global.strToDate(e).format("YYYY-MM-DD")},this.getValue=function(){return c},this.setValue=function(t){t||(t=""),"array"!==e.type(t)?(c=[t],n.val(t),n.removeAttr("readonly")):(c=t,1==t.length?(n.val(t[0]),n.removeAttr("readonly")):(n.val(t.length+" "+e.i18n._("dates selected")),n.attr("readonly","readonly"))),this.autoResize()},this.autoResize=function(){var e,t;t=Global.calculateTextWidth(LocalCacheData.getLoginUserPreference().date_format_display),e=Global.calculateTextWidth(n.val(),{min_width:t,max_width:2*t+100,padding:28}),_.width(e+"px")},this.close=function(){if(!y){var t=u.tabs("option","active");s.remove(),v=!1,LocalCacheData.openRangerPicker=null,b=!1,0==t?(c=l.val()+" - "+d.val(),n.val(c),n.attr("readonly","readonly")):(c=h.getValue()).length>1?(n.val(c.length+" "+e.i18n._("dates selected")),n.attr("readonly","readonly")):(n.val(c[0]),n.removeAttr("readonly")),this.autoResize(),setTimeout((function(){f.trigger("formItemChange",[f])}),100)}},this.getIsMouseOver=function(){return b};var k=function(e){var t=e?e.length:0;if(this.removeAllRows(),t>0){for(var a=0;a<e.length;a++)if(Global.isSet(e[a])){var i=e[a];this.addRow(i)}}else this.addRow("")},D=function(e){var t=e[0].rowIndex-1;e.remove(),this.rows_widgets_array.splice(t,1),this.removeLastRowLine()},T=function(t){if(t||(t=""),this.rows_widgets_array.length>0&&!t){var a=this.rows_widgets_array[this.rows_widgets_array.length-1].start_date_stamp.getValue();a=a?Global.strToDate(a):new Date,t=(a=new Date(new Date(a.getTime()).setDate(a.getDate()+1))).format()}else 0!==this.rows_widgets_array.length||t||(t=(new Date).format());var i=this.getRowRender(),n=this.getRender(),r={},o=Global.loadWidgetByName(FormItemType.DATE_PICKER);o.TDatePicker({field:"start_date_stamp",beforeShow:function(){y=!0},onClose:function(){y=!1}}),e(".ranger-picker-dates-width-tr").width(o.width()+80),o.setValue(t),r[o.getField()]=o,i.children().eq(0).append(o),e(n).append(i),this.rows_widgets_array.push(r),this.addIconsEvent(i),this.removeLastRowLine()},R=function(e){for(var t=this.rows_widgets_array.length,a=[],i=0;i<t;i++){var n=this.rows_widgets_array[i];n.start_date_stamp.getValue()&&a.push(n.start_date_stamp.getValue())}return a};return this.setPlaceHolder=function(e){n.attr("placeholder",e)},this.each((function(){var t=e.meta?e.extend({},g,e(this).data()):g;_=e(this),a=t.field,t.validation_field&&(i=t.validation_field),r=e(this).find(".t-date-picker-icon"),n=e(this).find(".t-date-picker"),r.attr("src",Global.getRealImagePath("images/cal.png")),f.setPlaceHolder(LocalCacheData.loginUserPreference.date_format_display),n.change((function(){return w&&f.setCheckBox(!0),c=[n.val()],f.trigger("formItemChange",[f]),f.autoResize(),!0})),r.bind("mouseup",(function(){m&&(v?(f.close(),v=!1):(function(){var t=(s=e(Global.loadWidget("global/widgets/datepicker/TRangePicker.html"))).find("a[ref=tab_range]"),a=s.find("a[ref=tab_date]");t.text(e.i18n._("Range")),a.text(e.i18n._("Dates")),l=s.find("#tab_range_content_div").find(".start-picker"),d=s.find("#tab_range_content_div").find(".end-picker");var i=s.find("#tab_range_content_div").find(".start-picker-label"),n=s.find("#tab_range_content_div").find(".end-picker-label");i.text(e.i18n._("Start")+":"),n.text(e.i18n._("End")+":");var r=LocalCacheData.getLoginUserPreference().date_format_1;e.datepicker._gotoToday=function(t){var a=e(t),i=this._getInst(a[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear(),this._setDateDatepicker(a,n),this._selectDate(t,this._getDateDatepicker(a)),e(a).datepicker("setDate",n)}this._notifyChange(i),this._adjustDate(a)},l.datepicker({showOtherMonths:!0,selectOtherMonths:!0,showTime:!1,dateFormat:r,showHour:!1,showMinute:!1,changeMonth:!0,changeYear:!0,showButtonPanel:!0,duration:"",showAnim:"",yearRange:"-100:+10",showOn:"",dayNamesMin:[e.i18n._("Sun"),e.i18n._("Mon"),e.i18n._("Tue"),e.i18n._("Wed"),e.i18n._("Thu"),e.i18n._("Fri"),e.i18n._("Sat")],currentText:e.i18n._("Today"),monthNamesShort:[e.i18n._("Jan"),e.i18n._("Feb"),e.i18n._("Mar"),e.i18n._("Apr"),e.i18n._("May"),e.i18n._("Jun"),e.i18n._("Jul"),e.i18n._("Aug"),e.i18n._("Sep"),e.i18n._("Oct"),e.i18n._("Nov"),e.i18n._("Dec")]}),d.datepicker({showOtherMonths:!0,selectOtherMonths:!0,showTime:!1,dateFormat:r,showHour:!1,showMinute:!1,changeMonth:!0,changeYear:!0,showButtonPanel:!0,duration:"",showAnim:"",yearRange:"-100:+10",showOn:"",dayNamesMin:[e.i18n._("Sun"),e.i18n._("Mon"),e.i18n._("Tue"),e.i18n._("Wed"),e.i18n._("Thu"),e.i18n._("Fri"),e.i18n._("Sat")],currentText:e.i18n._("Today"),monthNamesShort:[e.i18n._("Jan"),e.i18n._("Feb"),e.i18n._("Mar"),e.i18n._("Apr"),e.i18n._("May"),e.i18n._("Jun"),e.i18n._("Jul"),e.i18n._("Aug"),e.i18n._("Sep"),e.i18n._("Oct"),e.i18n._("Nov"),e.i18n._("Dec")]}),s.find(".close-icon").click((function(){f.close()}));var o=s.find("#tab_date").find(".inside-editor-div"),_={start_date_stamp:e.i18n._("Date")};h=(h=Global.loadWidgetByName(FormItemType.INSIDE_EDITOR)).InsideEditor({title:"",addRow:T,getValue:R,setValue:k,removeRow:D,parent_controller:this,render:"global/widgets/datepicker/TRangeInsideEditorRender.html",render_args:_,api:null,row_render:"global/widgets/datepicker/TRangeInsideEditorRow.html"}),o.append(h),h.setValue(),e("body").append(s),u=(u=e(s.find(".edit-view-tab-bar"))).tabs({activate:function(e,t){u&&u.is(":visible")}}),s.mouseenter((function(){b=!0})),s.mouseleave((function(){b=!1}));var g=s.width();if(g+e(f).offset().left+50>Global.bodyWidth()?s.css("left",Global.bodyWidth()-g-50):s.css("left",e(f).offset().left),e(f).offset().top+25+300<Global.bodyHeight()?s.css("top",e(f).offset().top+25):s.css("top",Global.bodyHeight()-300),LocalCacheData.openRangerPicker=f,c&&"string"==typeof c){var p=c.split(" - ");l.datepicker("setDate",p[0]),d.datepicker("setDate",p[1])}else c&&"array"===e.type(c)&&(u.tabs("option","active",1),h.setValue(c))}(),v=!0))})),n.mouseover((function(){m&&p&&p.length>0&&f.showErrorTip(20)})),n.mouseout((function(){e(f).is(":focus")||f.hideErrorTip()})),f.autoResize()})),this},e.fn.TRangePicker.defaults={}}}]);
//# sourceMappingURL=datepicker-TRangePicker.bundle.js.map?v=9bf22a41c31598173ea0