{"version":3,"sources":["webpack://timetrex/./interface/html5/views/invoice/client/ClientViewController.js"],"names":["ClientViewController","BaseViewController","options","_","defaults","el","status_array","client_group_array","client_group_api","sub_client_contact_view_controller","sub_client_payment_view_controller","sub_document_view_controller","sub_transaction_view_controller","sub_invoice_view_controller","document_object_type_id","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIClient","APIClientGroup","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","removeEditView","callBack","$this","initDropDownOption","getClientGroup","onResult","res","getResult","Global","buildTreeRecord","edit_only_mode","sub_view_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","id","filter","filter_data","key_name","result","result_data","setUINotready","TTPromise","add","wait","initOptions","edit_view","initEditViewUI","getClientData","current_edit_record","initEditView","exclude","ContextMenuIconName","copy","include","label","import_icon","group","icon","Icons","sort_order","client_contact","invoice","transaction","payment_method","in_out","permission_result","PermissionManager","checkTopLevelPermission","login","IndexViewController","openWizard","search","onNavigationClick","onLoginClick","args","client_id","getGridSelectIdArray","LocalCacheData","extra_filter_for_next_open_view","user_id","NewSession","iconName","push","grid_selected_id_array","each","index","value","addViewTab","window","location","href","openEditView","current_open_primary_controller","goToView","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_client_column1","edit_view_tab","find","edit_view_tabs","form_item_input","loadWidgetByName","FormItemType","AWESOME_BOX","set_empty","field","addEditFieldToColumn","COMBO_BOX","TComboBox","tree_mode","TEXT_INPUT","TTextInput","width","parent","APIUser","TEXT_AREA","TTextArea","TAG_INPUT","TTagInput","object_type_id","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","setEditMenu","len","context_menu_array","length","i","context_btn","attr","setEditMenuLoginIcon","setNavigationMenuIcons","setContextMenuGroupVisibility","addClass","validate","setDefaultMenu","parent_value","parent_edit_record","loadScript","firstColumn","trackView","ClientContactViewController","loadSubView","beforeLoadView","afterLoadView","resolve","subViewController","parent_key","parent_view_controller","postInit","ClientPaymentViewController","InvoiceViewController","getSubViewFilter","getFilter","InvoiceTransactionViewController","target","invoice_status_id"],"mappings":"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","file":"invoice-client-ClientViewController.bundle.js?v=916bfa98e644ecd0fb7e","sourcesContent":["export class ClientViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#client_view_container',\n\n\t\t\tstatus_array: null,\n\t\t\tclient_group_array: null,\n\t\t\tclient_group_api: null,\n\n\t\t\tsub_client_contact_view_controller: null,\n\t\t\tsub_client_payment_view_controller: null,\n\t\t\tsub_document_view_controller: null,\n\t\t\tsub_transaction_view_controller: null,\n\t\t\tsub_invoice_view_controller: null,\n\n\t\t\tdocument_object_type_id: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'ClientEditView.html';\n\t\tthis.permission_id = 'client';\n\t\tthis.viewId = 'Client';\n\t\tthis.script_name = 'ClientView';\n\t\tthis.table_name_key = 'client';\n\t\tthis.context_menu_name = $.i18n._( 'Clients' );\n\t\tthis.navigation_label = $.i18n._( 'Client' ) + ':';\n\t\tthis.document_object_type_id = 80;\n\t\tthis.api = TTAPI.APIClient;\n\t\tthis.client_group_api = TTAPI.APIClientGroup;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tremoveEditView() {\n\t\tsuper.removeEditView();\n\t\tthis.sub_client_contact_view_controller = null;\n\t\tthis.sub_invoice_view_controller = null;\n\t\tthis.sub_client_payment_view_controller = null;\n\t\tthis.sub_transaction_view_controller = null;\n\t}\n\n\tinitOptions( callBack ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_columns = { id: true, company_name: true };\n\n\t\tthis.initDropDownOption( 'status', 'status_id', this.api, function() {\n\n\t\t\t$this.client_group_api.getClientGroup( '', false, false, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tres = Global.buildTreeRecord( res );\n\n\t\t\t\t\tif ( !$this.edit_only_mode ) {\n\t\t\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.client_group_array = res;\n\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} );\n\t}\n\n\tgetClientData( id, callBack ) {\n\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = [id];\n\n\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\tcallBack( result_data );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\topenEditView( id ) {\n\t\tGlobal.setUINotready();\n\t\tTTPromise.add( 'init', 'init' );\n\t\tTTPromise.wait();\n\n\t\tvar $this = this;\n\n\t\tif ( $this.edit_only_mode ) {\n\n\t\t\t$this.initOptions(\n\t\t\t\tfunction( result ) {\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\t$this.initEditViewUI( $this.viewId, $this.edit_view_tpl );\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.getClientData( id, function( result ) {\n\t\t\t\t\t\t$this.current_edit_record = result;\n\n\t\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tif ( !this.edit_view ) {\n\t\t\t\tthis.initEditViewUI( this.viewId, this.edit_view_tpl );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [ContextMenuIconName.copy],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\t\tid: ContextMenuIconName.import_icon,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.import_icon,\n\t\t\t\t\tsort_order: 8000\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Client<br>Contacts' ),\n\t\t\t\t\tid: ContextMenuIconName.client_contact,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.client_contact\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Invoices' ),\n\t\t\t\t\tid: ContextMenuIconName.invoice,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.invoice\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Transactions' ),\n\t\t\t\t\tid: ContextMenuIconName.transaction,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.transaction\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Payment<br>Methods' ),\n\t\t\t\t\tid: ContextMenuIconName.payment_method,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.payment_method\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'In/Out' ),\n\t\t\t\t\tid: ContextMenuIconName.in_out,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.in_out,\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'InOut' ),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Login' ),\n\t\t\t\t\tid: ContextMenuIconName.login,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.login\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'Client', function() {\n\t\t\t\t\t$this.search();\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.client_contact:\n\t\t\tcase ContextMenuIconName.invoice:\n\t\t\tcase ContextMenuIconName.transaction:\n\t\t\tcase ContextMenuIconName.payment_method:\n\t\t\tcase ContextMenuIconName.in_out:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.login:\n\t\t\t\tthis.onLoginClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonLoginClick() {\n\n\t\tvar $this = this;\n\t\tvar args = {};\n\n\t\targs.client_id = this.getGridSelectIdArray()[0];\n\n\t\tLocalCacheData.extra_filter_for_next_open_view = {};\n\t\tLocalCacheData.extra_filter_for_next_open_view.filter_data = args;\n\n\t\tIndexViewController.openWizard( 'LoginUserWizard', $this.viewId, function( user_id ) {\n\t\t\tGlobal.NewSession( user_id, $this.getGridSelectIdArray()[0] );\n\t\t} );\n\t}\n\n\tonNavigationClick( iconName ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.client_id = [];\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tfilter.filter_data.client_id.push( $this.current_edit_record.id );\n\t\t} else {\n\t\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tfilter.filter_data.client_id.push( value );\n\t\t\t} );\n\t\t}\n\n\t\tif ( iconName != ContextMenuIconName.in_out ) { //Don't show minimized window when clicking In/Out since once they save/cancel it takes them back to the original page anyways.\n\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Clients' ), window.location.href );\n\t\t}\n\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.in_out:\n\t\t\t\tIndexViewController.openEditView( LocalCacheData.current_open_primary_controller, 'InOut' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.client_contact:\n\t\t\t\tIndexViewController.goToView( 'ClientContact', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.invoice:\n\t\t\t\tIndexViewController.goToView( 'Invoice', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.transaction:\n\t\t\t\tIndexViewController.goToView( 'InvoiceTransaction', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.payment_method:\n\t\t\t\tIndexViewController.goToView( 'ClientPayment', filter );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_client': { 'label': $.i18n._( 'Client' ) },\n\t\t\t'tab_client_contacts': {\n\t\t\t\t'label': $.i18n._( 'Client Contacts' ),\n\t\t\t\t'init_callback': 'initSubClientContactView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_payment_methods': {\n\t\t\t\t'label': $.i18n._( 'Payment Methods' ),\n\t\t\t\t'init_callback': 'initSubClientPaymentView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_invoices': {\n\t\t\t\t'label': $.i18n._( 'Invoices' ),\n\t\t\t\t'init_callback': 'initSubInvoiceView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_transactions': {\n\t\t\t\t'label': $.i18n._( 'Transactions' ),\n\t\t\t\t'init_callback': 'initSubTransactionView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tif ( !this.edit_only_mode ) {\n\n\t\t\tthis.navigation.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIClient,\n\t\t\t\tid: this.script_name + '_navigation',\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_client',\n\t\t\t\tnavigation_mode: true,\n\t\t\t\tshow_search_inputs: true\n\t\t\t} );\n\n\t\t\tthis.setNavigation();\n\t\t}\n\n\t\t//Tab 0 start\n\n\t\tvar tab_client = this.edit_view_tab.find( '#tab_client' );\n\n\t\tvar tab_client_column1 = tab_client.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_client_column1 );\n\n\t\t// Parent\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIClient,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_client',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'parent_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Parent' ), form_item_input, tab_client_column1, '' );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_client_column1 );\n\n\t\t// Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\ttree_mode: true,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_tree_column',\n\t\t\tset_empty: true,\n\t\t\tfield: 'group_id'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.client_group_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Group' ), form_item_input, tab_client_column1 );\n\n\t\t// Client Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'company_name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Client Name' ), form_item_input, tab_client_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Doing Business As\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'company_dba_name', width: 430 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Doing Business As' ), form_item_input, tab_client_column1 );\n\n\t\t// Sales Contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'sales_contact_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Sales Contact' ), form_item_input, tab_client_column1 );\n\n\t\t// Support Contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'support_contact_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Support Contact' ), form_item_input, tab_client_column1 );\n\n\t\t// Website\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'website', width: 360 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Website' ), form_item_input, tab_client_column1 );\n\n\t\t// Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'note', width: '100%' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_client_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 800 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_client_column1, 'last', null, null, true );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Company Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'company_name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Website' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'website',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Note' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'note',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tobject_type_id: 800,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Sales Contact' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'sales_contact_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Support Contact' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'support_contact_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tsetEditMenu() {\n\n\t\tsuper.setEditMenu();\n\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.login:\n\t\t\t\t\tthis.setEditMenuLoginIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tcase ContextMenuIconName.client_contact:\n\t\t\t\tcase ContextMenuIconName.invoice:\n\t\t\t\tcase ContextMenuIconName.transaction:\n\t\t\t\tcase ContextMenuIconName.payment_method:\n\t\t\t\t\tthis.setNavigationMenuIcons( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetNavigationMenuIcons( context_btn ) {\n\t\tif ( this.edit_only_mode ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\t}\n\n\tsetEditMenuLoginIcon( context_btn ) {\n\t\tif ( !PermissionManager.validate( 'company', 'login_other_user' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t\treturn;\n\t\t}\n\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tinitSubClientContactView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.sub_client_contact_view_controller ) {\n\t\t\tthis.sub_client_contact_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_client_contact_view_controller.setDefaultMenu();\n//\t\t\t$this.sub_client_contact_view_controller.parent_key = 'client_id';\n\t\t\t$this.sub_client_contact_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_client_contact_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_client_contact_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/invoice/client_contact/ClientContactViewController.js', function() {\n\t\t\tvar tab_client_contacts = $this.edit_view_tab.find( '#tab_client_contacts' );\n\t\t\tvar firstColumn = tab_client_contacts.find( '.first-column-sub-view' );\n\n\t\t\tGlobal.trackView( 'Sub' + 'ClientContact' + 'View' );\n\t\t\tClientContactViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_client_contact_view_controller = subViewController;\n\t\t\t$this.sub_client_contact_view_controller.parent_key = 'client_id';\n\t\t\t$this.sub_client_contact_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_client_contact_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_client_contact_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_client_contact_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\t}\n\n\tinitSubClientPaymentView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.sub_client_payment_view_controller ) {\n\t\t\tthis.sub_client_payment_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_client_payment_view_controller.setDefaultMenu();\n\t\t\t$this.sub_client_payment_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_client_payment_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_client_payment_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/invoice/client_payment/ClientPaymentViewController.js', function() {\n\t\t\tvar tab_payment_methods = $this.edit_view_tab.find( '#tab_payment_methods' );\n\t\t\tvar firstColumn = tab_payment_methods.find( '.first-column-sub-view' );\n\n\t\t\tGlobal.trackView( 'Sub' + 'ClientPayment' + 'View' );\n\t\t\tClientPaymentViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_client_payment_view_controller = subViewController;\n\t\t\t$this.sub_client_payment_view_controller.parent_key = 'client_id';\n\t\t\t$this.sub_client_payment_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_client_payment_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_client_payment_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_client_payment_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\t}\n\n\tinitSubInvoiceView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.sub_invoice_view_controller ) {\n\t\t\t$this.sub_invoice_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_invoice_view_controller.setDefaultMenu();\n\t\t\t$this.sub_invoice_view_controller.parent_key = 'client_id';\n\t\t\t$this.sub_invoice_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_invoice_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_invoice_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/invoice/invoice/InvoiceViewController.js', function() {\n\t\t\tvar tab_invoices = $this.edit_view_tab.find( '#tab_invoices' );\n\t\t\tvar firstColumn = tab_invoices.find( '.first-column-sub-view' );\n\n\t\t\tGlobal.trackView( 'Sub' + 'Invoice' + 'View' );\n\t\t\tInvoiceViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_invoice_view_controller = subViewController;\n\t\t\t$this.sub_invoice_view_controller.parent_key = 'client_id';\n\t\t\t$this.sub_invoice_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_invoice_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_invoice_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_invoice_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\t}\n\n\tinitSubTransactionView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.sub_transaction_view_controller ) {\n\t\t\tthis.sub_transaction_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_transaction_view_controller.setDefaultMenu();\n\t\t\t$this.sub_transaction_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_transaction_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_transaction_view_controller.getSubViewFilter = function( filter ) {\n\t\t\t\treturn getFilter( filter, this );\n\t\t\t};\n\n\t\t\t$this.sub_transaction_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/invoice/invoice_transaction/InvoiceTransactionViewController.js', function() {\n\t\t\tvar tab_transactions = $this.edit_view_tab.find( '#tab_transactions' );\n\t\t\tvar firstColumn = tab_transactions.find( '.first-column-sub-view' );\n\n\t\t\tGlobal.trackView( 'Sub' + 'InvoiceTransaction' + 'View' );\n\t\t\tInvoiceTransactionViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_transaction_view_controller = subViewController;\n\t\t\t$this.sub_transaction_view_controller.parent_key = 'client_id';\n\t\t\t$this.sub_transaction_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_transaction_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_transaction_view_controller.getSubViewFilter = function( filter ) {\n\t\t\t\treturn getFilter( filter, this );\n\t\t\t};\n\t\t\t$this.sub_transaction_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_transaction_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\n\t\tfunction getFilter( filter, target ) {\n\t\t\tfilter.client_id = $this.current_edit_record.id;\n\t\t\tfilter.invoice_status_id = [10, 20, 30, 35, 40, 50, 55, 70, 80, 90, 95, 97, 98, 100];\n\n\t\t\treturn filter;\n\t\t}\n\n\n\t}\n\n}\n"],"sourceRoot":""}