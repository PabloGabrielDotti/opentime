{"version":3,"sources":["webpack://timetrex/./interface/html5/views/policy/schedule_policy/SchedulePolicyViewController.js"],"names":["SchedulePolicyViewController","BaseViewController","options","_","defaults","el","over_time_policy_api","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APISchedulePolicy","APIOverTimePolicy","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","id","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_schedule_policy_column1","edit_view_tab","find","edit_view_tabs","push","form_item_input","Global","loadWidgetByName","FormItemType","TEXT_INPUT","TTextInput","field","width","addEditFieldToColumn","parent","TEXT_AREA","TTextArea","AWESOME_BOX","APIMealPolicy","set_any","custom_first_label","addition_source_function","onMealOrBreakSourceCreate","added_items","value","TTUUID","zero_id","label","APIBreakPolicy","v_box","APIRegularTimePolicy","set_empty","form_item","putInputToInsideFormItem","append","form_item_input_1","default_args","filter_data","type_id","setDefaultArgs","APIPremiumPolicy","APIAbsencePolicy","mode","need_parser_sec","target","source_data","display_columns","getDisplayColumns","first_item","each","index","content","name","unshift","key","current_edit_record","hasOwnProperty","widget","edit_view_ui_dic","isSet","setCountryValue","setValue","collectUIDataToCurrentEditRecord","setEditViewDataDone","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","getField","c_value","getValue","validate","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser"],"mappings":"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","file":"policy-schedule_policy-SchedulePolicyViewController.bundle.js?v=d109b6b46303a51356a8","sourcesContent":["export class SchedulePolicyViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#schedule_policy_view_container',\n\n\t\t\tover_time_policy_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'SchedulePolicyEditView.html';\n\t\tthis.permission_id = 'schedule_policy';\n\t\tthis.viewId = 'SchedulePolicy';\n\t\tthis.script_name = 'SchedulePolicyView';\n\t\tthis.table_name_key = 'schedule_policy';\n\t\tthis.context_menu_name = $.i18n._( 'Schedule Policy' );\n\t\tthis.navigation_label = $.i18n._( 'Schedule Policy' ) + ':';\n\t\tthis.api = TTAPI.APISchedulePolicy;\n\t\tthis.over_time_policy_api = TTAPI.APIOverTimePolicy;\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'SchedulePolicy' );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_schedule_policy': { 'label': $.i18n._( 'Schedule Policy' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APISchedulePolicy,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_schedule',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_schedule_policy = this.edit_view_tab.find( '#tab_schedule_policy' );\n\n\t\tvar tab_schedule_policy_column1 = tab_schedule_policy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_schedule_policy_column1 );\n\n\t\t//Name\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_schedule_policy_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_schedule_policy_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Meal Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIMealPolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_meal',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_any: true,\n\t\t\tfield: 'meal_policy',\n\t\t\tcustom_first_label: $.i18n._( '-- No Meal --' ),\n\t\t\taddition_source_function: this.onMealOrBreakSourceCreate,\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.zero_id, label: $.i18n._( '-- Defined By Policy Group --' ) }\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Meal Policy' ), form_item_input, tab_schedule_policy_column1 );\n\n\t\t//Break Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIBreakPolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_break',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_any: true,\n\t\t\tfield: 'break_policy',\n\t\t\tcustom_first_label: '-- ' + $.i18n._( 'No Break' ) + ' --',\n\t\t\taddition_source_function: this.onMealOrBreakSourceCreate,\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.zero_id, label: '-- ' + $.i18n._( 'Defined By Policy Group' ) + ' --' }\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Break Policy' ), form_item_input, tab_schedule_policy_column1 );\n\n\t\t// Regular Time Policy\n\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\t\t//Include\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIRegularTimePolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_regular_time',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'include_regular_time_policy'\n\t\t} );\n\n\t\tvar form_item = this.putInputToInsideFormItem( form_item_input, $.i18n._( 'Include' ) );\n\n\t\tv_box.append( form_item );\n\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t//Exclude\n\t\tvar form_item_input_1 = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input_1.AComboBox( {\n\t\t\tapi_class: TTAPI.APIRegularTimePolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_regular_time',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'exclude_regular_time_policy'\n\t\t} );\n\n\t\tform_item = this.putInputToInsideFormItem( form_item_input_1, $.i18n._( 'Exclude' ) );\n\n\t\tv_box.append( form_item );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Regular Time Policy' ), [form_item_input, form_item_input_1], tab_schedule_policy_column1, '', v_box, false, true );\n\n\t\t//Overtime Policy\n\n\t\tv_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\tvar default_args = {};\n\t\tdefault_args.filter_data = {};\n\t\tdefault_args.filter_data.type_id = [10, 40, 50, 60, 70, 80, 90, 100, 180, 200];\n\n\t\t//Include\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIOverTimePolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_over_time',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'include_over_time_policy'\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tform_item = this.putInputToInsideFormItem( form_item_input, $.i18n._( 'Include' ) );\n\n\t\tv_box.append( form_item );\n\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t//Exclude\n\t\tform_item_input_1 = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input_1.AComboBox( {\n\t\t\tapi_class: TTAPI.APIOverTimePolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_over_time',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'exclude_over_time_policy'\n\t\t} );\n\n\t\tform_item_input_1.setDefaultArgs( default_args );\n\n\t\tform_item = this.putInputToInsideFormItem( form_item_input_1, $.i18n._( 'Exclude' ) );\n\n\t\tv_box.append( form_item );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Overtime Policy' ), [form_item_input, form_item_input_1], tab_schedule_policy_column1, '', v_box, false, true );\n\n\t\t//Premium Policy\n\t\tv_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t//Include\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPremiumPolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_premium',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'include_premium_policy'\n\t\t} );\n\n\t\tform_item = this.putInputToInsideFormItem( form_item_input, $.i18n._( 'Include' ) );\n\n\t\tv_box.append( form_item );\n\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t//Exclude\n\t\tform_item_input_1 = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input_1.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPremiumPolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_premium',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'exclude_premium_policy'\n\t\t} );\n\n\t\tform_item = this.putInputToInsideFormItem( form_item_input_1, $.i18n._( 'Exclude' ) );\n\n\t\tv_box.append( form_item );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Premium Policy' ), [form_item_input, form_item_input_1], tab_schedule_policy_column1, '', v_box, false, true );\n\n\t\t//Full Shift Undertime Absence Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAbsencePolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_absences',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'full_shift_absence_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Full Shift Undertime Absence Policy' ), form_item_input, tab_schedule_policy_column1 );\n\n\t\t//Partial Shift Undertime Absence Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAbsencePolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_absences',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'partial_shift_absence_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Partial Shift Undertime Absence Policy' ), form_item_input, tab_schedule_policy_column1 );\n\n\t\t//Start / Stop Window\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'start_stop_window', mode: 'time_unit', need_parser_sec: true } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Start / Stop Window' ), form_item_input, tab_schedule_policy_column1, '', null );\n\t}\n\n\tonMealOrBreakSourceCreate( target, source_data ) {\n\t\tvar display_columns = target.getDisplayColumns();\n\n\t\tvar first_item = {};\n\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\tfirst_item.id = TTUUID.zero_id;\n\t\t\tfirst_item[content.name] = $.i18n._( '-- Defined By Policy Group --' );\n\n\t\t\treturn false;\n\t\t} );\n\n\t\tsource_data.unshift( first_item );\n\n\t\treturn source_data;\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n//\t\tswitch ( key ) {\n//\t\t\tcase 'start_stop_window':\n//\t\t\t\tc_value = this.date_api.parseTimeUnit( target.getValue(), {async: false} ).getResult();\n//\t\t\t\tbreak;\n//\t\t}\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Full Shift Absence Policy' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'full_shift_absence_policy_id',\n\t\t\t\tlayout_name: 'global_absences',\n\t\t\t\tapi_class: TTAPI.APIAbsencePolicy,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Partial Shift Absence Policy' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'partial_shift_absence_policy_id',\n\t\t\t\tlayout_name: 'global_absences',\n\t\t\t\tapi_class: TTAPI.APIAbsencePolicy,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n}\n"],"sourceRoot":""}