(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["filebrowser-CameraBrowser"],{8128:()=>{var e;(e=jQuery).fn.CameraBrowser=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var a,i=e.extend({},e.fn.CameraBrowser.defaults,t),r=this,s=null,n=null,o=null;return this.stopCamera=function(){o&&(o.stop?o.stop():o.getTracks&&o.getTracks().forEach((e=>e.stop())))},this.showCamera=function(){function t(){TAlertManager.showAlert(e.i18n._("Unable to access Camera.<br><br>Please check your camera connections, permissions, and ensure you are using HTTPS. Alternatively, use the File upload method instead."))}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){"srcObject"in s?s.srcObject=e:s.src=URL.createObjectURL(e),s.play(),o=e})).catch((function(e){t()})):navigator.getUserMedia?navigator.getUserMedia({video:!0},(function(e){"srcObject"in s?s.srcObject=e:s.src=URL.createObjectURL(e),s.play(),o=e}),t):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia({video:!0},(function(e){s.src=window.webkitURL.createObjectURL(e),s.play(),o=e}),t):navigator.mozGetUserMedia?navigator.mozGetUserMedia({video:!0},(function(e){s.src=window.URL.createObjectURL(e),s.play(),o=e}),t):t()},this.setEnable=function(e){var t=this.children().eq(1);e?(t.removeAttr("disabled"),t.removeClass("disable-element")):(t.attr("disabled",!0),t.removeClass("disable-element").addClass("disable-element"))},this.clearErrorStyle=function(){},this.getField=function(){return a},this.getValue=function(){return!1},this.getFileName=function(){return"camera_stream.png"},this.getImageSrc=function(){return n[0].toDataURL()},this.setImage=function(e){var t=r.children().eq(0);if(!e)return t.attr("src",""),void t.hide();var a=new Date;t.hide(),t.attr("src",e+"&t="+a.getTime()),t.css("height","auto"),t.css("width","auto")},this.onImageLoad=function(t){e(t).show()},this.setValue=function(e){e||(e="")},this.each((function(){var t=e.meta?e.extend({},i,e(this).data()):i;a=t.field,s=e(this).children().eq(0).children().eq(0)[0],n=e(this).children().eq(0).children().eq(1);var o=e(this).children().eq(1).children().eq(0),c=e(this).children().eq(1).children().eq(1);o.prop("disabled",!1),c.prop("disabled",!0),o.bind("click",(function(){o.prop("disabled",!0),c.prop("disabled",!1),n.parent().addClass("flash"),setTimeout((function(){n.parent().removeClass("flash")}),1e3),n[0].getContext("2d").drawImage(s,0,0,400,300),n.css("z-index",51),r.trigger("change",[r])})),c.bind("click",(function(){o.prop("disabled",!1),c.prop("disabled",!0),Global.glowAnimation.stop(),n.css("z-index",-1),r.trigger("NoImageChange",[r])}))})),this},e.fn.CameraBrowser.defaults={}}}]);
//# sourceMappingURL=filebrowser-CameraBrowser.bundle.js.map?v=5be51729f97c305dbb60