{"version":3,"sources":["webpack://timetrex/./interface/html5/views/payroll/pay_stub_entry_account/PayStubEntryAccountViewController.js"],"names":["PayStubEntryAccountViewController","BaseViewController","options","_","defaults","el","type_array","status_array","accrual_type_array","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIPayStubEntryAccount","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","initDropDownOption","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","c_value","getValue","current_edit_record","onTypeChange","onAccrualPayStubEntryAccountChange","validate","setEditViewDataDone","type_id","detachElement","attachElement","editFieldResize","TTUUID","isUUID","accrual_pay_stub_entry_account_id","zero_id","exclude","include","label","id","ContextMenuIconName","migrate_pay_stub_account","group","icon","Icons","wizard","onWizardClick","IndexViewController","openWizard","buildEditViewUI","$this","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_pay_stub_account_column1","edit_view_tab","find","edit_view_tabs","push","form_item_input","Global","loadWidgetByName","FormItemType","COMBO_BOX","TComboBox","field","set_empty","setSourceData","addEditFieldToColumn","TEXT_INPUT","TTextInput","width","parent","args","filter_data","AWESOME_BOX","setDefaultArgs","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser"],"mappings":"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","file":"payroll-pay_stub_entry_account-PayStubEntryAccountViewController.bundle.js?v=1ae870b52885e2186c46","sourcesContent":["export class PayStubEntryAccountViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_stub_entry_account_view_container',\n\n\t\t\ttype_array: null,\n\t\t\tstatus_array: null,\n\t\t\taccrual_type_array: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PayStubEntryAccountEditView.html';\n\t\tthis.permission_id = 'pay_stub_account';\n\t\tthis.viewId = 'PayStubEntryAccount';\n\t\tthis.script_name = 'PayStubEntryAccountView';\n\t\tthis.table_name_key = 'pay_stub_entry_account';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Stub Accounts' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Stub Account' ) + ':';\n\t\tthis.api = TTAPI.APIPayStubEntryAccount;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'PayStubEntryAccount' );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'type' );\n\t\tthis.initDropDownOption( 'status' );\n\t\tthis.initDropDownOption( 'accrual_type' );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( key === 'type_id' ) {\n\t\t\tthis.onTypeChange();\n\t\t}\n\t\tif ( key === 'accrual_pay_stub_entry_account_id' ) {\n\t\t\tthis.onAccrualPayStubEntryAccountChange();\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.onTypeChange();\n\t\tthis.onAccrualPayStubEntryAccountChange();\n\t}\n\n\tonTypeChange() {\n\t\tif ( this.current_edit_record.type_id == 50 ) {\n\t\t\tthis.detachElement( 'accrual_pay_stub_entry_account_id' );\n\t\t\tthis.detachElement( 'accrual_type_id' );\n\n\t\t} else {\n\t\t\tthis.attachElement( 'accrual_pay_stub_entry_account_id' );\n\t\t\tthis.onAccrualPayStubEntryAccountChange();\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonAccrualPayStubEntryAccountChange() {\n\t\tif ( TTUUID.isUUID( this.current_edit_record.accrual_pay_stub_entry_account_id ) && this.current_edit_record.accrual_pay_stub_entry_account_id != TTUUID.zero_id ) {\n\t\t\tthis.attachElement( 'accrual_type_id' );\n\t\t} else {\n\t\t\tthis.detachElement( 'accrual_type_id' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [{\n\t\t\t\tlabel: $.i18n._( 'Migrate<br>PS Accounts' ),\n\t\t\t\tid: ContextMenuIconName.migrate_pay_stub_account,\n\t\t\t\tgroup: 'other',\n\t\t\t\ticon: Icons.wizard\n\t\t\t}]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.migrate_pay_stub_account:\n\t\t\t\tthis.onWizardClick();\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tonWizardClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'PayStubAccountWizard', null, function() {\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_stub_account': { 'label': $.i18n._( 'Pay Stub Account' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_pay_stub_account = this.edit_view_tab.find( '#tab_pay_stub_account' );\n\n\t\tvar tab_pay_stub_account_column1 = tab_pay_stub_account.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_pay_stub_account_column1 );\n\n\t\t//Status\n\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_pay_stub_account_column1, '' );\n\n\t\t//Type\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_pay_stub_account_column1 );\n\n\t\t//Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_pay_stub_account_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Order\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ps_order', width: 359 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Order' ), form_item_input, tab_pay_stub_account_column1 );\n\n\t\t//Accrual\n\n\t\tvar args = {};\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [50, 80];\n\t\targs.filter_data = filter_data;\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'accrual_pay_stub_entry_account_id'\n\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual' ), form_item_input, tab_pay_stub_account_column1, '', null, true );\n\t\t// Accrual Type\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'accrual_type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.accrual_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Type' ), form_item_input, tab_pay_stub_account_column1, '', null, true );\n\n\t\t// Debit Account\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'debit_account', width: 359 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Debit Account' ), form_item_input, tab_pay_stub_account_column1 );\n\n\t\t// Credit Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'credit_account', width: 359 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Credit Account' ), form_item_input, tab_pay_stub_account_column1, '' );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Debit Account' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'debit_account',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Credit Account' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'credit_account',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n}\n"],"sourceRoot":""}