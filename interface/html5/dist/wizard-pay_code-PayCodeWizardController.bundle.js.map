{"version":3,"sources":["webpack://timetrex/./interface/html5/views/wizard/pay_code/PayCodeWizardController.js"],"names":["PayCodeWizardController","BaseWizardController","options","_","defaults","el","super","this","title","$","i18n","steps","current_step","width","render","initCurrentStep","content_div","empty","label","getLabel","html","append","content_clone","find","clone","stepsWidgetDic","first_hr","text","a_combobox","getAComboBox","TTAPI","APIPayCode","getField","second_hr","appendTo","$this","onDoneClick","saveCurrentStep","source_pay_code_ids","stepsDataDic","dest_pay_code_id","migratePayCode","onResult","result","getResult","onCloseClick","call_back","TAlertManager","showErrorAlert","current_step_data","current_step_ui","setValue","getValue","default_data","getDefaultData"],"mappings":"wLAAO,MAAMA,UAAgCC,qBAC5C,YAAaC,EAAU,IACtBC,EAAEC,SAAUF,EAAS,CACpBG,GAAI,eAGLC,MAAOJ,GAGR,KAAMA,GAGLK,KAAKC,MAAQC,EAAEC,KAAKP,EAAG,qBACvBI,KAAKI,MAAQ,EACbJ,KAAKK,aAAe,EACpBH,EAAGF,KAAKF,IAAKQ,MAAO,MAEpBN,KAAKO,SAGN,SACCR,MAAMQ,SAENP,KAAKQ,kBAIN,qBAGC,OADAR,KAAKS,YAAYC,QACRV,KAAKK,cACb,KAAK,EACJ,IAAIM,EAAQX,KAAKY,WACjBD,EAAME,KAAMX,EAAEC,KAAKP,EAAG,mKAAVM,4DAC2CA,EAAEC,KAAKP,EAAG,WADrDM,YAEXA,EAAEC,KAAKP,EAAG,sDAEXI,KAAKS,YAAYK,OAAQH,GACzB,MACD,KAAK,EACJ,IAEII,EAFUb,EAAGA,EAAGF,KAAKF,IAAKkB,KAAM,oBAERC,QAE5BjB,KAAKkB,eAAelB,KAAKK,cAAgB,GAIzC,IAAIc,EAAWJ,EAAcC,KAAM,aACnCG,EAASH,KAAM,6BAA8BI,KAAMlB,EAAEC,KAAKP,EAAG,2BAA8B,MAC3F,IAAIyB,EAAarB,KAAKsB,aAAcC,MAAMC,YAAY,EAAM,kBAAmB,uBAC/EL,EAASH,KAAM,uBAAwBF,OAAQO,GAE/CrB,KAAKkB,eAAelB,KAAKK,cAAcgB,EAAWI,YAAcJ,EAIhE,IAAIK,EAAYX,EAAcC,KAAM,cACpCU,EAAUV,KAAM,6BAA8BI,KAAMlB,EAAEC,KAAKP,EAAG,+BAAkC,MAChGyB,EAAarB,KAAKsB,aAAcC,MAAMC,YAAY,EAAO,kBAAmB,oBAC5EE,EAAUV,KAAM,uBAAwBF,OAAQO,GAEhDrB,KAAKkB,eAAelB,KAAKK,cAAcgB,EAAWI,YAAcJ,EAEhEN,EAAcY,SAAU3B,KAAKS,cAMhC,wBAGA,cACC,IAAImB,EAAQ5B,KACZD,MAAM8B,cACN7B,KAAK8B,kBACL,IAAIC,EAAsB/B,KAAKgC,aAAa,GAAGD,oBAC3CE,EAAmBjC,KAAKgC,aAAa,GAAGC,iBAEzBV,MAAMC,WAEZU,eAAgBH,EAAqBE,EAAkB,CACnEE,SAAU,SAAUC,GACDA,EAAOC,aAExBT,EAAMU,eAEDV,EAAMW,WACVX,EAAMW,aAGPC,cAAcC,eAAgBL,MAOlC,uBAEC,GAAMpC,KAAKgC,aAAahC,KAAKK,cAA7B,CAGC,IAAIqC,EAAoB1C,KAAKgC,aAAahC,KAAKK,cAC3CsC,EAAkB3C,KAAKkB,eAAelB,KAAKK,cAGhD,OAASL,KAAKK,cACb,KAAK,EACJ,MACD,KAAK,EACCqC,EAAkBX,qBACtBY,EAAgBZ,oBAAoBa,SAAUF,EAAkBX,qBAE5DW,EAAkBT,kBACtBU,EAAgBV,iBAAiBW,SAAUF,EAAkBT,oBAMjE,kBACCjC,KAAKgC,aAAahC,KAAKK,cAAgB,GACvC,IAAIqC,EAAoB1C,KAAKgC,aAAahC,KAAKK,cAC3CsC,EAAkB3C,KAAKkB,eAAelB,KAAKK,cAC/C,OAASL,KAAKK,cACb,KAAK,EACJ,MACD,KAAK,EACJqC,EAAkBX,oBAAsBY,EAAgBZ,oBAAoBc,WAC5EH,EAAkBT,iBAAmBU,EAAgBV,iBAAiBY,YAKzE,wBAEC,IAAM7C,KAAK8C,aACV,OAAO,KAGR9C,KAAKgC,aAAa,GAAK,GAElBhC,KAAK+C,eAAgB,yBACzB/C,KAAKgC,aAAa,GAAGD,oBAAsB/B,KAAK+C,eAAgB,wBAG5D/C,KAAK+C,eAAgB,sBACzB/C,KAAKgC,aAAa,GAAGC,iBAAmBjC,KAAK+C,eAAgB","file":"wizard-pay_code-PayCodeWizardController.bundle.js?v=2aab751c59948dd780b8","sourcesContent":["export class PayCodeWizardController extends BaseWizardController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.wizard-bg'\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\n\t\tthis.title = $.i18n._( 'Migrate Pay Codes' );\n\t\tthis.steps = 2;\n\t\tthis.current_step = 1;\n\t\t$( this.el ).width( 1010 );\n\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.initCurrentStep();\n\t}\n\n\t//Create each page UI\n\tbuildCurrentStepUI() {\n\n\t\tthis.content_div.empty();\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tvar label = this.getLabel();\n\t\t\t\tlabel.html( $.i18n._( 'This wizard will migrate data associated with one pay code to another pay code without recalculating timesheets or otherwise affecting employees time or wages.' ) + '<br><br>' +\n\t\t\t\t\t'<span style=\"color: #ff0000; font-weight: bold;\">' + $.i18n._( 'WARNING' ) + ': ' + '</span>' +\n\t\t\t\t\t$.i18n._( 'This operation can not be reversed once complete.' ) );\n\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tvar content = $( $( this.el ).find( '.wizard-content' ) );\n\n\t\t\t\tvar content_clone = content.clone();\n\n\t\t\t\tthis.stepsWidgetDic[this.current_step] = {};\n\n\t\t\t\t// Select Source Pay Codes\n\n\t\t\t\tvar first_hr = content_clone.find( '.first-hr' );\n\t\t\t\tfirst_hr.find( '.wizard-item-label > span' ).text( $.i18n._( 'Select Source Pay Codes' ) + ': ' );\n\t\t\t\tvar a_combobox = this.getAComboBox( TTAPI.APIPayCode, true, 'global_pay_code', 'source_pay_code_ids' );\n\t\t\t\tfirst_hr.find( '.wizard-item-widget' ).append( a_combobox );\n\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\t// Select Destination Pay Code\n\n\t\t\t\tvar second_hr = content_clone.find( '.second-hr' );\n\t\t\t\tsecond_hr.find( '.wizard-item-label > span' ).text( $.i18n._( 'Select Destination Pay Code' ) + ': ' );\n\t\t\t\ta_combobox = this.getAComboBox( TTAPI.APIPayCode, false, 'global_pay_code', 'dest_pay_code_id' );\n\t\t\t\tsecond_hr.find( '.wizard-item-widget' ).append( a_combobox );\n\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\tcontent_clone.appendTo( this.content_div );\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tbuildCurrentStepData() {\n\t}\n\n\tonDoneClick() {\n\t\tvar $this = this;\n\t\tsuper.onDoneClick();\n\t\tthis.saveCurrentStep();\n\t\tvar source_pay_code_ids = this.stepsDataDic[2].source_pay_code_ids;\n\t\tvar dest_pay_code_id = this.stepsDataDic[2].dest_pay_code_id;\n\n\t\tvar pay_code_api = TTAPI.APIPayCode;\n\n\t\tpay_code_api.migratePayCode( source_pay_code_ids, dest_pay_code_id, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data ) {\n\t\t\t\t\t$this.onCloseClick();\n\n\t\t\t\t\tif ( $this.call_back ) {\n\t\t\t\t\t\t$this.call_back();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentStepValues() {\n\n\t\tif ( !this.stepsDataDic[this.current_step] ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\t}\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tif ( current_step_data.source_pay_code_ids ) {\n\t\t\t\t\tcurrent_step_ui.source_pay_code_ids.setValue( current_step_data.source_pay_code_ids );\n\t\t\t\t}\n\t\t\t\tif ( current_step_data.dest_pay_code_id ) {\n\t\t\t\t\tcurrent_step_ui.dest_pay_code_id.setValue( current_step_data.dest_pay_code_id );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsaveCurrentStep() {\n\t\tthis.stepsDataDic[this.current_step] = {};\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcurrent_step_data.source_pay_code_ids = current_step_ui.source_pay_code_ids.getValue();\n\t\t\t\tcurrent_step_data.dest_pay_code_id = current_step_ui.dest_pay_code_id.getValue();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultDataToSteps() {\n\n\t\tif ( !this.default_data ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.stepsDataDic[2] = {};\n\n\t\tif ( this.getDefaultData( 'source_pay_code_ids' ) ) {\n\t\t\tthis.stepsDataDic[2].source_pay_code_ids = this.getDefaultData( 'source_pay_code_ids' );\n\t\t}\n\n\t\tif ( this.getDefaultData( 'dest_pay_code_id' ) ) {\n\t\t\tthis.stepsDataDic[2].dest_pay_code_id = this.getDefaultData( 'dest_pay_code_id' );\n\t\t}\n\t}\n\n}"],"sourceRoot":""}