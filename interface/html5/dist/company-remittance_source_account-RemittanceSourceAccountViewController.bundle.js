(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["company-remittance_source_account-RemittanceSourceAccountViewController","filebrowser-TImage","filebrowser-TImageAdvBrowser"],{1469:()=>{!function(e){e.fn.TImage=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var i,a=e.extend({},e.fn.TImage.defaults,t);return this.clearErrorStyle=function(){},this.getField=function(){return i},this.getValue=function(){return null},this.setValue=function(e){if(e){var t=new Date;this.attr("src",e+"&t="+t.getTime())}else this.attr("src","")},this.each((function(){var t=e.meta?e.extend({},a,e(this).data()):a;i=t.field})),this},e.fn.TImage.defaults={},e(document).on("mouseover",".file-browser img",(function(t){var i=e(t.target).parents(".file-browser");if(!e(".file_browser_overlay")[0]&&1==e(t.target).attr("enable-delete")){var a=e(t.target).height(),l=(a-32)/2,n=e('<div class="file_browser_overlay"><img src="theme/default/images/delete-512.png" style="position:absolute;width:32px;height:32px;top:'+l+"px;left:"+l+'px;"></div>');n.css("position","absolute"),n.css("top","0px"),n.css("left","0"),n.css("cursor","pointer"),n.css("height",a+"px"),n.css("width","100%"),n.css("background","rgba(255,255,255,0.85)"),e(t.target).parents(".file-browser").append(n),e(document).on("click",".file_browser_overlay",(function(t){e(t.target).parent().find("img").attr("src");TAlertManager.showConfirmAlert(e.i18n._("This will permanently delete the image. Are you sure?"),"",(function(e){if(e){var t={type:"deleteClick",message:"Delete image clicked.",time:new Date};i.trigger(t)}}))})),e(document).on("mouseleave",".file-browser",(function(){(e(document).off("click",".file_browser_overlay"),e(".file_browser_overlay")[0])&&e(this).find(".file_browser_overlay").off().remove()}))}}))}(jQuery)},8243:()=>{!function(e){e.fn.TImageAdvBrowser=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var i,a,l,n=e.extend({},e.fn.TImageAdvBrowser.defaults,t),r=this,s="",d=177,o=42,_=null;return this.setEnable=function(e){e;var t=this.children().eq(1);e?t.show():t.hide()},this.clearErrorStyle=function(){},this.getField=function(){return i},this.getValue=function(){return l},this.setImage=function(e){if(!e)return a.attr("src",""),void a.hide();var t=new Date;a.hide(),a.attr("src",e+"&t="+t.getTime()+"&X-CSRF-Token="+getCookie("CSRF-Token")),a.css("height","auto"),a.css("width","auto")},this.onImageLoad=function(t){var i=e(t).height()>0?e(t).height():t.naturalHeight,a=e(t).width()>0?e(t).width():t.naturalWidth;i>o&&e(t).css("height",o),a>d&&(e(t).css("width",d),e(t).css("height","auto")),r.trigger("setSize"),i<5?e(t).hide():e(t).show()},this.setValue=function(e){e||(e="")},this.setEnableDelete=function(e){var t=r.find(".image");e?t.attr("enable-delete",1):t.removeAttr("enable-delete")},this.each((function(){var t=e.meta?e.extend({},n,e(this).data()):n;i=t.field;e(this).find("#upload_image").text(e.i18n._("Upload Image")),t.callBack&&(_=t.callBack),!1===t.show_browser&&e(this).children().eq(1).hide(),t.default_width>0&&(d=t.default_width),t.default_height>0&&(o=t.default_height),Global.isSet(t.name)&&t.name,Global.isSet(s)&&(s=t.accept_filter),Global.isSet(t.deleteImageHandler)&&r.find(".file-browser").on("deleteClick",(function(){t.deleteImageHandler()})),e(this).children().eq(1).bind("click",(function(){IndexViewController.openWizard("UserPhotoWizard",null,(function(e){_&&_(e),l=e}))})),(a=e(this).children().eq(0)).on("load",(function(){r.onImageLoad(this)})),a.hide()})),this},e.fn.TImageAdvBrowser.defaults={}}(jQuery)},3401:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"RemittanceSourceAccountViewController":()=>a});i(1469),i(8243);class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#remittance_source_account_view_container",status_array:null,type_array:null,country_array:null,data_format_array:null,ach_transaction_type_array:null,ach_transaction_type_data:null,company_api:null}),super(e)}init(){this.edit_view_tpl="RemittanceSourceAccountEditView.html",this.permission_id="remittance_source_account",this.viewId="RemittanceSourceAccount",this.script_name="RemittanceSourceAccountView",this.table_name_key="remittance_source_account",this.context_menu_name=$.i18n._("Remittance Source Accounts"),this.navigation_label=$.i18n._("Remittance Source Account")+":",this.api=TTAPI.APIRemittanceSourceAccount,this.company_api=TTAPI.APICompany,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary(),$("#tab_advanced_content_div .edit-view-form-item-div .edit-view-form-item-label-div").css("border-top-left-radius","0px"),$("#tab_advanced_content_div .edit-view-form-item-div:first .edit-view-form-item-label-div").css("border-top-left-radius","5px")}initOptions(){var e=this;this.initDropDownOption("status"),this.initDropDownOption("type"),this.initDropDownOption("country","country",this.company_api),this.api.getOptions("ach_transaction_type",{onResult:function(t){var i=t.getResult();e.ach_transaction_type_data=i,e.ach_transaction_type_array=Global.buildRecordArray(i)}})}getSignatureUrl(){var e=!1;return this.current_edit_record.id&&(e=Global.getBaseURL()+"../send_file.php?api=1&object_type=remittance_source_account&object_id="+this.current_edit_record.id),Debug.Text(e,"RemittanceSourceAccountViewController.js","RemittanceSourceAccountViewController","getSignatureUrl",10),e}setEditViewDataDone(){super.setEditViewDataDone(),this.file_browser.setImage(this.getSignatureUrl())}uniformVariable(e){if(this.edit_view_ui_dic&&this.current_edit_record.remittance_source_account_id!=TTUUID.zero_id)for(var t=1;t<=10;t++)1==t?"US"==this.edit_view_ui_dic.country.getValue()?this.edit_view_ui_dic.value1_2&&(e.value1=e.value1_2?e.value1_2:this.edit_view_ui_dic.value1_2.getValue()):this.edit_view_ui_dic.value1_1&&(e.value1=e.value1_1?e.value1_1:this.edit_view_ui_dic.value1_1.getValue()):!this.is_mass_editing&&e["value"+t]&&void 0===this.edit_view_ui_dic["value"+t]&&(e["value"+t]=!1);return e}getCustomContextMenuModel(){return{exclude:[ContextMenuIconName.export_excel],include:[{label:$.i18n._("Sample<br>File"),id:ContextMenuIconName.export_export,group:"other",icon:Icons.export_export}]}}setDefaultMenu(e){super.setDefaultMenu();for(var t=this.context_menu_array.length,i=this.getGridSelectIdArray().length,a=0;a<t;a++){var l=$(this.context_menu_array[a]);switch($(l.find(".ribbon-sub-menu-icon")).attr("id")){case ContextMenuIconName.export_export:l.removeClass("invisible-image"),this.setMenuExportIcon(l,i)}}}setEditMenu(e){super.setEditMenu();for(var t=this.context_menu_array.length,i=this.getGridSelectIdArray().length,a=0;a<t;a++){var l=$(this.context_menu_array[a]);switch($(l.find(".ribbon-sub-menu-icon")).attr("id")){case ContextMenuIconName.export_export:l.removeClass("invisible-image"),this.setMenuExportIcon(l,i)}}}setMenuExportIcon(e,t){this.getSelectedItems().length>0?e.removeClass("disable-image"):this.edit_only_mode||null==this.grid||this.sub_view_mode?e.addClass("invisible-image"):e.addClass("disable-image")}onExportClick(){var e={0:this.getGridSelectIdArray()};Global.APIFileDownload(this.api.className,"testExport",e)}onFormItemChange(e,t){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var i=e.getField(),a=e.getValue();switch(i){case"value1_1":case"value1_2":this.current_edit_record.value1=a;break;case"country":case"type_id":this.onTypeChange();break;case"data_format_id":this.onDataFormatChange();break;case"value24":0!=a?(this.attachElement("value25").text($.i18n._("Offset Description")+":"),this.attachElement("value27").text($.i18n._("Offset Routing")+":"),this.attachElement("value28").text($.i18n._("Offset Account")+":"),0==this.edit_view_ui_dic.value25.getValue().length&&this.edit_view_ui_dic.value25.setValue("OFFSET")):(this.detachElement("value25"),this.detachElement("value27"),this.detachElement("value28"))}for(var l in this.edit_view_ui_dic)this.current_edit_record[l]=this.edit_view_ui_dic[l].getValue();this.current_edit_record[i]=a,t||this.validate()}onCustomContextClick(e){switch(e){case ContextMenuIconName.export_export:this.onExportClick()}}onSaveClick(e){super.onSaveClick(e),Global.clearCache("getOptions_type")}attachElement(e){if(this.edit_view_form_item_dic&&this.edit_view_form_item_dic[e]){var t=$(".place_holder_"+e);return this.edit_view_form_item_dic[e].insertBefore(t),t.remove(),$(this.edit_view_form_item_dic[e].find(".edit-view-form-item-label"))}}setCurrentEditRecordData(){for(var e in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(e)){var t=this.edit_view_ui_dic[e];if("value1"===e&&this.current_edit_record[e]&&!this.is_mass_editing&&(Global.isSet(this.ach_transaction_type_data[this.current_edit_record[e]])?this.edit_view_ui_dic.value1_2.setValue(this.current_edit_record[e]):this.edit_view_ui_dic.value1_1.setValue(this.current_edit_record[e])),Global.isSet(t))switch(e){case"value1_1":case"value1_2":break;case"type_id":t.setValue(this.current_edit_record[e]),this.onTypeChange();break;case"data_format_id":t.setValue(this.current_edit_record[e]),this.onDataFormatChange();break;default:t.setValue(this.current_edit_record[e])}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onDataFormatChange(){var e=this,t=this.edit_view_ui_dic.type_id.getValue(),i=this.edit_view_ui_dic.data_format_id.getValue();0!=t&&0!=i&&($(this.edit_view_tab.find("ul li")[1]).hide(),this.detachElement("value4"),this.detachElement("value5"),this.detachElement("value6"),this.detachElement("value7"),this.detachElement("value8"),this.detachElement("value9"),this.detachElement("value10"),this.detachElement("value11"),this.detachElement("value12"),this.detachElement("value13"),this.detachElement("value14"),this.detachElement("value15"),this.detachElement("value16"),this.detachElement("value17"),this.detachElement("value18"),this.detachElement("value19"),this.detachElement("value20"),this.detachElement("value21"),this.detachElement("value22"),this.detachElement("value23"),this.detachElement("value24"),this.detachElement("value25"),this.detachElement("value26"),this.detachElement("value27"),this.detachElement("value28"),this.detachElement("value29"),this.detachElement("value30"),this.detachElement("signature"),this.edit_view_ui_dic.value5.parent().find(".mm_field_unit_text").remove(),this.edit_view_ui_dic.value6.parent().find(".mm_field_unit_text").remove(),2e3!=t&&TTPromise.wait(null,null,(function(){e.edit_view_ui_dic.value5.setWidth(200),e.edit_view_ui_dic.value6.setWidth(200)})),2e3==t?Global.getProductEdition()>=15&&($(this.edit_view_tab.find("ul li")[1]).show(),this.attachElement("value5").text($.i18n._("Vertical Alignment")+":"),this.attachElement("value6").text($.i18n._("Horizontal Alignment")+":"),this.attachElement("signature"),this.edit_view_ui_dic.value5.parent().append('<span class="mm_field_unit_text">&nbsp;mm</span>'),this.edit_view_ui_dic.value6.parent().append('<span class="mm_field_unit_text">&nbsp;mm</span>'),TTPromise.wait(null,null,(function(){e.edit_view_ui_dic&&e.edit_view_ui_dic.value5&&e.edit_view_ui_dic.value5.setWidth(42),e.edit_view_ui_dic&&e.edit_view_ui_dic.value6&&e.edit_view_ui_dic.value6.setWidth(42)}))):3e3==t&&(5==i||(10==i?($(this.edit_view_tab.find("ul li")[1]).show(),this.attachElement("value4").text($.i18n._("Business Number")+":"),this.attachElement("value5").text($.i18n._("Immediate Origin")+":"),this.attachElement("value6").text($.i18n._("Immediate Origin Name")+":"),this.attachElement("value7").text($.i18n._("Immediate Dest.")+":"),this.attachElement("value8").text($.i18n._("Immediate Dest. Name")+":"),this.attachElement("value9").text($.i18n._("Trace Number")+":"),this.attachElement("value10").text($.i18n._("Discretionary Data")+":"),this.attachElement("value24").text($.i18n._("Offset Transaction")+":"),1==this.current_edit_record.value24&&(this.current_edit_record.value24=!0,this.attachElement("value25").text($.i18n._("Offset Description")+":"),this.attachElement("value27").text($.i18n._("Offset Routing")+":"),this.attachElement("value28").text($.i18n._("Offset Account")+":")),this.attachElement("value29").text($.i18n._("File Header Line")+":"),this.attachElement("value30").text($.i18n._("File Trailer Line")+":")):20!=i&&30!=i&&50!=i||($(this.edit_view_tab.find("ul li")[1]).show(),this.attachElement("value5").text($.i18n._("Originator ID")+":"),this.attachElement("value6").text($.i18n._("Originator Short Name")+":"),this.attachElement("value7").text($.i18n._("Data Center ID")+":"),this.attachElement("value26").text($.i18n._("Return Institution")+":"),this.attachElement("value27").text($.i18n._("Return Transit")+":"),this.attachElement("value28").text($.i18n._("Return Account")+":"),this.attachElement("value29").text($.i18n._("File Header Line")+":"),this.attachElement("value30").text($.i18n._("File Trailer Line")+":")))))}onTypeChange(){var e=this.edit_view_ui_dic.type_id.getValue(),t=this.edit_view_ui_dic.country.getValue()&&this.edit_view_ui_dic.country.getValue()!=TTUUID.zero_id?this.edit_view_ui_dic.country.getValue():this.current_edit_record.country;if($(this.edit_view_tab.find("ul li")[1]).show(),this.detachElement("data_format_id"),this.detachElement("last_transaction_number"),this.detachElement("value1_1"),this.detachElement("value1_2"),this.detachElement("value2"),this.detachElement("value3"),0!=t&&0!=e){2e3==e?this.attachElement("last_transaction_number").text($.i18n._("Last Check Number")+":"):3e3==e&&(this.attachElement("last_transaction_number").text($.i18n._("Last Batch Number")+":"),this.is_mass_editing||null==t||("US"==t?(this.attachElement("value1_2").text($.i18n._("Account Type")+":"),this.attachElement("value2").text($.i18n._("Routing")+":"),this.attachElement("value3").text($.i18n._("Account")+":"),Global.isFalseOrNull(this.current_edit_record.value1)&&(this.current_edit_record.value1=this.edit_view_ui_dic.value1_2.getValue(),this.current_edit_record.value1_2=this.edit_view_ui_dic.value1_2.getValue())):"CA"==t||-1!=$.inArray(t,["AG","BS","BB","BZ","DO","GY","HT","JM","DM","GD","KN","LC","VC","SR","TT"])?(this.attachElement("value1_1").text($.i18n._("Institution")+":"),this.attachElement("value2").text($.i18n._("Bank Transit")+":"),this.attachElement("value3").text($.i18n._("Account")+":")):(this.attachElement("value1_2").text($.i18n._("Account Type")+":"),this.attachElement("value2").text($.i18n._("Routing")+":"),this.attachElement("value3").text($.i18n._("Account")+":"),Global.isFalseOrNull(this.current_edit_record.value1)&&(this.current_edit_record.value1=this.edit_view_ui_dic.value1_2.getValue(),this.current_edit_record.value1_2=this.edit_view_ui_dic.value1_2.getValue())))),$("#tab_advanced_content_div .edit-view-form-item-div .edit-view-form-item-label-div").css("border-top-left-radius","0px"),$("#tab_advanced_content_div .edit-view-form-item-div:first .edit-view-form-item-label-div").css("border-top-left-radius","5px");var i=this;this.api.getOptions("data_format",{"type_id":e,"country":t},{async:!1,onResult:function(e){i.attachElement("data_format_id");var t=e.getResult();i.data_format_array=Global.buildRecordArray(t),Global.isSet(i.basic_search_field_ui_dic.data_format_id)&&i.basic_search_field_ui_dic.data_format_id.setSourceData(i.data_format_array),Global.isSet(i.adv_search_field_ui_dic.data_format_id)&&i.adv_search_field_ui_dic.data_format_id.setSourceData(i.data_format_array),i.edit_view_ui_dic.data_format_id.setSourceData(i.data_format_array),i.current_edit_record.data_format_id&&t[i.current_edit_record.data_format_id]?i.edit_view_ui_dic.data_format_id.setValue(i.current_edit_record.data_format_id):i.current_edit_record.data_format_id=i.edit_view_ui_dic.data_format_id.getValue(),i.onDataFormatChange()}}),this.editFieldResize()}}buildEditViewUI(){super.buildEditViewUI();var e=this,t={"tab_remittance_source_account":{"label":$.i18n._("Remittance Source Account")},"tab_advanced":{"label":$.i18n._("Advanced")},"tab_audit":!0};this.setTabModel(t),this.navigation.AComboBox({api_class:TTAPI.APIRemittanceSourceAccount,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_remittance_source_account",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_remittance_source_account").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var a=this.edit_view_tab.find("#tab_advanced").find(".first-column");this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(a);var l=Global.loadWidgetByName(FormItemType.AWESOME_BOX);l.AComboBox({api_class:TTAPI.APILegalEntity,allow_multiple_selection:!1,layout_name:"global_legal_entity",field:"legal_entity_id",set_any:!0,show_search_inputs:!0}),this.addEditFieldToColumn($.i18n._("Legal Entity"),l,i,""),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"status_id"}),l.setSourceData(e.status_array),this.addEditFieldToColumn($.i18n._("Status"),l,i,""),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),l,i),l.parent().width("45%"),(l=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),l,i),l.parent().width("45%"),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"type_id"}),l.setSourceData(e.type_array),this.addEditFieldToColumn($.i18n._("Type"),l,i,""),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"country",set_empty:!0}),l.setSourceData(e.country_array),this.addEditFieldToColumn($.i18n._("Country"),l,i),(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APICurrency,allow_multiple_selection:!1,layout_name:"global_currency",field:"currency_id",set_empty:!0,show_search_inputs:!0}),this.addEditFieldToColumn($.i18n._("Currency"),l,i),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"data_format_id"}),l.setSourceData(e.data_format_array),this.addEditFieldToColumn($.i18n._("Format"),l,i,"",null,!0),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"last_transaction_number",width:"60"}),this.addEditFieldToColumn($.i18n._("Last Transaction Number"),l,i,"",null,!0);for(var n=1;n<=30;n++){var r="200";2e3==this.edit_view_ui_dic.type_id.getValue()&&Global.getProductEdition()>=15&&(5==n||6==n)&&(r=42),29!=n&&30!=n||(r="500");var s=i;n>3&&(s=a),1==n?((l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"value1_1",validation_field:"value1",width:r}),this.addEditFieldToColumn($.i18n._("Value"+n),l,s,"",null,!0),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"value1_2",validation_field:"value1"}),l.setSourceData(e.ach_transaction_type_array),this.addEditFieldToColumn($.i18n._("Value"+n),l,s,"",null,!0)):(24==n?(l=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"value"+n}):(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"value"+n,width:r}),this.addEditFieldToColumn($.i18n._("Value"+n),l,s,"",null,!0))}"undefined"==typeof FormData?(l=Global.loadWidgetByName(FormItemType.IMAGE_BROWSER),this.file_browser=l.TImageBrowser({field:"signature",default_width:256,default_height:47}),this.file_browser.bind("imageChange",(function(t,i){(new ServiceCaller).uploadFile(i.getValue(),"object_type=remittance_source_account&object_id="+e.current_edit_record.id,{onResult:function(t){"true"===t.toLowerCase()?e.file_browser.setImage(e.getSignatureUrl()):TAlertManager.showAlert(t,"Error")}})}))):(l=Global.loadWidgetByName(FormItemType.IMAGE_AVD_BROWSER),this.file_browser=l.TImageAdvBrowser({field:"signature",callBack:function(t){(new ServiceCaller).uploadFile(t,"object_type=remittance_source_account&object_id="+e.current_edit_record.id,{onResult:function(t){"true"===t.toLowerCase()?e.file_browser.setImage(e.getSignatureUrl()):TAlertManager.showAlert(t,"Error")}})}})),this.is_edit?(this.attachElement("signature"),this.file_browser.setEnableDelete(!0),this.file_browser.bind("deleteClick",(function(t,i){e.api.deleteImage(e.current_edit_record.id,{onResult:function(t){e.onDeleteImage()}})}))):this.detachElement("signature"),this.addEditFieldToColumn($.i18n._("Signature"),this.file_browser,a,"",null,!0,!0)}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Legal Entity"),in_column:1,field:"legal_entity_id",layout_name:"global_legal_entity",api_class:TTAPI.APILegalEntity,multiple:!0,basic_search:!0,adv_search:!1,script_name:"LegalEntityView",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Created By"),in_column:3,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,script_name:"EmployeeView",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:3,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,script_name:"EmployeeView",form_item_type:FormItemType.AWESOME_BOX})]}}}}]);
//# sourceMappingURL=company-remittance_source_account-RemittanceSourceAccountViewController.bundle.js.map?v=0c2ede286fca0454dda9