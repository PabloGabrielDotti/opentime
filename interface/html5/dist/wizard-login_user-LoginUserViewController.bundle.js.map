{"version":3,"sources":["webpack://timetrex/./interface/html5/views/wizard/login_user/LoginUserViewController.js"],"names":["LoginUserViewController","BaseViewController","options","_","defaults","el","status_array","sex_array","user_group_array","country_array","province_array","company_api","super","this","permission_id","viewId","LoginUserWizardController","type","script_name","api","TTAPI","APIUser","key_name","APICompany","render","initData","target_type","show_new_btn","showNoResultCover","$this","grid_setup","container_selector","sub_grid_mode","baseViewSubTabGridResize","onGridSelectRow","current_view_div","search_panel","find","saved_layout_li","parent","offset_left","offset","left","Global","bodyWidth","css","width","callBack","option_name","field_name","initDropDownOptions","result","getSelectTabIndex","select_value","adv_search_field_ui_dic","getValue","setProvince","change","$","proxy","selectVal","setValue","val","m","getOptions","onResult","res","getResult","buildRecordArray","setSourceData","buildSearchFields","search_fields","SearchField","label","i18n","in_column","field","multiple","basic_search","adv_search","layout_name","form_item_type","FormItemType","AWESOME_BOX","TEXT_INPUT","TAG_INPUT","tree_mode","api_class","APIBranch","APIDepartment","APIUserTitle","COMBO_BOX"],"mappings":"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","file":"wizard-login_user-LoginUserViewController.bundle.js?v=7a02aa9a371c6e522916","sourcesContent":["export class LoginUserViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#login_user_view_container',\n\t\t\tstatus_array: null,\n\t\t\tsex_array: null,\n\t\t\tuser_group_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\tcompany_api: null,\n\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.permission_id = 'user';\n\n\t\tthis.viewId = 'LoginUser';\n\n\t\tif ( LoginUserWizardController.type === 'Client' ) {\n\t\t\tthis.script_name = 'ClientLoginPopUpEmployeeView';\n\t\t} else {\n\t\t\tthis.script_name = 'CompamyLoginPopUpEmployeeView';\n\t\t}\n\n\t\tthis.api = TTAPI.APIUser;\n\t\tthis.api.key_name = 'CompanyUser'; //search() needs to call getCompanyUser() rather than getUser().\n\n\t\tthis.company_api = TTAPI.APICompany;\n\n\t\tthis.render();\n\n\t\tthis.initData();\n\t}\n\n\t//No right click menu for this\n\tinitRightClickMenu( target_type ) {\n\t\treturn;\n\t}\n\n\tshowNoResultCover( show_new_btn ) {\n\t\tsuper.showNoResultCover( false );\n\t}\n\n\tgetGridSetup() {\n\t\tvar $this = this;\n\n\t\tvar grid_setup = {\n\t\t\tcontainer_selector: '.login-user-view', //Was: .view\n\t\t\tsub_grid_mode: false,\n\t\t};\n\n\t\tgrid_setup.setGridSize = function() {\n\t\t\t$this.baseViewSubTabGridResize( '.login-user-view' );\n\t\t};\n\n\t\tgrid_setup.onResizeGrid = function() {\n\t\t\t$this.baseViewSubTabGridResize( '.login-user-view' );\n\t\t};\n\n\t\tgrid_setup.onCellSelect = function() {\n\t\t\t$this.onGridSelectRow();\n\t\t};\n\n\t\treturn grid_setup;\n\t}\n\n\tsetCurrentViewPosition() {\n\t\tvar current_view_div = this.search_panel.find( '.layout-selector-div' );\n\t\tvar saved_layout_li = this.search_panel.find( 'a[ref=\\'saved_layout\\']' ).parent();\n\t\tvar offset_left = saved_layout_li.offset().left - ( Global.bodyWidth() / 2 - 500 );\n\t\tcurrent_view_div.css( 'left', offset_left + saved_layout_li.width() + 20 );\n\t}\n\n\tinitOptions( callBack ) {\n\n\t\tvar options = [\n\t\t\t{ option_name: 'status', field_name: null, api: null },\n\t\t\t{ option_name: 'sex', field_name: null, api: null },\n\t\t\t{ option_name: 'country', field_name: 'country', api: this.company_api }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSetSearchFilterFinished() {\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildAdvUIFinished() {\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\t\t\tthis.setProvince( selectVal );\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\t\t}, this ) );\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tfield: 'last_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Home Phone' ),\n\t\t\t\tfield: 'home_phone',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Number' ),\n\t\t\t\tfield: 'employee_number',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Sex' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'sex_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 3,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'SIN/SSN' ),\n\t\t\t\tfield: 'sin',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} )\n\t\t];\n\t}\n\n}"],"sourceRoot":""}