{"version":3,"sources":["webpack://timetrex/./interface/html5/views/hr/recruitment/JobApplicationViewController.js"],"names":["JobApplicationViewController","BaseViewController","options","_","defaults","el","status_array","type_array","priority_array","document_object_type_id","user_api","job_applicant_api","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIJobApplication","document_api","APIDocument","APIUser","APIJobApplicant","job_applicant_document_object_type_id","render","buildContextMenu","sub_view_mode","initData","setSelectRibbonMenuIfNecessary","initDropDownOption","buildEditViewUI","$this","tab_model","setTabModel","navigation","AComboBox","api_class","id","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_job_application_column1","edit_view_tab","find","edit_view_tabs","push","form_item_input","Global","loadWidgetByName","FormItemType","AWESOME_BOX","field","set_empty","widgetContainer","email_button","append","addEditFieldToColumn","APIJobVacancy","COMBO_BOX","TComboBox","setSourceData","default_args","setDefaultArgs","DATE_PICKER","TDatePicker","TEXT_AREA","TTextArea","width","parent","TAG_INPUT","TTagInput","object_type_id","SEPARATED_BOX","SeparatedBox","label","addClass","setEditViewDataDone","is_add","updateEmailLink","removeFormItemResumePdf","pdf_form_item_div","args","filter_data","object_id","current_edit_record","job_applicant_id","key_name","onResult","resp","urls","result_data","getResult","isArray","each","row","url","ServiceCaller","getURLByObjectType","document_revision_id","TTPDFViewer","target","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","exclude","ContextMenuIconName","copy","include","edit_job_applicant","group","icon","Icons","edit","edit_employee","employee","map","edit_view","length","remove","onMapClick","export_excel","onNavigationClick","getProductEdition","is_viewing","cells","getSelectedItems","is_mass_editing","then","module","processed_data_for_map","TTConvertMapData","processBasicFromGenericViewController","IndexViewController","openEditView","catch","importErrorHandler","column_filter","getFilterColumnsFromDisplayColumns","undefined","latitude","longitude","_getFilterColumnsFromDisplayColumns","iconName","temp_filter","selected_record","callBack","current_item","getSelectedItem","data","getJobApplicant","result","key","getUserDefaultData","onExportClick","doNotSetFocus","context_menu_array","isSet","selectContextMenu","setTotalDisplaySpan","len","grid_selected_length","getGridSelectIdArray","i","context_btn","attr","removeClass","add","setDefaultMenuAddIcon","setDefaultMenuEditIcon","view","setDefaultMenuViewIcon","mass_edit","setDefaultMenuMassEditIcon","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","cancel","setDefaultMenuCancelIcon","setDefaultMenuExportIcon","setDefaultMenuMapIcon","setContextMenuGroupVisibility","show","grid","selected_items","x","searchDone","TTPromise","resolve","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","getField","getValue","validate","filter_columns","email","res","document","getElementById","href","job_vacancy","loadSubView","container","beforeViewLoadedFun","afterViewLoadedFun","loadViewSource","template","html","sub_job_application_view_controller"],"mappings":"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","file":"hr-recruitment-JobApplicationViewController.bundle.js?v=f352505a309c05c30466","sourcesContent":["export class JobApplicationViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#job_application_view_container',\n\n\t\t\t// _required_files: {\n\t\t\t// \t15: ['leaflet-timetrex']\n\t\t\t// },\n\n\t\t\tstatus_array: null,\n\t\t\ttype_array: null,\n\t\t\tpriority_array: null,\n\t\t\tdocument_object_type_id: null,\n\t\t\tuser_api: null,\n\t\t\tjob_applicant_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'JobApplicationEditView.html';\n\t\tthis.permission_id = 'job_application';\n\t\tthis.viewId = 'JobApplication';\n\t\tthis.script_name = 'JobApplicationView';\n\t\tthis.table_name_key = 'job_application';\n\t\tthis.context_menu_name = $.i18n._( 'Job Application' );\n\t\tthis.navigation_label = $.i18n._( 'Job Application' ) + ':';\n\t\tthis.api = TTAPI.APIJobApplication;\n\t\tthis.document_api = TTAPI.APIDocument;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.job_applicant_api = TTAPI.APIJobApplicant;\n\t\tthis.document_object_type_id = 170;\n\t\tthis.job_applicant_document_object_type_id = 160;\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\t\tthis.setSelectRibbonMenuIfNecessary( 'JobApplication' );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status' );\n\t\tthis.initDropDownOption( 'type' );\n\t\tthis.initDropDownOption( 'priority' );\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_job_application': { 'label': $.i18n._( 'Job Application' ) },\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIJobApplication,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_application',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_job_application = this.edit_view_tab.find( '#tab_job_application' );\n\n\t\tvar tab_job_application_column1 = tab_job_application.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_job_application_column1 );\n\n\t\t// Job Applicant\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIJobApplicant,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_applicant',\n\t\t\tfield: 'job_applicant_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tvar widgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tvar email_button = $( '<a href =\"\" target=\"_blank\" id =\"job-email-link\"> <input class=\\'t-button\\' style=\\'margin-left: 5px; height: 25px;\\' type=\\'button\\' value=\\'' + $.i18n._( 'Email' ) + '\\'> </a>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( email_button );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Job Applicant' ), form_item_input, tab_job_application_column1, '', widgetContainer );\n\n\t\t// Job Vacancy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIJobVacancy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_vacancy',\n\t\t\tfield: 'job_vacancy_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Job Vacancy' ), form_item_input, tab_job_application_column1 );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_job_application_column1 );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_job_application_column1 );\n\n\t\t// Priority\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'priority_id' } );\n\t\tform_item_input.setSourceData( $this.priority_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Priority' ), form_item_input, tab_job_application_column1 );\n\n\t\t// Interviewer\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tfield: 'interviewer_user_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'job_application';\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Interviewer' ), form_item_input, tab_job_application_column1 );\n\n\t\t// Next Action Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'next_action_date' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Next Action Date' ), form_item_input, tab_job_application_column1, '', null );\n\n\t\t// Interview Date\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'interview_date' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Interview Date' ), form_item_input, tab_job_application_column1, '', null );\n\n\t\t// Notes\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'note', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_job_application_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 950 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_job_application_column1, '', null, null, true );\n\n\t\t// Resume Header\n\t\t// The resume itself will be added with manual code, not widgets, as we do not need the label, and do not want it tied into any standard widget logic/cleanup/update code.\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Resume' ) } );\n\t\tform_item_input.addClass('resume-label');\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_job_application_column1 );\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tif ( this.is_add ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updateEmailLink();\n\n\t\tthis.removeFormItemResumePdf();\n\n\t\t// TODO: Remove the old pdfjs framework code, and remove the requirejs calls for it.\n\t\t// TODO: Also figure out how we can put the cmap stuff into webpack generated dist folder, so that we dont have to manually update it in framework directorty.\n\n\t\tvar $this = this;\n\n\t\tvar pdf_form_item_div = $('<div></div>').addClass('edit-view-form-item-div form_item_resume_pdf');\n\t\t$this.edit_view_tab.find( '#tab_job_application' ).find( '.first-column' ).append( pdf_form_item_div );\n\n\t\t// API call to get the document URLs\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\t\targs.filter_columns = {\n\t\t\t'id': true,\n\t\t\t'document_revision_id': true\n\t\t};\n\t\targs.filter_data.object_id = this.current_edit_record.job_applicant_id;\n\t\targs.filter_data.object_type_id = this.job_applicant_document_object_type_id;\n\t\tthis.document_api['get' + this.document_api.key_name]( args, {\n\t\t\tonResult: function( resp ) {\n\t\t\t\tvar urls = [];\n\t\t\t\tvar result_data = resp.getResult();\n\t\t\t\tif ( result_data !== true && _.isArray( result_data ) ) {\n\t\t\t\t\t// Once we have the document URL's put them into an Array.\n\t\t\t\t\t_.each( result_data, function( row ) {\n\t\t\t\t\t\tvar url = ServiceCaller.getURLByObjectType( 'file_download' ) + '&object_type=document&parent_id=' + row.id;\n\t\t\t\t\t\turl = url + '&parent_object_type_id=' + $this.job_applicant_document_object_type_id;\n\t\t\t\t\t\turl = url + '&object_id=' + row.document_revision_id;\n\t\t\t\t\t\turls.push( url );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tpdf_form_item_div.append('<p class=\"no-documents-message\">' + $.i18n._( 'Sorry, no documents have been attached yet.' ) + '</p>' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Now that we have retrieved the array of PDF documents, initiate the PDF Viewer.\n\t\t\t\tnew TTPDFViewer({\n\t\t\t\t\turls: urls,\n\t\t\t\t\ttarget: pdf_form_item_div[0]\n\t\t\t\t});\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'job_application';\n\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Job Applicant' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'job_applicant_id',\n\t\t\t\tlayout_name: 'global_job_applicant',\n\t\t\t\tapi_class: TTAPI.APIJobApplicant,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Job Vacancy' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'job_vacancy_id',\n\t\t\t\tlayout_name: 'global_job_vacancy',\n\t\t\t\tapi_class: TTAPI.APIJobVacancy,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Interviewer' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'interviewer_user_id',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Priority' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'priority_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tobject_type_id: 950,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [ContextMenuIconName.copy],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit<br>Applicant' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_job_applicant,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.edit\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Hire Applicant' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Map' ),\n\t\t\t\t\tid: ContextMenuIconName.map,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.map\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tremoveFormItemResumePdf() {\n\t\tif ( this.edit_view && this.edit_view.find( '.form_item_resume_pdf' ).length > 0 ) {\n\t\t\tthis.edit_view.find( '.form_item_resume_pdf' ).remove();\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.map:\n\t\t\t\tthis.onMapClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.edit_job_applicant:\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonMapClick() {\n\t\t// only trigger map load in specific product editions.\n\t\tif ( ( Global.getProductEdition() >= 15 ) ) {\n\t\t\tthis.is_viewing = false;\n\t\t\tvar cells = this.getSelectedItems();\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\timport( /* webpackChunkName: \"leaflet-timetrex\" */ '@/framework/leaflet/leaflet-timetrex' ).then(( module )=>{\n\t\t\t\t\tvar processed_data_for_map = module.TTConvertMapData.processBasicFromGenericViewController( cells );\n\t\t\t\t\tIndexViewController.openEditView( this, 'Map', processed_data_for_map );\n\t\t\t\t}).catch( Global.importErrorHandler );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = super.getFilterColumnsFromDisplayColumns();\n\t\t//Fixes cannot set property job_applicant_id of undefined\n\t\tif ( column_filter == undefined ) {\n\t\t\tcolumn_filter = {};\n\t\t}\n\t\tcolumn_filter.job_applicant_id = true;\n\t\tcolumn_filter.latitude = true;\n\t\tcolumn_filter.longitude = true;\n\t\treturn this._getFilterColumnsFromDisplayColumns( column_filter );\n\t}\n\n\tonNavigationClick( iconName ) {\n\t\tvar $this = this;\n\t\tvar filter;\n\t\tvar temp_filter;\n\t\tvar selected_record;\n\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.edit_job_applicant:\n\t\t\t\tvar current_item = this.getSelectedItem();\n\t\t\t\tIndexViewController.openEditView( $this, 'JobApplicant', current_item.job_applicant_id );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tfilter = { filter_data: {} };\n\t\t\t\tgetUserDefaultData( function( data ) {\n\t\t\t\t\ttemp_filter = {};\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\tselected_record = $this.getSelectedItem();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselected_record = $this.current_edit_record;\n\t\t\t\t\t}\n\t\t\t\t\ttemp_filter.filter_data = {};\n\t\t\t\t\ttemp_filter.filter_data.id = [selected_record.job_applicant_id];\n\t\t\t\t\t$this.job_applicant_api.getJobApplicant( temp_filter, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\t\t\tif ( Global.isArray(result_data) && result_data[0] ) {\n\t\t\t\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t\t\t\tfor ( var key in data ) {\n\t\t\t\t\t\t\t\t\tif ( !result_data[key] ) {\n\t\t\t\t\t\t\t\t\t\tresult_data[key] = data[key];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tIndexViewController.openEditView( $this, 'Employee', result_data );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\tfunction getUserDefaultData( callBack ) {\n\t\t\t\t$this.user_api.getUserDefaultData( {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar data = result.getResult();\n\t\t\t\t\t\tcallBack( data );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\tthis.onExportClick( 'export' + this.api.key_name );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/* jshint ignore:start */\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_job_applicant:\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.map:\n\t\t\t\t\tthis.setDefaultMenuMapIcon( context_btn );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetDefaultMenuMapIcon( context_btn ) {\n\t\tif ( Global.getProductEdition() <= 10 ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tvar show = false;\n\t\tif ( this.grid ) {\n\t\t\tvar selected_items = this.getSelectedItems();\n\t\t\tif ( selected_items.length > 0 ) {\n\t\t\t\tfor ( var x = 0; x < selected_items.length; x++ ) {\n\t\t\t\t\tif ( selected_items[x] && selected_items[x].latitude && selected_items[x].longitude ) {\n\t\t\t\t\t\tshow = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( show ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuMapIcon( context_btn ) {\n\t\tthis.setDefaultMenuMapIcon( context_btn );\n\t}\n\n\tsearchDone() {\n\t\tsuper.searchDone();\n\t\tTTPromise.resolve( 'JobAppView', 'init' );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\n\t\tif ( !this.current_edit_record ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tthis.current_edit_record[key] = target.getValue();\n\n\t\tif ( key === 'job_applicant_id' ) {\n\t\t\tthis.updateEmailLink();\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tupdateEmailLink() {\n\t\t// Get job applicants email address and update mailto link.\n\t\tvar data = {};\n\t\tdata.filter_data = { id: this.current_edit_record.job_applicant_id };\n\t\tdata.filter_columns = { email: true };\n\n\t\tthis.job_applicant_api.getJobApplicant( data, {\n\t\t\tonResult: ( res ) => {\n\t\t\t\tvar result = res.getResult();\n\t\t\t\tif ( result[0].email ) {\n\t\t\t\t\tdocument.getElementById( 'job-email-link' ).href = 'mailto:' + result[0].email + '?subject=' + $.i18n._( 'Re' ) + ': ' + this.current_edit_record.job_vacancy + ' ' + $.i18n._( 'Application' );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\t/* jshint ignore:end */\n\n}\n\nJobApplicationViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'JobApplication', 'SubApplicationView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_job_application_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};"],"sourceRoot":""}