{"version":3,"sources":["webpack://timetrex/./interface/html5/views/company/companies/CompaniesViewController.js"],"names":["CompaniesViewController","BaseViewController","options","_","defaults","el","status_array","country_array","province_array","e_province_array","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APICompany","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","callBack","initDropDownOptions","option_name","field_name","result","select_value","search_panel","getSelectTabIndex","basic_search_field_ui_dic","getValue","setProvince","adv_search_field_ui_dic","change","proxy","selectVal","setValue","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","c_value","current_edit_record","edit_view_ui_dic","onTypeChange","validate","onCountryChange","exclude","ContextMenuIconName","mass_edit","copy","include","label","id","login","group","icon","Icons","employee","doNotSetFocus","context_menu_array","setDefaultMenu","len","length","grid_selected_length","getGridSelectIdArray","i","context_btn","find","attr","setDefaultMenuEmployeeIcon","setEditMenu","setEditMenuEmployeeIcon","viewPermissionValidate","addClass","removeClass","onLoginClick","onEmployeeClick","filter","filter_data","company_id","value","Global","addViewTab","window","location","href","IndexViewController","goToView","args","LocalCacheData","extra_filter_for_next_open_view","openWizard","user_id","NewSession","$this","buildEditViewUI","tab_model","setTabModel","form_item_input","widgetContainer","tab_company","edit_view_tab","tab_company_column1","tab_company_column2","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","edit_view_tabs","push","loadWidgetByName","FormItemType","COMBO_BOX","TComboBox","field","setSourceData","addEditFieldToColumn","product_edition_array","TEXT_INPUT","TTextInput","width","parent","industry_array","set_empty","AWESOME_BOX","APIUser","customSearchFilter","setCompanyIdFilter","tab_password_policy_column1","password_policy_type_array","password_minimum_permission_level_array","password_minimum_strength_array","append","tab_ldap_column1","ldap_authentication_type_array","widget","isSet","setCountryValue","collectUIDataToCurrentEditRecord","setEditViewDataDone","ldap_authentication_type_id","detachElement","attachElement","editFieldResize","val","m","getOptions","onResult","res","getResult","buildRecordArray","refresh","province_widget","province","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type"],"mappings":"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","file":"company-companies-CompaniesViewController.bundle.js?v=bc0a07cd8459b572efa7","sourcesContent":["export class CompaniesViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#companies_view_container',\n\t\t\tstatus_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\te_province_array: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'CompaniesEditView.html';\n\t\tthis.permission_id = 'company';\n\t\tthis.viewId = 'Companies';\n\t\tthis.script_name = 'CompanyView';\n\t\tthis.table_name_key = 'company';\n\t\tthis.context_menu_name = $.i18n._( 'Companies' );\n\t\tthis.navigation_label = $.i18n._( 'Companies' ) + ':';\n\t\tthis.api = TTAPI.APICompany;\n\n\t\tthis.render();\n\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions( callBack ) {\n\t\tvar $this = this;\n\n\t\tvar options = [\n\t\t\t{ option_name: 'status' },\n\t\t\t{ option_name: 'product_edition' },\n\t\t\t{ option_name: 'industry' },\n\t\t\t{ option_name: 'country', field_name: 'country' },\n\t\t\t{ option_name: 'password_policy_type' },\n\t\t\t{ option_name: 'password_minimum_permission_level', field_name: 'password_minimum_permission_level' },\n\t\t\t{ option_name: 'password_minimum_strength', field_name: 'password_minimum_strength' },\n\t\t\t{ option_name: 'ldap_authentication_type' }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\n\t\t} );\n\t}\n\n\tonSetSearchFilterFinished() {\n\t\tvar combo;\n\t\tvar select_value;\n\t\tif ( this.search_panel.getSelectTabIndex() === 0 ) {\n\t\t\tcombo = this.basic_search_field_ui_dic['country'];\n\t\t\tselect_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t} else if ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tcombo = this.adv_search_field_ui_dic['country'];\n\t\t\tselect_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tonBuildBasicUIFinished() {\n\t\tthis.basic_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.basic_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.basic_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tswitch ( key ) {\n\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( key === 'ldap_authentication_type_id' ) {\n\n\t\t\tthis.onTypeChange();\n\t\t}\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [ContextMenuIconName.mass_edit, ContextMenuIconName.copy],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Login' ),\n\t\t\t\t\tid: ContextMenuIconName.login,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.login\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Employees' ),\n\t\t\t\t\tid: ContextMenuIconName.employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.setDefaultMenu( doNotSetFocus );\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.employee:\n\t\t\t\t\tthis.setDefaultMenuEmployeeIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetEditMenu( doNotSetFocus ) {\n\t\tsuper.setEditMenu( doNotSetFocus );\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.employee:\n\t\t\t\t\tthis.setEditMenuEmployeeIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetEditMenuEmployeeIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.viewPermissionValidate( 'user' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\t/* jshint ignore:end */\n\tsetDefaultMenuEmployeeIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.viewPermissionValidate( 'user' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\t/* jshint ignore:start */\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.login:\n\t\t\t\tthis.onLoginClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.employee:\n\t\t\t\tthis.onEmployeeClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonEmployeeClick() {\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar filter = { filter_data: {} };\n\t\tvar company_id = { value: grid_selected_id_array[0] };\n\t\tfilter.filter_data.company_id = company_id;\n\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Companies' ), window.location.href );\n\t\tIndexViewController.goToView( 'Employee', filter );\n\t}\n\n\tonLoginClick() {\n\n\t\tvar $this = this;\n\t\tvar args = {};\n\n\t\targs.company_id = this.getGridSelectIdArray()[0];\n\n\t\tLocalCacheData.extra_filter_for_next_open_view = {};\n\t\tLocalCacheData.extra_filter_for_next_open_view.filter_data = args;\n\n\t\tIndexViewController.openWizard( 'LoginUserWizard', null, function( user_id ) {\n\t\t\tGlobal.NewSession( user_id );\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\t\tvar $this = this;\n\t\tsuper.buildEditViewUI();\n\n\t\tvar tab_model = {\n\t\t\t'tab_company': { 'label': $.i18n._( 'Company' ) },\n\t\t\t'tab_password_policy': { 'label': $.i18n._( 'Password Policy' ) },\n\t\t\t'tab_ldap': { 'label': $.i18n._( 'LDAP Authentication' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\t//Tab 0 start\n\n\t\tvar tab_company = this.edit_view_tab.find( '#tab_company' );\n\n\t\tvar tab_company_column1 = tab_company.find( '.first-column' );\n\t\tvar tab_company_column2 = tab_company.find( '.second-column' );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APICompany,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_company',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_company_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_company_column2 );\n\n\t\t// Status\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_company_column1, '' );\n\n\t\t// Product Edition\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'product_edition_id' } );\n\t\tform_item_input.setSourceData( $this.product_edition_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Product Edition' ), form_item_input, tab_company_column1 );\n\n\t\t// Full Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Full Name' ), form_item_input, tab_company_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Short Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'short_name', width: 128 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Short Name' ), form_item_input, tab_company_column1 );\n\n\t\t// Industry\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'industry_id' } );\n\t\tform_item_input.setSourceData( $this.industry_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Industry' ), form_item_input, tab_company_column1 );\n\n\t\t// Address (Line 1)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address1', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 1)' ), form_item_input, tab_company_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Address (Line 2)\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address2', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 2)' ), form_item_input, tab_company_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'city', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_company_column1 );\n\n\t\t//Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'country', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_company_column1 );\n\n\t\t//Province / State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'province' } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province/State' ), form_item_input, tab_company_column1 );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'postal_code', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_company_column1, '' );\n\n\t\t// Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'work_phone', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Phone' ), form_item_input, tab_company_column2, '' );\n\n\t\t// Fax\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'fax_phone', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fax' ), form_item_input, tab_company_column2 );\n\n\t\t// Administrative Contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'admin_contact',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} )\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Administrative Contact' ), form_item_input, tab_company_column2 );\n\n\t\t// billing contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'billing_contact',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} )\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Billing Contact' ), form_item_input, tab_company_column2 );\n\t\t// Primary Support contact\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'support_contact',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} )\n\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Primary Support Contact' ), form_item_input, tab_company_column2 );\n\n\t\t// Company Settings\n\t\t// form_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\t// form_item_input.SeparatedBox( {label: $.i18n._( 'Company Settings' )} );\n\t\t// this.addEditFieldToColumn( null, form_item_input, tab_company_column2 );\n\n\t\t// // Enable Second Surname\n\t\t// form_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t// form_item_input.TCheckbox( {field: 'enable_second_last_name'} );\n\t\t// this.addEditFieldToColumn( $.i18n._( 'Enable Second Surname' ), form_item_input, tab_company_column2, '' );\n\n\t\t//Tab 1 start\n\n\t\tvar tab_password_policy = this.edit_view_tab.find( '#tab_password_policy' );\n\n\t\tvar tab_password_policy_column1 = tab_password_policy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[1] = [];\n\n\t\tthis.edit_view_tabs[1].push( tab_password_policy_column1 );\n\n\t\t// Password Policy\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'password_policy_type_id' } );\n\t\tform_item_input.setSourceData( $this.password_policy_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Password Policy' ), form_item_input, tab_password_policy_column1, '' );\n\n\t\t// Minimum Permission Level\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'password_minimum_permission_level' } );\n\t\tform_item_input.setSourceData( $this.password_minimum_permission_level_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Permission Level' ), form_item_input, tab_password_policy_column1 );\n\n\t\t// Minimum Strength\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'password_minimum_strength' } );\n\t\tform_item_input.setSourceData( $this.password_minimum_strength_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Strength' ), form_item_input, tab_password_policy_column1 );\n\n\t\t// Minimum Length\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'password_minimum_length', width: 30 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Length' ), form_item_input, tab_password_policy_column1 );\n\n\t\t// Minimum Age\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'password_minimum_age', width: 30 } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'in Days' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Age' ), form_item_input, tab_password_policy_column1, '', widgetContainer );\n\n\t\t// Maximum Age\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'password_maximum_age', width: 30 } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'in Days' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Maximum Age' ), form_item_input, tab_password_policy_column1, '', widgetContainer );\n\n\t\t//Tab 1 start\n\n\t\tvar tab_ldap = this.edit_view_tab.find( '#tab_ldap' );\n\n\t\tvar tab_ldap_column1 = tab_ldap.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[2] = [];\n\n\t\tthis.edit_view_tabs[2].push( tab_ldap_column1 );\n\n\t\t//\n\t\t// LDAP Authentication\n\t\t//\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'ldap_authentication_type_id' } );\n\t\tform_item_input.setSourceData( $this.ldap_authentication_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'LDAP Authentication' ), form_item_input, tab_ldap_column1 );\n\n\t\t// Server\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_host', width: 240 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(ie: ldap.example.com or ldaps://ldap.example.com for SSL)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Server' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Port\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_port', width: 50 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(ie: 389 or 636 for SSL)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Port' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Bind User Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_bind_user_name' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'Used to search for the user, for anonymous binding enter: anonymous' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bind User Name' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Bind Password\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_bind_password' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bind Password' ), form_item_input, tab_ldap_column1, '', null, true );\n\n\t\t// Base DN\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_base_dn', width: 300 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(ie: ou=People,dc=example,dc=com)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Base DN' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Bind Attribute\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_bind_attribute', width: 150 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'For binding the LDAP user. (ie: AD/openLDAP: userPrincipalName, Mac OSX: uid)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bind Attribute' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// User Filter\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_user_filter', width: 150 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'Additional filter parameters. (ie: is_timetrex_user=1)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'User Filter' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\n\t\t// Login Attribute\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'ldap_login_attribute', width: 150 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'For searching the LDAP user. (ie: AD: sAMAccountName, openLDAP: dn, Mac OSX: dn)' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Login Attribute' ), form_item_input, tab_ldap_column1, '', widgetContainer, true );\n\t}\n\n\tsetCompanyIdFilter( args ) {\n\n\t\tvar company_id = this.current_edit_record.id;\n\n\t\tif ( !company_id ) {\n\t\t\tcompany_id = -1;\n\t\t}\n\t\tif ( !args ) {\n\t\t\targs = { filter_data: { company_id: company_id } };\n\n\t\t} else {\n\t\t\tif ( !args.filter_data ) {\n\t\t\t\targs.filter_data = { company_id: company_id };\n\t\t\t} else {\n\t\t\t\targs.filter_data.company_id = company_id;\n\t\t\t}\n\t\t}\n\n\t\treturn args;\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country':\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.onTypeChange();\n\t}\n\n\tonTypeChange() {\n\t\tif ( this.current_edit_record.ldap_authentication_type_id == 0 ) {\n\t\t\tthis.detachElement( 'ldap_host' );\n\t\t\tthis.detachElement( 'ldap_port' );\n\t\t\tthis.detachElement( 'ldap_bind_user_name' );\n\t\t\tthis.detachElement( 'ldap_bind_password' );\n\t\t\tthis.detachElement( 'ldap_base_dn' );\n\t\t\tthis.detachElement( 'ldap_bind_attribute' );\n\t\t\tthis.detachElement( 'ldap_user_filter' );\n\t\t\tthis.detachElement( 'ldap_login_attribute' );\n\t\t} else {\n\t\t\tthis.attachElement( 'ldap_host' );\n\t\t\tthis.attachElement( 'ldap_port' );\n\t\t\tthis.attachElement( 'ldap_bind_user_name' );\n\t\t\tthis.attachElement( 'ldap_bind_password' );\n\t\t\tthis.attachElement( 'ldap_base_dn' );\n\t\t\tthis.attachElement( 'ldap_bind_attribute' );\n\t\t\tthis.attachElement( 'ldap_user_filter' );\n\t\t\tthis.attachElement( 'ldap_login_attribute' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t\tthis.basic_search_field_ui_dic['province'].setSourceData( [] );\n\n\t\t} else {\n\n\t\t\tthis.api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\t\t\t\t\t$this.basic_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Short Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'short_name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Product Edition' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'product_edition_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n}"],"sourceRoot":""}