{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/textarea/TTextArea.js"],"names":["$","jQuery","fn","TTextArea","options","field","error_tip_box","static_width","opts","extend","defaults","$this","this","error_string","check_box","enabled","is_static_width","getEnabled","setEnabled","val","attr","children","addClass","removeAttr","removeClass","setCheckBox","eq","checked","isChecked","setMassEditMode","insertBefore","change","trigger","toString","indexOf","css","remove","setValue","setErrorStyle","errStr","show","isWarning","showErrorTip","sec","Global","isSet","loadWidgetByName","WidgetNamesDic","ERROR_TOOLTIP","ErrorTipBox","hasClass","hideErrorTip","clearErrorStyle","setField","getField","getValue","each","o","meta","data","width","height","rows","style","mouseover","length","mouseout","is","focusin","LocalCacheData","current_open_sub_controller","edit_view","is_viewing","current_open_primary_controller","view_mode_message","focusout"],"mappings":"kGAAA,IAAYA,KA6OPC,QA3OFC,GAAGC,UAAY,SAAUC,GAC1B,IAEIC,EAEAC,EAIAC,EARAC,EAAOR,EAAES,OAAQ,GAAIT,EAAEE,GAAGC,UAAUO,SAAUN,GAC9CO,EAAQC,KAERC,EAAe,GAGfC,EAAY,KACZC,GAAU,EAEVC,GAAkB,EA2NtB,OAzNAJ,KAAKK,WAAa,WACjB,OAAOF,GAGRH,KAAKM,WAAa,SAAUC,GAC3BJ,EAAUI,GACG,IAARA,GAAyB,KAARA,GACrBR,EAAMS,KAAM,WAAY,QACxBT,EAAMU,WAAWD,KAAM,WAAY,QACnCT,EAAMW,SAAU,0BAEhBX,EAAMY,WAAY,YAClBZ,EAAMU,WAAWE,WAAY,YAC7BZ,EAAMa,YAAa,0BAKrBZ,KAAKa,YAAc,SAAUN,GACvBL,IACJA,EAAUO,WAAWK,GAAI,GAAI,GAAGC,QAAUR,IAI5CP,KAAKgB,UAAY,WAChB,SAAKd,IAC6C,IAA5CA,EAAUO,WAAWK,GAAI,GAAI,GAAGC,UAQvCf,KAAKiB,gBAAkB,SAAUV,GACfA,IAGhBL,EAAYd,EAAG,qOAEL8B,aAAc9B,EAAGY,OAE3BE,EAAUiB,QAAQ,WACjBpB,EAAMqB,QAAS,iBAAkB,CAACrB,OAG9BK,GAAmBT,EAAa0B,WAAWC,QAAS,KAAQ,GAChEvB,EAAMwB,IAAK,QAAS,QAAU5B,EAAe,aAIzCO,IACJA,EAAUsB,SACVtB,EAAY,OAMfF,KAAKyB,SAAW,SAAUlB,GAEnBA,IACLA,EAAM,IAGPR,EAAMQ,IAAKA,IAIZP,KAAK0B,cAAgB,SAAUC,EAAQC,EAAMC,GACvCA,EACJzC,EAAGY,MAAOU,SAAU,eAEpBtB,EAAGY,MAAOU,SAAU,aAErBT,EAAe0B,EAEVC,GACJ5B,KAAK8B,gBAIP9B,KAAK8B,aAAe,SAAUC,GAEvBC,OAAOC,MAAOF,KACnBA,EAAM,GAGDrC,IAELA,GADAA,EAAgBsC,OAAOE,iBAAkBC,eAAeC,gBAC1BC,eAE1BjD,EAAGY,MAAOsC,SAAU,eACxB5C,EAAckC,KAAM5B,KAAMC,EAAc8B,GAAK,GAE7CrC,EAAckC,KAAM5B,KAAMC,EAAc8B,IAI1C/B,KAAKuC,aAAe,WAEdP,OAAOC,MAAOvC,IAClBA,EAAc8B,UAKhBxB,KAAKwC,gBAAkB,WACtBpD,EAAGY,MAAOY,YAAa,aACvBxB,EAAGY,MAAOY,YAAa,eACvBZ,KAAKuC,eACLtC,EAAe,IAGhBD,KAAKyC,SAAW,SAAUlC,GACzBd,EAAQc,GAGTP,KAAK0C,SAAW,WACf,OAAOjD,GAGRO,KAAK2C,SAAW,WACf,OAAO5C,EAAMQ,OAGdP,KAAKyB,SAAW,SAAUlB,GAEnBA,IACLA,EAAM,IAGPR,EAAMQ,IAAKA,IAGZP,KAAK4C,MAAM,WAEV,IAAIC,EAAIzD,EAAE0D,KAAO1D,EAAES,OAAQ,GAAID,EAAMR,EAAGY,MAAO+C,QAAWnD,EAE1DH,EAAQoD,EAAEpD,MAELoD,EAAEG,QAAWH,EAAEG,MAAQ,GAAKH,EAAEG,MAAM1B,QAAS,KAAQ,KACzDvB,EAAMiD,MAAOH,EAAEG,OACfrD,EAAekD,EAAEG,MACjB5C,GAAkB,GAGdyC,EAAEI,SAAYJ,EAAEI,OAAS,GAAKJ,EAAEI,OAAO3B,QAAS,KAAQ,IAC5DvB,EAAMkD,OAAQJ,EAAEI,QAGZJ,EAAEK,KAAO,EACbnD,EAAMS,KAAM,OAAQqC,EAAEK,MAEtBnD,EAAMS,KAAM,OAAQ,GAGhBqC,EAAEM,OACNpD,EAAMwB,IAAKsB,EAAEM,OAGd/D,EAAGY,MAAOmB,QAAQ,WACZjB,GACJH,EAAMc,aAAa,GAGpBd,EAAMqB,QAAS,iBAAkB,CAACrB,OAGnCX,EAAGY,MAAOoD,WAAW,WAEfjD,GACCF,GAAgBA,EAAaoD,OAAS,GAC1CtD,EAAM+B,aAAc,OAMvB1C,EAAGY,MAAOsD,UAAU,WACblE,EAAGW,GAAQwD,GAAI,WACpBxD,EAAMwC,kBAQRnD,EAAGY,MAAOwD,SAAS,WACZrD,EAeAF,GAAgBA,EAAaoD,OAAS,GAC1CtD,EAAM+B,aAAc,IAff5B,IACAuD,eAAeC,6BACnBD,eAAeC,4BAA4BC,WAC3CF,eAAeC,4BAA4BE,YAGhCH,eAAeI,iCAC1BJ,eAAeI,gCAAgCF,WAC/CF,eAAeI,gCAAgCD,cAJ/C3D,EAAe+B,OAAO8B,kBACtB/D,EAAM+B,aAAc,QAexB1C,EAAGY,MAAO+D,UAAU,WACnBhE,EAAMwC,qBAKDvC,MAIRZ,EAAEE,GAAGC,UAAUO,SAAW","file":"textarea-TTextArea.bundle.js?v=8378e78eab0c93f0d606","sourcesContent":["( function( $ ) {\n\n\t$.fn.TTextArea = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TTextArea.defaults, options );\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar error_string = '';\n\t\tvar error_tip_box;\n\t\tvar mass_edit_mode = false;\n\t\tvar check_box = null;\n\t\tvar enabled = true;\n\t\tvar static_width;\n\t\tvar is_static_width = false;\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\t$this.attr( 'readonly', 'true' );\n\t\t\t\t$this.children().attr( 'disabled', 'true' );\n\t\t\t\t$this.addClass( 't-text-area-readonly' );\n\t\t\t} else {\n\t\t\t\t$this.removeAttr( 'readonly' );\n\t\t\t\t$this.children().removeAttr( 'disabled' );\n\t\t\t\t$this.removeClass( 't-text-area-readonly' );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tif ( check_box ) {\n\t\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t\t}\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper textarea--mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\n\t\t\t\tif ( is_static_width && static_width.toString().indexOf( '%' ) > 0 ) {\n\t\t\t\t\t$this.css( 'width', 'calc(' + static_width + ' - 25px)' );\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\n\t\t\t$this.val( val );\n\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\t$( this ).addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\t$( this ).addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( $( this ).hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\t\t\t$( this ).removeClass( 'error-tip' );\n\t\t\t$( this ).removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.setField = function( val ) {\n\t\t\tfield = val;\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn $this.val();\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\n\t\t\t$this.val( val );\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t\tif ( o.width && ( o.width > 0 || o.width.indexOf( '%' ) > 0 ) ) {\n\t\t\t\t$this.width( o.width );\n\t\t\t\tstatic_width = o.width;\n\t\t\t\tis_static_width = true;\n\t\t\t}\n\n\t\t\tif ( o.height && ( o.height > 0 || o.height.indexOf( '%' ) > 0 ) ) {\n\t\t\t\t$this.height( o.height );\n\t\t\t}\n\n\t\t\tif ( o.rows > 0 ) {\n\t\t\t\t$this.attr( 'rows', o.rows );\n\t\t\t} else {\n\t\t\t\t$this.attr( 'rows', 3 );\n\t\t\t}\n\n\t\t\tif ( o.style ) {\n\t\t\t\t$this.css( o.style );\n\t\t\t}\n\n\t\t\t$( this ).change( function() {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t} );\n\n\t\t\t$( this ).mouseover( function() {\n\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t$( this ).mouseout( function() {\n\t\t\t\tif ( !$( $this ).is( ':focus' ) ) {\n\t\t\t\t\t$this.hideErrorTip();\n\t\t\t\t}\n\t\t\t} );\n\n//\t\t\t$( this ).bind( 'contextmenu', ( function( e ) {\n//\t\t\t\te.preventDefault();\n//\t\t\t}) );\n\n\t\t\t$( this ).focusin( function() {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( !check_box ) {\n\t\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).focusout( function() {\n\t\t\t\t$this.hideErrorTip();\n\t\t\t} );\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TTextArea.defaults = {};\n\n} )( jQuery );"],"sourceRoot":""}