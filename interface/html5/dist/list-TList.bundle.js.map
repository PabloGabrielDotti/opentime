{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/list/TList.js"],"names":["$","jQuery","fn","TList","options","field","error_tip_box","opts","extend","defaults","$this","this","source_data","select_value","set_empty","set_any","set_select_item_when_set_source_data","error_string","check_box","enabled","getEnabled","setEnabled","val","attr","addClass","removeAttr","removeClass","setCheckBox","children","eq","checked","isChecked","setMassEditMode","insertBefore","change","trigger","remove","setErrorStyle","errStr","show","isWarning","showErrorTip","sec","Global","isSet","loadWidgetByName","WidgetNamesDic","ERROR_TOOLTIP","ErrorTipBox","hasClass","hideErrorTip","clearErrorStyle","getField","getValue","result","select_items","len","length","i","item","push","setValue","find","filter","type","toString","prop","setSourceData","empty","addFirstItemToArray","value","append","label","each","o","meta","data","mass_edit_mode","click","LocalCacheData","current_open_sub_controller","edit_view","is_viewing","current_open_primary_controller","view_mode_message","mouseover","mouseout"],"mappings":"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","file":"list-TList.bundle.js?v=fbdd5db87dba4a9ab9b3","sourcesContent":["( function( $ ) {\n\n\t$.fn.TList = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TList.defaults, options );\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar source_data = null;\n\n\t\tvar select_value = null;\n\n\t\tvar set_empty = false;\n\n\t\tvar set_any = false;\n\n\t\tvar set_select_item_when_set_source_data = false;\n\n\t\tvar error_string = '';\n\t\tvar error_tip_box;\n\n\t\tvar mass_edit_mode = false;\n\n\t\tvar check_box = null;\n\n\t\tvar enabled = true;\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\t$this.attr( 'disabled', 'true' );\n\t\t\t\t$this.addClass( 't-select-readonly' );\n\t\t\t} else {\n\t\t\t\t$this.removeAttr( 'disabled' );\n\t\t\t\t$this.removeClass( 't-select-readonly' );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tif ( check_box ) {\n\t\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t\t}\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\t$( this ).addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\t$( this ).addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( $( this ).hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\t\t\t$( this ).removeClass( 'error-tip' );\n\t\t\t$( this ).removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\n\t\t\tvar result = [];\n\t\t\tvar select_items = $( this ).children( 'option:selected' );\n\t\t\tvar len = select_items.length;\n\t\t\tif ( len > 0 ) {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar item = select_items.eq( i );\n\t\t\t\t\tresult.push( item.attr( 'value' ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tselect_value = val;\n\n\t\t\tif ( !source_data || ( set_empty && source_data.length === 1 ) || ( set_any && source_data.length === 1 ) ) {\n\t\t\t\tset_select_item_when_set_source_data = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !val ) {\n\t\t\t\tif ( set_empty ) {\n\t\t\t\t\tval = '0';\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tval = '-1';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$( $( this ).find( 'option' ) ).removeAttr( 'selected' );\n\n\t\t\t$( $( this ).find( 'option' ) ).filter( function() {\n\n\t\t\t\tif ( val === null || val === undefined ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar result = false;\n\t\t\t\tif ( $.type( val ) === 'array' ) {\n\t\t\t\t\tfor ( var i = 0; i < val.length; i++ ) {\n\t\t\t\t\t\tvar item = val[i];\n\n\t\t\t\t\t\tif ( item.toString() === $( this ).attr( 'value' ) ) {\n\t\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = ( $( this ).attr( 'value' ) === val.toString() );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\n\t\t\t} ).prop( 'selected', true ).attr( 'selected', true );\n\n\t\t};\n\n\t\tthis.setSourceData = function( val ) {\n\n\t\t\t$( this ).empty();\n\n\t\t\tif ( !Global.isSet( val ) || val.length < 1 ) {\n\t\t\t\tif ( set_empty ) {\n\t\t\t\t\tval = Global.addFirstItemToArray( val, 'empty' );\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tval = Global.addFirstItemToArray( val, 'any' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( set_empty ) {\n\n\t\t\t\t\tif ( val[0].value !== '0' ) {\n\t\t\t\t\t\tval = Global.addFirstItemToArray( val, 'empty' );\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tif ( val[0].value !== '-1' ) {\n\t\t\t\t\t\tval = Global.addFirstItemToArray( val, 'any' );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsource_data = val;\n\n\t\t\tvar len = val.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar item = val[i];\n\t\t\t\t$( this ).append( '<option value=\"' + item.value + '\">' + item.label + '</option>' );\n\t\t\t}\n\n\t\t\tif ( set_select_item_when_set_source_data ) {\n\t\t\t\tthis.setValue( select_value );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tif ( o.set_empty ) {\n\t\t\t\tset_empty = o.set_empty;\n\t\t\t}\n\n\t\t\tif ( o.set_any ) {\n\t\t\t\tset_any = o.set_any;\n\t\t\t}\n\n\t\t\tif ( o.mass_edit_mode ) {\n\t\t\t\tmass_edit_mode = o.mass_edit_mode;\n\t\t\t}\n\n\t\t\tfield = o.field;\n\n\t\t\t$( this ).change( function() {\n\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t} );\n\n\t\t\t$( this ).click( function() {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( !check_box ) {\n\t\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = Global.view_mode_message;\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).mouseover( function() {\n\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t$( this ).mouseout( function() {\n\t\t\t\t$this.hideErrorTip();\n\t\t\t} );\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TList.defaults = {};\n\n} )( jQuery );"],"sourceRoot":""}