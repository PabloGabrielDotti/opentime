(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["wizard-reset_forgot_password-ResetForgotPasswordWizardController"],{1732:(t,e,s)=>{"use strict";s.r(e),s.d(e,{"ResetForgotPasswordWizardController":()=>r});class r extends BaseWizardController{constructor(t={}){_.defaults(t,{el:".wizard"}),super(t)}init(){this.title=$.i18n._("Reset Password"),this.steps=1,this.current_step=1,this.default_data&&void 0!==this.default_data.api_class?this.api=this.default_data.api_class:this.api=TTAPI.APIAuthentication,this.render()}render(){super.render(),this.initCurrentStep()}buildCurrentStepUI(){var t=this;switch(this.content_div.empty(),this.stepsWidgetDic[this.current_step]={},this.current_step){case 1:var e=this.getLabel();e.text($.i18n._("Please specify your new password")+":"),this.content_div.append(e);var s=$(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html")),r=s.find(".form-item-label"),i=s.find(".form-item-input-div"),a=this.getPasswordInput("new_password");r.text($.i18n._("New Password")+":"),i.append(a),this.content_div.append(s),r=(s=$(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html"))).find(".form-item-label"),i=s.find(".form-item-input-div");var o=this.getPasswordInput("confirm_password");r.text($.i18n._("New Password (Confirm)")+":"),i.unbind("keydown").bind("keydown",(function(e){13===e.keyCode&&t.onDoneClick()})),i.append(o),this.content_div.append(s),this.stepsWidgetDic[this.current_step][a.getField()]=a,this.stepsWidgetDic[this.current_step][o.getField()]=o}}saveCurrentStep(){this.stepsDataDic[this.current_step]={};var t=this.stepsDataDic[this.current_step],e=this.stepsWidgetDic[this.current_step];for(var s in this.current_step,e)e.hasOwnProperty(s)&&(t[s]=e[s].getValue())}buildCurrentStepData(){}onCloseClick(){$(this.el).remove(),LocalCacheData.current_open_wizard_controller=null,LocalCacheData.extra_filter_for_next_open_view=null;var t=Global.getBaseURL().split("#")[0];if(t+="#!m=Login",LocalCacheData.getAllURLArgs())for(var e in LocalCacheData.getAllURLArgs())"m"!==e&&"sm"!==e&&"key"!==e&&(t=t+"&"+e+"="+LocalCacheData.getAllURLArgs()[e]);Global.setURLToBrowser(t)}onDoneClick(){var t=this;super.onDoneClick(),this.saveCurrentStep();var e=this.stepsDataDic[1].new_password,s=this.stepsDataDic[1].confirm_password;this.stepsWidgetDic[1].new_password.clearErrorStyle(),this.stepsWidgetDic[1].confirm_password.clearErrorStyle(),void 0===LocalCacheData.getAllURLArgs().key?this.stepsWidgetDic[1].confirm_password.setErrorStyle($.i18n._("Password reset key is invalid, please try resetting your password again (u)"),!0):e?e!==s?this.stepsWidgetDic[1].confirm_password.setErrorStyle($.i18n._("New password does not match"),!0):this.api.passwordReset(LocalCacheData.getAllURLArgs().key,e,s,{onResult:function(e){e.isValid()?(t.onCloseClick(),t.call_back&&t.call_back()):TAlertManager.showErrorAlert(e)}}):this.stepsWidgetDic[1].new_password.setErrorStyle($.i18n._("New password can't be empty"),!0)}}r.type=""}}]);
//# sourceMappingURL=wizard-reset_forgot_password-ResetForgotPasswordWizardController.bundle.js.map?v=6a351baf9fae5b4a4c69