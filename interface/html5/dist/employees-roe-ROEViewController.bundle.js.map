{"version":3,"sources":["webpack://timetrex/./interface/html5/views/employees/roe/ROEViewController.js"],"names":["ROEViewController","BaseViewController","options","_","defaults","el","user_api","company_api","pay_period_schedule_api","user_status_array","status_array","code_array","type_array","user_generic_data_api","form_setup_item","super","this","permission_id","viewId","edit_view_tpl","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIROE","report_api","APIROEReport","APIUser","APICompany","APIPayPeriodSchedule","APIUserGenericData","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","$this","initDropDownOption","res","result","getResult","Global","buildRecordArray","shift","column_filter","_getFilterColumnsFromDisplayColumns","context_menu_model","groups","form","label","id","exclude","ContextMenuIconName","view","include","group","icon","Icons","sort_order","e_file","save_setup","pay_stub","pay_stubs","edit_employee","employee","timesheet","getProductEdition","publish","unshift","doNotSetFocus","context_menu_array","isSet","selectContextMenu","setTotalDisplaySpan","len","length","grid_selected_length","getGridSelectIdArray","i","context_btn","find","attr","removeClass","add","setDefaultMenuAddIcon","edit","setDefaultMenuEditIcon","mass_edit","setDefaultMenuMassEditIcon","copy","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","cancel","setDefaultMenuCancelIcon","setDefaultMenuViewIcon","print","setDefaultMenuPrintIcon","setDefaultMenuEfileIcon","setDefaultMenuSaveSetupIcon","setDefaultMenuPayStubIcon","setDefaultMenuEditEmployeeIcon","setDefaultMenuTimesheetIcon","export_excel","setDefaultMenuExportIcon","setContextMenuGroupVisibility","pId","addClass","PermissionManager","checkTopLevelPermission","editPermissionValidate","is_mass_editing","setEditMenuSaveIcon","setEditMenuAddIcon","setEditMenuEditIcon","setEditMenuMassEditIcon","setEditMenuCopyIcon","setEditMenuDeleteIcon","setEditMenuDeleteAndNextIcon","setEditMenuSaveAndContinueIcon","setEditMenuSaveAndAddIcon","setEditMenuSaveAndNextIcon","setEditMenuSaveAndCopyIcon","setEditMenuCopyAndAddIcon","import_icon","setEditMenuImportIcon","setEditMenuViewIcon","setEditMenuPrintIcon","setEditMenuEfileIcon","setEditMenuSaveSetupIcon","setEditMenuPayStubIcon","setEditMenuEditEmployeeIcon","setEditMenuTimeSheetIcon","current_edit_record","buildSearchFields","search_fields","SearchField","in_column","field","default_args","permission_section","multiple","basic_search","layout_name","api_class","form_item_type","FormItemType","AWESOME_BOX","TEXT_INPUT","set_default_menu","page_action","page_number","callBack","search","initFormSetup","key","hasOwnProperty","widget","edit_view_ui_dic","setCountryValue","setValue","setFormSetupData","collectUIDataToCurrentEditRecord","setEditViewDataDone","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","allow_multiple_selection","navigation_mode","show_search_inputs","setNavigation","form_item_input","widgetContainer","tab_roe","edit_view_tab","tab_form_setup","tab_roe_column1","tab_form_setup_column1","edit_view_tabs","push","loadWidgetByName","set_empty","setDefaultArgs","addEditFieldToColumn","COMBO_BOX","TComboBox","setSourceData","DATE_PICKER","TDatePicker","append","TTextInput","width","CHECKBOX","TCheckbox","APIAbsencePolicy","args","filter_data","type_id","status_id","APIPayStubEntryAccount","download","onDownloadClick","onNavigationClick","onSaveSetup","script","user_id","TTUUID","zero_id","is_default","getUserGenericData","onResult","result_data","data","absence_policy_ids","insurable_earnings_psea_ids","vacation_psea_ids","form_item","getValue","form_setup","name","getFormSetupData","setUserGenericData","isValid","isUUID","TAlertManager","showAlert","iconName","grid_selected_id_array","base_date","filter","user_ids","ids","edit_view","last_date","each","index","value","grid_selected_row","getRecordFromGridById","post_data","roe_id","IndexViewController","openEditView","addViewTab","window","location","href","goToView","0","1","doFormIFrameCall","getROEReport","retval","UserGenericStatusWindowController","open","LocalCacheData","getLoginUser","showErrorAlert","setTimeout","onExportClick","key_name","postData","APIFileDownload","onSaveResult","showStatusReport","refresh_id","onSaveAndNewResult","onSaveAndContinueResult","onSaveAndNextResult","onSaveAndCopyResult","user_generic_status_batch_id","getAttributeInAPIDetails","not_exist_id","form_setup_changed","showConfirmAlert","flag","target","doNotValidate","getEditViewTabIndex","setIsChanged","setMassEditingFieldsWhenFormChange","getField","c_value","first_date","pay_period_end_date","final_pay_stub_end_date","final_pay_stub_transaction_date","pay_period_type_id","release_accruals","generate_pay_stub","validate","records"],"mappings":"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","file":"employees-roe-ROEViewController.bundle.js?v=f4d9d376df738c868821","sourcesContent":["export class ROEViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#roe_view_container', //Must set el here and can only set string, so events can work\n\t\t\tuser_api: null,\n\t\t\tcompany_api: null,\n\t\t\tpay_period_schedule_api: null,\n\t\t\tuser_status_array: null,\n\t\t\tstatus_array: null,\n\t\t\tcode_array: null,\n\t\t\ttype_array: null,\n\n\t\t\tuser_generic_data_api: null,\n\n\t\t\tform_setup_item: null,\n\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\t//this._super('initialize', options );\n\t\tthis.permission_id = 'roe';\n\t\tthis.viewId = 'ROE';\n\t\tthis.edit_view_tpl = 'ROEEditView.html';\n\t\tthis.script_name = 'ROEView';\n\t\tthis.table_name_key = 'roe';\n\t\tthis.context_menu_name = $.i18n._( 'Record Of Employment' );\n\t\tthis.navigation_label = $.i18n._( 'Record Of Employment' ) + ':';\n\t\tthis.api = TTAPI.APIROE;\n\t\tthis.report_api = TTAPI.APIROEReport;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.pay_period_schedule_api = TTAPI.APIPayPeriodSchedule;\n\t\tthis.user_generic_data_api = TTAPI.APIUserGenericData;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\t\tthis.initData();\n\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status' );\n\t\tthis.initDropDownOption( 'user_status' );\n\t\tthis.initDropDownOption( 'code' );\n\n\t\tthis.initDropDownOption( 'type', 'pay_period_type_id', this.pay_period_schedule_api, function( res ) {\n\t\t\tvar result = res.getResult();\n\t\t\t$this['type_array'] = Global.buildRecordArray( result );\n\t\t\t$this['type_array'].shift();\n\t\t} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.user_id = true;\n\n\t\treturn this._getFilterColumnsFromDisplayColumns( column_filter, true );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\tgroups: {\n\t\t\t\tform: {\n\t\t\t\t\tlabel: $.i18n._( 'Form' ),\n\t\t\t\t\tid: this.viewId + 'Form'\n\t\t\t\t}\n\t\t\t},\n\t\t\texclude: [ContextMenuIconName.view],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'View' ),\n\t\t\t\t\tid: 'view_roe', //Don't bother with constant here, as its only used once.\n\t\t\t\t\tgroup: 'form',\n\t\t\t\t\ticon: Icons.view,\n\t\t\t\t\tsort_order: 2000\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'eFile' ),\n\t\t\t\t\tid: ContextMenuIconName.e_file,\n\t\t\t\t\tgroup: 'form',\n\t\t\t\t\ticon: Icons.e_file,\n\t\t\t\t\tsort_order: 2200\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Save Setup' ),\n\t\t\t\t\tid: ContextMenuIconName.save_setup,\n\t\t\t\t\tgroup: 'form',\n\t\t\t\t\ticon: Icons.save_setup,\n\t\t\t\t\tsort_order: 2900\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stubs' ),\n\t\t\t\t\tid: ContextMenuIconName.pay_stub,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_stubs\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit<br>Employee' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.timesheet\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif ( ( Global.getProductEdition() >= 15 ) ) {\n\t\t\tvar publish = {\n\t\t\t\tlabel: $.i18n._( 'Publish' ),\n\t\t\t\tid: 'publish_roe', //Don't bother with constant here, as its only used once.\n\t\t\t\tgroup: 'form',\n\t\t\t\ticon: 'payroll_remittance_agency-35x35.png',\n\t\t\t\tsort_order: 2100\n\t\t\t};\n\n\t\t\tcontext_menu_model.include.unshift( publish );\n\t\t}\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'view_roe':\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'publish_roe':\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.print:\n\t\t\t\t\tthis.setDefaultMenuPrintIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.e_file:\n\t\t\t\t\tthis.setDefaultMenuEfileIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_setup:\n\t\t\t\t\tthis.setDefaultMenuSaveSetupIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\t\tthis.setDefaultMenuPayStubIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setDefaultMenuTimesheetIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetDefaultMenuPrintIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuEfileIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuSaveSetupIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tcontext_btn.addClass( 'disable-image' );\n\t}\n\n\tsetDefaultMenuPayStubIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( !PermissionManager.checkTopLevelPermission( 'PayStub' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( !this.editPermissionValidate( 'user' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuTimesheetIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuViewIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenu() {\n\n\t\tthis.selectContextMenu();\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\tswitch ( id ) {\n\t\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setEditMenuAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setEditMenuMassEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setEditMenuCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setEditMenuDeleteIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setEditMenuDeleteAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setEditMenuSaveAndContinueIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setEditMenuSaveAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setEditMenuSaveAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setEditMenuSaveAndCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setEditMenuCopyAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\t\tthis.setEditMenuImportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'view_roe':\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.print:\n\t\t\t\t\tthis.setEditMenuPrintIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.e_file:\n\t\t\t\t\tthis.setEditMenuEfileIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_setup:\n\t\t\t\t\tthis.setEditMenuSaveSetupIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\t\tthis.setEditMenuPayStubIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setEditMenuEditEmployeeIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setEditMenuTimeSheetIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetEditMenuViewIcon( context_btn, pId ) {\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuPrintIcon( context_btn, pId ) {\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuEfileIcon( context_btn, pId ) {\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuSaveSetupIcon( context_btn, pId ) {\n\n//\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n//\t\t\tcontext_btn.addClass( 'disable-image' );\n//\t\t}\n\t}\n\n\tsetEditMenuPayStubIcon( context_btn, pId ) {\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuEditEmployeeIcon( context_btn, pId ) {\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuTimeSheetIcon( context_btn, pId ) {\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tvar default_args = { permission_section: 'roe' };\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Reason' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'code_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Comments' ),\n\t\t\t\tfield: 'comments',\n\t\t\t\tbasic_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'last_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tsearch( set_default_menu, page_action, page_number, callBack ) {\n\t\tif ( !this.form_setup_item ) {\n\t\t\tthis.initFormSetup( () => {\n\t\t\t\tsuper.search( set_default_menu, page_action, page_number, callBack );\n\t\t\t} );\n\t\t} else {\n\t\t\tsuper.search( set_default_menu, page_action, page_number, callBack );\n\t\t}\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.setFormSetupData();\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_roe': { 'label': $.i18n._( 'ROE' ) },\n\t\t\t'tab_form_setup': { 'label': $.i18n._( 'Form Setup' ), 'on_exit_callback': 'checkFormSetupSaved' },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIROE,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_roe',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_roe = this.edit_view_tab.find( '#tab_roe' );\n\t\tvar tab_form_setup = this.edit_view_tab.find( '#tab_form_setup' );\n\n\t\tvar tab_roe_column1 = tab_roe.find( '.first-column' );\n\t\tvar tab_form_setup_column1 = tab_form_setup.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[1] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_roe_column1 );\n\t\tthis.edit_view_tabs[1].push( tab_form_setup_column1 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t// Employee\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tfield: 'user_id',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'roe';\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_roe_column1, '' );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.user_status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_roe_column1 );\n\n\t\t// Reason\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'code_id' } );\n\t\tform_item_input.setSourceData( $this.code_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Reason' ), form_item_input, tab_roe_column1 );\n\n\t\t// Pay Period Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'pay_period_type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Period Type' ), form_item_input, tab_roe_column1 );\n\n\t\t// First Day Worked\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'first_date' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + '(' + $.i18n._( 'Or first day since last ROE' ) + ')' + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'First Day Worked' ), form_item_input, tab_roe_column1, '', widgetContainer );\n\n\t\t// Last Day For Which Paid\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'last_date' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + '(' + $.i18n._( 'Last day worked or received insurable earnings' ) + ')' + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Last Day For Which Paid' ), form_item_input, tab_roe_column1, '', widgetContainer );\n\n\t\t//Final Pay Period Ending Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'pay_period_end_date' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + '(' + $.i18n._( 'Pay period end date after Last Day For Which Paid' ) + ')' + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Final Pay Period Ending Date' ), form_item_input, tab_roe_column1, '', widgetContainer );\n\n\t\t// Expected Date of Recall\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'recall_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Expected Date of Recall' ), form_item_input, tab_roe_column1 );\n\n\t\t// Serial No\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'serial', width: 100 } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + '(' + $.i18n._( 'Optional' ) + ')' + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Serial No' ), form_item_input, tab_roe_column1, '', widgetContainer );\n\n\t\t// Comments\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'comments', width: 400 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Comments' ), form_item_input, tab_roe_column1 );\n\n\t\t// Release All Accruals\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'release_accruals' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Release All Accruals' ), form_item_input, tab_roe_column1 );\n\n\t\t// Generate Final Pay Stub\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'generate_pay_stub' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Generate Final Pay Stub' ), form_item_input, tab_roe_column1, '' );\n\n\t\t//Final Pay Stub End Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'final_pay_stub_end_date' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + '(' + $.i18n._( 'May be after Final Pay Period Ending Date if vacation/severence is paid separately' ) + ')' + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Final Pay Stub End Date' ), form_item_input, tab_roe_column1, '', widgetContainer );\n\n\t\t//Final Pay Stub Transaction Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'final_pay_stub_transaction_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Final Pay Stub Transaction Date' ), form_item_input, tab_roe_column1 );\n\n\t\t// Insurable Absence Policies\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAbsencePolicy,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_absences',\n\t\t\tfield: 'absence_policy_ids',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true\n\t\t} );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Insurable Absence Policies' ), form_item_input, tab_form_setup_column1, '' );\n\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\t\targs.filter_data.type_id = [10, 30, 40, 80];\n\t\targs.filter_data.status_id = 10;\n\n\t\t// Insurable Earnings (Box 15B)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tfield: 'insurable_earnings_psea_ids',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Insurable Earnings (Box 15B)' ), form_item_input, tab_form_setup_column1 );\n\n\t\t// Vacation Pay (Box 17A)\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tfield: 'vacation_psea_ids',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Vacation Pay (Box 17A)' ), form_item_input, tab_form_setup_column1, '' );\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.download:\n\t\t\t\tthis.onDownloadClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\tcase 'view_roe':\n\t\t\tcase ContextMenuIconName.print:\n\t\t\tcase ContextMenuIconName.e_file:\n\t\t\tcase 'publish_roe':\n\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.save_setup:\n\t\t\t\tthis.onSaveSetup();\n\t\t}\n\t}\n\n\tinitFormSetup( callBack ) {\n\t\tvar args = {};\n\t\tvar $this = this;\n\t\targs.filter_data = {};\n\t\targs.filter_data.script = 'roe';\n\t\targs.filter_data.user_id = TTUUID.zero_id;\n\t\targs.filter_data.is_default = true;\n\n\t\tthis.user_generic_data_api.getUserGenericData( args, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\t\t\t\t\t$this.form_setup_item = result_data[0];\n\t\t\t\t} else {\n\t\t\t\t\t$this.form_setup_item = {};\n\t\t\t\t}\n\n\t\t\t\tif ( callBack ) {\n\t\t\t\t\tcallBack();\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetFormSetupData() {\n\t\tif ( this.form_setup_item.data ) {\n\t\t\tthis.edit_view_ui_dic.absence_policy_ids.setValue( this.form_setup_item.data.absence_policy_ids );\n\t\t\tthis.edit_view_ui_dic.insurable_earnings_psea_ids.setValue( this.form_setup_item.data.insurable_earnings_psea_ids );\n\t\t\tthis.edit_view_ui_dic.vacation_psea_ids.setValue( this.form_setup_item.data.vacation_psea_ids );\n\t\t}\n\t}\n\n\tgetFormSetupData( form_item ) {\n\n\t\t//Error: TypeError: form_item is undefined in /interface/html5/framework/jquery.min.js?v=8.0.0-20141117-091433 line 2 > eval line 1015\n\t\tif ( !form_item ) {\n\t\t\tform_item = {};\n\t\t}\n\n\t\tform_item.form = {};\n\n\t\tform_item.form.absence_policy_ids = this.edit_view_ui_dic.absence_policy_ids.getValue();\n\t\tform_item.form.insurable_earnings_psea_ids = this.edit_view_ui_dic.insurable_earnings_psea_ids.getValue();\n\t\tform_item.form.vacation_psea_ids = this.edit_view_ui_dic.vacation_psea_ids.getValue();\n\n\t\treturn form_item;\n\t}\n\n\tonSaveSetup() {\n\t\tvar $this = this;\n\t\tvar form_setup = this.form_setup_item;\n\n\t\tform_setup.user_id = TTUUID.zero_id;\n\t\tform_setup.is_default = true;\n\n\t\tif ( !form_setup.id ) {\n\t\t\tform_setup.script = 'roe';\n\t\t\tform_setup.name = 'form';\n\t\t}\n\n\t\tform_setup.data = this.getFormSetupData( {} ).form;\n\n\t\t$this.form_setup_item = form_setup;\n\t\tthis.user_generic_data_api.setUserGenericData( form_setup, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\tif ( typeof $this.form_setup_item.id == 'undefined' && TTUUID.isUUID( result.getResult() ) ) {\n\t\t\t\t\t\t$this.form_setup_item.id = result.getResult();\n\t\t\t\t\t}\n\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Form Setup has been saved successfully' ) );\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Form Setup save failed, Please try again' ) );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar user_ids = [];\n\n\t\tvar ids = [];\n\n\t\tvar base_date;\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tbase_date = $this.current_edit_record.last_date;\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tbase_date = grid_selected_row.last_date;\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { roe_id: ids };\n\n\t\tif ( !$this.edit_view ) {\n\t\t\tif ( this.form_setup_item.data ) {\n\t\t\t\targs.form = this.form_setup_item.data;\n\t\t\t}\n\t\t} else {\n\t\t\targs.form = this.getFormSetupData( this.current_edit_record ).form;\n\t\t}\n\n\t\tvar post_data;\n\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Employee', user_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.filter_data = {};\n\t\t\t\t\tfilter.filter_data.user_id = user_ids[0];\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Record of Employment' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'PayStub', filter );\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t\tfilter.base_date = base_date;\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Record of Employment' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'view_roe':\n\t\t\t\tpost_data = { 0: args, 1: 'pdf_form' };\n\t\t\t\tthis.doFormIFrameCall( post_data );\n\t\t\t\tbreak;\n\t\t\tcase 'publish_roe':\n\t\t\t\tthis.report_api.getROEReport( args, 'pdf_form_publish_employee', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\t\t\tvar retval = result.getResult();\n\t\t\t\t\t\t\tif ( retval ) {\n\t\t\t\t\t\t\t\tUserGenericStatusWindowController.open( retval, LocalCacheData.getLoginUser().id );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.print:\n\t\t\t\tpost_data = { 0: args, 1: 'pdf_form_print' };\n\t\t\t\tthis.doFormIFrameCall( post_data );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.e_file:\n\t\t\t\tpost_data = { 0: args, 1: 'efile_xml' };\n\t\t\t\tthis.doFormIFrameCall( post_data );\n\n\t\t\t\t//Refresh grid within 5 seconds, hopefully the file has been downloaded by then.\n\t\t\t\t$this = this;\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t$this.search();\n\t\t\t\t}, 5000 );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\tthis.onExportClick( 'export' + this.api.key_name );\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tdoFormIFrameCall( postData ) {\n\t\tGlobal.APIFileDownload( 'APIROEReport', 'getROEReport', postData );\n\t}\n\n\tonSaveResult( result ) {\n\t\tsuper.onSaveResult( result );\n\t\tif ( result.isValid() ) {\n\t\t\tthis.showStatusReport( result, this.refresh_id );\n\t\t}\n\t}\n\n\tonSaveAndNewResult( result ) {\n\t\tsuper.onSaveAndNewResult( result );\n\t\tif ( result.isValid() ) {\n\t\t\tthis.showStatusReport( result, this.refresh_id );\n\t\t}\n\t}\n\n\tonSaveAndContinueResult( result ) {\n\t\tsuper.onSaveAndContinueResult( result );\n\t\tif ( result.isValid() ) {\n\t\t\tthis.showStatusReport( result, this.refresh_id );\n\t\t}\n\t}\n\n\tonSaveAndNextResult( result ) {\n\t\tsuper.onSaveAndNextResult( result );\n\t\tif ( result.isValid() ) {\n\t\t\tthis.showStatusReport( result, this.refresh_id );\n\t\t}\n\t}\n\n\tonSaveAndCopyResult( result ) {\n\t\tsuper.onSaveAndCopyResult( result );\n\t\tif ( result.isValid() ) {\n\t\t\tthis.showStatusReport( result, this.refresh_id );\n\t\t}\n\t}\n\n\tshowStatusReport( result, id ) {\n\t\tvar user_ids = id;\n\t\tvar user_generic_status_batch_id = result.getAttributeInAPIDetails( 'user_generic_status_batch_id' );\n\t\tif ( user_generic_status_batch_id && TTUUID.isUUID( user_generic_status_batch_id ) && user_generic_status_batch_id != TTUUID.zero_id && user_generic_status_batch_id != TTUUID.not_exist_id ) {\n\t\t\tUserGenericStatusWindowController.open( user_generic_status_batch_id, user_ids );\n\t\t}\n\t}\n\n\t/**\n\t * Originally copied from same function name in ReportBaseViewController\n\t * FIXME: refactor to base class when needed in other children\n\t * @param label\n\t */\n\tcheckFormSetupSaved( label ) {\n\t\tvar $this = this;\n\n\t\tlabel = $.i18n._( 'Form Setup' );\n\n\t\tif ( this.form_setup_changed ) {\n\t\t\t$this.form_setup_changed = false;\n\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'You have modified' ) + ' ' + label + ' ' + $.i18n._( 'data without saving, would you like to save your data now?' ), '', function( flag ) {\n\t\t\t\tif ( flag ) {\n\t\t\t\t\t$this.onSaveSetup( label );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tif ( this.getEditViewTabIndex() == 1 ) {\n\t\t\tthis.form_setup_changed = true;\n\t\t}\n\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tswitch ( key ) {\n\t\t\tcase 'user_id':\n\t\t\t\tthis.api['get' + this.api.key_name + 'DefaultData']( c_value, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tvar result = res.getResult();\n\t\t\t\t\t\t$this.edit_view_ui_dic['first_date'].setValue( result.first_date );\n\t\t\t\t\t\t$this.edit_view_ui_dic['last_date'].setValue( result.last_date );\n\t\t\t\t\t\t$this.edit_view_ui_dic['pay_period_end_date'].setValue( result.pay_period_end_date );\n\t\t\t\t\t\t$this.edit_view_ui_dic['final_pay_stub_end_date'].setValue( result.final_pay_stub_end_date );\n\t\t\t\t\t\t$this.edit_view_ui_dic['final_pay_stub_transaction_date'].setValue( result.final_pay_stub_transaction_date );\n\t\t\t\t\t\t$this.edit_view_ui_dic['pay_period_type_id'].setValue( result.pay_period_type_id );\n\t\t\t\t\t\t$this.edit_view_ui_dic['release_accruals'].setValue( result.release_accruals );\n\t\t\t\t\t\t$this.edit_view_ui_dic['generate_pay_stub'].setValue( result.generate_pay_stub );\n\n\t\t\t\t\t\t$this.current_edit_record.first_date = result.first_date;\n\t\t\t\t\t\t$this.current_edit_record.last_date = result.last_date;\n\t\t\t\t\t\t$this.current_edit_record.pay_period_end_date = result.pay_period_end_date;\n\t\t\t\t\t\t$this.current_edit_record.final_pay_stub_end_date = result.final_pay_stub_end_date;\n\t\t\t\t\t\t$this.current_edit_record.final_pay_stub_transaction_date = result.final_pay_stub_transaction_date;\n\t\t\t\t\t\t$this.current_edit_record.pay_period_type_id = result.pay_period_type_id;\n\t\t\t\t\t\t$this.current_edit_record.release_accruals = result.release_accruals;\n\t\t\t\t\t\t$this.current_edit_record.generate_pay_stub = result.generate_pay_stub;\n\t\t\t\t\t\t$this.current_edit_record[key] = c_value;\n\t\t\t\t\t\tif ( !doNotValidate ) {\n\t\t\t\t\t\t\t$this.validate();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.current_edit_record[key] = c_value;\n\t\t\t\tif ( !doNotValidate ) {\n\t\t\t\t\tthis.validate();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tuniformVariable( records ) {\n\n\t\trecords.form = this.getFormSetupData( records ).form;\n\n\t\treturn records;\n\t}\n\n}"],"sourceRoot":""}