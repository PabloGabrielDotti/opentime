{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/filebrowser/TImage.js","webpack://timetrex/./interface/html5/global/widgets/filebrowser/TImageAdvBrowser.js","webpack://timetrex/./interface/html5/views/employees/employee/EmployeeViewController.js"],"names":["$","fn","TImage","options","Global","addCss","field","opts","extend","defaults","this","clearErrorStyle","getField","getValue","setValue","val","d","Date","attr","getTime","each","o","meta","data","document","on","e","$this_image_widget","target","parents","height","top","file_browser_overlay","css","append","parent","find","TAlertManager","showConfirmAlert","i18n","_","flag","type","message","time","trigger","off","remove","jQuery","TImageAdvBrowser","image","result_form_data","$this","accept_filter","default_width","default_height","callBack","setEnable","btn","children","eq","show","hide","setImage","getCookie","onImageLoad","image_height","naturalHeight","image_width","width","naturalWidth","setEnableDelete","removeAttr","text","show_browser","isSet","name","deleteImageHandler","bind","IndexViewController","openWizard","form_data","EmployeeViewController","BaseViewController","el","user_api","user_group_api","company_api","hierarchyControlAPI","status_array","sex_array","user_group_array","country_array","province_array","e_province_array","sub_wage_view_controller","sub_user_contact_view_controller","sub_accrual_policy_user_modifier_view_controller","sub_log_view_controller","sub_company_tax_view_controller","sub_job_application_view_controller","sub_user_skill_view_controller","sub_user_education_view_controller","sub_user_membership_view_controller","sub_user_license_view_controller","sub_user_language_view_controller","sub_user_review_control_view_controller","sub_payment_methods_view_controller","hierarchy_options_dic","hierarchy_ui_model","show_hierarchy","select_company_id","sub_view_grid_autosize","events","super","edit_view_tpl","permission_id","viewId","script_name","table_name_key","document_object_type_id","context_menu_name","navigation_label","api","TTAPI","APIUser","LocalCacheData","getCurrentCompany","id","getProductEdition","job_api","APIJob","job_item_api","APIJobItem","APIUserGroup","APICompany","APIHierarchyControl","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","PermissionManager","validate","initPermission","jobUIValidate","show_job_ui","jobItemUIValidate","show_job_item_ui","context_menu_model","ContextMenuIconName","copy","label","timesheet","group","icon","Icons","schedule","pay_stub","pay_stubs","pay_stub_amendment","map","import_icon","permission_result","checkTopLevelPermission","sort_order","edit_only_mode","exclude","push","export_excel","$this_obj","initOptions","result","edit_view","doNext","initEditViewUI","getEmployeeData","current_edit_record","initEditView","showAlert","onCancelClick","showCurrentPasswordField","setEditViewDataDone","is_edit","loginUser","attachElement","detachElement","company","current_company","filter","filter_data","key_name","onResult","result_data","getResult","option_name","field_name","initDropDownOptions","len","length","complete_count","option_result","hierarchyPermissionValidate","getOptions","res_1","data_1","array","key","removeSortPrefix","value","getUserGroup","res","buildTreeRecord","sub_view_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","i","option_info","initDropDownOption","onGetOptionResult","doNotSetFocus","context_menu_array","selectContextMenu","setTotalDisplaySpan","grid_selected_length","getGridSelectIdArray","context_btn","removeClass","add","setDefaultMenuAddIcon","edit","setDefaultMenuEditIcon","view","setDefaultMenuViewIcon","mass_edit","setDefaultMenuMassEditIcon","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","login","setDefaultMenuLoginIcon","cancel","setDefaultMenuCancelIcon","setDefaultMenuImportIcon","setDefaultMenuPayStubIcon","setDefaultMenuExportIcon","setDefaultMenuMapIcon","setContextMenuGroupVisibility","pId","addClass","beforeLoadView","afterLoadUserSkillView","subViewController","parent_key","parent_value","parent_edit_record","parent_view_controller","postInit","afterLoadUserLicenseView","afterLoadUserLanguageView","afterLoadUserEducationView","afterLoadUserMembershipView","TTPromise","loadScript","firstColumn","edit_view_tab","trackView","UserSkillViewController","loadSubView","UserEducationViewController","UserMembershipViewController","UserLicenseViewController","UserLanguageViewController","wait","resolve","setDefaultMenu","loadViewSource","CompanyTaxDeductionViewController","afterLoadView","UserReviewControlViewController","RemittanceDestinationAccountViewController","is_subview","JobApplicationViewController","UserContactViewController","WageViewController","tpl","template","args","parent_view","AccrualPolicyUserModifierViewController","html","getUpgradeMessage","is_add","first_name_widget","edit_view_ui_dic","last_name_widget","user_name_widget","toLowerCase","replace","user_name","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","parseInt","hierarchy_control","widget","first_name_1","setDefaultUserName","last_name_1","first_name","last_name","manual_id","setJobItemValueWhenJobChanged","status_id","job_id","default_job_id","company_id","setCheckBox","onJobQuickSearch","onCountryChange","p_id","selected_item","tab","retval","subJobApplicationValidate","checkTabPermissions","dont_set_dic","setCountryValue","h_key","user_id","setDefaultArgs","file_browser","ServiceCaller","getURLByObjectType","is_viewing","span","setEnabled","collectUIDataToCurrentEditRecord","setEmailIcon","work_email","home_email","checkEmail","sendValidationEmail","isValid","hasOwnProperty","work_email_is_valid","edit_view_form_item_dic","home_email_is_valid","current_open_primary_controller","updateSelectUserAndRefresh","setCurrentEditViewState","openEditView","onAddResult","is_mass_editing","current_doing_context_action","grid_selected_id_array","mass_edit_record_ids","index","unique_columns","result1","linked_columns","getAPIFilters","set_default_menu","page_action","page_number","filter_columns","getFilterColumnsFromDisplayColumns","filter_items_per_page","pager_data","paging_type","filter_page","next_page","previous_page","last_page_number","current_page","select_layout","getSubViewFilter","convertLayoutFilterToAPIFilter","filter_sort","TTUUID","isUUID","refresh_id","last_select_ids","ids","isArray","removeNoResultCover","__createRowId","formatGridData","showNoResultCover","grid_source_data","grid","getData","found","new_record","setRowData","setData","concat","highLightGridRowById","getPagerData","paging_widget","setPagerData","paging_widget_2","reSelectLastSelectItems","setGridCellBackGround","ProgressBar","closeOverlay","is_last_page","autoOpenEditViewIfNecessary","searchDone","onImportClick","onNavigationClick","showProgressBar","address1","address2","city","province","country","postal_code","latitude","longitude","cells","getUser","async","then","module","processed_data_for_map","TTConvertMapData","processBasicFromGenericViewController","catch","importErrorHandler","search","iconName","user_ids","base_date","format","grid_selected_row","getRecordFromGridById","addViewTab","window","location","href","goToView","include_users","include_user_ids","select_date","removeEditView","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_employee","tab_employee_column1","tab_employee_column2","edit_view_tabs","form_item_input","loadWidgetByName","FormItemType","AWESOME_BOX","set_empty","addEditFieldToColumn","APILegalEntity","customSearchFilter","setCompanyIdFilter","COMBO_BOX","TComboBox","TEXT_INPUT","TTextInput","APIPermissionControl","APIPayPeriodSchedule","APIPolicyGroup","APIUserTitle","APICurrency","APIBranch","APIDepartment","setRealValueCallBack","job_coder","default_job_description","disable_keyup_event","job_item_coder","default_task_description","tree_mode","APIEthnicGroup","DATE_PICKER","TDatePicker","TAG_INPUT","TTagInput","object_type_id","tab_contact_info","tab_contact_info_column1","tab_contact_info_column2","FormData","IMAGE_BROWSER","TImageBrowser","enable_delete","uploadFile","IMAGE_AVD_BROWSER","onDeleteImage","deleteImage","TEXT_AREA","TTextArea","rows","tab_hierarchy_column1","getHierarchyControlOptions","buildRecordArray","size","ui_model","NoHierarchyBox","related_view_controller","tab_login","tab_login_column1","tab_login_column2","PASSWORD_INPUT","TPasswordInput","CHECKBOX","TCheckbox","quick_punch_id_description","login_expire_date_description","m","refresh","province_widget","search_panel","getSelectTabIndex","select_value","setProvince","change","proxy","selectVal","buildSearchFields","search_fields","SearchField","in_column","multiple","custom_first_label","default_item","basic_search","adv_search","form_item_type","any_item","cleanWhenUnloadView","column_filter","enable_system_columns","undefined","_getFilterColumnsFromDisplayColumns"],"mappings":"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","file":"employees-employee-EmployeeViewController.bundle.js?v=96dc4f0a7d1caddd6a0c","sourcesContent":["( function( $ ) {\n\n\t$.fn.TImage = function( options ) {\n\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImage.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\tif ( !val ) {\n\t\t\t\tthis.attr( 'src', '' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar d = new Date();\n\t\t\tthis.attr( 'src', val + '&t=' + d.getTime() );\n\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImage.defaults = {};\n\n\t$( document ).on( 'mouseover', '.file-browser img', function( e ) {\n\t\tvar $this_image_widget = $( e.target ).parents( '.file-browser' );\n\n\t\tif ( !$( '.file_browser_overlay' )[0] && $( e.target ).attr( 'enable-delete' ) == 1 ) {\n\t\t\tvar height = $( e.target ).height();\n\t\t\tvar top = ( height - 32 ) / 2;\n\t\t\tvar left = top;\n\n\t\t\tvar file_browser_overlay = $( '<div class=\"file_browser_overlay\"><img src=\"theme/default/images/delete-512.png\" style=\"position:absolute;width:32px;height:32px;top:' + top + 'px;left:' + left + 'px;\"></div>' );\n\t\t\tfile_browser_overlay.css( 'position', 'absolute' );\n\t\t\tfile_browser_overlay.css( 'top', '0px' );\n\t\t\tfile_browser_overlay.css( 'left', '0' );\n\t\t\tfile_browser_overlay.css( 'cursor', 'pointer' );\n\t\t\tfile_browser_overlay.css( 'height', height + 'px' );\n\t\t\tfile_browser_overlay.css( 'width', '100%' );\n\t\t\tfile_browser_overlay.css( 'background', 'rgba(255,255,255,0.85)' );\n\n\t\t\t$( e.target ).parents( '.file-browser' ).append( file_browser_overlay );\n\n\t\t\t$( document ).on( 'click', '.file_browser_overlay', function( e ) {\n\t\t\t\tvar img_src = $( e.target ).parent().find( 'img' ).attr( 'src' );\n\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'This will permanently delete the image. Are you sure?' ), '', function( flag ) {\n\t\t\t\t\tif ( flag ) {\n\t\t\t\t\t\tvar e = { type: 'deleteClick', message: 'Delete image clicked.', time: new Date() };\n\t\t\t\t\t\t$this_image_widget.trigger( e );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t$( document ).on( 'mouseleave', '.file-browser', function() {\n\t\t\t\t$( document ).off( 'click', '.file_browser_overlay' );\n\t\t\t\tif ( $( '.file_browser_overlay' )[0] ) {\n\t\t\t\t\tvar file_browser_overlay = $( this ).find( '.file_browser_overlay' );\n\t\t\t\t\tfile_browser_overlay.off().remove();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\n} )( jQuery );","( function( $ ) {\n\n\t$.fn.TImageAdvBrowser = function( options ) {\n\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImageAdvBrowser.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar name = 'filedata';\n\n\t\tvar accept_filter = '';\n\n\t\tvar default_width = 177;\n\t\tvar default_height = 42;\n\n\t\tvar callBack = null;\n\n\t\tvar enabled = true;\n\n\t\tvar image;\n\n\t\tvar result_form_data;\n\n\t\tthis.setEnable = function( val ) {\n\t\t\tenabled = val;\n\n\t\t\tvar btn = this.children().eq( 1 );\n\t\t\tif ( !val ) {\n\t\t\t\tbtn.hide();\n\t\t\t} else {\n\t\t\t\tbtn.show();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn result_form_data;\n\t\t};\n\n\t\tthis.setImage = function( val ) {\n\t\t\tif ( !val ) {\n\t\t\t\timage.attr( 'src', '' );\n\t\t\t\timage.hide();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar d = new Date();\n\t\t\timage.hide();\n\t\t\timage.attr( 'src', val + '&t=' + d.getTime() + '&X-CSRF-Token=' + getCookie( 'CSRF-Token' ) );\n\t\t\timage.css( 'height', 'auto' );\n\t\t\timage.css( 'width', 'auto' );\n\n\t\t};\n\n\t\tthis.onImageLoad = function( image ) {\n\n\t\t\tvar image_height = $( image ).height() > 0 ? $( image ).height() : image.naturalHeight;\n\t\t\tvar image_width = $( image ).width() > 0 ? $( image ).width() : image.naturalWidth;\n\n\t\t\tif ( image_height > default_height ) {\n\t\t\t\t$( image ).css( 'height', default_height );\n\n\t\t\t}\n\n\t\t\tif ( image_width > default_width ) {\n\t\t\t\t$( image ).css( 'width', default_width );\n\t\t\t\t$( image ).css( 'height', 'auto' );\n\t\t\t}\n\n\t\t\t$this.trigger( 'setSize' );\n\n\t\t\tif ( image_height < 5 ) {\n\t\t\t\t$( image ).hide();\n\t\t\t} else {\n\t\t\t\t$( image ).show();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setEnableDelete = function( val ) {\n\t\t\tvar image = $this.find( '.image' );\n\t\t\tif ( !val ) {\n\t\t\t\timage.removeAttr( 'enable-delete' );\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\timage.attr( 'enable-delete', 1 );\n\t\t\t}\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t\tvar $$this = this;\n\n\t\t\t$( this ).find( '#upload_image' ).text( $.i18n._( 'Upload Image' ) );\n\n\t\t\tif ( o.callBack ) {\n\t\t\t\tcallBack = o.callBack;\n\t\t\t}\n\n\t\t\tif ( o.show_browser === false ) {\n\t\t\t\t$( this ).children().eq( 1 ).hide();\n\t\t\t}\n\n\t\t\tif ( o.default_width > 0 ) {\n\t\t\t\tdefault_width = o.default_width;\n\t\t\t}\n\n\t\t\tif ( o.default_height > 0 ) {\n\t\t\t\tdefault_height = o.default_height;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.name ) ) {\n\t\t\t\tname = o.name;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( accept_filter ) ) {\n\t\t\t\taccept_filter = o.accept_filter;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.deleteImageHandler ) ) {\n\t\t\t\t$this.find( '.file-browser' ).on( 'deleteClick', function() {\n\t\t\t\t\to.deleteImageHandler();\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar browser = $( this ).children().eq( 1 );\n\t\t\tbrowser.bind( 'click', function() {\n\t\t\t\tIndexViewController.openWizard( 'UserPhotoWizard', null, function( form_data ) {\n\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack( form_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_form_data = form_data;\n\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\timage = $( this ).children().eq( 0 );\n\t\t\timage.on( 'load', function() {\n\t\t\t\t$this.onImageLoad( this );\n\t\t\t} );\n\n\t\t\timage.hide();\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImageAdvBrowser.defaults = {};\n\n} )( jQuery );","import '@/global/widgets/filebrowser/TImage';\nimport '@/global/widgets/filebrowser/TImageAdvBrowser';\n\nexport class EmployeeViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#employee_view_container', //Must set el here and can only set string, so events can work\n\n\t\t\t// _required_files: {\n\t\t\t// \t10: ['TImage', 'TImageAdvBrowser'],\n\t\t\t// \t15: ['leaflet', 'leaflet-timetrex'],\n\t\t\t// },\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tcompany_api: null,\n\t\t\thierarchyControlAPI: null,\n\t\t\tstatus_array: null,\n\t\t\tsex_array: null,\n\t\t\tuser_group_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\t\t\te_province_array: null,\n\n\t\t\tsub_wage_view_controller: null,\n\t\t\tsub_user_contact_view_controller: null,\n\t\t\tsub_accrual_policy_user_modifier_view_controller: null,\n\t\t\tsub_log_view_controller: null,\n\t\t\tsub_company_tax_view_controller: null,\n\t\t\tsub_job_application_view_controller: null,\n\t\t\tsub_user_skill_view_controller: null,\n\t\t\tsub_user_education_view_controller: null,\n\t\t\tsub_user_membership_view_controller: null,\n\t\t\tsub_user_license_view_controller: null,\n\t\t\tsub_user_language_view_controller: null,\n\t\t\tsub_user_review_control_view_controller: null,\n\n\t\t\tsub_payment_methods_view_controller: null,\n\n\t\t\thierarchy_options_dic: null,\n\t\t\thierarchy_ui_model: null,\n\t\t\tshow_hierarchy: false,\n\t\t\tselect_company_id: null,\n\n\t\t\tsub_view_grid_autosize: true,\n\t\t\tevents: {}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//super.initialize( options );\n\n\t\tthis.edit_view_tpl = 'EmployeeEditView.html';\n\t\tthis.permission_id = 'user';\n\t\tthis.viewId = 'Employee';\n\t\tthis.script_name = 'EmployeeView';\n\t\tthis.table_name_key = 'users';\n\t\tthis.document_object_type_id = 100;\n\t\tthis.context_menu_name = $.i18n._( 'Employees' );\n\t\tthis.navigation_label = $.i18n._( 'Employee' ) + ':';\n\t\tthis.api = TTAPI.APIUser;\n\t\tthis.select_company_id = LocalCacheData.getCurrentCompany().id;\n\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\n\t\t\tthis.job_api = TTAPI.APIJob;\n\t\t\tthis.job_item_api = TTAPI.APIJobItem;\n\n\t\t}\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.hierarchyControlAPI = TTAPI.APIHierarchyControl;\n\n\t\tthis.render();\n\n\t\tthis.buildContextMenu();\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tjobUIValidate() {\n\t\tif ( PermissionManager.validate( 'job', 'enabled' ) &&\n\t\t\t( PermissionManager.validate( 'job', 'view' ) ||\n\t\t\t\tPermissionManager.validate( 'job', 'view_child' ) ||\n\t\t\t\tPermissionManager.validate( 'job', 'view_own' ) ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tjobItemUIValidate() {\n\n\t\tif ( PermissionManager.validate( 'job_item', 'enabled' ) &&\n\t\t\t( PermissionManager.validate( 'job_item', 'view' ) ||\n\t\t\t\tPermissionManager.validate( 'job_item', 'view_child' ) ||\n\t\t\t\tPermissionManager.validate( 'job_item', 'view_own' ) ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t//Speical permission check for views, need override\n\tinitPermission() {\n\t\tsuper.initPermission();\n\n\t\tif ( this.jobUIValidate() ) {\n\t\t\tthis.show_job_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_ui = false;\n\t\t}\n\n\t\tif ( this.jobItemUIValidate() ) {\n\t\t\tthis.show_job_item_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_item_ui = false;\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\t'exclude': [ContextMenuIconName.copy],\n\t\t\t'include': [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.timesheet\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Schedule' ),\n\t\t\t\t\tid: ContextMenuIconName.schedule,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.schedule\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay<br>Stubs' ),\n\t\t\t\t\tid: ContextMenuIconName.pay_stub,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_stubs\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stub<br>Amendments' ),\n\t\t\t\t\tid: ContextMenuIconName.pay_stub_amendment,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_stub_amendment\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Map' ),\n\t\t\t\t\tid: ContextMenuIconName.map,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.map\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\t\tid: ContextMenuIconName.import_icon,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.import_icon,\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ImportCSVEmployee' ),\n\t\t\t\t\tsort_order: 8000\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif ( this.edit_only_mode ) {\n\t\t\tcontext_menu_model.exclude.push(\n\t\t\t\tContextMenuIconName.timesheet,\n\t\t\t\tContextMenuIconName.schedule,\n\t\t\t\tContextMenuIconName.pay_stub,\n\t\t\t\tContextMenuIconName.pay_stub_amendment,\n\t\t\t\tContextMenuIconName.map,\n\t\t\t\tContextMenuIconName.import_icon,\n\t\t\t\tContextMenuIconName.export_excel\n\t\t\t);\n\t\t}\n\n\t\treturn context_menu_model;\n\t}\n\n\topenEditView( id ) {\n\t\tif ( this.edit_only_mode ) {\n\t\t\tvar $this_obj = this;\n\t\t\tthis.initOptions( function( result ) {\n\t\t\t\tif ( !$this_obj.edit_view ) {\n\t\t\t\t\t$this_obj.initEditViewUI( $this_obj.viewId, $this_obj.edit_view_tpl );\n\t\t\t\t\tvar $this = this;\n\t\t\t\t\tdoNext();\n\t\t\t\t} else {\n\t\t\t\t\tdoNext();\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tif ( !this.edit_view ) {\n\t\t\t\tthis.initEditViewUI( this.viewId, this.edit_view_tpl );\n\t\t\t}\n\t\t}\n\n\t\tfunction doNext() {\n\t\t\t$this_obj.getEmployeeData( id, function( result ) {\n\t\t\t\t//Error: Uncaught TypeError: Cannot read property 'user_id' of null in interface/html5/#!m=TimeSheet&date=20150915&user_id=42175&show_wage=0 line 79\n\t\t\t\tif ( !result ) {\n\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Invalid employee id' ) );\n\t\t\t\t\t$this_obj.onCancelClick();\n\t\t\t\t} else {\n\t\t\t\t\t// Waiting for the TTAPI.API returns data to set the current edit record.\n\t\t\t\t\t$this_obj.current_edit_record = result;\n\t\t\t\t\t$this_obj.initEditView();\n\t\t\t\t}\n\n\t\t\t\tif ( $this_obj.edit_only_mode ) {\n\t\t\t\t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tsetEditViewDataDone() {\n\t\tthis.showCurrentPasswordField();\n\t\tsuper.setEditViewDataDone();\n\t}\n\n\tshowCurrentPasswordField() {\n\t\t//Only show this field if they are editing the currently logged in user record.\n\t\tif ( ( this.is_edit == true || this.edit_only_mode ) && LocalCacheData.loginUser && LocalCacheData.loginUser.id && this.current_edit_record && this.current_edit_record.id && LocalCacheData.loginUser.id == this.current_edit_record.id ) {\n\t\t\tthis.attachElement( 'current_password' );\n\t\t} else {\n\t\t\tthis.detachElement( 'current_password' );\n\t\t}\n\t}\n\n\tgetEmployeeData( id, callBack ) {\n\t\tif ( typeof id === 'object' ) {\n\n\t\t\tid.id = '';\n\t\t\tid.company = LocalCacheData.current_company.name;\n\n\t\t\tcallBack( id );\n\t\t} else {\n\t\t\tvar filter = {};\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = [id];\n\n\t\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\tcallBack( result_data );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitOptions( callBack ) {\n\n\t\tvar options = [\n\t\t\t{ option_name: 'status' },\n\t\t\t{ option_name: 'sex' },\n\t\t\t{ option_name: 'country', field_name: 'country', api: this.company_api }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\n\t\t} );\n\t}\n\n\tinitDropDownOptions( options, callBack ) {\n\t\tvar $this = this;\n\t\tvar len = options.length + 2;\n\t\tvar complete_count = 0;\n\t\tvar option_result = [];\n\t\tif ( this.hierarchyPermissionValidate() ) {\n\n\t\t\t$this.hierarchyControlAPI.getOptions( 'object_type', {\n\t\t\t\tonResult: function( res_1 ) {\n\t\t\t\t\tvar data_1 = res_1.getResult();\n\t\t\t\t\tif ( data_1 ) {\n\t\t\t\t\t\tvar array = [];\n\n\t\t\t\t\t\tfor ( var key in data_1 ) {\n\t\t\t\t\t\t\tarray.push( { id: Global.removeSortPrefix( key ), value: data_1[key] } );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$this.hierarchy_ui_model = array;\n\t\t\t\t\t}\n\n\t\t\t\t\tcomplete_count = complete_count + 1;\n\t\t\t\t\tif ( complete_count === len ) {\n\t\t\t\t\t\tcallBack( option_result );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} else {\n\t\t\tthis.show_hierarchy = false;\n\t\t\tcomplete_count = complete_count + 1;\n\t\t}\n\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\n\t\t\t\tres = res.getResult();\n\t\t\t\tres = Global.buildTreeRecord( res );\n\n\t\t\t\tif ( !$this.edit_only_mode ) {\n\t\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\tcomplete_count = complete_count + 1;\n\n\t\t\t\tif ( complete_count === len ) {\n\n\t\t\t\t\tcallBack( option_result );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\n\t\tfor ( var i = 0; i < len - 2; i++ ) {\n\t\t\tvar option_info = options[i];\n\n\t\t\tthis.initDropDownOption( option_info.option_name, option_info.field_name, option_info.api, onGetOptionResult );\n\n\t\t}\n\n\t\tfunction onGetOptionResult( result ) {\n\n\t\t\toption_result.push( result );\n\n\t\t\tcomplete_count = complete_count + 1;\n\n\t\t\tif ( complete_count === len ) {\n\n\t\t\t\tcallBack( option_result );\n\t\t\t}\n\t\t}\n\t}\n\n\t/* jshint ignore:start */\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.login:\n\t\t\t\t\tthis.setDefaultMenuLoginIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\t\tthis.setDefaultMenuImportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub_amendment:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'pay_stub_amendment' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\t\tthis.setDefaultMenuPayStubIcon( context_btn, grid_selected_length, 'pay_stub' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.map:\n\t\t\t\t\tthis.setDefaultMenuMapIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\t/* jshint ignore:end */\n\n\tsetDefaultMenuPayStubIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( !PermissionManager.checkTopLevelPermission( 'PayStub' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tinitSubQualificationView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\t$( '#tab_qualifications .first-column-sub-view' ).css( 'opacity', '0' );\n\t\tTTPromise.add( 'Employee_Qualifications_Tab', 'initSubQualificationView' );\n\n\t\tTTPromise.add( 'Employee_Qualifications_Tab', 'UserSkillViewController' );\n\t\tGlobal.loadScript( 'views/hr/qualification/UserSkillViewController.js', function() {\n\t\t\tvar tab_qualifications = $this.edit_view_tab.find( '#tab_qualifications' );\n\t\t\tvar firstColumn = tab_qualifications.find( '.first-column-sub-view' ).find( '.first-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'UserSkill' + 'View' );\n\t\t\tUserSkillViewController.loadSubView( firstColumn, beforeLoadView, afterLoadUserSkillView );\n\n\t\t} );\n\n\t\tTTPromise.add( 'Employee_Qualifications_Tab', 'UserEducationViewController' );\n\t\tGlobal.loadScript( 'views/hr/qualification/UserEducationViewController.js', function() {\n\t\t\tvar tab_qualifications = $this.edit_view_tab.find( '#tab_qualifications' );\n\t\t\tvar firstColumn = tab_qualifications.find( '.first-column-sub-view' ).find( '.second-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'UserEducation' + 'View' );\n\t\t\tUserEducationViewController.loadSubView( firstColumn, beforeLoadView, afterLoadUserEducationView );\n\n\t\t} );\n\n\t\tTTPromise.add( 'Employee_Qualifications_Tab', 'UserMembershipViewController' );\n\t\tGlobal.loadScript( 'views/hr/qualification/UserMembershipViewController.js', function() {\n\t\t\tvar tab_qualifications = $this.edit_view_tab.find( '#tab_qualifications' );\n\t\t\tvar firstColumn = tab_qualifications.find( '.first-column-sub-view' ).find( '.third-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'UserMembership' + 'View' );\n\t\t\tUserMembershipViewController.loadSubView( firstColumn, beforeLoadView, afterLoadUserMembershipView );\n\n\t\t} );\n\n\t\tTTPromise.add( 'Employee_Qualifications_Tab', 'UserLicenseViewController' );\n\t\tGlobal.loadScript( 'views/hr/qualification/UserLicenseViewController.js', function() {\n\t\t\tvar tab_qualifications = $this.edit_view_tab.find( '#tab_qualifications' );\n\t\t\tvar firstColumn = tab_qualifications.find( '.first-column-sub-view' ).find( '.forth-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'UserLicense' + 'View' );\n\t\t\tUserLicenseViewController.loadSubView( firstColumn, beforeLoadView, afterLoadUserLicenseView );\n\n\t\t} );\n\n\t\tTTPromise.add( 'Employee_Qualifications_Tab', 'UserLanguageViewController' );\n\t\tGlobal.loadScript( 'views/hr/qualification/UserLanguageViewController.js', function() {\n\t\t\tvar tab_qualifications = $this.edit_view_tab.find( '#tab_qualifications' );\n\t\t\tvar firstColumn = tab_qualifications.find( '.first-column-sub-view' ).find( '.fifth-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'UserLanguage' + 'View' );\n\t\t\tUserLanguageViewController.loadSubView( firstColumn, beforeLoadView, afterLoadUserLanguageView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadUserSkillView( subViewController ) {\n\t\t\t$( subViewController.el ).find( '.sub-view-title' ).text( $.i18n._( 'Skills' ) );\n\t\t\t$this.sub_user_skill_view_controller = subViewController;\n\t\t\t$this.sub_user_skill_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_skill_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_skill_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_skill_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_user_skill_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\n\t\tfunction afterLoadUserLicenseView( subViewController ) {\n\t\t\t$( subViewController.el ).find( '.sub-view-title' ).text( $.i18n._( 'Licenses' ) );\n\t\t\t$this.sub_user_license_view_controller = subViewController;\n\t\t\t$this.sub_user_license_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_license_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_license_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_license_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_user_license_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\n\t\tfunction afterLoadUserLanguageView( subViewController ) {\n\t\t\t$( subViewController.el ).find( '.sub-view-title' ).text( $.i18n._( 'Languages' ) );\n\t\t\t$this.sub_user_language_view_controller = subViewController;\n\t\t\t$this.sub_user_language_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_language_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_language_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_language_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_user_language_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\n\t\tfunction afterLoadUserEducationView( subViewController ) {\n\t\t\t$( subViewController.el ).find( '.sub-view-title' ).text( $.i18n._( 'Education' ) );\n\t\t\t$this.sub_user_education_view_controller = subViewController;\n\t\t\t$this.sub_user_education_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_education_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_education_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_education_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_user_education_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\n\t\tfunction afterLoadUserMembershipView( subViewController ) {\n\t\t\t$( subViewController.el ).find( '.sub-view-title' ).text( $.i18n._( 'Memberships' ) );\n\t\t\t$this.sub_user_membership_view_controller = subViewController;\n\t\t\t$this.sub_user_membership_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_membership_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_membership_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_membership_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_user_membership_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t};\n\t\t}\n\n\t\tTTPromise.wait( 'Employee_Qualifications_Tab', null, function() {\n\t\t\t$( '#contentContainer' ).trigger( 'resize' );\n\t\t\t$( '#tab_qualifications .first-column-sub-view' ).css( 'opacity', '1' );\n\t\t} );\n\n\t\tTTPromise.resolve( 'Employee_Qualifications_Tab', 'initSubQualificationView' );\n\t}\n\n\tinitSubCompanyTaxView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'TaxView', 'init' );\n\n\t\tif ( this.sub_company_tax_view_controller ) {\n\t\t\tthis.sub_company_tax_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_company_tax_view_controller.setDefaultMenu();\n\t\t\t$this.sub_company_tax_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_company_tax_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_company_tax_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadViewSource( 'CompanyTaxDeduction', 'CompanyTaxDeductionViewController.js', function() {\n\t\t\tif ( !$this.edit_view_tab ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tab_employee = $this.edit_view_tab.find( '#tab_tax' );\n\t\t\tvar firstColumn = tab_employee.find( '.first-column-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'UserContact' + 'View' );\n\t\t\tCompanyTaxDeductionViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_company_tax_view_controller = subViewController;\n\t\t\t$this.sub_company_tax_view_controller.parent_key = 'include_user_id';\n\t\t\t$this.sub_company_tax_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_company_tax_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_company_tax_view_controller.parent_view_controller = $this;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t$this.sub_company_tax_view_controller.initData();\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitSubUserReviewControlView() {\n\t\t;\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'ReviewView', 'init' );\n\n\t\tif ( this.sub_user_review_control_view_controller ) {\n\t\t\tthis.sub_user_review_control_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_user_review_control_view_controller.setDefaultMenu();\n\t\t\t$this.sub_user_review_control_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_review_control_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_review_control_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_review_control_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/hr/kpi/UserReviewControlViewController.js', function() {\n\t\t\tif ( !$this.edit_view_tab ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tab_employee = $this.edit_view_tab.find( '#tab_reviews' );\n\t\t\tvar firstColumn = tab_employee.find( '.first-column-sub-view' );\n\n\t\t\tGlobal.trackView( 'Sub' + 'UserReviewControl' + 'View' );\n\t\t\tUserReviewControlViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_user_review_control_view_controller = subViewController;\n\t\t\t$this.sub_user_review_control_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_review_control_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_review_control_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_review_control_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_user_review_control_view_controller.initData();\n\t\t}\n\t}\n\n\tinitSubPaymentMethodsView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'PaymentMethodsView', 'init' );\n\n\t\tif ( this.sub_payment_methods_view_controller ) {\n\t\t\tthis.sub_payment_methods_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_payment_methods_view_controller.setDefaultMenu();\n\t\t\t$this.sub_payment_methods_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_payment_methods_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_payment_methods_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_payment_methods_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/employees/remittance_destination_account/RemittanceDestinationAccountViewController.js', function() {\n\t\t\tif ( !$this.edit_view_tab ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tab_payment_methods = $this.edit_view_tab.find( '#tab_payment_methods' );\n\t\t\tvar firstColumn = tab_payment_methods.find( '.first-column-sub-view' );\n\n\t\t\tGlobal.trackView( 'Sub' + 'RemittanceDestinationAccount' + 'View' );\n\t\t\tRemittanceDestinationAccountViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_payment_methods_view_controller = subViewController;\n\t\t\t$this.sub_payment_methods_view_controller.is_subview = true;\n\t\t\t$this.sub_payment_methods_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_payment_methods_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_payment_methods_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_payment_methods_view_controller.parent_view_controller = $this;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t$this.sub_payment_methods_view_controller.initData();\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitSubJobApplicationView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'JobAppView', 'init' );\n\n\t\tif ( this.sub_job_application_view_controller ) {\n\t\t\tthis.sub_job_application_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_job_application_view_controller.setDefaultMenu();\n\t\t\t$this.sub_job_application_view_controller.parent_key = 'interviewer_user_id';\n\t\t\t$this.sub_job_application_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_job_application_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_job_application_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/hr/recruitment/JobApplicationViewController.js', function() {\n\t\t\tif ( !$this.edit_view_tab ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tab_applications = $this.edit_view_tab.find( '#tab_applications' );\n\t\t\tvar firstColumn = tab_applications.find( '.first-column-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'JobApplication' + 'View' );\n\t\t\tJobApplicationViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_job_application_view_controller = subViewController;\n\t\t\t$this.sub_job_application_view_controller.parent_key = 'interviewer_user_id';\n\t\t\t$this.sub_job_application_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_job_application_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_job_application_view_controller.parent_view_controller = $this;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t$this.sub_job_application_view_controller.initData();\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitSubUserContactView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'ContactView', 'init' );\n\n\t\tif ( this.sub_user_contact_view_controller ) {\n\t\t\tthis.sub_user_contact_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_user_contact_view_controller.setDefaultMenu();\n\t\t\t$this.sub_user_contact_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_contact_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_contact_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/employees/user_contact/UserContactViewController.js', function() {\n\t\t\tif ( !$this.edit_view_tab ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tab_employee = $this.edit_view_tab.find( '#tab_contacts' );\n\t\t\tvar firstColumn = tab_employee.find( '.first-column-sub-view' );\n\n\t\t\tGlobal.trackView( 'Sub' + 'UserContact' + 'View' );\n\t\t\tUserContactViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_user_contact_view_controller = subViewController;\n\t\t\t$this.sub_user_contact_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_user_contact_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_user_contact_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_user_contact_view_controller.parent_view_controller = $this;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t$this.sub_user_contact_view_controller.initData();\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitSubWageView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'WageView', 'init' );\n\n\t\tif ( this.sub_wage_view_controller ) {\n\t\t\tthis.sub_wage_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_wage_view_controller.setDefaultMenu();\n\t\t\t$this.sub_wage_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_wage_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_wage_view_controller.initData(); //Init data in this parent view\n\t\t\tTTPromise.resolve( 'WageView', 'init' );\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadScript( 'views/company/wage/WageViewController.js', function() {\n\t\t\tif ( !$this.edit_view_tab ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tab_employee = $this.edit_view_tab.find( '#tab_wage' );\n\t\t\tvar firstColumn = tab_employee.find( '.first-column-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'Wage' + 'View' );\n\t\t\tWageViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController, firstColumn ) {\n\n\t\t\t$this.sub_wage_view_controller = subViewController;\n\t\t\t$this.sub_wage_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_wage_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_wage_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_wage_view_controller.parent_view_controller = $this;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t//#2581 - $this.sub_wage_view_controller is null\n\t\t\t\tif ( $this.sub_wage_view_controller ) {\n\t\t\t\t\t$this.sub_wage_view_controller.initData(); //Init data in this parent view\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitSubAccrualPolicyUserModifier() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' ); // Fixes issue with this div overlapping with save and continue. This div does not need to be shown until employee is saved.\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'AccrualView', 'init' );\n\n\t\tif ( this.sub_accrual_policy_user_modifier_view_controller ) {\n\t\t\tthis.sub_accrual_policy_user_modifier_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_accrual_policy_user_modifier_view_controller.setDefaultMenu();\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.initData(); //Init data in this parent view\n\t\t\treturn;\n\t\t}\n\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\n\t\t\tGlobal.loadScript( 'views/policy/accrual_policy/AccrualPolicyUserModifierViewController.js', function() {\n\t\t\t\tif ( !$this.edit_view_tab ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar tab_employee = $this.edit_view_tab.find( '#tab_accruals' );\n\n\t\t\t\tvar firstColumn = tab_employee.find( '.first-column-sub-view' );\n\n\t\t\t\tGlobal.trackView( 'Sub' + 'AccrualPolicyUserModifier' + 'View' );\n\t\t\t\tAccrualPolicyUserModifierViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_accruals' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t}\n\n\t\tfunction beforeLoadView( tpl ) {\n\t\t\tvar args = { parent_view: 'employee' };\n\n\t\t\treturn { template: _.template( tpl ), args: args };\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller = subViewController;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_key = 'user_id';\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.sub_view_mode = true;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.initData(); //Init data in this parent view\n\t\t\t} );\n\t\t}\n\t}\n\n\tsetDefaultUserName() {\n\t\tif ( this.is_add == true ) {\n\t\t\tvar first_name_widget = this.edit_view_ui_dic['first_name'];\n\t\t\tvar last_name_widget = this.edit_view_ui_dic['last_name'];\n\n\t\t\tvar user_name_widget = this.edit_view_ui_dic['user_name'];\n\n\t\t\tuser_name_widget.setValue( first_name_widget.getValue().toLowerCase().replace(/[^a-zA-Z_]/gi, '') + '.' + last_name_widget.getValue().toLowerCase().replace(/[^a-zA-Z_]/gi, '') );\n\t\t\tthis.current_edit_record.user_name = user_name_widget.getValue();\n\t\t}\n\t}\n\n\t// setDefaultQuickPunch() {\n\t// \tif ( this.is_add == true ) {\n\t// \t\tvar home_phone_widget = this.edit_view_ui_dic['home_phone'];\n\t// \t\tclean_home_phone = home_phone_widget.getValue().replace(/\\D/g,'');\n\t//\n\t// \t\tvar quick_punch_id_widget = this.edit_view_ui_dic['phone_id'];\n\t// \t\tquick_punch_id_widget.setValue( clean_home_phone.substring( ( clean_home_phone.length - 7 ) ) );\n\t// \t\tthis.current_edit_record.phone_id = quick_punch_id_widget.getValue();\n\t//\n\t// \t\tvar quick_punch_password_widget = this.edit_view_ui_dic['phone_password'];\n\t// \t\tquick_punch_password_widget.setValue( quick_punch_id_widget.getValue().substring( ( quick_punch_id_widget.getValue().length - 4 ) ) );\n\t// \t\tthis.current_edit_record.phone_password = quick_punch_password_widget.getValue();\n\t// \t}\n\t// },\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tvar $this = this;\n\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\n\t\tif ( !this.current_edit_record ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( parseInt( key ) > 0 ) {\n\n\t\t\tif ( !this.current_edit_record.hierarchy_control ) {\n\t\t\t\tthis.current_edit_record.hierarchy_control = {};\n\t\t\t}\n\n\t\t\tthis.current_edit_record.hierarchy_control[key] = target.getValue();\n\t\t} else {\n\t\t\tthis.current_edit_record[key] = target.getValue();\n\t\t}\n\n\t\tswitch ( key ) {\n\t\t\tcase 'first_name':\n\t\t\t\tvar widget = this.edit_view_ui_dic['first_name_1'];\n\t\t\t\twidget.setValue( target.getValue() );\n\t\t\t\tthis.current_edit_record.first_name_1 = target.getValue();\n\t\t\t\tthis.setDefaultUserName();\n\t\t\t\tbreak;\n\t\t\tcase 'last_name':\n\t\t\t\twidget = this.edit_view_ui_dic['last_name_1'];\n\t\t\t\twidget.setValue( target.getValue() );\n\t\t\t\tthis.current_edit_record.last_name_1 = target.getValue();\n\t\t\t\tthis.setDefaultUserName();\n\t\t\t\tbreak;\n\t\t\tcase 'first_name_1':\n\t\t\t\twidget = this.edit_view_ui_dic['first_name'];\n\t\t\t\twidget.setValue( target.getValue() );\n\t\t\t\tthis.current_edit_record.first_name = target.getValue();\n\t\t\t\tthis.setDefaultUserName();\n\t\t\t\tbreak;\n\t\t\tcase 'last_name_1':\n\t\t\t\twidget = this.edit_view_ui_dic['last_name'];\n\t\t\t\twidget.setValue( target.getValue() );\n\t\t\t\tthis.current_edit_record.last_name = target.getValue();\n\t\t\t\tthis.setDefaultUserName();\n\t\t\t\tbreak;\n\t\t\t// case 'home_phone':\n\t\t\t// \tthis.setDefaultQuickPunch();\n\t\t\t// \tbreak;\n\t\t\tcase 'country':\n\t\t\t\twidget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t\tcase 'default_job_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.setJobItemValueWhenJobChanged( target.getValue( true ), 'default_job_item_id', {\n\t\t\t\t\t\tstatus_id: 10,\n\t\t\t\t\t\tjob_id: this.current_edit_record.default_job_id,\n\t\t\t\t\t\tcompany_id: this.select_company_id\n\t\t\t\t\t} );\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'default_job_item_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_quick_search':\n\t\t\tcase 'job_item_quick_search':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.onJobQuickSearch( key, target.getValue(), 'default_job_id', 'default_job_item_id', {\n\t\t\t\t\t\tstatus_id: 10,\n\t\t\t\t\t\tcompany_id: $this.select_company_id\n\t\t\t\t\t} );\n\n\t\t\t\t\t//Don't validate immediately as onJobQuickSearch is doing async API calls, and it would cause a guaranteed validation failure.\n\t\t\t\t\tdoNotValidate = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\thierarchyPermissionValidate( p_id, selected_item ) {\n\n\t\tif ( PermissionManager.validate( 'hierarchy', 'edit' ) ||\n\t\t\tPermissionManager.validate( 'user', 'edit_hierarchy' ) ) {\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tcheckTabPermissions( tab ) {\n\t\tvar retval = false;\n\n\t\tswitch ( tab ) {\n\t\t\tcase 'tab_hierarchy':\n\t\t\t\tif ( this.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_wage':\n\t\t\t\tif ( PermissionManager.checkTopLevelPermission( 'Wage' ) && this.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_tax':\n\t\t\t\tif ( PermissionManager.checkTopLevelPermission( 'UserTaxDeduction' ) &&\n\t\t\t\t\tthis.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_payment_methods':\n\t\t\t\tif ( PermissionManager.checkTopLevelPermission( 'RemittanceDestinationAccount' ) &&\n\t\t\t\t\tthis.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_contacts':\n\t\t\t\tif ( PermissionManager.checkTopLevelPermission( 'UserContact' ) && this.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_applications':\n\t\t\t\tif ( PermissionManager.subJobApplicationValidate( 'JobApplication' ) && this.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_accruals':\n\t\t\t\tif ( PermissionManager.checkTopLevelPermission( 'AccrualPolicy' ) && this.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_qualifications':\n\t\t\t\tif ( PermissionManager.checkTopLevelPermission( 'Qualification' ) && this.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'tab_reviews':\n\t\t\t\tif ( PermissionManager.checkTopLevelPermission( 'UserReviewControl' ) && this.select_company_id === LocalCacheData.getCurrentCompany().id ) {\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tretval = super.checkTabPermissions( tab );\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn retval;\n\t}\n\n\t/* jshint ignore:start */\n\tsetCurrentEditRecordData() {\n\t\tvar dont_set_dic = {};\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) || key === 'hierarchy_control' ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'first_name':\n\t\t\t\t\tcase 'last_name':\n\t\t\t\t\t\tdont_set_dic[key + '_1'] = true;\n\t\t\t\t\t\tvar brother = this.edit_view_ui_dic[key + '_1'];\n\t\t\t\t\t\tbrother.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'country':\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hierarchy_control':\n\t\t\t\t\t\tif ( this.show_hierarchy ) {\n\t\t\t\t\t\t\tfor ( var h_key in this.current_edit_record.hierarchy_control ) {\n\t\t\t\t\t\t\t\tvar value = this.current_edit_record.hierarchy_control[h_key];\n\t\t\t\t\t\t\t\tif ( this.edit_view_ui_dic[h_key] ) {\n\t\t\t\t\t\t\t\t\twidget = this.edit_view_ui_dic[h_key];\n\t\t\t\t\t\t\t\t\tdont_set_dic[h_key] = true;\n\t\t\t\t\t\t\t\t\twidget.setValue( value );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'default_job_id':\n\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\targs.filter_data = { status_id: 10, user_id: this.current_edit_record.id };\n\t\t\t\t\t\twidget.setDefaultArgs( args );\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'default_job_item_id':\n\t\t\t\t\t\targs = {};\n\t\t\t\t\t\targs.filter_data = { status_id: 10, job_id: this.current_edit_record.default_job_id };\n\t\t\t\t\t\twidget.setDefaultArgs( args );\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_quick_search':\n//\t\t\t\t\t\twidget.setValue( this.current_edit_record['job_id'] ? this.current_edit_record['job_id'] : 0 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_item_quick_search':\n//\t\t\t\t\t\twidget.setValue( this.current_edit_record['job_item_id'] ? this.current_edit_record['job_item_id'] : 0 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif ( !dont_set_dic[key] ) {\n\t\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tif ( this.current_edit_record.id ) {\n\t\t\tif ( this.file_browser ) {\n\t\t\t\tthis.file_browser.show();\n\t\t\t\tthis.file_browser.setImage( ServiceCaller.getURLByObjectType( 'user_photo' ) + '&object_id=' + this.current_edit_record.id );\n\t\t\t\tif ( this.is_viewing ) {\n\t\t\t\t\tthis.file_browser.setEnable( false );\n\t\t\t\t} else {\n\t\t\t\t\tthis.file_browser.setEnable( true );\n\t\t\t\t}\n\t\t\t\t$( '.upload-image-alert' ).remove();\n\t\t\t}\n\t\t} else {\n\t\t\tif ( this.file_browser ) {\n\t\t\t\tthis.file_browser.hide();\n\t\t\t\tvar span = $( '<span class=\"upload-image-alert\">' );\n\t\t\t\tspan.text( $.i18n._( 'Please save this record before uploading a photo' ) );\n\t\t\t\tthis.file_browser.parent().append( span );\n\t\t\t}\n\t\t}\n\n\t\t// Error: TypeError: this.edit_view_ui_dic.company_id is undefined in interface/html5/framework/jquery.min.js?v=9.0.5-20151222-162143 line 2 > eval line 1374\n\t\tthis.edit_view_ui_dic['company_id'] && this.edit_view_ui_dic['company_id'].setEnabled( false );\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEmailIcon();\n\n\t\tthis.setEditViewDataDone();\n\t}\n\n\t/* jshint ignore:end */\n\n\tsetEmailIcon() {\n\t\tvar $this = this;\n\t\t$( '.employee-email-icon' ).remove();\n\t\tvar work_email = $( '<img title=\"' + $.i18n._( 'ReValidate Email Address' ) + '\" class=\"employee-email-icon work-email\" src=\"theme/default/images/email16x16.png\">' );\n\t\tvar home_email = $( '<img title=\"' + $.i18n._( 'ReValidate Email Address' ) + '\" class=\"employee-email-icon home-email\" src=\"theme/default/images/email16x16.png\">' );\n\t\tif ( this.current_edit_record.hasOwnProperty( 'work_email_is_valid' ) && !this.current_edit_record.work_email_is_valid ) {\n\t\t\tthis.edit_view_form_item_dic.work_email.children().eq( 1 ).append( work_email );\n\t\t\twork_email.on( 'click', function() {\n\t\t\t\tcheckEmail( 'work_email' );\n\t\t\t} );\n\t\t} else {\n\n\t\t}\n\n\t\tif ( this.current_edit_record.hasOwnProperty( 'home_email_is_valid' ) && !this.current_edit_record.home_email_is_valid ) {\n\t\t\tthis.edit_view_form_item_dic.home_email.children().eq( 1 ).append( home_email );\n\t\t\thome_email.on( 'click', function() {\n\t\t\t\tcheckEmail( 'home_email' );\n\t\t\t} );\n\t\t}\n\n\t\tfunction checkEmail() {\n\t\t\t$this.api.sendValidationEmail( $this.current_edit_record.id, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Validation email sent...' ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'No validation email sent...' ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSaveDone( result ) {\n\t\tif ( this.edit_only_mode && LocalCacheData.current_open_primary_controller.viewId === 'TimeSheet' ) {\n\t\t\tLocalCacheData.current_open_primary_controller.updateSelectUserAndRefresh( this.current_edit_record );\n\t\t}\n\t}\n\n\tgetCopyAsNewFilter( filter ) {\n\t\t// overriding BaseViewController for _continueDoCopyAsNew()\n\t\tfilter.filter_data.company_id = this.select_company_id;\n\t\treturn filter;\n\t}\n\n\tonAddClick() {\n\t\tvar $this = this;\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\t$this.openEditView();\n\n\t\t$this.api['get' + $this.api.key_name + 'DefaultData']( this.select_company_id, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onAddResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonMassEditClick() {\n\n\t\tvar $this = this;\n\t\t$this.is_add = false;\n\t\t$this.is_viewing = false;\n\t\t$this.is_mass_editing = true;\n\t\tLocalCacheData.current_doing_context_action = 'mass_edit';\n\t\t$this.openEditView();\n\t\tvar filter = {};\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tthis.mass_edit_record_ids = [];\n\n\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t$this.mass_edit_record_ids.push( value );\n\t\t} );\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.mass_edit_record_ids;\n\t\tfilter.filter_data.company_id = this.select_company_id;\n\n\t\tthis.api['getCommon' + this.api.key_name + 'Data']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\t$this.api['getOptions']( 'unique_columns', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.unique_columns = result.getResult();\n\t\t\t\t\t\t$this.api['getOptions']( 'linked_columns', {\n\t\t\t\t\t\t\tonResult: function( result1 ) {\n\t\t\t\t\t\t\t\t$this.linked_columns = result1.getResult();\n\n\t\t\t\t\t\t\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\t\t\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$this.current_edit_record = result_data;\n\t\t\t\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetAPIFilters() {\n\t\tvar filter = super.getAPIFilters();\n\t\tfilter.filter_data.company_id = this.select_company_id;\n\n\t\treturn filter;\n\t}\n\n\tsearch( set_default_menu, page_action, page_number, callBack ) {\n\t\tif ( !Global.isSet( set_default_menu ) ) {\n\t\t\tset_default_menu = true;\n\t\t}\n\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_columns = this.getFilterColumnsFromDisplayColumns();\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\n\t\tif ( this.pager_data ) {\n\n\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\tif ( page_action === 'next' ) {\n\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t} else {\n\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tswitch ( page_action ) {\n\t\t\t\t\tcase 'next':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'last':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.previous_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'start':\n\t\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.last_page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'go_to':\n\t\t\t\t\t\tfilter.filter_page = page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.current_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\n\t\tif ( this.sub_view_mode && this.parent_key ) {\n\t\t\tthis.select_layout.data.filter_data[this.parent_key] = this.parent_value;\n\t\t}\n\n\t\t//If sub view controller set custom filters, get it\n\t\tif ( Global.isSet( this.getSubViewFilter ) ) {\n\t\t\tthis.select_layout.data.filter_data = this.getSubViewFilter( this.select_layout.data.filter_data );\n\t\t}\n\n\t\t//select_layout will not be null, it's set in setSelectLayout function\n\t\tfilter.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\tif ( this.select_layout && this.select_layout.data ) { //Fix: Uncaught TypeError: Cannot read property 'data' of null\n\t\t\tfilter.filter_sort = this.select_layout.data.filter_sort;\n\t\t}\n\n\t\tif ( TTUUID.isUUID( this.refresh_id ) ) {\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = [this.refresh_id];\n\n\t\t\tthis.last_select_ids = filter.filter_data.id;\n\n\t\t} else {\n\t\t\tthis.last_select_ids = [];\n\t\t\tvar ids = this.getGridSelectIdArray();\n\t\t\t//ensure detached reference to value source or lose this.last_select_ids when grid is cleared.\n\t\t\tfor ( var i = 0; i < ids.length; i++ ) {\n\t\t\t\tthis.last_select_ids.push( ids[i] );\n\t\t\t}\n\t\t}\n\n\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t} else {\n\t\t\t\t\t$this.removeNoResultCover();\n\t\t\t\t\tif ( Global.isSet( $this.__createRowId ) ) {\n\t\t\t\t\t\tresult_data = $this.__createRowId( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_data = Global.formatGridData( result_data, $this.api.key_name );\n\t\t\t\t}\n\t\t\t\tif ( TTUUID.isUUID( $this.refresh_id ) ) {\n\t\t\t\t\t$this.refresh_id = null;\n\t\t\t\t\tvar grid_source_data = $this.grid.getData();\n\t\t\t\t\tvar len = grid_source_data.length;\n\n\t\t\t\t\tif ( $.type( grid_source_data ) !== 'array' ) {\n\t\t\t\t\t\tgrid_source_data = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tvar found = false;\n\t\t\t\t\tvar new_record = result_data[0];\n\n\t\t\t\t\t//Error: Uncaught TypeError: Cannot read property 'id' of undefined in /interface/html5/views/BaseViewController.js?v=7.4.3-20140924-084605 line 4851\n\t\t\t\t\tif ( new_record ) {\n\t\t\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\t\t\tvar record = grid_source_data[i];\n\n\t\t\t\t\t\t\t//Fixed === issue. The id set by jQGrid is string type.\n\t\t\t\t\t\t\t// if ( !isNaN( parseInt( record.id ) ) ) {\n\t\t\t\t\t\t\t// \trecord.id = parseInt( record.id );\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif ( record.id == new_record.id ) {\n\t\t\t\t\t\t\t\t$this.grid.grid.setRowData( new_record.id, new_record );\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !found ) {\n//\t\t\t\t\t\t\t$this.grid.addRowData( new_record.id, new_record, 0 );\n\t\t\t\t\t\t\t$this.grid.setData( grid_source_data.concat( new_record ) );\n\t\t\t\t\t\t\t$this.highLightGridRowById( new_record.id );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t//Set Page data to widget, next show display info when setDefault Menu\n\t\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\t\t//CLick to show more mode no need this step\n\t\t\t\t\tif ( LocalCacheData.paging_type !== 0 ) {\n\t\t\t\t\t\t$this.paging_widget.setPagerData( $this.pager_data );\n\t\t\t\t\t\t$this.paging_widget_2.setPagerData( $this.pager_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( LocalCacheData.paging_type === 0 && page_action === 'next' ) {\n\t\t\t\t\t\tvar current_data = $this.grid.getData();\n\t\t\t\t\t\tresult_data = current_data.concat( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $this.grid ) {\n\t\t\t\t\t\t$this.grid.setData( result_data );\n\n\t\t\t\t\t\t$this.reSelectLastSelectItems();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$this.setGridCellBackGround(); //Set cell background for some views\n\n\t\t\t\tProgressBar.closeOverlay(); //Add this in initData\n\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.setDefaultMenu( true );\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\tif ( !$this.pager_data || $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'none' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'block' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( callBack ) {\n\t\t\t\t\tcallBack( result );\n\t\t\t\t}\n\n\t\t\t\t// when call this from save and new result, we don't call auto open, because this will call onAddClick twice\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.autoOpenEditViewIfNecessary();\n\t\t\t\t}\n\n\t\t\t\t$this.searchDone();\n\n\t\t\t}\n\t\t} );\n\n\t\t//This seems to be the only difference from BaseViewController search() function.\n\t\tif ( filter && filter.filter_data && filter.filter_data.company_id ) {\n\t\t\tthis.select_company_id = filter.filter_data.company_id;\n\n\t\t\tthis.user_group_api.getUserGroup( { filter_data: { company_id: this.select_company_id } }, false, false, {\n\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tres = Global.buildTreeRecord( res );\n\n\t\t\t\t\tif ( !$this.edit_only_mode ) {\n\t\t\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} else {\n\t\t\tthis.select_company_id = LocalCacheData.getCurrentCompany().id;\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\tcase ContextMenuIconName.pay_stub_amendment:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonMapClick() {\n\t\t// only trigger map load in specific product editions.\n\t\tif ( ( Global.getProductEdition() >= 15 ) ) {\n\t\t\tthis.is_viewing = false;\n\t\t\tProgressBar.showProgressBar();\n\t\t\tvar data = {\n\t\t\t\tfilter_columns: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tfirst_name: true,\n\t\t\t\t\tlast_name: true,\n\t\t\t\t\taddress1: true,\n\t\t\t\t\taddress2: true,\n\t\t\t\t\tcity: true,\n\t\t\t\t\tprovince: true,\n\t\t\t\t\tcountry: true,\n\t\t\t\t\tpostal_code: true,\n\t\t\t\t\tlatitude: true,\n\t\t\t\t\tlongitude: true\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar cells = [];\n\t\t\tif ( this.is_edit ) {\n\t\t\t\t//when editing, if the user reloads, the grid's selected id array become the whole grid.\n\t\t\t\t//to avoid mapping every punch in that scenario we need to grab the current_edit_record, rather than pull data from getGridSelectIdArray()\n\t\t\t\t//check for mass edit as well. <-- not sure what this refers to, assuming the same happens in mass edit, but maps are disabled on mass edit atm.\n\t\t\t\tcells.push( this.current_edit_record );\n\t\t\t} else {\n\t\t\t\tvar ids = this.getGridSelectIdArray();\n\t\t\t\tdata.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\t\t\tif ( ids.length > 0 ) {\n\t\t\t\t\tdata.filter_data.id = ids;\n\t\t\t\t}\n\t\t\t\tcells = this.api.getUser( data, { async: false } ).getResult();\n\t\t\t}\n\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\timport( /* webpackChunkName: \"leaflet-timetrex\" */ '@/framework/leaflet/leaflet-timetrex' ).then(( module )=>{\n\t\t\t\t\tvar processed_data_for_map = module.TTConvertMapData.processBasicFromGenericViewController( cells );\n\t\t\t\t\tIndexViewController.openEditView( this, 'Map', processed_data_for_map );\n\t\t\t\t}).catch( Global.importErrorHandler );\n\t\t\t}\n\t\t}\n\t}\n\n\tonImportClick() {\n\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'User', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar user_ids = [];\n\n\t\tvar base_date = new Date().format();\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tuser_ids.push( $this.current_edit_record.id );\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tuser_ids.push( grid_selected_row.id );\n\t\t\t} );\n\t\t}\n\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t\tfilter.base_date = base_date;\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Employees' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tvar include_users = { value: user_ids };\n\t\t\t\tfilter.filter_data.include_user_ids = include_users;\n\t\t\t\tfilter.select_date = base_date;\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Employees' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'Schedule', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.filter_data = {};\n\t\t\t\t\tfilter.filter_data.user_id = user_ids[0];\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Employees' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'PayStub', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub_amendment:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.filter_data = {};\n\t\t\t\t\tfilter.filter_data.user_id = user_ids[0];\n\t\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Employees' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'PayStubAmendment', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tremoveEditView() {\n\n\t\tsuper.removeEditView();\n\t\tthis.sub_user_contact_view_controller = null;\n\t\tthis.sub_wage_view_controller = null;\n\t\tthis.sub_company_tax_view_controller = null;\n\t\tthis.sub_accrual_policy_user_modifier_view_controller = null;\n\t\tthis.sub_user_review_control_view_controller = null;\n\t\tthis.sub_job_application_view_controller = null;\n\t\tthis.sub_user_skill_view_controller = null;\n\t\tthis.sub_user_education_view_controller = null;\n\n\t\tthis.sub_user_membership_view_controller = null;\n\n\t\tthis.sub_user_license_view_controller = null;\n\n\t\tthis.sub_user_language_view_controller = null;\n\n\t\tthis.sub_payment_methods_view_controller = null;\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_employee': { 'label': $.i18n._( 'Employee' ) },\n\t\t\t'tab_contact_info': { 'label': $.i18n._( 'Contact Info' ) },\n\t\t\t'tab_hierarchy': { 'label': $.i18n._( 'Hierarchy' ), 'display_on_mass_edit': false },\n\t\t\t'tab_login': { 'label': $.i18n._( 'Login' ) },\n\t\t\t'tab_wage': {\n\t\t\t\t'label': $.i18n._( 'Wage' ),\n\t\t\t\t'init_callback': 'initSubWageView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_tax': {\n\t\t\t\t'label': $.i18n._( 'Tax' ),\n\t\t\t\t'init_callback': 'initSubCompanyTaxView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_payment_methods': {\n\t\t\t\t'label': $.i18n._( 'Pay Methods' ),\n\t\t\t\t'init_callback': 'initSubPaymentMethodsView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_contacts': {\n\t\t\t\t'label': $.i18n._( 'Contacts' ),\n\t\t\t\t'init_callback': 'initSubUserContactView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_applications': {\n\t\t\t\t'label': $.i18n._( 'Applications' ),\n\t\t\t\t'init_callback': 'initSubJobApplicationView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_accruals': {\n\t\t\t\t'label': $.i18n._( 'Accruals' ),\n\t\t\t\t'init_callback': 'initSubAccrualPolicyUserModifier',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_qualifications': {\n\t\t\t\t'label': $.i18n._( 'Qualifications' ),\n\t\t\t\t'init_callback': 'initSubQualificationView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_reviews': {\n\t\t\t\t'label': $.i18n._( 'Reviews' ),\n\t\t\t\t'init_callback': 'initSubUserReviewControlView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tif ( !this.edit_only_mode ) {\n\t\t\tthis.navigation.AComboBox( {\n\t\t\t\tid: this.script_name + '_navigation',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tnavigation_mode: true,\n\t\t\t\tshow_search_inputs: true\n\t\t\t} );\n\n\t\t\tthis.setNavigation();\n\t\t}\n\n\t\t//Employee Tab start\n\t\tvar tab_employee = this.edit_view_tab.find( '#tab_employee' );\n\t\tvar tab_employee_column1 = tab_employee.find( '.first-column' );\n\t\tvar tab_employee_column2 = tab_employee.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab_employee_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_employee_column2 );\n\n\t\t//Company\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APICompany,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_company',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'company_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Company' ), form_item_input, tab_employee_column1 );\n\t\tform_item_input.setEnabled( false );\n\n\t\t//Legal Entity\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APILegalEntity,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_legal_entity',\n\t\t\tshow_search_inputs: true,\n\t\t\tfield: 'legal_entity_id',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tset_empty: true,\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Legal Entity' ), form_item_input, tab_employee_column1 );\n\n\t\t//Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_employee_column1 );\n\n\t\t//First Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'first_name', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'First Name' ), form_item_input, tab_employee_column1, '' );\n\n\t\t//Last Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'last_name', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Last Name' ), form_item_input, tab_employee_column1 );\n\n\t\t//Employee Number\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'employee_number', width: 90 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee Number' ), form_item_input, tab_employee_column1 );\n\n\t\t//Permission Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPermissionControl,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_permission_control',\n\t\t\tshow_search_inputs: true,\n\t\t\tfield: 'permission_control_id',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tset_empty: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Permission Group' ), form_item_input, tab_employee_column1 );\n\n\t\t//Pay Period Schedule\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayPeriodSchedule,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_period_schedule',\n\t\t\tshow_search_inputs: true,\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_period_schedule_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Period Schedule' ), form_item_input, tab_employee_column1 );\n\n\t\t//Policy Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPolicyGroup,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_policy_group',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'policy_group_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Policy Group' ), form_item_input, tab_employee_column1 );\n\n\t\t//Title\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_title',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'title_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Title' ), form_item_input, tab_employee_column1, '' );\n\n\t\t//Second Column Start\n\n\t\t//Currency\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APICurrency,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_currency',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tshow_search_inputs: true,\n\t\t\tfield: 'currency_id',\n\t\t\tset_empty: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Currency' ), form_item_input, tab_employee_column2 );\n\n\t\t//Default Branch\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\tallow_multiple_selection: false,\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tlayout_name: 'global_branch',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'default_branch_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Default Branch' ), form_item_input, tab_employee_column2 );\n\n\t\t//Department\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_department',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'default_department_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Default Department' ), form_item_input, tab_employee_column2 );\n\n\t\tthis.initPermission(); //#2398 - job/task permissions were getting broken on multiple opens of same employee.\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJob,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job',\n\t\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t\t} ),\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'default_job_id'\n\t\t\t} );\n\n\t\t\tvar default_job_description = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_coder.TTextInput( { field: 'job_quick_search', disable_keyup_event: true } );\n\t\t\tjob_coder.addClass( 'job-coder' );\n\n\t\t\tdefault_job_description.append( job_coder );\n\t\t\tdefault_job_description.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Default Job' ), [form_item_input, job_coder], tab_employee_column2, '', default_job_description, true );\n\n\t\t\tif ( !this.show_job_ui ) {\n\t\t\t\tthis.detachElement( 'default_job_id' );\n\t\t\t}\n\n\t\t\t//Job Item\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJobItem,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job_item',\n\t\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t\t} ),\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_item_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'default_job_item_id'\n\t\t\t} );\n\n\t\t\tvar default_task_description = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_item_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_item_coder.TTextInput( { field: 'job_item_quick_search', disable_keyup_event: true } );\n\t\t\tjob_item_coder.addClass( 'job-coder' );\n\n\t\t\tdefault_task_description.append( job_item_coder );\n\t\t\tdefault_task_description.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Default Task' ), [form_item_input, job_item_coder], tab_employee_column2, '', default_task_description, true );\n\n\t\t\tif ( !this.show_job_item_ui ) {\n\t\t\t\tthis.detachElement( 'default_job_item_id' );\n\t\t\t}\n\t\t}\n\n\t\t//Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\ttree_mode: true,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_tree_column',\n\t\t\tset_empty: true,\n\t\t\tfield: 'group_id'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.user_group_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Group' ), form_item_input, tab_employee_column2 );\n\n\t\t// Ethnicity\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIEthnicGroup,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_ethnic_group',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tshow_search_inputs: true,\n\t\t\tfield: 'ethnic_group_id',\n\t\t\tset_empty: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Ethnicity' ), form_item_input, tab_employee_column2 );\n\n\t\t//SIN\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'sin', width: 90 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'SIN / SSN' ), form_item_input, tab_employee_column2 );\n\n\t\t//Birth Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'birth_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Birth Date' ), form_item_input, tab_employee_column2 );\n\n\t\t//Hire Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'hire_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Hire Date' ), form_item_input, tab_employee_column2 );\n\n\t\t//Termination Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'termination_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Termination Date' ), form_item_input, tab_employee_column2 );\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_employee_column2, '', null, null, true );\n\n\t\t//Contact Tab start\n\t\tvar tab_contact_info = this.edit_view_tab.find( '#tab_contact_info' );\n\t\tvar tab_contact_info_column1 = tab_contact_info.find( '.first-column' );\n\t\tvar tab_contact_info_column2 = tab_contact_info.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[1] = [];\n\t\tthis.edit_view_tabs[1].push( tab_contact_info_column1 );\n\t\tthis.edit_view_tabs[1].push( tab_contact_info_column2 );\n\n\t\t// Photo\n\t\tif ( typeof FormData == 'undefined' ) {\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.IMAGE_BROWSER );\n\t\t\tthis.file_browser = form_item_input.TImageBrowser( {\n\t\t\t\tfield: '',\n\t\t\t\tdefault_width: 128,\n\t\t\t\tdefault_height: 128,\n\t\t\t\tenable_delete: true\n\t\t\t} );\n\n\t\t\tthis.file_browser.bind( 'imageChange', function( e, target ) {\n\t\t\t\tnew ServiceCaller().uploadFile( target.getValue(), 'object_type=user_photo&object_id=' + $this.current_edit_record.id, {\n\t\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t\tif ( result.toLowerCase() === 'true' ) {\n\t\t\t\t\t\t\t$this.file_browser.setImage( ServiceCaller.getURLByObjectType( 'user_photo' ) + '&object_id=' + $this.current_edit_record.id );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tTAlertManager.showAlert( result, 'Error' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.IMAGE_AVD_BROWSER );\n\t\t\tthis.file_browser = form_item_input.TImageAdvBrowser( {\n\t\t\t\tfield: '',\n\t\t\t\tdefault_width: 128,\n\t\t\t\tdefault_height: 128,\n\t\t\t\tenable_delete: true,\n\t\t\t\tcallBack: function( form_data ) {\n\t\t\t\t\tnew ServiceCaller().uploadFile( form_data, 'object_type=user_photo&object_id=' + $this.current_edit_record.id, {\n\t\t\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t\t\tif ( result.toLowerCase() === 'true' ) {\n\t\t\t\t\t\t\t\t$this.file_browser.setImage( ServiceCaller.getURLByObjectType( 'user_photo' ) + '&object_id=' + $this.current_edit_record.id );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tTAlertManager.showAlert( result, 'Error' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t},\n\t\t\t\tdeleteImageHandler: function( e ) {\n\t\t\t\t\t$this.onDeleteImage();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( this.is_edit ) {\n\t\t\tthis.file_browser.setEnableDelete( true );\n\t\t\tthis.file_browser.bind( 'deleteClick', function( e, target ) {\n\t\t\t\t$this.api.deleteImage( $this.current_edit_record.id, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.onDeleteImage();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Photo' ), this.file_browser, tab_contact_info_column1, '', null, false, true );\n\n\t\t//First Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'first_name_1', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'First Name' ), form_item_input, tab_contact_info_column1 );\n\n\t\t//Middle Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'middle_name', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Middle Name' ), form_item_input, tab_contact_info_column1 );\n\n\t\t//Last Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'last_name_1', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Last Name' ), form_item_input, tab_contact_info_column1 );\n\n\t\t//Home Address(Line 1)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address1', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Address (Line 1)' ), form_item_input, tab_contact_info_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Home Address(Line 2)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address2', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Address (Line 2)' ), form_item_input, tab_contact_info_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'city', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_contact_info_column1 );\n\n\t\t//Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'country', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_contact_info_column1 );\n\n\t\t//Province / State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'province' } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province/State' ), form_item_input, tab_contact_info_column1 );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'postal_code', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_contact_info_column1, '' );\n\n\t\t//Column 2\n\n\t\t//Gender\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'sex_id' } );\n\t\tform_item_input.setSourceData( $this.sex_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Gender' ), form_item_input, tab_contact_info_column2 );\n\n\t\t//Work Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'work_phone', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Work Phone' ), form_item_input, tab_contact_info_column2, '' );\n\n\t\t//Work Phone Ext\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'work_phone_ext' } );\n\t\tform_item_input.css( 'width', '50' );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Work Phone Ext' ), form_item_input, tab_contact_info_column2 );\n\n\t\t//Home Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'home_phone', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Phone' ), form_item_input, tab_contact_info_column2 );\n\n\t\t//Mobile Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'mobile_phone', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Mobile Phone' ), form_item_input, tab_contact_info_column2 );\n\n\t\t//Fax\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'fax_phone', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fax' ), form_item_input, tab_contact_info_column2 );\n\n\t\t//Work Email\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'work_email', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Work Email' ), form_item_input, tab_contact_info_column2, '', null, true );\n\n\t\t//Home Email\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'home_email', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Email' ), form_item_input, tab_contact_info_column2, '', null, true );\n\n\t\t//Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'note', width: '100%', rows: 4 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_contact_info_column2, '', null, null, true );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Hierarchy Tab start\n\t\tvar tab_hierarchy = this.edit_view_tab.find( '#tab_hierarchy' );\n\t\tvar tab_hierarchy_column1 = tab_hierarchy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[2] = [];\n\t\tthis.edit_view_tabs[2].push( tab_hierarchy_column1 );\n\n\t\tif ( this.hierarchyPermissionValidate() ) {\n\t\t\tvar res = this.hierarchyControlAPI.getHierarchyControlOptions( { async: false } );\n\t\t\t$this.hierarchy_options_dic = {};\n\t\t\tvar data = res.getResult();\n\t\t\tfor ( var key in data ) {\n\t\t\t\tif ( parseInt( key ) === 200 && Global.getProductEdition() != 25 ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t$this.hierarchy_options_dic[key] = Global.buildRecordArray( data[key] );\n\t\t\t}\n\t\t\tif ( _.size( $this.hierarchy_options_dic ) > 0 ) {\n\t\t\t\t$this.show_hierarchy = true;\n\t\t\t} else {\n\t\t\t\t$this.show_hierarchy = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( this.show_hierarchy && this.hierarchy_ui_model ) {\n\t\t\tthis.edit_view_tab.find( '#tab_hierarchy' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\tthis.edit_view_tab.find( '#tab_hierarchy' ).find( '.hierarchy-div' ).css( 'display', 'none' );\n\t\t\tvar len = this.hierarchy_ui_model.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar ui_model = this.hierarchy_ui_model[i];\n\t\t\t\tvar options = this.hierarchy_options_dic[ui_model.id];\n\t\t\t\tif ( options ) {\n\t\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\t\t\t\tform_item_input.TComboBox( { field: ui_model.id } );\n\t\t\t\t\tform_item_input.setSourceData( options );\n\t\t\t\t\tthis.addEditFieldToColumn( ui_model.value, form_item_input, tab_hierarchy_column1 );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_hierarchy' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\tthis.edit_view_tab.find( '#tab_hierarchy' ).find( '.hierarchy-div' ).NoHierarchyBox( { related_view_controller: this } );\n\t\t\tthis.edit_view_tab.find( '#tab_hierarchy' ).find( '.hierarchy-div' ).css( 'display', 'block' );\n\t\t}\n\n\t\t//Login Tab start\n\t\tvar tab_login = this.edit_view_tab.find( '#tab_login' );\n\t\tvar tab_login_column1 = tab_login.find( '.first-column' );\n\t\tvar tab_login_column2 = tab_login.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[3] = [];\n\t\tthis.edit_view_tabs[3].push( tab_login_column1 );\n\t\tthis.edit_view_tabs[3].push( tab_login_column2 );\n\n\t\t// Current Password - This is shown/hidden in setCurrentPasswordField()\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.PASSWORD_INPUT );\n\t\tform_item_input.TPasswordInput( { field: 'current_password', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Current Password' ), form_item_input, tab_login_column1, '', null, true );\n\n\t\t//Login Enabled\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_login' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Login Enabled' ), form_item_input, tab_login_column1 );\n\n\t\t//User Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'user_name', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'User Name' ), form_item_input, tab_login_column1 );\n\n\t\t//Password\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.PASSWORD_INPUT );\n\t\tform_item_input.TTextInput( { field: 'password', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Change Password' ), form_item_input, tab_login_column1 );\n\n\t\t//Password Confirm\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.PASSWORD_INPUT );\n\t\tform_item_input.TTextInput( { field: 'password_confirm', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Confirm Password' ), form_item_input, tab_login_column1 );\n\n\t\t//Quick Punch ID\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'phone_id', width: 90 } );\n\t\tvar quick_punch_id_description = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tquick_punch_id_description.append( form_item_input );\n\t\tquick_punch_id_description.append( $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'Optional' ) + ' )</span>' ) );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Quick Punch ID' ), form_item_input, tab_login_column2, '', quick_punch_id_description );\n\n\t\t//Quick Punch Password\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'phone_password', width: 90 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Quick Punch Password' ), form_item_input, tab_login_column2 );\n\n\t\t//Login Expire Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'login_expire_date' } );\n\t\tvar login_expire_date_description = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlogin_expire_date_description.append( form_item_input );\n\t\tlogin_expire_date_description.append( $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'Leave blank to never expire' ) + ' )</span>' ) );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Login Expire Date' ), form_item_input, tab_login_column2, '', login_expire_date_description );\n\n\t\t//Terminated Permission Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPermissionControl,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_permission_control',\n\t\t\tshow_search_inputs: true,\n\t\t\tfield: 'terminated_permission_control_id',\n\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t} ),\n\t\t\tset_empty: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Terminated Permission Group' ), form_item_input, tab_login_column2 );\n\n\t\tTTPromise.resolve( 'employeeEditView', 'openEditView' );\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSetSearchFilterFinished() {\n\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildBasicUIFinished() {\n\t\tvar basicSearchTabPanel = this.search_panel.find( 'div #basic_search' );\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tvar $this = this;\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Company' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'company_id',\n\t\t\t\tlayout_name: 'global_company',\n\t\t\t\tapi_class: TTAPI.APICompany,\n\t\t\t\tmultiple: false,\n\t\t\t\tcustom_first_label: Global.default_item,\n\t\t\t\tbasic_search: PermissionManager.checkTopLevelPermission( 'Companies' ) ? true : false,\n\t\t\t\tadv_search: PermissionManager.checkTopLevelPermission( 'Companies' ) ? true : false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Legal Entity' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'legal_entity_id',\n\t\t\t\tlayout_name: 'global_legal_entity',\n\t\t\t\tapi_class: TTAPI.APILegalEntity,\n\t\t\t\tmultiple: true,\n\t\t\t\tcustom_first_label: Global.any_item,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tfield: 'last_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Number' ),\n\t\t\t\tfield: 'employee_number',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Phone' ),\n\t\t\t\tfield: 'any_phone',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Email' ),\n\t\t\t\tfield: 'any_email',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tobject_type_id: 200,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Gender' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'sex_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t\t} ),\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t\t} ),\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 3,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tcustomSearchFilter: ( function( args ) {\n\t\t\t\t\treturn $this.setCompanyIdFilter( args );\n\t\t\t\t} ),\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'SIN/SSN' ),\n\t\t\t\tfield: 'sin',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} )\n\t\t];\n\t}\n\n\tsetCompanyIdFilter( args ) {\n\n\t\tif ( !args ) {\n\t\t\targs = { filter_data: { company_id: this.select_company_id } };\n\n\t\t} else {\n\t\t\tif ( !args.filter_data ) {\n\t\t\t\targs.filter_data = { company_id: this.select_company_id };\n\t\t\t} else {\n\t\t\t\targs.filter_data.company_id = this.select_company_id;\n\t\t\t}\n\t\t}\n\n\t\treturn args;\n\t}\n\n\tcleanWhenUnloadView( callBack ) {\n\n\t\t$( '#employee_view_container' ).remove();\n\t\tsuper.cleanWhenUnloadView( callBack );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns( column_filter, enable_system_columns ) {\n\t\tif ( column_filter == undefined ) {\n\t\t\tcolumn_filter = {};\n\t\t}\n\t\tcolumn_filter.company_id = true;\n\t\tcolumn_filter.latitude = true;\n\t\tcolumn_filter.longitude = true;\n\t\treturn this._getFilterColumnsFromDisplayColumns( column_filter, enable_system_columns );\n\t}\n\n}\n"],"sourceRoot":""}