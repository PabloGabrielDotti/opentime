(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["hr-recruitment-JobApplicantEmploymentViewController"],{2257:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"JobApplicantEmploymentViewController":()=>o});class o extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#job_applicant_employment_view_container",country_array:null,province_array:null,e_province_array:null,i_province_array:null,employment_status_array:null,wage_type_array:null,company_api:null,sub_view_grid_autosize:!0,sub_view_mode:!0}),super(e)}initOptions(){this.initDropDownOption("employment_status"),this.initDropDownOption("wage_type"),this.initDropDownOption("country","country",this.company_api)}showNoResultCover(e){super.showNoResultCover(!!this.sub_view_mode)}onAddClick(){this.sub_view_mode&&this.buildContextMenu(!0),super.onAddClick()}init(e){this.edit_view_tpl="JobApplicantEmploymentEditView.html",this.permission_id="job_applicant",this.viewId="JobApplicantEmployment",this.script_name="JobApplicantEmploymentView",this.table_name_key="job_applicant_employment",this.context_menu_name=$.i18n._("Employment"),this.navigation_label=$.i18n._("Job Applicant Employment")+":",this.api=TTAPI.APIJobApplicantEmployment,this.company_api=TTAPI.APICompany,this.render(),this.sub_view_mode||this.initData()}buildEditViewUI(){super.buildEditViewUI();var e=this,t={"tab_job_applicant_employment":{"label":$.i18n._("Job Applicant Employment")},"tab_audit":!0};this.setTabModel(t),this.navigation.AComboBox({api_class:TTAPI.APIJobApplicantEmployment,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_job_applicant_employment",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i,o,a,l=this.edit_view_tab.find("#tab_job_applicant_employment"),n=l.find(".first-column"),d=l.find(".second-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(n),this.edit_view_tabs[0].push(d),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"company_name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Company Name"),i,n,""),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"title",width:200}),this.addEditFieldToColumn($.i18n._("Job Title"),i,n),(i=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description"}),this.addEditFieldToColumn($.i18n._("Description"),i,n,"",null,null,!0),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address1",width:"100%"}),this.addEditFieldToColumn($.i18n._("Address (Line 1)"),i,n),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address2",width:"100%"}),this.addEditFieldToColumn($.i18n._("Address (Line 2)"),i,n),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"city",width:200}),this.addEditFieldToColumn($.i18n._("City"),i,n),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"country",set_empty:!0}),i.setSourceData(e.country_array),this.addEditFieldToColumn($.i18n._("Country"),i,n),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"province"}),i.setSourceData([]),this.addEditFieldToColumn($.i18n._("Province/State"),i,n),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"postal_code",width:90}),this.addEditFieldToColumn($.i18n._("Postal/ZIP Code"),i,n),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"employment_status_id"}),i.setSourceData(e.employment_status_array),this.addEditFieldToColumn($.i18n._("Employment Status"),i,n),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"wage_type_id"}),i.setSourceData(e.wage_type_array),this.addEditFieldToColumn($.i18n._("Wage Type"),i,n),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"wage",width:50}),this.addEditFieldToColumn($.i18n._("Wage"),i,n),(i=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"start_date"}),o=$("<div class='widget-h-box'></div>"),a=$("<span class='widget-right-label'> "+$.i18n._("ie")+" : "+LocalCacheData.getLoginUserPreference().date_format_display+"</span>"),o.append(i),o.append(a),this.addEditFieldToColumn($.i18n._("Start Date"),i,n,"",o),(i=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"end_date"}),o=$("<div class='widget-h-box'></div>"),a=$("<span class='widget-right-label'> "+$.i18n._("ie")+" : "+LocalCacheData.getLoginUserPreference().date_format_display+"</span>"),o.append(i),o.append(a),this.addEditFieldToColumn($.i18n._("End Date"),i,n,"",o),(i=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"is_current_employer"}),this.addEditFieldToColumn($.i18n._("Current Employer"),i,d,""),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"contact_first_name",width:200}),this.addEditFieldToColumn($.i18n._("Contact First Name"),i,d),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"contact_last_name",width:200}),this.addEditFieldToColumn($.i18n._("Contact Last Name"),i,d),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"contact_title",width:200}),this.addEditFieldToColumn($.i18n._("Contact Title"),i,d),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"contact_work_phone",width:200}),this.addEditFieldToColumn($.i18n._("Contact Work Phone"),i,d),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"contact_mobile_phone",width:200}),this.addEditFieldToColumn($.i18n._("Contact Mobile Phone"),i,d),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"contact_work_email",width:200}),this.addEditFieldToColumn($.i18n._("Contact Work Email"),i,d),(i=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"is_contact_available"}),this.addEditFieldToColumn($.i18n._("May we contact this person/employer"),i,d),(i=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"leave_reason"}),this.addEditFieldToColumn($.i18n._("Reason for leaving"),i,d,"",null,null,!0),(i=Global.loadWidgetByName(FormItemType.TAG_INPUT)).TTagInput({field:"tag",object_type_id:380}),this.addEditFieldToColumn($.i18n._("Tags"),i,d,"",null,null,!0)}onFormItemChange(e,t){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var i=e.getField();switch(this.current_edit_record[i]=e.getValue(),i){case"country":this.edit_view_ui_dic.province.setValue(null)}"country"!==i?t||this.validate():this.onCountryChange()}setCurrentEditRecordData(){for(var e in this.current_edit_record){var t=this.edit_view_ui_dic[e];if(Global.isSet(t))switch(e){case"country":this.setCountryValue(t,e);break;default:t.setValue(this.current_edit_record[e])}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}setProvince(e,t){var i=this;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),i.province_array=Global.buildRecordArray(e),i.adv_search_field_ui_dic.province.setSourceData(i.province_array)}}):(i.province_array=[],this.adv_search_field_ui_dic.province.setSourceData([]))}eSetProvince(e,t){var i=this,o=i.edit_view_ui_dic.province;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),i.e_province_array=Global.buildRecordArray(e),t&&i.e_province_array.length>0&&(i.current_edit_record.province=i.e_province_array[0].value,o.setValue(i.current_edit_record.province)),o.setSourceData(i.e_province_array)}}):(i.e_province_array=[],o.setSourceData([]))}onGridSelectRow(){this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.setDefaultMenu()}searchDone(){super.searchDone(),TTPromise.resolve("JobApplicant_History_Tab","JobApplicantEmploymentViewController")}}o.loadSubView=function(e,t,i){Global.loadViewSource("JobApplicantEmployment","SubJobApplicantEmploymentView.html",(function(o){var a=_.template(o);Global.isSet(t)&&t(),Global.isSet(e)&&(e.html(a({})),Global.isSet(i)&&i(sub_job_applicant_employment_view_controller))}))}}}]);
//# sourceMappingURL=hr-recruitment-JobApplicantEmploymentViewController.bundle.js.map?v=e3767aca10a9649ab7e4