{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/filebrowser/TImage.js","webpack://timetrex/./interface/html5/global/widgets/filebrowser/TImageAdvBrowser.js","webpack://timetrex/./interface/html5/views/developer_tools/GridTestViewController.js"],"names":["$","fn","TImage","options","Global","addCss","field","opts","extend","defaults","this","clearErrorStyle","getField","getValue","setValue","val","d","Date","attr","getTime","each","o","meta","data","document","on","e","$this_image_widget","target","parents","height","top","file_browser_overlay","css","append","parent","find","TAlertManager","showConfirmAlert","i18n","_","flag","type","message","time","trigger","off","remove","jQuery","TImageAdvBrowser","image","result_form_data","$this","accept_filter","default_width","default_height","callBack","setEnable","btn","children","eq","show","hide","setImage","getCookie","onImageLoad","image_height","naturalHeight","image_width","width","naturalWidth","setEnableDelete","removeAttr","text","show_browser","isSet","name","deleteImageHandler","bind","IndexViewController","openWizard","form_data","GridTestViewController","BaseViewController","el","user_api","user_group_api","company_api","user_id_array","grid_container_id","super","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","navigation_label","api","TTAPI","APIUser","select_company_id","LocalCacheData","getCurrentCompany","id","APIUserGroup","APICompany","edit_view_grid_array","TTUUID","generateUUID","render","buildContextMenu","initData","collectUIDataToCurrentEditRecord","setEditViewDataDone","tab_model","setTabModel","tab_employee_column1","edit_view_tab","edit_view_tabs","push","$div_grid_container","$grid","addGrid","setData","getFakeData","i","length","setGridColumnsWidth","TTPromise","resolve","container_selector","sub_grid_mode","onResizeGrid","onSelectRow","onCellSelect","onSelectAll","ondblClickRow","onRightClickRow","rowId","column_count","column_header_text_array","column_info_array","n","letter","toString","index","label","sortable","title","TTGrid","getGridSetup","randomize","data_element","m","buildSearchFields","search_fields","exclude","include","ContextMenuIconName","edit","cancel","result_data","JSON","parse","processResultData","grid","current_edit_record","setCurrentEditViewState","add","wait","initEditView","initEditViewUI","setTimeout","setTabOVisibility"],"mappings":"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","file":"developer_tools-GridTestViewController.bundle.js?v=2d9f5af87a39101c8b2c","sourcesContent":["( function( $ ) {\n\n\t$.fn.TImage = function( options ) {\n\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImage.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\tif ( !val ) {\n\t\t\t\tthis.attr( 'src', '' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar d = new Date();\n\t\t\tthis.attr( 'src', val + '&t=' + d.getTime() );\n\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImage.defaults = {};\n\n\t$( document ).on( 'mouseover', '.file-browser img', function( e ) {\n\t\tvar $this_image_widget = $( e.target ).parents( '.file-browser' );\n\n\t\tif ( !$( '.file_browser_overlay' )[0] && $( e.target ).attr( 'enable-delete' ) == 1 ) {\n\t\t\tvar height = $( e.target ).height();\n\t\t\tvar top = ( height - 32 ) / 2;\n\t\t\tvar left = top;\n\n\t\t\tvar file_browser_overlay = $( '<div class=\"file_browser_overlay\"><img src=\"theme/default/images/delete-512.png\" style=\"position:absolute;width:32px;height:32px;top:' + top + 'px;left:' + left + 'px;\"></div>' );\n\t\t\tfile_browser_overlay.css( 'position', 'absolute' );\n\t\t\tfile_browser_overlay.css( 'top', '0px' );\n\t\t\tfile_browser_overlay.css( 'left', '0' );\n\t\t\tfile_browser_overlay.css( 'cursor', 'pointer' );\n\t\t\tfile_browser_overlay.css( 'height', height + 'px' );\n\t\t\tfile_browser_overlay.css( 'width', '100%' );\n\t\t\tfile_browser_overlay.css( 'background', 'rgba(255,255,255,0.85)' );\n\n\t\t\t$( e.target ).parents( '.file-browser' ).append( file_browser_overlay );\n\n\t\t\t$( document ).on( 'click', '.file_browser_overlay', function( e ) {\n\t\t\t\tvar img_src = $( e.target ).parent().find( 'img' ).attr( 'src' );\n\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'This will permanently delete the image. Are you sure?' ), '', function( flag ) {\n\t\t\t\t\tif ( flag ) {\n\t\t\t\t\t\tvar e = { type: 'deleteClick', message: 'Delete image clicked.', time: new Date() };\n\t\t\t\t\t\t$this_image_widget.trigger( e );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t$( document ).on( 'mouseleave', '.file-browser', function() {\n\t\t\t\t$( document ).off( 'click', '.file_browser_overlay' );\n\t\t\t\tif ( $( '.file_browser_overlay' )[0] ) {\n\t\t\t\t\tvar file_browser_overlay = $( this ).find( '.file_browser_overlay' );\n\t\t\t\t\tfile_browser_overlay.off().remove();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\n} )( jQuery );","( function( $ ) {\n\n\t$.fn.TImageAdvBrowser = function( options ) {\n\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImageAdvBrowser.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar name = 'filedata';\n\n\t\tvar accept_filter = '';\n\n\t\tvar default_width = 177;\n\t\tvar default_height = 42;\n\n\t\tvar callBack = null;\n\n\t\tvar enabled = true;\n\n\t\tvar image;\n\n\t\tvar result_form_data;\n\n\t\tthis.setEnable = function( val ) {\n\t\t\tenabled = val;\n\n\t\t\tvar btn = this.children().eq( 1 );\n\t\t\tif ( !val ) {\n\t\t\t\tbtn.hide();\n\t\t\t} else {\n\t\t\t\tbtn.show();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn result_form_data;\n\t\t};\n\n\t\tthis.setImage = function( val ) {\n\t\t\tif ( !val ) {\n\t\t\t\timage.attr( 'src', '' );\n\t\t\t\timage.hide();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar d = new Date();\n\t\t\timage.hide();\n\t\t\timage.attr( 'src', val + '&t=' + d.getTime() + '&X-CSRF-Token=' + getCookie( 'CSRF-Token' ) );\n\t\t\timage.css( 'height', 'auto' );\n\t\t\timage.css( 'width', 'auto' );\n\n\t\t};\n\n\t\tthis.onImageLoad = function( image ) {\n\n\t\t\tvar image_height = $( image ).height() > 0 ? $( image ).height() : image.naturalHeight;\n\t\t\tvar image_width = $( image ).width() > 0 ? $( image ).width() : image.naturalWidth;\n\n\t\t\tif ( image_height > default_height ) {\n\t\t\t\t$( image ).css( 'height', default_height );\n\n\t\t\t}\n\n\t\t\tif ( image_width > default_width ) {\n\t\t\t\t$( image ).css( 'width', default_width );\n\t\t\t\t$( image ).css( 'height', 'auto' );\n\t\t\t}\n\n\t\t\t$this.trigger( 'setSize' );\n\n\t\t\tif ( image_height < 5 ) {\n\t\t\t\t$( image ).hide();\n\t\t\t} else {\n\t\t\t\t$( image ).show();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setEnableDelete = function( val ) {\n\t\t\tvar image = $this.find( '.image' );\n\t\t\tif ( !val ) {\n\t\t\t\timage.removeAttr( 'enable-delete' );\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\timage.attr( 'enable-delete', 1 );\n\t\t\t}\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t\tvar $$this = this;\n\n\t\t\t$( this ).find( '#upload_image' ).text( $.i18n._( 'Upload Image' ) );\n\n\t\t\tif ( o.callBack ) {\n\t\t\t\tcallBack = o.callBack;\n\t\t\t}\n\n\t\t\tif ( o.show_browser === false ) {\n\t\t\t\t$( this ).children().eq( 1 ).hide();\n\t\t\t}\n\n\t\t\tif ( o.default_width > 0 ) {\n\t\t\t\tdefault_width = o.default_width;\n\t\t\t}\n\n\t\t\tif ( o.default_height > 0 ) {\n\t\t\t\tdefault_height = o.default_height;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.name ) ) {\n\t\t\t\tname = o.name;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( accept_filter ) ) {\n\t\t\t\taccept_filter = o.accept_filter;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.deleteImageHandler ) ) {\n\t\t\t\t$this.find( '.file-browser' ).on( 'deleteClick', function() {\n\t\t\t\t\to.deleteImageHandler();\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar browser = $( this ).children().eq( 1 );\n\t\t\tbrowser.bind( 'click', function() {\n\t\t\t\tIndexViewController.openWizard( 'UserPhotoWizard', null, function( form_data ) {\n\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack( form_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_form_data = form_data;\n\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\timage = $( this ).children().eq( 0 );\n\t\t\timage.on( 'load', function() {\n\t\t\t\t$this.onImageLoad( this );\n\t\t\t} );\n\n\t\t\timage.hide();\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImageAdvBrowser.defaults = {};\n\n} )( jQuery );","import '@/global/widgets/filebrowser/TImage';\nimport '@/global/widgets/filebrowser/TImageAdvBrowser';\n\nexport class GridTestViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#grid_test_view_container',\n\n\t\t\t// _required_files: ['TImage', 'TImageAdvBrowser'],\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tcompany_api: null,\n\t\t\tuser_id_array: null,\n\t\t\tgrid_container_id: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.edit_view_tpl = 'GridTestEditView.html';\n\t\tthis.permission_id = 'user';\n\t\tthis.viewId = 'GridTest';\n\t\tthis.script_name = 'GridTestView';\n\t\tthis.table_name_key = 'grid_test';\n\t\tthis.context_menu_name = $.i18n._( 'Grid Test' );\n\t\tthis.navigation_label = $.i18n._( 'AwesomBox Test' ) + ':';\n\t\tthis.api = TTAPI.APIUser;\n\t\tthis.select_company_id = LocalCacheData.getCurrentCompany().id;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.user_id_array = [];\n\n\t\tthis.edit_view_grid_array = [];\n\n\t\tthis.grid_container_id = TTUUID.generateUUID();\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\t\tthis.initData();\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tclearEditViewData() {\n\t\treturn false;\n\t}\n\n\tbuildEditViewUI() {\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_employee': { 'label': $.i18n._( 'AWESOMEBOX TESTING VIEW' ) },\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\t//Tab 0 start\n\n\t\tvar tab_employee = this.edit_view_tab.find( '#tab_employee' );\n\n\t\tvar tab_employee_column1 = tab_employee.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab_employee_column1 );\n\n\t\tvar $div_grid_container = $( '<div id=\"' + this.grid_container_id + '\">' );\n\t\ttab_employee_column1.append( $div_grid_container );\n\n\t\t/** build the test grids **/\n\t\tvar $grid = this.addGrid( 1 );\n\t\t$div_grid_container.append( $grid );\n\t\t$grid.setData( this.getFakeData( 1 ) );\n\n\t\tvar column_header_text_array = [\n\t\t\t'column name',\n\t\t\t'column name2',\n\t\t\t'column name3',\n\t\t\t'column name4',\n\t\t\t'column name5',\n\t\t\t'column name6'\n\t\t];\n\t\tvar $grid = this.addGrid( 6, column_header_text_array );\n\t\t$div_grid_container.append( $grid );\n\t\t$grid.setData( this.getFakeData( 6, true ) );\n\n\t\tvar $grid = this.addGrid( 12 );\n\t\t$div_grid_container.append( $grid );\n\t\t$grid.setData( this.getFakeData( 12 ) );\n\n\t\tvar $grid = this.addGrid( 40 );\n\t\t$div_grid_container.append( $grid );\n\t\t$grid.setData( this.getFakeData( 40 ) );\n\n\t\tfor ( var i = 0; i < this.edit_view_grid_array.length; i++ ) {\n\t\t\tthis.edit_view_grid_array[i].setGridColumnsWidth();\n\t\t}\n\n\t\tTTPromise.resolve( 'Gridtest', 'init' );\n\t}\n\n\tgetGridSetup() {\n\t\tvar setup = {\n\t\t\tcontainer_selector: '.edit-view-tab',\n\t\t\tsub_grid_mode: true,\n\t\t\tonResizeGrid: true,\n\t\t\tonSelectRow: function() {\n\t\t\t},\n\t\t\tonCellSelect: function() {\n\t\t\t},\n\t\t\tonSelectAll: function() {\n\t\t\t},\n\t\t\tondblClickRow: function( e ) {\n\t\t\t},\n\t\t\tonRightClickRow: function( rowId ) {\n\t\t\t},\n\t\t\theight: 200\n\t\t};\n\t\treturn setup;\n\t}\n\n\taddGrid( column_count, column_header_text_array ) {\n\t\tvar container_selector = 'test_grid_' + column_count;\n\t\t$( '#' + this.grid_container_id ).append( $( '<table id=\"' + container_selector + '\" >' ) );\n\n\t\tvar column_info_array = [];\n\t\tfor ( var n = 0; n < column_count; n++ ) {\n\t\t\tvar letter = ( n + 10 ).toString( 36 );\n\t\t\tvar text = 'Column ' + letter;\n\t\t\tif ( column_header_text_array ) {\n\t\t\t\ttext = column_header_text_array[n];\n\t\t\t}\n\t\t\tcolumn_info_array.push( {\n\t\t\t\tname: letter,\n\t\t\t\tindex: letter,\n\t\t\t\tlabel: text,\n\t\t\t\twidth: 100,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t} );\n\t\t}\n\n\t\tvar $grid = new TTGrid( container_selector, this.getGridSetup(), column_info_array );\n\t\tthis.edit_view_grid_array.push( $grid );\n\t\treturn $grid;\n\t}\n\n\tgetFakeData( column_count, randomize ) {\n\t\tvar data = [];\n\t\tfor ( var n = 0; n < 4; n++ ) {\n\t\t\tvar data_element = {};\n\t\t\tfor ( var m = 0; m < column_count; m++ ) {\n\t\t\t\tvar letter = ( m + 10 ).toString( 36 );\n\t\t\t\tif ( randomize ) {\n\t\t\t\t\tdata_element[letter] = TTUUID.generateUUID();\n\t\t\t\t} else {\n\t\t\t\t\tdata_element[letter] = 'content';\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tdata.push( data_element );\n\t\t}\n\t\treturn data;\n\t}\n\n\tbuildSearchFields() {\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [];\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\tContextMenuIconName.edit,\n\t\t\t\tContextMenuIconName.cancel\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\t//override that forces same data to grid at all times.\n\tsearch() {\n\t\tvar result_data = JSON.parse( '[{\"id\":\"11e85213-a799-d200-b041-123456abcdef\",\"status\":\"Active\",\"employee_number\":100,\"first_name\":\"Mr.\",\"last_name\":\"FAKE\",\"full_name\":\"Administrator, Mr.\",\"home_phone\":\"471-438-3900\",\"is_owner\":true,\"is_child\":false},' +\n\t\t\t'{\"id\":\"11e85213-ad34-e0e0-8541-123456abcdef\",\"status\":\"Active\",\"employee_number\":13,\"first_name\":\"Tristen\",\"last_name\":\"Braun\",\"full_name\":\"FAKE Braun, Tristen\",\"home_phone\":\"527-500-4852\",\"is_owner\":false,\"is_child\":true},' +\n\t\t\t'{\"id\":\"11e85213-af64-d0e0-9b00-123456abcdef\",\"status\":\"Active\",\"employee_number\":20,\"first_name\":\"Jane\",\"last_name\":\"Doe\",\"full_name\":\"FAKE Doe, Jane\",\"home_phone\":\"477-443-9650\",\"is_owner\":false,\"is_child\":true},' +\n\t\t\t'{\"id\":\"11e85213-ac44-1830-9908-123456abcdef\",\"status\":\"Active\",\"employee_number\":10,\"first_name\":\"John\",\"last_name\":\"Doe\",\"full_name\":\"FAKE Doe, John\",\"home_phone\":\"464-547-9452\",\"is_owner\":false,\"is_child\":true}]' );\n\t\tthis.user_id_array = result_data;\n\t\tresult_data = this.processResultData( result_data );\n\t\tthis.grid.setData( result_data );\n\t\tthis.grid.setGridColumnsWidth();\n\t\tthis.current_edit_record = result_data[0];\n\t\tthis.setCurrentEditViewState( 'edit' );\n\n\t\tTTPromise.add( 'Gridtest', 'init' );\n\t\tvar $this = this;\n\t\tTTPromise.wait( 'Gridtest', 'init', function() {\n\t\t\t$this.initEditView();\n\t\t} );\n\n\t\tthis.initEditViewUI( this.viewId, this.edit_view_tpl );\n\t}\n\n\tsetEditViewDataDone() {\n\t\tvar $this = this;\n\t\tsetTimeout( function() {\n\t\t\t$this.setTabOVisibility( true );\n\t\t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t\t}, 2500 );\n\t}\n\n}\n"],"sourceRoot":""}