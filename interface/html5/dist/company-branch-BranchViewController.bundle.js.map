{"version":3,"sources":["webpack://timetrex/./interface/html5/views/company/branch/BranchViewController.js"],"names":["BranchViewController","BaseViewController","options","_","defaults","el","status_array","country_array","province_array","e_province_array","company_api","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIBranch","APICompany","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","initDropDownOption","exclude","include","label","id","ContextMenuIconName","import_icon","group","icon","Icons","permission_result","PermissionManager","checkTopLevelPermission","permission","sort_order","select_value","search_panel","getSelectTabIndex","basic_search_field_ui_dic","getValue","setProvince","adv_search_field_ui_dic","onImportClick","$this","IndexViewController","openWizard","search","change","proxy","selectVal","setValue","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","edit_view_ui_dic","current_edit_record","validate","onCountryChange","buildEditViewUI","form_item_input","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_branch_column1","edit_view_tab","find","edit_view_tabs","push","Global","loadWidgetByName","FormItemType","COMBO_BOX","TComboBox","field","setSourceData","addEditFieldToColumn","TEXT_INPUT","TTextInput","width","parent","set_empty","getProductEdition","AWESOME_BOX","APIGEOFence","TAG_INPUT","TTagInput","object_type_id","val","m","getOptions","onResult","res","getResult","buildRecordArray","refresh","province_widget","length","province","value","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser"],"mappings":"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","file":"company-branch-BranchViewController.bundle.js?v=e2b52bef897498b3ddb4","sourcesContent":["export class BranchViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#branch_view_container',\n\n\t\t\tstatus_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\te_province_array: null,\n\n\t\t\tcompany_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'BranchEditView.html';\n\t\tthis.permission_id = 'branch';\n\t\tthis.viewId = 'Branch';\n\t\tthis.script_name = 'BranchView';\n\t\tthis.table_name_key = 'branch';\n\t\tthis.context_menu_name = $.i18n._( 'Branch' );\n\t\tthis.navigation_label = $.i18n._( 'Branch' ) + ':';\n\t\tthis.api = TTAPI.APIBranch;\n\t\tthis.company_api = TTAPI.APICompany;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status' );\n\t\tthis.initDropDownOption( 'country', 'country', this.company_api );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\t\tid: ContextMenuIconName.import_icon,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.import_icon,\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ImportCSVBranch' ),\n\t\t\t\t\tpermission: null,\n\t\t\t\t\tsort_order: 8000\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonSetSearchFilterFinished() {\n\t\tvar combo;\n\t\tvar select_value;\n\t\tif ( this.search_panel.getSelectTabIndex() === 0 ) {\n\t\t\tcombo = this.basic_search_field_ui_dic['country'];\n\t\t\tselect_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t} else if ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tcombo = this.adv_search_field_ui_dic['country'];\n\t\t\tselect_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonImportClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'Branch', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tonBuildBasicUIFinished() {\n\t\tthis.basic_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.basic_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.basic_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\n\t\tswitch ( key ) {\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.current_edit_record[key] = target.getValue();\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_branch': { 'label': $.i18n._( 'Branch' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tvar form_item_input;\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_branch',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_branch = this.edit_view_tab.find( '#tab_branch' );\n\n\t\tvar tab_branch_column1 = tab_branch.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_branch_column1 );\n\n\t\t//Status\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_branch_column1, '' );\n\n\t\t// Name\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_branch_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Code\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'manual_id', width: 65 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Code' ), form_item_input, tab_branch_column1 );\n\n\t\t// Address1\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'address1', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 1)' ), form_item_input, tab_branch_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Address2\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'address2', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 2)' ), form_item_input, tab_branch_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// city\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'city', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_branch_column1 );\n\n\t\t//Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'country', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_branch_column1 );\n\n\t\t//Province / State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'province' } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province/State' ), form_item_input, tab_branch_column1 );\n\n\t\t//City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'postal_code', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_branch_column1 );\n\n\t\t// Phone\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'work_phone', width: 149 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Phone' ), form_item_input, tab_branch_column1 );\n\n\t\t// Fax\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'fax_phone', width: 149 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fax' ), form_item_input, tab_branch_column1 );\n\n\t\t//Allowed GEO Fences\n\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIGEOFence,\n\t\t\t\tallow_multiple_selection: true,\n\t\t\t\tlayout_name: 'global_geo_fence',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tfield: 'geo_fence_ids'\n\t\t\t} );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Allowed GEO Fences' ), form_item_input, tab_branch_column1 );\n\t\t}\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 110 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_branch_column1, '', null, null, true );\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t\tthis.basic_search_field_ui_dic['province'].setSourceData( [] );\n\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\t\t\t\t\t$this.basic_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Phone' ),\n\t\t\t\tfield: 'work_phone',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tobject_type_id: 110,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Fax' ),\n\t\t\t\tfield: 'fax_phone',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Address (Line1)' ),\n\t\t\t\tfield: 'address1',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Address (Line2)' ),\n\t\t\t\tfield: 'address2',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Postal/ZIP Code' ),\n\t\t\t\tfield: 'postal_code',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Code' ),\n\t\t\t\tfield: 'manual_id',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n}"],"sourceRoot":""}