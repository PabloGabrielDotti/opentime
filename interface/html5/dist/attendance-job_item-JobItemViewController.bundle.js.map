{"version":3,"sources":["webpack://timetrex/./interface/html5/views/attendance/job_item/JobItemViewController.js"],"names":["JobItemViewController","BaseViewController","options","_","defaults","el","status_array","job_item_group_array","job_item_group_api","sub_document_view_controller","document_object_type_id","date_api","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIJobItem","APITTDate","APIJobItemGroup","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","$this","initDropDownOption","getJobItemGroup","onResult","res","getResult","Global","buildTreeRecord","sub_view_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","exclude","include","label","id","ContextMenuIconName","import_icon","group","icon","Icons","permission_result","PermissionManager","checkTopLevelPermission","permission","sort_order","onImportClick","IndexViewController","openWizard","search","buildEditViewUI","form_item_input","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_task","edit_view_tab","find","tab_task_column1","edit_view_tabs","push","loadWidgetByName","FormItemType","COMBO_BOX","TComboBox","field","addEditFieldToColumn","TEXT_INPUT","TTextInput","width","parent","AWESOME_BOX","tree_mode","set_empty","APIProduct","getProductEdition","APIGEOFence","TAG_INPUT","TTagInput","object_type_id","tab_task_column2","mode","need_parser_sec","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser","key","current_edit_record","widget","edit_view_ui_dic","isSet","setValue","collectUIDataToCurrentEditRecord","setEditViewDataDone","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","getField","c_value","getValue","validate"],"mappings":"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","file":"attendance-job_item-JobItemViewController.bundle.js?v=4b66a2b9e4e4f5f1f464","sourcesContent":["export class JobItemViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#job_item_view_container',\n\n\t\t\tstatus_array: null,\n\n\t\t\tjob_item_group_array: null,\n\t\t\tjob_item_group_api: null,\n\n\t\t\tsub_document_view_controller: null,\n\n\t\t\tdocument_object_type_id: null,\n\n\t\t\tdate_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'JobItemEditView.html';\n\t\tthis.permission_id = 'job_item';\n\t\tthis.viewId = 'JobItem';\n\t\tthis.script_name = 'JobItemView';\n\t\tthis.table_name_key = 'job_item';\n\t\tthis.context_menu_name = $.i18n._( 'Tasks' );\n\t\tthis.navigation_label = $.i18n._( 'Tasks' ) + ':';\n\n\t\tthis.document_object_type_id = 70;\n\t\tthis.api = TTAPI.APIJobItem;\n\n\t\tthis.date_api = TTAPI.APITTDate;\n\n\t\tthis.job_item_group_api = TTAPI.APIJobItemGroup;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'JobItem' );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status' );\n\t\tthis.job_item_group_api.getJobItemGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\tres = Global.buildTreeRecord( res );\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t\t$this.job_item_group_array = res;\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [{\n\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\tid: ContextMenuIconName.import_icon,\n\t\t\t\tgroup: 'other',\n\t\t\t\ticon: Icons.import_icon,\n\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ImportCSVJobItem' ),\n\t\t\t\tpermission: null,\n\t\t\t\tsort_order: 8000\n\t\t\t}]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tonImportClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'JobItem', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_task': { 'label': $.i18n._( 'Task' ) },\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIJobItem,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_item',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_task = this.edit_view_tab.find( '#tab_task' );\n\n\t\tvar tab_task_column1 = tab_task.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_task_column1 );\n\n\t\t//Status\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_task_column1, '' );\n\n\t\t//\t\t  Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_task_column1 );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_task_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Code\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'manual_id', width: 65 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Code' ), form_item_input, tab_task_column1 );\n\n\t\t//Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\ttree_mode: true,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_tree_column',\n\t\t\tset_empty: true,\n\t\t\tfield: 'group_id'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.job_item_group_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Group' ), form_item_input, tab_task_column1 );\n\n\t\t// Product\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIProduct,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_product',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'product_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Product' ), form_item_input, tab_task_column1 );\n\n\t\t//Allowed GEO Fences\n\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIGEOFence,\n\t\t\t\tallow_multiple_selection: true,\n\t\t\t\tlayout_name: 'global_geo_fence',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tfield: 'geo_fence_ids'\n\t\t\t} );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Allowed GEO Fences' ), form_item_input, tab_task_column1 );\n\t\t}\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 610 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_task_column1, '', null, null, true );\n\n\t\tvar tab_task_column2 = tab_task.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0].push( tab_task_column2 );\n\n\t\t//Estimated Time\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'estimate_time', mode: 'time_unit', need_parser_sec: true } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Estimated Time' ), form_item_input, tab_task_column2, '', null, true, true );\n\n\t\t//Estimated Quantity\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'estimate_quantity', width: 150 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Estimated Quantity' ), form_item_input, tab_task_column2 );\n\n\t\t//Estimated Bad Quantity\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'estimate_bad_quantity', width: 150 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Estimated Bad Quantity' ), form_item_input, tab_task_column2 );\n\n\t\t//Bad Quantity Billable Rate\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'bad_quantity_rate', width: 150 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bad Quantity Billable Rate' ), form_item_input, tab_task_column2 );\n\n\t\t//Billable Rate\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'billable_rate', width: 86 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Billable Rate' ), form_item_input, tab_task_column2 );\n\n\t\t//Minimum Billable Time\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'minimum_time', mode: 'time_unit', need_parser_sec: true } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Billable Time' ), form_item_input, tab_task_column2, '', null );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Code' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'manual_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Description' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'description',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tobject_type_id: 610,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Product' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'product_id',\n\t\t\t\tlayout_name: 'global_product',\n\t\t\t\tapi_class: TTAPI.APIProduct,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n//\t\tswitch ( key ) {\n//\t\t\tcase 'estimate_time':\n//\t\t\tcase 'minimum_time':\n//\t\t\t\tc_value = this.date_api.parseTimeUnit( target.getValue(), {async: false} ).getResult();\n//\t\t\t\tbreak;\n//\t\t}\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\n\t}\n\n}\n"],"sourceRoot":""}