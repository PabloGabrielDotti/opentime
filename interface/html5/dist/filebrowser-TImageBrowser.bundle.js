(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["filebrowser-TImageBrowser"],{3536:()=>{var e;(e=jQuery).fn.TImageBrowser=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var i,a,r=e.extend({},e.fn.TImageBrowser.defaults,t),n=this,s="filedata",l="",d=177,h=42;return this.setEnabled=function(e){var t=this.find(".browser-form input");e?(t.removeAttr("disabled"),t.removeClass("disable-element")):(t.attr("disabled",!0),t.removeClass("disable-element").addClass("disable-element"))},this.clearErrorStyle=function(){},this.getFileName=function(){return a.val()},this.getField=function(){return i},this.setEnableDelete=function(e){var t=n.find(".image");e?t.attr("enable-delete",1):t.removeAttr("enable-delete")},this.getValue=function(){return a&&a.val()?"undefined"==typeof FormData?n.find(".browser-form"):new FormData(e(n.find(".browser-form"))[0]):null},this.getImageSrc=function(){return n.find(".image").attr("src")},this.setImage=function(e){var t=n.find(".image");if(!e)return t.attr("src",""),void t.hide();var i=new Date;t.hide(),t.attr("src",e+"&t="+i.getTime()),t.css("height","auto"),t.css("width","auto")},this.setValue=function(e){e||(e="")},this.each((function(){var t=e.meta?e.extend({},r,e(this).data()):r;i=t.field,t.default_width>0&&(d=t.default_width),t.default_height>0&&(h=t.default_height),Global.isSet(t.name)&&(s=t.name),Global.isSet(l)&&(l=t.accept_filter),a=e(this).find(".browser");var o=e(this).find(".image");o.hide(),o.on("load",(function(){!function(t){var i=e(t).height()>0?e(t).height():t.naturalHeight,a=e(t).width()>0?e(t).width():t.naturalWidth;i>h&&e(t).css("height",h),a>d&&(e(t).css("width",d),e(t).css("height","auto")),n.trigger("setSize"),i<5?e(t).hide():e(t).show()}(this)})),l?a.attr("accept",l):(l="image/*",a.attr("accept","image/*")),a.attr("id","file_browser"),a.attr("name",s),Global.isSet(t.changeHandler)&&n.bind("imageChange",t.changeHandler),Global.isSet(t.deleteImageHandler)&&this.find(".file-browser").on("deleteClick",(function(){t.deleteImageHandler()})),a.bind("change",(function(){if(o.hide(),"undefined"!=typeof FileReader){var e=this.files?this.files:[];if(!e.length||!window.FileReader)return;if("image/*"===l){var t=new FileReader;t.readAsDataURL(e[0]),t.onloadend=function(){var e=this.result;o.attr("src",e)}}}n.trigger("imageChange",[n])}))})),this},e.fn.TImageBrowser.defaults={}}}]);
//# sourceMappingURL=filebrowser-TImageBrowser.bundle.js.map?v=ce485b74040214272b62