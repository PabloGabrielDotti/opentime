{"version":3,"sources":["webpack://timetrex/./interface/html5/views/hr/recruitment/JobApplicantEmploymentViewController.js"],"names":["JobApplicantEmploymentViewController","BaseViewController","options","_","defaults","el","country_array","province_array","e_province_array","i_province_array","employment_status_array","wage_type_array","company_api","sub_view_grid_autosize","sub_view_mode","super","this","initDropDownOption","show_new_btn","showNoResultCover","buildContextMenu","onAddClick","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIJobApplicantEmployment","APICompany","render","initData","buildEditViewUI","$this","tab_model","setTabModel","navigation","AComboBox","api_class","id","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","form_item_input","widgetContainer","label","tab_job_applicant_employment","edit_view_tab","find","tab_job_applicant_employment_column1","tab_job_applicant_employment_column2","edit_view_tabs","push","Global","loadWidgetByName","FormItemType","TEXT_INPUT","TTextInput","field","width","addEditFieldToColumn","parent","TEXT_AREA","TTextArea","COMBO_BOX","TComboBox","set_empty","setSourceData","DATE_PICKER","TDatePicker","LocalCacheData","getLoginUserPreference","date_format_display","append","CHECKBOX","TCheckbox","TAG_INPUT","TTagInput","object_type_id","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","current_edit_record","getValue","edit_view_ui_dic","setValue","validate","onCountryChange","widget","isSet","setCountryValue","collectUIDataToCurrentEditRecord","setEditViewDataDone","val","m","getOptions","onResult","res","getResult","buildRecordArray","adv_search_field_ui_dic","refresh","province_widget","length","province","value","setDefaultMenu","searchDone","TTPromise","resolve","loadSubView","container","beforeViewLoadedFun","afterViewLoadedFun","loadViewSource","result","template","html","sub_job_applicant_employment_view_controller"],"mappings":"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","file":"hr-recruitment-JobApplicantEmploymentViewController.bundle.js?v=e3767aca10a9649ab7e4","sourcesContent":["export class JobApplicantEmploymentViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#job_applicant_employment_view_container',\n\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\t\t\te_province_array: null,\n\t\t\ti_province_array: null,\n\t\t\temployment_status_array: null,\n\t\t\twage_type_array: null,\n\n\t\t\tcompany_api: null,\n\n\t\t\tsub_view_grid_autosize: true,\n\t\t\tsub_view_mode: true\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'employment_status' );\n\t\tthis.initDropDownOption( 'wage_type' );\n\t\tthis.initDropDownOption( 'country', 'country', this.company_api );\n\t}\n\n\tshowNoResultCover( show_new_btn ) {\n\t\tsuper.showNoResultCover( ( this.sub_view_mode ) ? true : false );\n\t}\n\n\tonAddClick() {\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t}\n\n\t\tsuper.onAddClick();\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'JobApplicantEmploymentEditView.html';\n\t\tthis.permission_id = 'job_applicant';\n\t\tthis.viewId = 'JobApplicantEmployment';\n\t\tthis.script_name = 'JobApplicantEmploymentView';\n\t\tthis.table_name_key = 'job_applicant_employment';\n\t\tthis.context_menu_name = $.i18n._( 'Employment' );\n\t\tthis.navigation_label = $.i18n._( 'Job Applicant Employment' ) + ':';\n\t\tthis.api = TTAPI.APIJobApplicantEmployment;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.render();\n\n\t\t//call init data in parent view\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\n\t\t//this.setSelectRibbonMenuIfNecessary( 'UserContact' )\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_job_applicant_employment': { 'label': $.i18n._( 'Job Applicant Employment' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIJobApplicantEmployment,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_applicant_employment',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\tvar tab_job_applicant_employment = this.edit_view_tab.find( '#tab_job_applicant_employment' );\n\t\tvar tab_job_applicant_employment_column1 = tab_job_applicant_employment.find( '.first-column' );\n\t\tvar tab_job_applicant_employment_column2 = tab_job_applicant_employment.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_job_applicant_employment_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_job_applicant_employment_column2 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t// tab_job_applicant_employment column1\n\n\t\t// Company Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'company_name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Company Name' ), form_item_input, tab_job_applicant_employment_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Job Title\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'title', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Job Title' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'description' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_job_applicant_employment_column1, '', null, null, true );\n\n\t\t// Address (Line 1)\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address1', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 1)' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Address (Line 2)\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'address2', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 2)' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'city', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'country', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Province/State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'province' } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province/State' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Postal / ZIP Code\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'postal_code', width: 90 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Employment Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'employment_status_id' } );\n\t\tform_item_input.setSourceData( $this.employment_status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employment Status' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Wage Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'wage_type_id' } );\n\t\tform_item_input.setSourceData( $this.wage_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage Type' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Wage\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'wage', width: 50 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage' ), form_item_input, tab_job_applicant_employment_column1 );\n\n\t\t// Start Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'start_date' } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'ie' ) + ' : ' + LocalCacheData.getLoginUserPreference().date_format_display + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Start Date' ), form_item_input, tab_job_applicant_employment_column1, '', widgetContainer );\n\n\t\t// End Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'end_date' } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'ie' ) + ' : ' + LocalCacheData.getLoginUserPreference().date_format_display + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'End Date' ), form_item_input, tab_job_applicant_employment_column1, '', widgetContainer );\n\n\t\t// Current Employer\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'is_current_employer' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Current Employer' ), form_item_input, tab_job_applicant_employment_column2, '' );\n\n\t\t// Contact First Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'contact_first_name', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contact First Name' ), form_item_input, tab_job_applicant_employment_column2 );\n\n\t\t// Contact Last Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'contact_last_name', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contact Last Name' ), form_item_input, tab_job_applicant_employment_column2 );\n\n\t\t// Contact Title\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'contact_title', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contact Title' ), form_item_input, tab_job_applicant_employment_column2 );\n\n\t\t// Contact Work Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'contact_work_phone', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contact Work Phone' ), form_item_input, tab_job_applicant_employment_column2 );\n\n\t\t// Contact Mobile Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'contact_mobile_phone', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contact Mobile Phone' ), form_item_input, tab_job_applicant_employment_column2 );\n\n\t\t// Contact Work Email\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'contact_work_email', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contact Work Email' ), form_item_input, tab_job_applicant_employment_column2 );\n\n\t\t// May we contact this person/employer\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'is_contact_available' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'May we contact this person/employer' ), form_item_input, tab_job_applicant_employment_column2 );\n\n\t\t// Reason for leaving\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'leave_reason' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Reason for leaving' ), form_item_input, tab_job_applicant_employment_column2, '', null, null, true );\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 380 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_job_applicant_employment_column2, '', null, null, true );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\n\t\tthis.current_edit_record[key] = target.getValue();\n\n\t\tswitch ( key ) {\n\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonGridSelectRow() {\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\t\tthis.setDefaultMenu();\n\t}\n\n\tsearchDone() {\n\n\t\tsuper.searchDone();\n\n\t\tTTPromise.resolve( 'JobApplicant_History_Tab', 'JobApplicantEmploymentViewController' );\n\n\t}\n\n}\n\nJobApplicantEmploymentViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\tGlobal.loadViewSource( 'JobApplicantEmployment', 'SubJobApplicantEmploymentView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_job_applicant_employment_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};"],"sourceRoot":""}