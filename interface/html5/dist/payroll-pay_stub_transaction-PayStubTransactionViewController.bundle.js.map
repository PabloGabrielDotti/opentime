{"version":3,"sources":["webpack://timetrex/./interface/html5/views/payroll/pay_stub_transaction/PayStubTransactionViewController.js"],"names":["PayStubTransactionViewController","BaseViewController","options","_","defaults","el","status_array","currency_array","user_status_array","user_group_array","type_array","user_api","user_group_api","company_api","pay_stub_entry_api","include_entries","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIPayStubTransaction","currency_api","APICurrency","remittance_source_account_api","APIRemittanceSourceAccount","remittance_destination_account_api","APIRemittanceDestinationAccount","APIUser","APIPayStubEntry","APIUserGroup","APICompany","pay_period_api","APIPayPeriod","initPermission","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","PermissionManager","validate","show_search_tab","callBack","initDropDownOption","exclude","include","ContextMenuIconName","view","edit","mass_edit","save","save_and_continue","save_and_next","cancel","label","id","timesheet","group","icon","Icons","schedule","pay_stub","pay_stubs","pay_stub_amendment","edit_employee","employee","edit_pay_period","pay_period","doNotSetFocus","context_menu_array","Global","isSet","selectContextMenu","setTotalDisplaySpan","len","length","grid_selected_length","getGridSelectIdArray","i","context_btn","find","attr","removeClass","pay_stub_transaction","setDefaultMenuViewIcon","setDefaultMenuEditIcon","setDefaultMenuMassEditIcon","setDefaultMenuSaveIcon","setDefaultMenuSaveAndNextIcon","setDefaultMenuSaveAndContinueIcon","setDefaultMenuCancelIcon","setDefaultMenuEditEmployeeIcon","setDefaultMenuEditPayPeriodIcon","setContextMenuGroupVisibility","pId","editPermissionValidate","addClass","editChildPermissionValidate","viewPermissionValidate","edit_only_mode","viewOwnerOrChildPermissionValidate","is_mass_editing","setEditMenuSaveIcon","setEditMenuEditIcon","setEditMenuMassEditIcon","copy","setEditMenuCopyIcon","setEditMenuSaveAndContinueIcon","save_and_new","setEditMenuSaveAndAddIcon","setEditMenuSaveAndNextIcon","save_and_copy","setEditMenuSaveAndCopyIcon","copy_as_new","setEditMenuCopyAndAddIcon","import_icon","setEditMenuImportIcon","setEditMenuViewIcon","current_edit_record","key","widget","edit_view_ui_dic","setValue","collectUIDataToCurrentEditRecord","setEditViewDataDone","user_id","setEnabled","remittance_source_account_id","remittance_destination_account_id","currency_id","amount","confirmation_number","ignoreWarning","onSaveClick","$this","is_changed","is_add","LocalCacheData","current_doing_context_action","record","uniformVariable","key_name","onResult","result","onSaveAndContinueResult","isValid","result_data","getResult","refresh_id","TTUUID","isUUID","zero_id","not_exist_id","search","onSaveAndContinueDone","setErrorTips","setErrorMenu","column_filter","display_columns","grid","getGridParam","name","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","getField","c_value","getValue","hasOwnProperty","isChecked","getEnabled","validateResult","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","APIPayStub","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","form_item_input","tab_pay_stub_transaction_column1","edit_view_tab","edit_view_tabs","push","loadWidgetByName","FormItemType","AWESOME_BOX","set_empty","field","addEditFieldToColumn","COMBO_BOX","TComboBox","setSourceData","TEXT_INPUT","TTextInput","width","DATE_PICKER","TDatePicker","TEXT_AREA","TTextArea","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","generate_pay_stub","onNavigationClick","editId","noRefreshUI","iconName","base_date","filter","ids","user_ids","pay_period_ids","pay_stub_ids","edit_view","pay_period_id","pay_stub_id","pay_stub_start_date","grid_selected_id_array","each","index","value","grid_selected_row","getRecordFromGridById","filter_data","select_date","addViewTab","window","location","href","IndexViewController","goToView","openEditView","include_users","include_user_ids","setCurrentEditViewState","selectedId","TAlertManager","showAlert","onCancelClick","sub_view_mode","parent_key","parent_value","initEditView","loadView","loadViewSource","template","contentContainer","html"],"mappings":"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","file":"payroll-pay_stub_transaction-PayStubTransactionViewController.bundle.js?v=8a6198dd2183b38b1609","sourcesContent":["export class PayStubTransactionViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_stub_transaction_view_container',\n\n\t\t\tstatus_array: null,\n\t\t\tcurrency_array: null,\n\t\t\tuser_status_array: null,\n\t\t\tuser_group_array: null,\n\t\t\ttype_array: null,\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tcompany_api: null,\n\t\t\tpay_stub_entry_api: null,\n\n\t\t\tinclude_entries: true\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit() {\n\t\t//this._super('initialize' );\n\t\tthis.edit_view_tpl = 'PayStubTransactionEditView.html';\n\t\tthis.permission_id = 'pay_stub';\n\t\tthis.viewId = 'PayStubTransaction';\n\t\tthis.script_name = 'PayStubTransactionView';\n\t\tthis.table_name_key = 'pay_stub_transaction';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Stub Transaction' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Stub Transactions' ) + ':';\n\n\t\tthis.api = TTAPI.APIPayStubTransaction;\n\t\tthis.currency_api = TTAPI.APICurrency;\n\t\tthis.remittance_source_account_api = TTAPI.APIRemittanceSourceAccount;\n\t\tthis.remittance_destination_account_api = TTAPI.APIRemittanceDestinationAccount;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.pay_stub_entry_api = TTAPI.APIPayStubEntry;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.pay_period_api = TTAPI.APIPayPeriod;\n\n\t\tthis.initPermission();\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'PayStub' );\n\t}\n\n\tinitPermission() {\n\t\tsuper.initPermission();\n\n\t\tif ( PermissionManager.validate( this.permission_id, 'view' ) || PermissionManager.validate( this.permission_id, 'view_child' ) ) {\n\t\t\tthis.show_search_tab = true;\n\t\t} else {\n\t\t\tthis.show_search_tab = false;\n\t\t}\n\t}\n\n\tinitOptions( callBack ) {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status', 'transaction_status_id' );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\tContextMenuIconName.view,\n\t\t\t\tContextMenuIconName.edit,\n\t\t\t\tContextMenuIconName.mass_edit,\n\t\t\t\tContextMenuIconName.save,\n\t\t\t\tContextMenuIconName.save_and_continue,\n\t\t\t\tContextMenuIconName.save_and_next,\n\t\t\t\tContextMenuIconName.cancel,\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.timesheet\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Schedule' ),\n\t\t\t\t\tid: ContextMenuIconName.schedule,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.schedule\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay<br>Stubs' ),\n\t\t\t\t\tid: ContextMenuIconName.pay_stub,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_stubs\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stub<br>Amendments' ),\n\t\t\t\t\tid: ContextMenuIconName.pay_stub_amendment,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_stub_amendment\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit<br>Employee' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Pay<br>Period' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_pay_period,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_period\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\t\tvar len = this.context_menu_array.length;\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.pay_stub_transaction:\n\n\t\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\t//View icon should be displayed separate from Employee Pay Stub/Employer Pay Stub icons.\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub_amendment:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'pay_stub_amendment' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_pay_period:\n\t\t\t\t\tthis.setDefaultMenuEditPayPeriodIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetDefaultMenuEditPayPeriodIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( !this.editPermissionValidate( 'pay_period_schedule' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.editChildPermissionValidate( 'user' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuViewIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( pId === 'punch' || pId === 'schedule' || pId === 'pay_stub_amendment' ) {\n\t\t\tsuper.setDefaultMenuViewIcon( context_btn, grid_selected_length, pId );\n\t\t} else {\n\t\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t\t}\n\n\t\t\tif ( grid_selected_length > 0 && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t\t} else {\n\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t}\n\t\t}\n\t}\n\n\tsetEditMenu() {\n\t\tthis.selectContextMenu();\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\tswitch ( id ) {\n\t\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setEditMenuMassEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setEditMenuCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setEditMenuSaveAndContinueIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setEditMenuSaveAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setEditMenuSaveAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setEditMenuSaveAndCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setEditMenuCopyAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\t\tthis.setEditMenuImportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub_transaction:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_stub_transaction' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.pay_stub_amendment:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_stub_amendment' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_pay_period:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_period_schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetEditMenuViewIcon( context_btn, pId ) {\n\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuGeneratePayStubIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tthis.include_entries = true;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\n\t\tthis.edit_view_ui_dic.user_id.setEnabled( false );\n\t\tthis.edit_view_ui_dic.remittance_source_account_id.setEnabled( false );\n\t\tthis.edit_view_ui_dic.remittance_destination_account_id.setEnabled( false );\n\t\tthis.edit_view_ui_dic.currency_id.setEnabled( false );\n\t\tthis.edit_view_ui_dic.amount.setEnabled( false );\n\t\tthis.edit_view_ui_dic.confirmation_number.setEnabled( false );\n\t}\n\n\tonSaveClick( ignoreWarning ) {\n\t\tif ( this.is_mass_editing ) {\n\t\t\tthis.include_entries = false; // Note: not sure if we really need this, as a code search for this variable shows it only set in one other place, but not used. Was in original onSaveClick, so including it here for now.\n\t\t}\n\t\tsuper.onSaveClick( ignoreWarning );\n\t}\n\n\tonSaveAndContinue( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_changed = false;\n\t\tthis.is_add = false;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_continue';\n\t\tvar record = this.current_edit_record;\n\t\trecord = this.uniformVariable( record );\n\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onSaveAndContinueResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveAndContinueResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\n\t\t\t}\n\t\t\t$this.search( false );\n\t\t\t//     $this.editor.show_cover = false;\n\n\t\t\t$this.onSaveAndContinueDone( result );\n\t\t} else {\n\t\t\t$this.setErrorTips( result );\n\t\t\t$this.setErrorMenu();\n\t\t}\n\t}\n\n\t// onSaveAndNextResult( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t// \t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t// \t\t//     $this.editor.show_cover = true;\n\t// \t\t$this.onRightArrowClick();\n\t// \t\t$this.search( false );\n\t// \t\t$this.onSaveAndNextDone( result );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.pay_stub_transaction_date = true;\n\t\tcolumn_filter.pay_stub_start_date = true;\n\t\tcolumn_filter.pay_stub_end_date = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.status_id = true;\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.user_id = true;\n\t\tcolumn_filter.pay_stub_id = true;\n\t\tcolumn_filter.pay_period_id = true;\n\t\tcolumn_filter.pay_stub_run_id = true;\n\t\tcolumn_filter.currency_id = true;\n\t\tcolumn_filter.remittance_source_account_type_id = true;\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\n\t\tif ( display_columns ) {\n\t\t\tfor ( var i = 0; i < display_columns.length; i++ ) {\n\t\t\t\tcolumn_filter[display_columns[i].name] = true;\n\t\t\t}\n\t\t}\n\t\treturn column_filter;\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tvalidate() {\n\t\tvar $this = this;\n\t\tvar record = {};\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\n\t\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\trecord = this.current_edit_record;\n\t\t}\n\n\t\trecord = this.uniformVariable( record );\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_stub_transaction': { 'label': $.i18n._( 'Pay Stub Transaction' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStub,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_stub',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\t\tvar tab_pay_stub_transaction = this.edit_view_tab.find( '#tab_pay_stub_transaction' );\n\t\tvar tab_pay_stub_transaction_column1 = tab_pay_stub_transaction.find( '.first-column' );\n\t\tvar form_item_input;\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab_pay_stub_transaction_column1 );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: false,\n\t\t\tset_empty: false,\n\t\t\tfield: 'user_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_pay_stub_transaction_column1, '', null, true );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_pay_stub_transaction_column1 );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIRemittanceSourceAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_remittance_source_account',\n\t\t\tshow_search_inputs: false,\n\t\t\tset_empty: false,\n\t\t\tfield: 'remittance_source_account_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Source Account' ), form_item_input, tab_pay_stub_transaction_column1, '', null, true );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIRemittanceDestinationAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_remittance_destination_account',\n\t\t\tshow_search_inputs: false,\n\t\t\tset_empty: false,\n\t\t\tfield: 'remittance_destination_account_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Destination Account' ), form_item_input, tab_pay_stub_transaction_column1, '', null, true );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tfield: 'currency_id',\n\t\t\tset_empty: false,\n\t\t\tlayout_name: 'global_currency',\n\t\t\tallow_multiple_selection: false,\n\t\t\tshow_search_inputs: false,\n\t\t\tapi_class: TTAPI.APICurrency\n\t\t} );\n\t\t;\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Currency' ), form_item_input, tab_pay_stub_transaction_column1 );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'amount', width: 300 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Amount' ), form_item_input, tab_pay_stub_transaction_column1 );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'transaction_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Transaction Date' ), form_item_input, tab_pay_stub_transaction_column1 );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'confirmation_number', width: 300 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Confirmation #' ), form_item_input, tab_pay_stub_transaction_column1 );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'note', width: 300 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_pay_stub_transaction_column1 );\n\t}\n\n\tbuildSearchFields() {\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'transaction_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Source Account' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'remittance_source_account_id',\n\t\t\t\tlayout_name: 'global_remittance_source_account',\n\t\t\t\tapi_class: TTAPI.APIRemittanceSourceAccount,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_id',\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Currency' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'currency_id',\n\t\t\t\tapi_class: TTAPI.APICurrency,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_currency',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Transaction Date' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'transaction_date',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\tcase ContextMenuIconName.pay_stub_amendment:\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\tcase ContextMenuIconName.generate_pay_stub:\n\t\t\tcase ContextMenuIconName.pay_stub_transaction:\n\t\t\tcase ContextMenuIconName.edit_pay_period:\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonViewClick( editId, noRefreshUI ) {\n\t\tthis.onNavigationClick( ContextMenuIconName.view );\n\t}\n\n\tonNavigationClick( iconName ) {\n\t\tvar $this = this;\n\t\tvar grid_selected_id_array;\n\t\tvar filter = {};\n\t\tvar ids = [];\n\t\tvar user_ids = [];\n\t\tvar base_date;\n\t\tvar pay_period_ids = [];\n\t\tvar pay_stub_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tpay_period_ids.push( $this.current_edit_record.pay_period_id );\n\t\t\tpay_stub_ids.push( $this.current_edit_record.pay_stub_id );\n\t\t\tbase_date = $this.current_edit_record.pay_stub_start_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tpay_period_ids.push( grid_selected_row.pay_period_id );\n\t\t\t\tpay_stub_ids.push( grid_selected_row.pay_stub_id );\n\t\t\t\tbase_date = grid_selected_row.pay_stub_start_date;\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { filter_data: { id: ids } };\n\n\t\tvar post_data;\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tfilter.filter_data.id = { value: pay_stub_ids };\n\t\t\t\tfilter.select_date = base_date;\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Pay Stub Transactions' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'PayStub', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Employee', user_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.edit_pay_period:\n\t\t\t\tif ( pay_period_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'PayPeriods', pay_period_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t\tfilter.base_date = base_date;\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Pay Stub Transactions' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tvar include_users = { value: user_ids };\n\t\t\t\tfilter.filter_data.include_user_ids = include_users;\n\t\t\t\tfilter.select_date = base_date;\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Pay Stub Transactions' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'Schedule', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub_amendment:\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tfilter.filter_data.user_id = user_ids[0];\n\t\t\t\tfilter.filter_data.pay_period_id = pay_period_ids[0];\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Pay Stub Transactions' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'PayStubAmendment', filter );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.view:\n\t\t\t\tthis.setCurrentEditViewState( 'view' );\n\t\t\t\tthis.openEditView();\n\t\t\t\tfilter.filter_data = {};\n\n\t\t\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t\tvar selectedId = grid_selected_id_array[0];\n\t\t\t\tfilter.filter_data.id = [selectedId];\n\n\t\t\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Record does not exist' ) );\n\t\t\t\t\t\t\t$this.onCancelClick();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$this.current_edit_record = result_data;\n\n\t\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub_transaction:\n\t\t\t\tIndexViewController.openEditView( this, 'PayStubTransaction', user_ids[0] );\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n}\n\nPayStubTransactionViewController.loadView = function() {\n\tGlobal.loadViewSource( 'PayStubTransaction', 'PayStubTransactionView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result, args );\n\t\tGlobal.contentContainer().html( template );\n\t} );\n\n};\n"],"sourceRoot":""}