(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["policy-round_interval_policy-RoundIntervalPolicyViewController"],{6392:(i,t,e)=>{"use strict";e.r(t),e.d(t,{"RoundIntervalPolicyViewController":()=>o});class o extends BaseViewController{constructor(i={}){_.defaults(i,{el:"#round_interval_policy_view_container",punch_type_array:null,round_type_array:null,condition_type_array:null,date_api:null}),super(i)}init(i){this.edit_view_tpl="RoundIntervalPolicyEditView.html",this.permission_id="round_policy",this.viewId="RoundIntervalPolicy",this.script_name="RoundIntervalPolicyView",this.table_name_key="round_interval_policy",this.context_menu_name=$.i18n._("Rounding Policy"),this.navigation_label=$.i18n._("Rounding Policy")+":",this.api=TTAPI.APIRoundIntervalPolicy,this.date_api=TTAPI.APITTDate,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary("RoundIntervalPolicy")}initOptions(){this.initDropDownOption("punch_type"),this.initDropDownOption("round_type"),this.initDropDownOption("condition_type")}buildEditViewUI(){super.buildEditViewUI();var i=this,t={"tab_rounding_policy":{"label":$.i18n._("Rounding Policy")},"tab_audit":!0};this.setTabModel(t),this.navigation.AComboBox({api_class:TTAPI.APIRoundIntervalPolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_round_interval",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var e=this.edit_view_tab.find("#tab_rounding_policy").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(e);var o=Global.loadWidgetByName(FormItemType.TEXT_INPUT);o.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),o,e,""),o.parent().width("45%"),(o=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),o,e,"",null,null,!0),o.parent().width("45%"),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"punch_type_id",set_empty:!1}),o.setSourceData(i.punch_type_array),this.addEditFieldToColumn($.i18n._("Punch Type"),o,e),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"round_type_id",set_empty:!1}),o.setSourceData(i.round_type_array),this.addEditFieldToColumn($.i18n._("Round Type"),o,e),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"round_interval",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn($.i18n._("Interval"),o,e,"",null),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"grace",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn($.i18n._("Grace Period"),o,e,"",null),(o=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"strict"}),this.addEditFieldToColumn($.i18n._("Strict Schedule"),o,e,""),(o=Global.loadWidgetByName(FormItemType.SEPARATED_BOX)).SeparatedBox({label:$.i18n._("Only Round Punches Within The Following Window")}),this.addEditFieldToColumn("",o,e,"",null,!0,!1,"sp_box"),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"condition_type_id",set_empty:!1}),o.setSourceData(i.condition_type_array),this.addEditFieldToColumn($.i18n._("Window Based On"),o,e,"",null,!0),(o=Global.loadWidgetByName(FormItemType.TIME_PICKER)).TTimePicker({field:"condition_static_time"}),this.addEditFieldToColumn($.i18n._("Static Time"),o,e,"",null,!0),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"condition_static_total_time",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn($.i18n._("Static Total Time"),o,e,"",null,!0),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"condition_start_window",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn($.i18n._("Start Window"),o,e,"",null,!0),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"condition_stop_window",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn($.i18n._("Stop Window"),o,e,"",null,!0)}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Punch Type"),in_column:1,field:"punch_type_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Round Type"),in_column:1,field:"round_type_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}onFormItemChange(i,t){this.setIsChanged(i),this.setMassEditingFieldsWhenFormChange(i);var e=i.getField(),o=i.getValue();this.current_edit_record[e]=o,"condition_type_id"===e&&this.onConditionTypeChange(),t||this.validate()}onConditionTypeChange(){var i=parseInt(this.current_edit_record.condition_type_id);this.edit_view_form_item_dic.sp_box,this.edit_view_form_item_dic.condition_type_id,this.edit_view_form_item_dic.condition_static_time,this.edit_view_form_item_dic.condition_static_total_time,this.edit_view_form_item_dic.condition_start_window,this.edit_view_form_item_dic.condition_stop_window;if(Global.getProductEdition()<=10)return this.detachElement("condition_type_id"),this.detachElement("sp_box"),this.detachElement("condition_static_total_time"),this.detachElement("condition_start_window"),this.detachElement("condition_stop_window"),void this.detachElement("condition_static_time");this.detachElement("condition_static_total_time"),this.detachElement("condition_start_window"),this.detachElement("condition_stop_window"),this.detachElement("condition_static_time"),10==i||20==i?(this.attachElement("condition_start_window"),this.attachElement("condition_stop_window")):30==i?(this.attachElement("condition_static_time"),this.attachElement("condition_stop_window"),this.attachElement("condition_start_window")):40==i&&(this.attachElement("condition_static_total_time"),this.attachElement("condition_stop_window"),this.attachElement("condition_start_window")),this.editFieldResize()}setEditViewDataDone(){super.setEditViewDataDone(),this.onConditionTypeChange()}}}}]);
//# sourceMappingURL=policy-round_interval_policy-RoundIntervalPolicyViewController.bundle.js.map?v=98c19743d59b0cdad8b1