{"version":3,"sources":["webpack://timetrex/./interface/html5/views/home/dashboard/HomeViewController.js"],"names":["HomeViewController","TTBackboneView","options","_","defaults","el","user_generic_data_api","context_menu_array","viewId","dashletControllerArray","initMasonryDone","dashboard_container","order_data","current_scroll_position","current_mouse_position","super","Global","setUINotready","TTPromise","add","wait","$this","this","initialize","TopMenuManager","selected_menu_id","LocalCacheData","current_open_primary_controller","TTAPI","APIUserGenericData","api_dashboard","APIDashboard","$","initContextMenu","initDashBoard","setViewHeight","autoOpenEditOnlyViewIfNecessary","resolve","getAllURLArgs","sm","current_open_edit_only_controller","indexOf","IndexViewController","openEditView","sid","openReport","default_edit_id_for_next_open_edit_view","buildContextMenu","setDefaultMenu","unbind","bind","current_open_sub_controller","ribbon_menu_array","buildContextMenuModels","ribbon_menu_label_node","ribbon_menu_root_node","find","remove","ribbon_menu","len","length","i","ribbon_menu_group_array","get","ribbon_menu_ui","isSet","currentShownContextMenuName","removeContentMenuByName","subMenuNavMap","len1","x","ribbon_menu_group","ribbon_sub_menu_array","sub_menu_ui_nodes","ribbon_menu_group_ui","len2","y","ribbon_sub_menu","sub_menu_ui_node","push","RibbonSubMenuType","NAVIGATION","children","eq","addClass","click","off","on","e","id","attr","onSubMenuNavClick","onContextMenuClick","append","tabs","context_btn","hasClass","ContextMenuIconName","ProgressBar","showOverlay","onAddClick","refresh_all","trigger","auto_arrange","TAlertManager","showConfirmAlert","auto_arrange_dashlet_confirm_message","result","closeOverlay","reset_all","rese_all_dashlet_confirm_message","ids","dashlet_list","doResetAllNext","deleteUserGenericData","onResult","isValid","showErrorAlert","in_out","timesheet","schedule","request","pay_stub","onNavigationClick","triggerAnalyticsContextMenuClick","iconName","goToView","ribbon_view_controller","ribbon","hide","show","Debug","Text","selectContextMenu","openWizard","name","primary_view_id","select_menu_id","menus_quick_map","setSelectMenu","context_menu_name","tab","filter","parent","index","menu","RibbonMenu","label","sub_menu_groups","editor_group","RibbonSubMenuGroup","i18n","sub_menus","navigation_group","RibbonSubMenu","group","icon","Icons","new_add","permission_result","permission","branches","restart","save_and_continue","PermissionManager","checkTopLevelPermission","pay_stubs","cleanWhenUnloadView","doOrder","removeNoResultCover","getUserGenericData","filter_data","script","deleted","order_result","getResult","isArray","is_getting_default_dashlet","data","addMissedDashLetToOrder","yy","order_id","j","jj","dashlet","toString","loadPage","dashlet_data","loadScript","dash_let","height","width","dashlet_type","css","target","container","dashlet_id","split","deleteDashlet","modifyDashlet","dashlet_controller","DashletController","homeViewController","initContent","setUserGenericData","updateLayout","unLoadCurrentDashlets","masonry","sortable","empty","dashlet_controller_dic","getDefaultDashlets","detectMobileBrowser","disabled","no_result_box","loadWidgetByName","WidgetNamesDic","NO_RESULT_BOX","NoResultBox","related_view_controller","is_new","message","iconLabel","found","sort","checkCollision","mouse_coords","offset","left","top","saveScrollPosition","itemSelector","removeClass","pageX","pageY","forceHelperSize","forcePlaceholderSize","grid","containment","change","ui","placeholder_index","dashlets_to_loop","item","stop","saveNewOrder","draggingTargetId","refreshIfNecessary","recoverCurrentScrollPosition","callBack","dashlets","new_order","ii","arg","is_default","result_data","TTUUID","isUUID","zero_id","not_exist_id","saved_dashlet_id","delete_dashlet_confirm_message","removeDeletedDashletsData","showNoResultCover","splice","window","resize","scrollTop"],"mappings":"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","file":"home-dashboard-HomeViewController.bundle.js?v=9ab31521277e5fceee76","sourcesContent":["import jQueryBridget from 'jquery-bridget';\nimport Masonry from 'masonry-layout';\nimport { TTBackboneView } from '@/views/TTBackboneView';\n\nexport class HomeViewController extends TTBackboneView {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.home-view',\n\n\t\t\t// _required_files: ['jquery.masonry', 'jquery-bridget'],\n\t\t\tuser_generic_data_api: null,\n\t\t\tcontext_menu_array: null,\n\t\t\tviewId: null,\n\t\t\tdashletControllerArray: null,\n\t\t\tinitMasonryDone: false,\n\t\t\tdashboard_container: false,\n\t\t\torder_data: false,\n\t\t\tcurrent_scroll_position: false,\n\t\t\tcurrent_mouse_position: null\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\t/**\n\t * When changing this function, you need to look for all occurences of this function because it was needed in several bases\n\t * BaseViewController, HomeViewController, BaseWizardController, QuickPunchBaseViewControler\n\t *\n\t * @returns {Array}\n\t */\n\t// filterRequiredFiles() {\n\t// \tvar retval = [];\n\t// \tvar required_files = this._required_files;\n\t//\n\t// \tif ( required_files && required_files[0] ) {\n\t// \t\tretval = required_files;\n\t// \t} else {\n\t// \t\tfor ( var edition_id in required_files ) {\n\t// \t\t\tif ( Global.getProductEdition() >= edition_id ) {\n\t// \t\t\t\tretval = retval.concat( required_files[edition_id] );\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t//\n\t// \tDebug.Arr( retval, 'RETVAL', 'BaseViewController.js', 'BaseViewController', 'filterRequiredFiles', 10 );\n\t// \treturn retval;\n\t// }\n\n\tinitialize( options ) {\n\t\tGlobal.setUINotready();\n\t\tTTPromise.add( 'init', 'init' );\n\t\tTTPromise.wait();\n\t\tvar $this = this;\n\n\t\tsuper.initialize( options );\n\n\t\t// require( this.filterRequiredFiles(), function( Masonry, jQueryBridget ) {\n\n\t\t$this.viewId = 'Home';\n\t\tTopMenuManager.selected_menu_id = 'Home';\n\t\tLocalCacheData.current_open_primary_controller = $this;\n\t\t$this.user_generic_data_api = TTAPI.APIUserGenericData;\n\t\t$this.api_dashboard = TTAPI.APIDashboard;\n\n\t\tjQueryBridget( 'masonry', Masonry, $ );\n\t\t$this.dashboard_container = $( '.dashboard-container:visible' );\n\t\t$this.initMasonryDone = false;\n\t\t$this.initContextMenu();\n\t\t$this.initDashBoard();\n\t\t$this.setViewHeight();\n\t\t$this.autoOpenEditOnlyViewIfNecessary();\n\n\t\tTTPromise.resolve( 'BaseViewController', 'initialize' );\n\t\t// } );\n\t}\n\n\tautoOpenEditOnlyViewIfNecessary() {\n\t\tif ( LocalCacheData.getAllURLArgs() && LocalCacheData.getAllURLArgs().sm && !LocalCacheData.current_open_edit_only_controller ) {\n\t\t\tif ( LocalCacheData.getAllURLArgs().sm.indexOf( 'Report' ) < 0 ) {\n\t\t\t\tIndexViewController.openEditView( this, LocalCacheData.getAllURLArgs().sm, LocalCacheData.getAllURLArgs().sid );\n\t\t\t} else {\n\t\t\t\tIndexViewController.openReport( this, LocalCacheData.getAllURLArgs().sm );\n\t\t\t\tif ( LocalCacheData.getAllURLArgs().sid ) {\n\t\t\t\t\tLocalCacheData.default_edit_id_for_next_open_edit_view = LocalCacheData.getAllURLArgs().sid;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tinitContextMenu() {\n\t\tvar $this = this;\n\t\tthis.buildContextMenu();\n\t\tthis.setDefaultMenu();\n\t\t$( this.el ).unbind( 'click' ).bind( 'click', function() {\n\t\t\t$this.setDefaultMenu();\n\t\t} );\n\t}\n\n\tbuildContextMenu() {\n\t\tvar $this = this;\n\t\tLocalCacheData.current_open_sub_controller = null;\n\t\tthis.context_menu_array = [];\n\t\tvar ribbon_menu_array = this.buildContextMenuModels();\n\t\tvar ribbon_menu_label_node = $( '.ribbonTabLabel' );\n\t\tvar ribbon_menu_root_node = $( '.ribbon' );\n\n\t\tribbon_menu_root_node.find( '.context-menu' ).remove();\n\t\tvar len = ribbon_menu_array.length;\n\t\tvar ribbon_menu;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tribbon_menu = ribbon_menu_array[i];\n\t\t\tvar ribbon_menu_group_array = ribbon_menu.get( 'sub_menu_groups' );\n\t\t\tvar ribbon_menu_ui = $( '<div id=\"' + ribbon_menu.get( 'id' ) + '\" class=\"ribbon-tab-out-side ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide\"><div class=\"context-ribbon-tab\"><div class=\"ribbon-sub-menu\"></div></div></div>' );\n\t\t\t//make sure only one context menu shown at a time\n\t\t\tif ( Global.isSet( LocalCacheData.currentShownContextMenuName ) && LocalCacheData.currentShownContextMenuName !== ribbon_menu.get( 'id' ) ) {\n\t\t\t\tthis.removeContentMenuByName( LocalCacheData.currentShownContextMenuName );\n\n\t\t\t} else if ( Global.isSet( LocalCacheData.currentShownContextMenuName ) && LocalCacheData.currentShownContextMenuName === ribbon_menu.get( 'id' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.subMenuNavMap = {};\n\t\t\tLocalCacheData.currentShownContextMenuName = ribbon_menu.get( 'id' );\n\t\t\tvar len1 = ribbon_menu_group_array.length;\n\t\t\tfor ( var x = 0; x < len1; x++ ) {\n\t\t\t\tvar ribbon_menu_group = ribbon_menu_group_array[x];\n\t\t\t\tvar ribbon_sub_menu_array = ribbon_menu_group.get( 'sub_menus' );\n\t\t\t\tvar sub_menu_ui_nodes = $( '<ul></ul>' );\n\t\t\t\tvar ribbon_menu_group_ui = $( '<div class=\"menu top-ribbon-menu\"></div>' );\n\t\t\t\tvar len2 = ribbon_sub_menu_array.length;\n\t\t\t\tfor ( var y = 0; y < len2; y++ ) {\n\t\t\t\t\tvar ribbon_sub_menu = ribbon_sub_menu_array[y];\n\t\t\t\t\tif ( ribbon_sub_menu.get( 'selected' ) ) {\n\t\t\t\t\t\tvar sub_menu_ui_node = $( '<li ><div class=\"ribbon-sub-menu-icon selected-menu\" id=\"' + ribbon_sub_menu.get( 'id' ) + '\"><img src=\"' + ribbon_sub_menu.get( 'icon' ) + '\" ><span class=\"ribbon-label\">' + ribbon_sub_menu.get( 'label' ) + '</span></div></li>' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsub_menu_ui_node = $( '<li ><div class=\"ribbon-sub-menu-icon\" id=\"' + ribbon_sub_menu.get( 'id' ) + '\"><img src=\"' + ribbon_sub_menu.get( 'icon' ) + '\" ><span class=\"ribbon-label\">' + ribbon_sub_menu.get( 'label' ) + '</span></div></li>' );\n\t\t\t\t\t}\n\t\t\t\t\tthis.context_menu_array.push( sub_menu_ui_node );\n\t\t\t\t\tif ( ribbon_sub_menu.get( 'type' ) === RibbonSubMenuType.NAVIGATION ) {\n\t\t\t\t\t\tsub_menu_ui_node.children().eq( 0 ).addClass( 'ribbon-sub-menu-nav-icon' );\n\t\t\t\t\t\t$this.subMenuNavMap[ribbon_sub_menu.get( 'id' )] = ribbon_sub_menu;\n\t\t\t\t\t\tsub_menu_ui_node.click.off( 'click' ).on( 'click', function( e ) {\n\t\t\t\t\t\t\tvar id = $( $( this ).find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\t\t\t\t\t$this.onSubMenuNavClick( this, id );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//defend empty block error when comments following codes\n\t\t\t\t\t\tsub_menu_ui_node.off( 'click' ).on( 'click', function( e ) {\n\t\t\t\t\t\t\tvar id = $( $( this ).find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\t\t\t\t\t$this.onContextMenuClick( this );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\tsub_menu_ui_nodes.append( sub_menu_ui_node );\n\t\t\t\t}\n\t\t\t\tif ( sub_menu_ui_nodes.children().length > 0 ) {\n\t\t\t\t\tribbon_menu_group_ui.append( sub_menu_ui_nodes );\n\t\t\t\t\tribbon_menu_group_ui.append( $( '<div class=\"menu-bottom\"><span>' + ribbon_menu_group.get( 'label' ) + '</span></div>' ) );\n\t\t\t\t\tribbon_menu_ui.find( '.ribbon-sub-menu' ).append( ribbon_menu_group_ui );\n\t\t\t\t}\n\t\t\t}\n\t\t\tribbon_menu_label_node.append( $( '<li class=\"context-menu ui-state-default ui-corner-top\"><a ref=\"' + ribbon_menu.get( 'id' ) + '\" href=\"#' + ribbon_menu.get( 'id' ) + '\">' + ribbon_menu.get( 'label' ) + '</a></li>' ) );\n\t\t\tribbon_menu_root_node.append( ribbon_menu_ui );\n\t\t}\n\n\t\t$( '#ribbon_view_container' ).tabs( 'refresh' );\n\t}\n\n\tonContextMenuClick( context_btn ) {\n\t\tvar $this = this;\n\t\tcontext_btn = $( context_btn );\n\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\tif ( context_btn.hasClass( 'disable-image' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.add:\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onAddClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.refresh_all:\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tfor ( var i = 0; i < $this.dashletControllerArray.length; i++ ) {\n\t\t\t\t\t$( $this.dashletControllerArray[i].el ).find( '.refresh-btn' ).trigger( 'click' );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.auto_arrange:\n\t\t\t\tTAlertManager.showConfirmAlert( Global.auto_arrange_dashlet_confirm_message, null, function( result ) {\n\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\tProgressBar.showOverlay();\n\n\t\t\t\t\t\t$this.initDashBoard( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.reset_all:\n\t\t\t\tTAlertManager.showConfirmAlert( Global.rese_all_dashlet_confirm_message, null, function( result ) {\n\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\tProgressBar.showOverlay();\n\t\t\t\t\t\tvar ids = [];\n\t\t\t\t\t\tfor ( var i = 0; i < $this.dashlet_list.length; i++ ) {\n\t\t\t\t\t\t\tids.push( $this.dashlet_list[i].id );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( ids.length > 0 ) {\n\t\t\t\t\t\t\t$this.user_generic_data_api.deleteUserGenericData( ids, {\n\t\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\t\t\t\t\t\tdoResetAllNext();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdoResetAllNext();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction doResetAllNext() {\n\t\t\t\t\t\t\tif ( $this.order_data ) {\n\t\t\t\t\t\t\t\t$this.user_generic_data_api.deleteUserGenericData( $this.order_data.id, {\n\t\t\t\t\t\t\t\t\tonResult: function() {\n\t\t\t\t\t\t\t\t\t\t$this.initDashBoard();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$this.initDashBoard();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.in_out:\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\tcase ContextMenuIconName.request:\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t\tGlobal.triggerAnalyticsContextMenuClick( context_btn );\n\t}\n\n\tonNavigationClick( iconName ) {\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.in_out:\n\t\t\t\tIndexViewController.openEditView( LocalCacheData.current_open_primary_controller, 'InOut' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tIndexViewController.goToView( 'TimeSheet' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\tIndexViewController.goToView( 'Schedule' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.request:\n\t\t\t\tIndexViewController.goToView( 'Request' );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.pay_stub:\n\t\t\t\tIndexViewController.goToView( 'PayStub' );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tselectContextMenu() {\n\t\t//This code is also in BaseViewController\n\t\t//Error: Uncaught TypeError: Cannot read property 'el' of null in /interface/html5/views/BaseViewController.js?v=8.0.0-20141230-113526 line 1880\n\n\t\tif ( TopMenuManager.selected_menu_id !== this.viewId + 'ContextMenu' && TopMenuManager.ribbon_view_controller ) {\n\t\t\tvar ribbon = $( TopMenuManager.ribbon_view_controller.el );\n\t\t\t// Error: Object doesn't support property or method 'tabs' in /interface/html5/views/BaseViewController.js?v=8.0.6-20150417-083849 line 2032\n\t\t\tif ( ribbon ) {\n\t\t\t\tribbon.tabs( 'refresh' );\n\n\t\t\t\t//When a submenu is clicked, we need to show the correct context menu\n\t\t\t\tribbon.find( '.ui-tabs-panel' ).hide();\n\t\t\t\t$( '#' + this.viewId + 'ContextMenu' ).show();\n\t\t\t\tribbon.tabs( 'option', 'active', $( '.ribbonTabLabel li:visible' ).length - 1 );\n\t\t\t\tDebug.Text( '#' + this.viewId + 'ContextMenu visible', 'HomeViewController', 'HomeViewController', 'selectContextMenu', 10 );\n\t\t\t}\n\t\t}\n\t}\n\n\t//Call this when select grid row\n\t//Call this when setLayout\n\tsetDefaultMenu() {\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Client line 308\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.selectContextMenu();\n\t}\n\n\tonAddClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'DashletWizard', null, function() {\n\t\t\t$this.initDashBoard();\n\t\t} );\n\t}\n\n\tremoveContentMenuByName( name ) {\n\t\tif ( !LocalCacheData.current_open_primary_controller ) {\n\t\t\treturn;\n\t\t}\n\t\tvar primary_view_id = LocalCacheData.current_open_primary_controller.viewId;\n\t\tvar select_menu_id = TopMenuManager.menus_quick_map[primary_view_id];\n\t\tif ( TopMenuManager.ribbon_view_controller && TopMenuManager.selected_menu_id && TopMenuManager.selected_menu_id.indexOf( 'ContextMenu' ) !== -1 ) {\n\t\t\tTopMenuManager.ribbon_view_controller.setSelectMenu( select_menu_id );\n\t\t}\n\t\tif ( !Global.isSet( name ) ) {\n\t\t\tname = this.context_menu_name;\n\t\t}\n\t\tvar tab = $( '#ribbon ul a' ).filter( function() {\n\t\t\treturn $( this ).attr( 'ref' ) === name;\n\t\t} ).parent();\n\n\t\tvar index = $( 'li', $( '#ribbon' ) ).index( tab );\n\t\tif ( index >= 0 ) {\n\t\t\t$( '#ribbon_view_container' ).tabs( 'refresh' );\n\t\t}\n\t}\n\n\tbuildContextMenuModels() {\n\n\t\t//Context Menu\n\t\tvar menu = new RibbonMenu( {\n\t\t\tlabel: 'Dashboard',\n\t\t\tid: this.viewId + 'ContextMenu',\n\t\t\tsub_menu_groups: []\n\t\t} );\n\n\t\t//menu group\n\t\tvar editor_group = new RibbonSubMenuGroup( {\n\t\t\tlabel: $.i18n._( 'Editor' ),\n\t\t\tid: this.viewId + 'Editor',\n\t\t\tribbon_menu: menu,\n\t\t\tsub_menus: []\n\t\t} );\n\n\t\t//navigation group\n\t\tvar navigation_group = new RibbonSubMenuGroup( {\n\t\t\tlabel: $.i18n._( 'Navigation' ),\n\t\t\tid: this.viewId + 'navigation',\n\t\t\tribbon_menu: menu,\n\t\t\tsub_menus: []\n\t\t} );\n\n\t\tvar add = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'Add Dashlet' ),\n\t\t\tid: ContextMenuIconName.add,\n\t\t\tgroup: editor_group,\n\t\t\ticon: Icons.new_add,\n\t\t\tpermission_result: true,\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar auto_arrange = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'Auto Arrange' ),\n\t\t\tid: ContextMenuIconName.auto_arrange,\n\t\t\tgroup: editor_group,\n\t\t\ticon: Icons.branches,\n\t\t\tpermission_result: true,\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar refresh_all = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'Refresh All<br>Dashlets' ),\n\t\t\tid: ContextMenuIconName.refresh_all,\n\t\t\tgroup: editor_group,\n\t\t\ticon: Icons.restart,\n\t\t\tpermission_result: true,\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar reset_all = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'Restore<br>Default Dashlets' ),\n\t\t\tid: ContextMenuIconName.reset_all,\n\t\t\tgroup: editor_group,\n\t\t\ticon: Icons.save_and_continue,\n\t\t\tpermission_result: true,\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar in_out = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'In/Out' ),\n\t\t\tid: ContextMenuIconName.in_out,\n\t\t\tgroup: navigation_group,\n\t\t\ticon: Icons.in_out,\n\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'InOut' ),\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar timesheet_view = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\tgroup: navigation_group,\n\t\t\ticon: Icons.timesheet,\n\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'TimeSheet' ),\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar schedule_view = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'Schedules' ),\n\t\t\tid: ContextMenuIconName.schedule,\n\t\t\tgroup: navigation_group,\n\t\t\ticon: Icons.schedule,\n\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'Schedule' ),\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar request_view = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'Requests' ),\n\t\t\tid: ContextMenuIconName.request,\n\t\t\tgroup: navigation_group,\n\t\t\ticon: Icons.request,\n\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'Request' ),\n\t\t\tpermission: null\n\t\t} );\n\n\t\tvar pay_stub_view = new RibbonSubMenu( {\n\t\t\tlabel: $.i18n._( 'Pay<br>Stubs' ),\n\t\t\tid: ContextMenuIconName.pay_stub,\n\t\t\tgroup: navigation_group,\n\t\t\ticon: Icons.pay_stubs,\n\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'PayStub' ),\n\t\t\tpermission: null\n\t\t} );\n\n\t\treturn [menu];\n\t}\n\n\tunLoadCurrentDashlets() {\n\t\t//Error: TypeError: this.dashletControllerArray is null in interface/html5/framework/jquery.min.js?v=9.0.2-20151106-092147 line 2 > eval line 368\n\t\tif ( this.dashletControllerArray ) {\n\t\t\tfor ( var i = 0; i < this.dashletControllerArray.length; i++ ) {\n\t\t\t\tvar dashletController = this.dashletControllerArray[i];\n\t\t\t\tdashletController.cleanWhenUnloadView();\n\t\t\t}\n\t\t}\n\t\tthis.dashletControllerArray = [];\n\t}\n\n\tinitDashBoard( auto_arrange ) {\n\t\tvar $this = this;\n\t\tvar i = 0;\n\t\tif ( !this.dashletControllerArray ) {\n\t\t\tthis.dashletControllerArray = [];\n\t\t} else {\n\t\t\tthis.unLoadCurrentDashlets();\n\t\t}\n\n\t\tif ( this.initMasonryDone ) {\n\t\t\tthis.dashboard_container = $( '.dashboard-container' );\n\t\t\tthis.dashboard_container.masonry(); //#2353 - fix js exception on auto arrange \"masonry is not initialized\"\n\t\t\tthis.dashboard_container.masonry( 'destroy' );\n\t\t\tthis.dashboard_container.sortable( 'destroy' );\n\t\t\tthis.dashboard_container.empty();\n\t\t\tthis.initMasonryDone = false;\n\t\t}\n\t\t$this.dashlet_controller_dic = {};\n\t\tthis.user_generic_data_api.getUserGenericData( {\n\t\t\tfilter_data: {\n\t\t\t\tscript: 'global_dashboard',\n\t\t\t\tdeleted: false\n\t\t\t}\n\t\t}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar dashlet_list = result.getResult();\n\t\t\t\tif ( !Global.isArray( dashlet_list ) || dashlet_list.length < 1 ) {\n\t\t\t\t\t$this.api_dashboard.getDefaultDashlets( {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tdashlet_list = result.getResult();\n\t\t\t\t\t\t\t$this.is_getting_default_dashlet = true;\n\t\t\t\t\t\t\tdoOrder( dashlet_list );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tdoOrder( dashlet_list );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tfunction doOrder( dashlet_list ) {\n\t\t\t$this.removeNoResultCover();\n\t\t\t$this.user_generic_data_api.getUserGenericData( {\n\t\t\t\tfilter_data: {\n\t\t\t\t\tscript: 'global_dashboard_order',\n\t\t\t\t\tname: 'order_data',\n\t\t\t\t\tdeleted: false\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tonResult: function( order_result ) {\n\t\t\t\t\torder_result = order_result.getResult();\n\t\t\t\t\tif ( Global.isArray( order_result ) && order_result.length == 1 ) {\n\t\t\t\t\t\t$this.order_data = order_result[0];\n\t\t\t\t\t\tif ( $this.is_getting_default_dashlet ) {\n\t\t\t\t\t\t\t$this.order_data.data = [];\n\t\t\t\t\t\t\t$this.addMissedDashLetToOrder( dashlet_list );\n\t\t\t\t\t\t\t$this.is_getting_default_dashlet = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//Error: Uncaught TypeError: $this.order_data.data.push is not a function in interface/html5/#!m=Home line 550\n\t\t\t\t\t\t\tif ( !$this.order_data.data || !Global.isArray( $this.order_data.data ) ) {\n\t\t\t\t\t\t\t\t$this.order_data.data = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.addMissedDashLetToOrder( dashlet_list );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$this.dashlet_list = [];\n\t\t\t\t\t\tfor ( var y = 0, yy = $this.order_data.data.length; y < yy; y++ ) {\n\t\t\t\t\t\t\tvar order_id = $this.order_data.data[y];\n\t\t\t\t\t\t\tvar found = false;\n\t\t\t\t\t\t\tfor ( var j = 0, jj = dashlet_list.length; j < jj; j++ ) {\n\t\t\t\t\t\t\t\tvar dashlet = dashlet_list[j];\n\t\t\t\t\t\t\t\tif ( dashlet.id.toString() === order_id.toString() ) {\n\t\t\t\t\t\t\t\t\t$this.dashlet_list.push( dashlet );\n\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.dashlet_list = dashlet_list;\n\t\t\t\t\t}\n\t\t\t\t\tif ( $this.dashlet_list.length > 0 ) {\n\t\t\t\t\t\tloadPage( $this.dashlet_list[i] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction loadPage( dashlet_data ) {\n\t\t\tGlobal.loadScript( 'views/home/dashlet/DashletController.js', function() {\n\t\t\t\tvar id = 'dashlet_' + dashlet_data.id;\n\t\t\t\tvar dash_let = $( '<div class=\"dashlet-container\" id=\"' + id + '\">' +\n\t\t\t\t\t'<div class=\"dashlet\">' +\n\t\t\t\t\t'<button class=\"refresh-btn\"></button>' +\n\t\t\t\t\t'<span class=\"title\"></span>' +\n\t\t\t\t\t'<div class=\"button-bar\">' +\n\t\t\t\t\t'<button class=\"view-btn button\">View</button>' +\n\t\t\t\t\t'<button class=\"modify-btn button\">Edit</button>' +\n\t\t\t\t\t'<button class=\"delete-btn button\">Delete</button>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"content\">' +\n\t\t\t\t\t'<table id=\"grid\"></table>' +\n\t\t\t\t\t'<iframe class=\"report-iframe\" id=\"iframe\"></iframe>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"dashlet-left-cover\" ></div>' +\n\t\t\t\t\t'<div class=\"dashlet-right-cover\" ></div>' +\n\t\t\t\t\t'</div>' );\n\t\t\t\tif ( !dashlet_data.data.height || auto_arrange ) {\n\t\t\t\t\tdashlet_data.data.height = 200;\n\t\t\t\t}\n\t\t\t\tif ( !dashlet_data.data.width || auto_arrange ) {\n\t\t\t\t\tif ( dashlet_data.data.dashlet_type === 'custom_report' ) {\n\t\t\t\t\t\tdashlet_data.data.width = 99;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdashlet_data.data.width = 33.3;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdash_let.css( 'height', dashlet_data.data.height + 'px' );\n\t\t\t\tdash_let.css( 'width', dashlet_data.data.width + '%' );\n\t\t\t\t$this.dashboard_container.append( dash_let );\n\t\t\t\tdash_let.find( '.button' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t\t\tvar target = e.target;\n\t\t\t\t\tvar container = $( target ).parent().parent().parent();\n\t\t\t\t\t// Error: Uncaught TypeError: Cannot read property 'split' of undefined in interface/html5/#!m=Home line 490\n\t\t\t\t\tif ( !container.attr( 'id' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar dashlet_id = container.attr( 'id' ).split( '_' )[1];\n\n\t\t\t\t\tif ( $( target ).hasClass( 'delete-btn' ) ) {\n\t\t\t\t\t\t$this.deleteDashlet( dashlet_id, $( container ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $( target ).hasClass( 'modify-btn' ) ) {\n\t\t\t\t\t\t$this.modifyDashlet( dashlet_id );\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tvar dashlet_controller = new DashletController();\n\t\t\t\t$this.dashletControllerArray.push( dashlet_controller );\n\t\t\t\tdashlet_controller.el = '#' + id;\n\t\t\t\tdashlet_controller.data = dashlet_data;\n\t\t\t\tdashlet_controller.homeViewController = $this;\n\t\t\t\tdashlet_controller.initContent();\n\t\t\t\t// Update width and height to default one if doing auto arrange\n\t\t\t\tif ( auto_arrange ) {\n\t\t\t\t\t$this.user_generic_data_api.setUserGenericData( dashlet_data, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\ti = i + 1;\n\t\t\t\tif ( i < $this.dashlet_list.length ) {\n\t\t\t\t\tloadPage( $this.dashlet_list[i] );\n\t\t\t\t} else {\n\t\t\t\t\t$this.updateLayout();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t//BUG#2070 - Break sortable for mobile because it negatively impacts usability\n\t\tif ( Global.detectMobileBrowser() ) {\n\t\t\tthis.dashboard_container.sortable( { disabled: true } );\n\t\t}\n\t}\n\n\tshowNoResultCover() {\n\t\tthis.removeNoResultCover();\n\t\tthis.no_result_box = Global.loadWidgetByName( WidgetNamesDic.NO_RESULT_BOX );\n\t\tthis.no_result_box.NoResultBox( {\n\t\t\trelated_view_controller: this,\n\t\t\tis_new: true,\n\t\t\tmessage: $.i18n._( 'No Dashlets Found' ),\n\t\t\ticonLabel: $.i18n._( 'Add' )\n\t\t} );\n\t\tthis.no_result_box.attr( 'id', '#dashboard_' + this.viewId + '_no_result_box' );\n\t\t$( this.el ).find( '.container' ).append( this.no_result_box );\n\t}\n\n\tremoveNoResultCover() {\n\t\tif ( this.no_result_box && this.no_result_box.length > 0 ) {\n\t\t\tthis.no_result_box.remove();\n\t\t}\n\t\tthis.no_result_box = null;\n\t}\n\n\taddMissedDashLetToOrder( dashlet_list ) {\n\t\tvar $this = this;\n\t\t//Error: Uncaught TypeError: $this.order_data.data.push is not a function in interface/html5/#!m=Home line 546\n\t\tif ( !$this.order_data || !$this.order_data.data ) {\n\t\t\treturn;\n\t\t}\n\t\tfor ( var j = 0, jj = dashlet_list.length; j < jj; j++ ) {\n\t\t\tvar dashlet = dashlet_list[j];\n\t\t\tvar found = false;\n\t\t\tfor ( var y = 0, yy = $this.order_data.data.length; y < yy; y++ ) {\n\t\t\t\tvar order_id = $this.order_data.data[y];\n\t\t\t\tif ( dashlet.id.toString() === order_id.toString() ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( !found ) {\n\t\t\t\t$this.order_data.data.push( dashlet.id.toString() );\n\t\t\t}\n\t\t\tif ( this.is_getting_default_dashlet ) {\n\t\t\t\t$this.order_data.data.sort();\n\t\t\t}\n\n\t\t}\n\t}\n\n\tupdateLayout() {\n\t\tvar $this = this;\n\n\t\tthis.saveScrollPosition();\n\t\tif ( this.initMasonryDone ) {\n\t\t\tthis.dashboard_container.masonry( 'destroy' );\n\t\t\tthis.dashboard_container.sortable( 'destroy' );\n\t\t} else {\n\t\t\tthis.initMasonryDone = true;\n\t\t}\n\t\tthis.dashboard_container.masonry( {\n\t\t\t'columnWidth': 1,\n\t\t\titemSelector: '.dashlet-container'\n\t\t} );\n\n\t\tthis.dashboard_container.on( 'mouseup', function() {\n\t\t\t$( '.dashlet-cover--display-red' ).removeClass( 'dashlet-cover--display-red' );\n\t\t\t$( '.dashlet-cover--display-green' ).removeClass( 'dashlet-cover--display-green' );\n\t\t} );\n\n\t\tthis.dashboard_container.on( 'mousemove', function( e ) {\n\t\t\tvar x = e.pageX;\n\t\t\tvar y = e.pageY;\n\t\t\t$this.current_mouse_position = { x: x, y: y };\n\t\t} );\n\n\t\tthis.dashboard_container.sortable( {\n\t\t\tforceHelperSize: true,\n\t\t\tforcePlaceholderSize: true,\n\t\t\tgrid: [3, 10],\n\t\t\tcontainment: '.container',\n\t\t\tchange: function( e, ui ) {\n\t\t\t\t$( '.dashlet-cover--display-red' ).removeClass( 'dashlet-cover--display-red' );\n\t\t\t\t$( '.dashlet-cover--display-green' ).removeClass( 'dashlet-cover--display-green' );\n\t\t\t\t// //#2353 custom code to maintain the hover ui hint\n\t\t\t\tvar placeholder_index = $( '.ui-sortable-placeholder' ).index();\n\n\t\t\t\tif ( placeholder_index != -1 ) {\n\t\t\t\t\tvar dashlets_to_loop = $( '.dashlet-container' );\n\t\t\t\t\tfor ( var x = 0; x < dashlets_to_loop.length; x++ ) {\n\t\t\t\t\t\tif ( $( dashlets_to_loop[x] ).attr( 'id' ) != ui.item.attr( 'id' ) ) {\n\t\t\t\t\t\t\t//ensure collision and on one side of placeholder or the other\n\t\t\t\t\t\t\tif ( ( $( dashlets_to_loop[x] ).index() == ( placeholder_index + 1 ) || $( dashlets_to_loop[x] ).index() == ( placeholder_index - 1 ) ) && checkCollision( $( dashlets_to_loop[x] ), $this.current_mouse_position ) ) {\n\t\t\t\t\t\t\t\t//mouseover the right half.\n\t\t\t\t\t\t\t\tvar direction;\n\t\t\t\t\t\t\t\tif ( $this.current_mouse_position.x >= ( $( dashlets_to_loop[x] ).offset().left + ( $( dashlets_to_loop[x] ).width() / 2 ) ) && $this.current_mouse_position.x <= ( $( dashlets_to_loop[x] ).offset().left + ( $( dashlets_to_loop[x] ).width() ) ) ) {\n\t\t\t\t\t\t\t\t\tdirection = 'RIGHT';\n\t\t\t\t\t\t\t\t\t$( dashlets_to_loop[x] ).find( '.dashlet-right-cover' ).addClass( 'dashlet-cover--display-green' );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdirection = 'LEFT';\n\t\t\t\t\t\t\t\t\t$( dashlets_to_loop[x] ).find( '.dashlet-left-cover' ).addClass( 'dashlet-cover--display-green' );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstop: function( e, ui ) {\n\t\t\t\t$this.saveNewOrder();\n\t\t\t\t$this.updateLayout();\n\t\t\t\tvar draggingTargetId = ui.item.attr( 'id' ).split( '_' )[1];\n\t\t\t\tfor ( var j = 0, jj = $this.dashletControllerArray.length; j < jj; j++ ) {\n\t\t\t\t\tvar dashlet = $this.dashletControllerArray[j];\n\t\t\t\t\tif ( draggingTargetId == dashlet.data.id ) {\n\t\t\t\t\t\tdashlet.refreshIfNecessary();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$this.dashboard_container.masonry( 'reloadItems' );\n\t\t\t}\n\t\t} );\n\n\t\tfunction checkCollision( el, mouse_coords ) {\n\t\t\tel = $( el );\n\n\t\t\tif ( el.offset().left <= mouse_coords.x && ( el.offset().left + el.width() ) >= mouse_coords.x\n\t\t\t\t&& el.offset().top <= mouse_coords.y && el.offset().top + el.height() >= mouse_coords.y\n\t\t\t) {\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.recoverCurrentScrollPosition();\n\n\t\tTTPromise.resolve( 'init', 'init' );\n\t}\n\n\tsaveNewOrder( callBack ) {\n\t\tvar $this = this;\n\t\tvar dashlets = $( this.el ).find( '.dashlet-container:not(.ui-sortable-placeholder)' );\n\t\tvar new_order = [];\n\t\tfor ( var i = 0, ii = dashlets.length; i < ii; i++ ) {\n\t\t\tvar dashlet = $( dashlets[i] );\n\t\t\tvar id = dashlet.attr( 'id' ).split( '_' )[1];\n\t\t\tnew_order.push( id );\n\t\t}\n\t\tvar arg = {};\n\t\tif ( this.order_data ) {\n\t\t\tthis.order_data.data = new_order;\n\t\t\targ = this.order_data;\n\t\t} else {\n\t\t\targ.name = 'order_data';\n\t\t\targ.script = 'global_dashboard_order';\n\t\t\targ.is_default = true;\n\t\t\targ.data = new_order;\n\t\t}\n\n\t\tthis.user_generic_data_api.setUserGenericData( arg, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data != true && TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t$this.order_data = { id: result_data };\n\t\t\t\t\t$this.order_data.data = new_order;\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}\n\t\t\t\t} else if ( result_data === true ) {\n\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tcleanWhenUnloadView() {\n\t\tthis.unLoadCurrentDashlets();\n\t}\n\n\tmodifyDashlet( id ) {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'DashletWizard', { saved_dashlet_id: id }, function() {\n\t\t\t$this.initDashBoard();\n\t\t} );\n\t}\n\n\tdeleteDashlet( id, target ) {\n\t\tvar $this = this;\n\t\tTAlertManager.showConfirmAlert( Global.delete_dashlet_confirm_message, null, function( result ) {\n\t\t\tif ( result ) {\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\t$this.user_generic_data_api.deleteUserGenericData( id, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\ttarget.remove();\n\t\t\t\t\t\t$this.removeDeletedDashletsData( id );\n\t\t\t\t\t\tif ( $( $this.el ).find( '.dashboard-container' ).children().length < 1 ) {\n\t\t\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$this.saveNewOrder( function() {\n\t\t\t\t\t\t\t\t$this.updateLayout();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tProgressBar.closeOverlay();\n\t\t\t}\n\t\t} );\n\t}\n\n\tremoveDeletedDashletsData( id ) {\n\t\tfor ( var i = 0, ii = this.dashlet_list.length; i < ii; i++ ) {\n\t\t\tif ( this.dashlet_list[i].id.toString() === id ) {\n\t\t\t\tthis.dashlet_list.splice( i, 1 );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetViewHeight() {\n\t\tvar $this = this;\n\t\t$( this.el ).find( '.container' ).height( $( this.el ).height() - 35 );\n\t\t$( window ).resize( function() {\n\t\t\t$( $this.el ).find( '.container' ).height( $( $this.el ).height() - 35 );\n\t\t} );\n\t}\n\n\tsaveScrollPosition() {\n\t\tthis.current_scroll_position = this.dashboard_container.parent().scrollTop();\n\t}\n\n\trecoverCurrentScrollPosition() {\n\t\tif ( this.current_scroll_position > 0 ) {\n\t\t\tthis.dashboard_container.parent().scrollTop( this.current_scroll_position );\n\t\t}\n\t}\n\n}\n"],"sourceRoot":""}