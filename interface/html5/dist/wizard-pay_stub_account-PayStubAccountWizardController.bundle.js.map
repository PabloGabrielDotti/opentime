{"version":3,"sources":["webpack://timetrex/./interface/html5/views/wizard/pay_stub_account/PayStubAccountWizardController.js"],"names":["PayStubAccountWizardController","BaseWizardController","options","_","defaults","el","super","this","title","$","i18n","steps","current_step","width","render","initCurrentStep","content_div","empty","stepsWidgetDic","label","getLabel","html","append","form_item","Global","loadWidget","css","form_item_label","find","form_item_input_div","a_combobox","getAComboBox","TTAPI","APIPayStubEntryAccount","text","getField","effective_date","getDatePicker","current_step_data","stepsDataDic","current_step_ui","date","Date","setValue","format","$this","onDoneClick","saveCurrentStep","src_ids","dst_id","migratePayStubEntryAccount","onResult","result","getResult","onCloseClick","call_back","TAlertManager","showErrorAlert","getValue"],"mappings":"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","file":"wizard-pay_stub_account-PayStubAccountWizardController.bundle.js?v=d40efe036907860fea1b","sourcesContent":["export class PayStubAccountWizardController extends BaseWizardController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.wizard-bg'\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.title = $.i18n._( 'Migrate PS Accounts' );\n\t\tthis.steps = 2;\n\t\tthis.current_step = 1;\n\t\t$( this.el ).width( 1010 );\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\t\tthis.initCurrentStep();\n\t}\n\n\t//Create each page UI\n\tbuildCurrentStepUI() {\n\t\tthis.content_div.empty();\n\t\tthis.stepsWidgetDic[this.current_step] = {};\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tvar label = this.getLabel();\n\t\t\t\tlabel.html( $.i18n._( 'This wizard will automatically create Pay Stub Amendments to migrate Year-To-Date amounts from one Pay Stub Account to another as of a specific effective date.' ) + '<br><br>' );\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t//Source Pay Stub Account\n\t\t\t\tvar form_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item.css( 'margin-top', '15px' );\n\t\t\t\tvar form_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tvar form_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar a_combobox = this.getAComboBox( TTAPI.APIPayStubEntryAccount, true, 'global_PayStubAccount', 'src_ids' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Source Pay Stub Account(s)' ) + ': ' );\n\t\t\t\tform_item_input_div.append( a_combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\t// Destination Pay Stub Account\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\ta_combobox = this.getAComboBox( TTAPI.APIPayStubEntryAccount, false, 'global_PayStubAccount', 'dst_id' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Destination Pay Stub Account' ) + ': ' );\n\t\t\t\tform_item_input_div.append( a_combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\t//Effective Date\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar effective_date = this.getDatePicker( 'effective_date' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Effective Date' ) + ': ' );\n\t\t\t\tform_item_input_div.append( effective_date );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][effective_date.getField()] = effective_date;\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tbuildCurrentStepData() {\n\t\tvar $this = this;\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 2:\n\t\t\t\tif ( !current_step_data ) {\n\t\t\t\t\tvar date = new Date();\n\t\t\t\t\tcurrent_step_ui.effective_date.setValue( date.format() );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonDoneClick() {\n\t\tvar $this = this;\n\t\tsuper.onDoneClick();\n\t\tthis.saveCurrentStep();\n\t\tvar src_ids = this.stepsDataDic[2].src_ids;\n\t\tvar dst_id = this.stepsDataDic[2].dst_id;\n\t\tvar effective_date = this.stepsDataDic[2].effective_date;\n\t\tvar ps_api = TTAPI.APIPayStubEntryAccount;\n\t\tps_api.migratePayStubEntryAccount( src_ids, dst_id, effective_date, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data ) {\n\t\t\t\t\t$this.onCloseClick();\n\t\t\t\t\tif ( $this.call_back ) {\n\t\t\t\t\t\t$this.call_back();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentStepValues() {\n\n\t\tif ( !this.stepsDataDic[this.current_step] ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\t}\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tif ( current_step_data.src_ids ) {\n\t\t\t\t\tcurrent_step_ui.src_ids.setValue( current_step_data.src_ids );\n\t\t\t\t}\n\t\t\t\tif ( current_step_data.dst_id ) {\n\t\t\t\t\tcurrent_step_ui.dst_id.setValue( current_step_data.dst_id );\n\t\t\t\t}\n\t\t\t\tif ( current_step_data.effective_date ) {\n\t\t\t\t\tcurrent_step_ui.effective_date.setValue( current_step_data.effective_date );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsaveCurrentStep() {\n\t\tthis.stepsDataDic[this.current_step] = {};\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcurrent_step_data.src_ids = current_step_ui.src_ids.getValue();\n\t\t\t\tcurrent_step_data.dst_id = current_step_ui.dst_id.getValue();\n\t\t\t\tcurrent_step_data.effective_date = current_step_ui.effective_date.getValue();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n}"],"sourceRoot":""}