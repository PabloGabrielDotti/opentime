{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/top_alert/TopNotification.js"],"names":["$","jQuery","fn","TopNotification","options","data","el","row_box","bottom_button","opts","extend","defaults","$this","this","collapse","setBarWidth","rows","children","eq","len","length","biggest_width","i","span","is_invisible","is","parent","show","width","hide","removeRowOnTime","row_tpl","delay","setTimeout","removeRow","setExpendButton","setCloseButton","unbind","bind","e","row","remove","setDestination","item","css","destination","indexOf","window","open","hasOwnProperty","IndexViewController","goToViewByViewLabel","menu_name","setNotificationBar","hideOrShowRows","height","find","attr","arg","Global","loadWidget","text","message","bg_color","append","empty","each","meta"],"mappings":"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","file":"top_alert-TopNotification.bundle.js?v=82bf43831e7d4680f7b7","sourcesContent":["( function( $ ) {\n\n\t$.fn.TopNotification = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TopNotification.defaults, options );\n\t\tvar data;\n\t\tvar $this = this;\n\t\tvar el;\n\t\tvar row_box;\n\t\tvar bottom_button;\n\t\tvar collapse = false;\n\n\t\tvar addRow = function() {\n\n\t\t};\n\n\t\tvar setBarWidth = function() {\n\t\t\tvar rows = el.children().eq( 0 ).children();\n\t\t\tvar len = rows.length;\n\t\t\tvar biggest_width = 0;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar row = rows.eq( i );\n\t\t\t\tvar span = row.children().eq( 0 );\n\t\t\t\tvar is_invisible = false;\n\t\t\t\tif ( !span.is( ':visible' ) ) {\n\t\t\t\t\tspan.parent().show();\n\t\t\t\t\tis_invisible = true;\n\t\t\t\t}\n\t\t\t\tif ( span.width() > biggest_width ) {\n\n\t\t\t\t\tbiggest_width = span.width();\n\t\t\t\t}\n\n\t\t\t\tif ( is_invisible ) {\n\t\t\t\t\tspan.parent().hide();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tel.width( biggest_width + 25 );\n\t\t};\n\n\t\tvar removeRowOnTime = function( row_tpl, delay ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\tremoveRow( row_tpl );\n\t\t\t\tsetExpendButton();\n\t\t\t}, ( delay * 1000 ) );\n\t\t};\n\n\t\tvar setCloseButton = function( row_tpl ) {\n\n\t\t\trow_tpl.children().eq( 1 ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t\tremoveRow( row_tpl );\n\t\t\t\tsetExpendButton();\n\t\t\t} );\n\t\t};\n\n\t\tvar removeRow = function( row ) {\n\n\t\t\trow.remove();\n\t\t\tvar rows = el.children().eq( 0 ).children();\n\t\t\tif ( collapse ) {\n\n\t\t\t\tif ( rows.length > 0 ) {\n\t\t\t\t\trows.eq( 0 ).show();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( rows.length < 1 ) {\n\t\t\t\t$this.remove();\n\t\t\t}\n\n\t\t\tsetBarWidth();\n\t\t};\n\n\t\tvar setDestination = function( row_tpl, item ) {\n\n\t\t\trow_tpl.css( 'cursor', 'pointer' );\n\t\t\trow_tpl.unbind( 'click' ).bind( 'click', function() {\n\n\t\t\t\tif ( item.destination ) {\n\n\t\t\t\t\tif ( ( typeof item.destination['indexOf'] ) !== 'undefined' && ( item.destination.indexOf( 'http://' ) > -1 || item.destination.indexOf( 'https://' ) > -1 ) ) {\n\t\t\t\t\t\twindow.open( item.destination, '_blank' );\n\n\t\t\t\t\t} else if ( item.destination.hasOwnProperty( 'menu_name' ) ) {\n\t\t\t\t\t\tIndexViewController.goToViewByViewLabel( item.destination.menu_name );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tremoveRow( row_tpl );\n\t\t\t\t}\n\n\t\t\t\tremoveRow( row_tpl );\n\t\t\t\tIndexViewController.setNotificationBar( 'notification' );\n\n\t\t\t} );\n\n\t\t};\n\n\t\tvar setExpendButton = function() {\n\t\t\tif ( row_box.children().length > 1 ) {\n\t\t\t\tbottom_button.show();\n\t\t\t\tbottom_button.parent().height( 15 );\n\t\t\t} else {\n\t\t\t\tbottom_button.hide();\n\t\t\t\tbottom_button.parent().height( 0 );\n\t\t\t}\n\n\t\t\tbottom_button.unbind( 'click' ).bind( 'click', function() {\n\n\t\t\t\tif ( bottom_button.parent().find( '.down-btn' ).length > 0 ) {\n\t\t\t\t\tbottom_button.attr( 'class', 'bottom-btn up-btn' );\n\t\t\t\t\thideOrShowRows( false );\n\n\t\t\t\t} else {\n\t\t\t\t\tbottom_button.attr( 'class', 'bottom-btn down-btn' );\n\t\t\t\t\thideOrShowRows( true );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tfunction hideOrShowRows( hide ) {\n\t\t\t\tvar len = row_box.children().length;\n\t\t\t\tcollapse = hide;\n\t\t\t\tfor ( var i = 1; i < len; i++ ) {\n\t\t\t\t\tif ( hide ) {\n\t\t\t\t\t\trow_box.children().eq( i ).hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow_box.children().eq( i ).show();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\n\t\tthis.show = function( arg ) {\n\n\t\t\tthis.remove();\n\n\t\t\tdata = arg;\n\n\t\t\t//Error: TypeError: undefined is not an object (evaluating 'el.width') in /interface/html5/global/widgets/top_alert/TopNotification.js?v=7.4.6-20141027-085016 line 143\n\t\t\tif ( !el ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tel.width( '100%' );\n\t\t\tbottom_button.attr( 'class', 'bottom-btn up-btn' );\n\n\t\t\tif ( data && data.length > 0 ) {\n\t\t\t\tfor ( var i = 0; i < data.length; i++ ) {\n\t\t\t\t\tvar item = data[i];\n\t\t\t\t\tvar row_tpl = $( Global.loadWidget( 'global/widgets/top_alert/NotificationRow.html' ) );\n\n\t\t\t\t\trow_tpl.children().eq( 0 ).text( item.message );\n\t\t\t\t\trow_tpl.css( 'backgroundColor', item.bg_color );\n\n\t\t\t\t\tsetCloseButton( row_tpl );\n\n\t\t\t\t\tif ( item.delay === -1 ) {\n\t\t\t\t\t\trow_tpl.children().eq( 1 ).hide();\n\t\t\t\t\t} else if ( item.delay > 0 ) {\n\t\t\t\t\t\tremoveRowOnTime( row_tpl, item.delay );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( item.destination || item.delay != -1 ) {\n\t\t\t\t\t\tsetDestination( row_tpl, item );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tel.children().eq( 0 ).append( row_tpl );\n\t\t\t\t}\n\n\t\t\t\t$( 'body' ).append( el );\n\t\t\t\tsetExpendButton();\n\n\t\t\t\tsetBarWidth();\n\t\t\t}\n\n\t\t};\n\n\t\t//Error: Unable to get property 'remove' of undefined or null reference in /interface/html5/global/widgets/top_alert/TopNotification.js?v=7.4.6-20141027-132733 line 179\n\t\tthis.remove = function() {\n\t\t\tif ( el ) {\n\t\t\t\tel.remove();\n\t\t\t\tel.children().eq( 0 ).empty();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tel = $( this );\n\n\t\t\trow_box = el.children().eq( 0 );\n\t\t\tbottom_button = el.find( '.bottom-btn' );\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TopNotification.defaults = {};\n\n} )( jQuery );"],"sourceRoot":""}