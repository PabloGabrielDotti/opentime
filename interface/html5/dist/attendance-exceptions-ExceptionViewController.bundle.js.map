{"version":3,"sources":["webpack://timetrex/./interface/html5/views/attendance/exceptions/ExceptionViewController.js"],"names":["ExceptionViewController","BaseViewController","options","_","defaults","el","status_array","super","this","edit_view_tpl","permission_id","viewId","script_name","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIException","initPermission","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","id","ContextMenuIconName","edit_employee","edit_pay_period","edit_pay_period_schedule","schedule","timesheet","onNavigationClick","doNotSetFocus","context_menu_array","Global","isSet","selectContextMenu","setTotalDisplaySpan","len","length","grid_selected_length","getGridSelectIdArray","i","context_btn","find","attr","removeClass","setDefaultMenuViewIcon","setDefaultMenuEditEmployeeIcon","setDefaultMenuEditIcon","export_excel","setDefaultMenuExportIcon","setContextMenuGroupVisibility","PermissionManager","validate","show_search_tab","autoOpenEditOnlyViewIfNecessary","editChildPermissionValidate","addClass","iconName","select_item","getSelectedItem","user_id","IndexViewController","openEditView","pay_period_id","pay_period_schedule_id","filter","filter_data","include_users","value","include_user_ids","select_date","date_stamp","addViewTab","window","location","href","goToView","base_date","$this","initDropDownOption","APIUser","APIExceptionPolicy","APIUserGroup","getUserGroup","onResult","res","getResult","buildTreeRecord","sub_view_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","exclude","include","label","group","icon","Icons","employee","pay_period","pay_period_schedule","sort_order","getFromTabIndex","save_temp_filter","search_tab_select_index","search_panel","getSelectTabIndex","target_ui_dic","each","key","content","field","getValue","temp_basic_filter_data","temp_adv_filter_data","clone","need_break","is","hasClass","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","layout_name","form_item_type","FormItemType","AWESOME_BOX","api_class","APIPayPeriod","tree_mode","APIBranch","APIDepartment","APIUserTitle","CHECKBOX","column_filter","_getFilterColumnsFromDisplayColumns","data","grid","getGridParam","item","exception_background_color","severity","ui_id","css","exception_color","code","loadView","loadViewSource","result","template","contentContainer","html"],"mappings":"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","file":"attendance-exceptions-ExceptionViewController.bundle.js?v=1edc7f7f4abfbe0c3520","sourcesContent":["export class ExceptionViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#exception_view_container',\n\t\t\tstatus_array: null,\n\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'ExceptionEditView.html';\n\t\tthis.permission_id = 'punch';\n\t\tthis.viewId = 'Exception';\n\t\tthis.script_name = 'ExceptionView';\n\t\tthis.context_menu_name = $.i18n._( 'Exceptions' );\n\t\tthis.navigation_label = $.i18n._( 'Exception' ) + ':';\n\t\tthis.api = TTAPI.APIException;\n\n\t\tthis.initPermission();\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\tcase ContextMenuIconName.edit_pay_period:\n\t\t\tcase ContextMenuIconName.edit_pay_period_schedule:\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_pay_period_schedule:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length, 'pay_period_schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_pay_period:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length, 'pay_period_schedule' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tinitPermission() {\n\n\t\tsuper.initPermission();\n\n\t\tif ( PermissionManager.validate( this.permission_id, 'view' ) || PermissionManager.validate( this.permission_id, 'view_child' ) ) {\n\t\t\tthis.show_search_tab = true;\n\t\t} else {\n\t\t\tthis.show_search_tab = false;\n\t\t}\n\t}\n\n\tautoOpenEditViewIfNecessary() {\n\t\t//Auto open edit view. Should set in IndexController\n\t\t//Don't have any edit view\n\t\t//Error: Uncaught TypeError: undefined is not a function in /interface/html5/views/BaseViewController.js?v=7.4.3-20140924-084605 line 2751\n\t\tthis.autoOpenEditOnlyViewIfNecessary();\n\t}\n\n\tsetDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.editChildPermissionValidate( 'user' ) ) {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tonNavigationClick( iconName ) {\n\t\tvar select_item = this.getSelectedItem();\n\t\t//There are cases where select_item might be null. The export button for example.\n\t\tif ( select_item != null ) {\n\t\t\tvar user_id = select_item.user_id;\n\t\t}\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tIndexViewController.openEditView( this, 'Employee', user_id );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.edit_pay_period:\n\t\t\t\tvar pay_period_id = select_item.pay_period_id;\n\t\t\t\tif ( pay_period_id ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'PayPeriods', pay_period_id );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.edit_pay_period_schedule:\n\t\t\t\tvar pay_period_schedule_id = select_item.pay_period_schedule_id;\n\t\t\t\tif ( pay_period_schedule_id ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'PayPeriodSchedule', pay_period_id );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\tvar filter = { filter_data: {} };\n\t\t\t\tvar include_users = { value: [user_id] };\n\t\t\t\tfilter.filter_data.include_user_ids = include_users;\n\t\t\t\tfilter.select_date = select_item.date_stamp;\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Exception' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'Schedule', filter );\n\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tfilter = { filter_data: {} };\n\t\t\t\tfilter.user_id = user_id;\n\t\t\t\tfilter.base_date = select_item.date_stamp;\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Exception' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'status', 'user_status_id', TTAPI.APIUser );\n\t\tthis.initDropDownOption( 'severity', null, TTAPI.APIExceptionPolicy );\n\t\tthis.initDropDownOption( 'type', 'exception_policy_type_id', TTAPI.APIExceptionPolicy );\n\n\t\tvar user_group_api = TTAPI.APIUserGroup;\n\t\tuser_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\n\t\t\t\tres = res.getResult();\n\t\t\t\tres = Global.buildTreeRecord( res );\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.timesheet\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Schedules' ),\n\t\t\t\t\tid: ContextMenuIconName.schedule,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.schedule\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit<br>Employee' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Pay<br>Period' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_pay_period,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_period\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit PP<br>Schedule' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_pay_period_schedule,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.pay_period_schedule\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Export' ),\n\t\t\t\t\tid: ContextMenuIconName.export_excel,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.export_excel,\n\t\t\t\t\tsort_order: 9000\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tgetSearchPanelFilter( getFromTabIndex, save_temp_filter ) {\n\n\t\tif ( Global.isSet( getFromTabIndex ) ) {\n\t\t\tvar search_tab_select_index = getFromTabIndex;\n\t\t} else {\n\t\t\tsearch_tab_select_index = this.search_panel.getSelectTabIndex();\n\t\t}\n\n//\t\tvar basic_fields_len = this.search_fields.length;\n\t\tvar target_ui_dic = null;\n\n\t\tif ( search_tab_select_index === 0 ) {\n\t\t\tthis.filter_data = [];\n\t\t\ttarget_ui_dic = this.basic_search_field_ui_dic;\n\t\t} else if ( search_tab_select_index === 1 ) {\n\t\t\tthis.filter_data = [];\n\t\t\ttarget_ui_dic = this.adv_search_field_ui_dic;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $this = this;\n\t\t$.each( target_ui_dic, function( key, content ) {\n\n\t\t\t$this.filter_data[key] = { field: key, id: '', value: target_ui_dic[key].getValue( true ) };\n\n\t\t\tif ( key === 'show_pre_mature' && $this.filter_data[key].value !== true ) {\n\n\t\t\t\tdelete $this.filter_data[key];\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( $this.temp_basic_filter_data ) {\n\t\t\t\t$this.temp_basic_filter_data[key] = $this.filter_data[key];\n\t\t\t}\n\n\t\t\tif ( $this.temp_adv_filter_data ) {\n\t\t\t\t$this.temp_adv_filter_data[key] = $this.filter_data[key];\n\t\t\t}\n\t\t} );\n\n\t\tif ( save_temp_filter ) {\n\t\t\tif ( search_tab_select_index === 0 ) {\n\t\t\t\t$this.temp_basic_filter_data = Global.clone( $this.filter_data );\n\t\t\t} else if ( search_tab_select_index === 1 ) {\n\t\t\t\t$this.temp_adv_filter_data = Global.clone( $this.filter_data );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tonGridDblClickRow() {\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar need_break = false;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\n\t\t\tif ( need_break ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tif ( context_btn.is( ':visible' ) && !context_btn.hasClass( 'disable-image' ) ) {\n\t\t\t\t\t\tthis.onNavigationClick( ContextMenuIconName.timesheet );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\n\t\t\tif ( need_break ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcontext_btn = $( this.context_menu_array[i] );\n\t\t\tid = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.schedule:\n\t\t\t\t\tneed_break = true;\n\t\t\t\t\tif ( context_btn.is( ':visible' ) && !context_btn.hasClass( 'disable-image' ) ) {\n\t\t\t\t\t\tthis.onNavigationClick( ContextMenuIconName.schedule );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_id',\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Severity' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'severity_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Exception' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'exception_policy_type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Department' ),\n\t\t\t\tfield: 'department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'title_id',\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Show Pre-Mature' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'show_pre_mature',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.CHECKBOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.exception_color = true;\n\t\tcolumn_filter.exception_background_color = true;\n\t\tcolumn_filter.user_id = true;\n\t\tcolumn_filter.pay_period_id = true;\n\t\tcolumn_filter.pay_period_schedule_id = true;\n\n\t\treturn this._getFilterColumnsFromDisplayColumns( column_filter, true );\n\t}\n\n\tsetGridCellBackGround() {\n\n\t\tvar data = this.grid.getGridParam( 'data' );\n\t\t//Error: TypeError: data is undefined in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 70\n\t\tif ( !data ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar len = data.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar item = data[i];\n\n\t\t\tif ( item.exception_background_color ) {\n\t\t\t\tvar severity = $( 'tr[id=\\'' + item.id + '\\']' ).find( 'td[aria-describedby=\"' + this.ui_id + '_grid_severity\"]' );\n\t\t\t\tseverity.css( 'background-color', item.exception_background_color );\n\t\t\t\tseverity.css( 'font-weight', 'bold' );\n\t\t\t}\n\n\t\t\tif ( item.exception_color ) {\n\t\t\t\tvar code = $( 'tr[id=\\'' + item.id + '\\']' ).find( 'td[aria-describedby=\"' + this.ui_id + '_grid_exception_policy_type_id\"]' );\n\t\t\t\tcode.css( 'color', item.exception_color );\n\t\t\t\tcode.css( 'font-weight', 'bold' );\n\t\t\t}\n\n\t\t}\n\t}\n}\n\nExceptionViewController.loadView = function() {\n\n\tGlobal.loadViewSource( 'Exception', 'ExceptionView.html', function( result ) {\n\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tGlobal.contentContainer().html( template( args ) );\n\t} );\n\n};"],"sourceRoot":""}