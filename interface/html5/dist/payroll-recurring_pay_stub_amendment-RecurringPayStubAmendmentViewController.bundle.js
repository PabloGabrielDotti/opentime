(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["payroll-recurring_pay_stub_amendment-RecurringPayStubAmendmentViewController"],{4744:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"RecurringPayStubAmendmentViewController":()=>a});class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#recurring_pay_stub_amendment_view_container",type_array:null,filtered_status_array:null,frequency_array:null}),super(e)}init(e){this.edit_view_tpl="RecurringPayStubAmendmentEditView.html",this.permission_id="pay_stub_amendment",this.viewId="RecurringPayStubAmendment",this.script_name="RecurringPayStubAmendmentView",this.table_name_key="recurring_ps_amendment",this.context_menu_name=$.i18n._("Recurring PS Amendment"),this.navigation_label=$.i18n._("Recurring PS Amendment")+":",this.api=TTAPI.APIRecurringPayStubAmendment,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary("RecurringPayStubAmendment")}initOptions(){var e=this;this.initDropDownOption("type"),this.initDropDownOption("filtered_status","status_id",this.api,(function(){e.basic_search_field_ui_dic.status_id.setSourceData(e.filtered_status_array)})),this.initDropDownOption("frequency")}onFormItemChange(e,t){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var i=e.getField(),a=e.getValue();this.current_edit_record[i]=a,"type_id"===i&&this.onTypeChange(),"rate"!==i&&"units"!==i&&"amount"!==i||(this.is_mass_editing&&(e.isChecked()?(this.edit_view_ui_dic.rate.setCheckBox(!0),this.edit_view_ui_dic.units.setCheckBox(!0),this.edit_view_ui_dic.amount.setCheckBox(!0)):(this.edit_view_ui_dic.rate.setCheckBox(!1),this.edit_view_ui_dic.units.setCheckBox(!1),this.edit_view_ui_dic.amount.setCheckBox(!1))),this.current_edit_record.amount=this.edit_view_ui_dic.amount.getValue()),t||this.validate()}uniformVariable(e){return 20==e.type_id&&(e.amount=e.percent_amount),e}onTypeChange(){10==this.current_edit_record.type_id?(this.detachElement("percent_amount"),this.detachElement("percent_amount_entry_name_id"),this.attachElement("rate"),this.attachElement("units"),this.attachElement("amount")):20==this.current_edit_record.type_id&&(this.attachElement("percent_amount"),this.attachElement("percent_amount_entry_name_id"),this.detachElement("rate"),this.detachElement("units"),this.detachElement("amount")),this.editFieldResize()}onFormItemKeyUp(e){var t=this.edit_view_ui_dic.rate,i=this.edit_view_ui_dic.units,a=this.edit_view_ui_dic.amount;0===e.getValue().length&&a.setReadOnly(!1),(t.getValue().length>0||i.getValue().length>0)&&a.setReadOnly(!0),t.getValue().length>0&&i.getValue().length>0?a.setValue((parseFloat(t.getValue())*parseFloat(i.getValue())).toFixed(2)):a.setValue("0.00")}onFormItemKeyDown(e){var t=this.edit_view_ui_dic.amount,i=this.edit_view_ui_dic.rate,a=this.edit_view_ui_dic.units;i.getValue().length>0&&a.getValue().length>0||t.setValue("0.00"),t.setReadOnly(!0)}setCurrentEditRecordData(){var e;for(var t in this.setDefaultData({"type_id":10}),this.current_edit_record)e=this.edit_view_ui_dic[t],Global.isSet(e)&&e.setValue(this.current_edit_record[t]);(this.current_edit_record.rate||this.current_edit_record.units)&&(e=this.edit_view_ui_dic.amount).setReadOnly(!0),this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}setEditViewDataDone(){super.setEditViewDataDone(),this.onTypeChange()}buildEditViewUI(){super.buildEditViewUI();var e=this,t={"tab_recurring_ps_amendment":{"label":$.i18n._("Recurring PS Amendment")},"tab_audit":!0};this.setTabModel(t),this.navigation.AComboBox({api_class:TTAPI.APIRecurringPayStubAmendment,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_recurring_amendment",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_recurring_ps_amendment").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var a=Global.loadWidgetByName(FormItemType.COMBO_BOX);a.TComboBox({field:"status_id",set_empty:!1}),a.setSourceData(e.filtered_status_array),this.addEditFieldToColumn($.i18n._("Status"),a,i,""),(a=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),a,i),a.parent().width("45%"),(a=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),a,i),a.parent().width("45%"),(a=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"frequency_id",set_empty:!1}),a.setSourceData(e.frequency_array),this.addEditFieldToColumn($.i18n._("Frequency"),a,i),(a=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"start_date"}),this.addEditFieldToColumn($.i18n._("Start Date"),a,i),(a=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"end_date"}),this.addEditFieldToColumn($.i18n._("End Date"),a,i),(a=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!0,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"user"});var n={permission_section:"recurring_ps_amendment"};a.setDefaultArgs(n),this.addEditFieldToColumn($.i18n._("Employee(s)"),a,i),(a=Global.loadWidgetByName(FormItemType.SEPARATED_BOX)).SeparatedBox({label:$.i18n._("Pay Stub Amendment")}),this.addEditFieldToColumn(null,a,i);var l={},d={type_id:[10,20,30,50,60,65,80]};l.filter_data=d,(a=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",show_search_inputs:!0,set_empty:!0,field:"pay_stub_entry_name_id"}),a.setDefaultArgs(l),this.addEditFieldToColumn($.i18n._("Pay Stub Account"),a,i),(a=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"type_id",set_empty:!1}),a.setSourceData(e.type_array),this.addEditFieldToColumn($.i18n._("Amount Type"),a,i),(a=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"rate",width:149,hasKeyEvent:!0}),this.addEditFieldToColumn($.i18n._("Rate"),a,i,"",null,!0,null,null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"units",width:149,hasKeyEvent:!0}),this.addEditFieldToColumn($.i18n._("Units"),a,i,"",null,!0,null,null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"amount",width:149}),this.addEditFieldToColumn($.i18n._("Amount"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"percent_amount",width:79}),this.addEditFieldToColumn($.i18n._("Percent"),a,i,"",null,!0),l={},(d={}).type_id=[10,20,30,40,50,60,65],l.filter_data=d,(a=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",show_search_inputs:!0,set_empty:!0,field:"percent_amount_entry_name_id"}),a.setDefaultArgs(l),this.addEditFieldToColumn($.i18n._("Percent of"),a,i,"",null,!0),(a=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"ps_amendment_description",width:359}),this.addEditFieldToColumn($.i18n._("Pay Stub Note (Public)"),a,i,"")}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",basic_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Type"),in_column:1,field:"type_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Frequency"),in_column:2,field:"frequency_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,form_item_type:FormItemType.AWESOME_BOX})]}}}}]);
//# sourceMappingURL=payroll-recurring_pay_stub_amendment-RecurringPayStubAmendmentViewController.bundle.js.map?v=f1615aa0b3dd2a15618a