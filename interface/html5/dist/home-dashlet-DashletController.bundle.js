(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["home-dashlet-DashletController"],{190:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"DashletController":()=>s});var i=a(6739);class s extends i.TTBackboneView{constructor(e={}){_.defaults(e,{data:null,api_dashboard:null,api_user_report:null,user_generic_data_api:null,all_columns:null,grid:null,dashboard_data:null,refresh_timer:null,iframe_data:null,initComplete:!1,iframe:null,homeViewController:null,initTimesheetGridComplete:null,accumulated_total_grid_source_map:null,accmulated_order_map:null}),super(e)}initialize(e){super.initialize(e),this.api_dashboard=TTAPI.APIDashboard,this.user_generic_data_api=TTAPI.APIUserGenericData}refreshIfNecessary(){(this.data&&"custom_report"==this.data.data.dashlet_type||"news"===this.data.data.dashlet_type)&&this.iframe_data&&(this.addIframeBack(),this.setIframeData())}initContent(){var e=this;function t(){"custom_list"==e.data.data.dashlet_type?($(e.el).addClass("custom_list"),e.initCustomViewContent()):"custom_report"==e.data.data.dashlet_type?($(e.el).addClass("custom-report"),e.initReportContent(),$(e.el).bind("mousedown",(function(){e.removeIframe()})),$(e.el).bind("mouseup",(function(){e.addIframeBack()}))):"request_summary"==e.data.data.dashlet_type?($(e.el).addClass("request-summary"),e.initDefaultDashletContent("request_summary")):"request_authorize_summary"==e.data.data.dashlet_type?($(e.el).addClass("request-authorize-summary"),e.initDefaultDashletContent("request_authorize_summary")):"accrual_balance_summary"==e.data.data.dashlet_type?($(e.el).addClass("accrual-balance-summary"),e.initDefaultDashletContent("accrual_balance_summary")):"exception_summary"==e.data.data.dashlet_type?($(e.el).addClass("exception-summary"),e.initDefaultDashletContent("exception_summary")):"exception_summary_child"==e.data.data.dashlet_type?($(e.el).addClass("exception-summary-child"),e.initDefaultDashletContent("exception_summary_child")):"message_summary"==e.data.data.dashlet_type?($(e.el).addClass("message-summary"),e.initDefaultDashletContent("message_summary")):"user_active_shift_summary"==e.data.data.dashlet_type?($(e.el).addClass("user-active-shift-summary"),e.initDefaultDashletContent("user_active_shift_summary")):"timesheet_verification_summary"==e.data.data.dashlet_type?($(e.el).addClass("timesheet-verification-summary"),e.initDefaultDashletContent("timesheet_verification_summary")):"timesheet_verification_summary_child"==e.data.data.dashlet_type?($(e.el).addClass("timesheet-verification_summary-child"),e.initDefaultDashletContent("timesheet_verification_summary_child")):"timesheet_summary"==e.data.data.dashlet_type?($(e.el).addClass("timesheet-summary"),e.initTimesheetContent("timesheet_summary")):"schedule_summary"==e.data.data.dashlet_type?($(e.el).addClass("schedule-summary"),e.initDefaultDashletContent("schedule_summary")):"schedule_summary_child"==e.data.data.dashlet_type?($(e.el).addClass("schedule-summary-child"),e.initDefaultDashletContent("schedule_summary_child")):"news"==e.data.data.dashlet_type&&($(e.el).addClass("news"),e.initNewsContent(),$(e.el).unbind("mousedown").bind("mousedown",(function(){e.removeIframe()})),$(e.el).unbind("mouseup").bind("mouseup",(function(){e.addIframeBack()}))),e.initComplete=!0}this.setTitle(),this.initComplete=!1,Global.isScrolledIntoView($(e.el))&&t(),0==Global.detectMobileBrowser()&&$("#"+$(this.el).attr("id")).resizable({handles:"all",start:function(e,t){},resize:function(t,a){e.setGridSize()},stop:function(t,a){e.addIframeBack();var i=Math.floor(a.size.height),s=Math.floor(a.size.width);e.saveSize(i,s),e.homeViewController.updateLayout(),e.homeViewController.dashboard_container.masonry("reloadItems")}}),this.homeViewController.dashboard_container.parent().scroll((function(){Global.isScrolledIntoView($(e.el))&&!e.initComplete&&t()}))}onViewClick(){var e="",t=!1;if("custom_list"==this.data.data.dashlet_type)"Request-Authorization"===(e=this.data.data.view_name)?e="RequestAuthorization":"PayPeriodTimeSheetVerify"===e?e="TimeSheetAuthorization":"UserExpense-Authorization"===e?e="ExpenseAuthorization":"User"===e?e="Employee":"Transaction"===e?e="InvoiceTransaction":"UserWage"===e&&(e="Wage");else switch(this.data.data.dashlet_type){case"message_summary":e="MessageControl";break;case"exception_summary_child":case"exception_summary":e="Exception";break;case"schedule_summary":case"schedule_summary_child":e="Schedule";break;case"request_summary":e="Request";break;case"timesheet_verification_summary":case"timesheet_verification_summary_child":t=!0,e="TimesheetSummaryReport";break;case"timesheet_summary":e="TimeSheet";break;case"user_active_shift_summary":t=!0,e="ActiveShiftReport";break;case"request_authorize_summary":e="RequestAuthorization";break;case"accrual_balance_summary":e="AccrualBalance"}t?IndexViewController.openReport(this.homeViewController,e):IndexViewController.goToView(e)}onCellFormat(e,t,a){e=Global.decodeCellValue(e);var i,r,d,o=t.colModel,l=(t.rowid,$("<div class='punch-content-div'></div>"));return 0===t.pos?a.type===s.TOTAL_ROW?(i=$("<span class='total' style='font-size: 11px'></span>"),Global.isSet(e)?i.text(e):i.text(""),i.get(0).outerHTML):a.type===s.REGULAR_ROW?(i=$("<span class='top-line-span' style='font-size: 11px'></span>"),Global.isSet(e)?i.text(e):i.text(""),i.get(0).outerHTML):e:(a.type===s.TOTAL_ROW?(d=a[o.name+"_data"],r=$("<span class='total'></span>"),Global.isSet(e)?(d&&(d.hasOwnProperty("override")&&!0===d.override&&r.addClass("absence-override"),d.hasOwnProperty("note")&&d.note&&(e="*"+e)),r.text(e)):r.text(""),l.prepend(r)):a.type===s.REGULAR_ROW?(l.addClass("top-line"),d=a[o.name+"_data"],r=$("<span ></span>"),Global.isSet(e)?(d&&(d.hasOwnProperty("override")&&!0===d.override&&r.addClass("absence-override"),d.hasOwnProperty("note")&&d.note&&(e="*"+e)),r.text(e)):r.text(""),l.prepend(r)):a.type===s.ACCUMULATED_TIME_ROW?(d=a[o.name+"_data"],r=$("<span></span>"),Global.isSet(e)?(d&&(d.hasOwnProperty("override")&&!0===d.override&&r.addClass("absence-override"),d.hasOwnProperty("note")&&d.note&&(e="*"+e)),r.text(e)):r.text(""),l.prepend(r)):(r=$("<span class='punch-time'></span>"),Global.isSet(e)?r.text(e):r.text(""),l.prepend(r)),l.get(0).outerHTML)}initNewsContent(){var e=this;$(this.el).find("#grid").remove(),$(this.el).find(".view-btn").remove(),$(this.el).find(".refresh-btn").unbind("click").bind("click",(function(t){$(t.target).addClass("button-rotate"),e.initNewsData()})),this.initNewsData(),this.startRefresh()}initNewsData(){var e=this;this.api_dashboard.getDashletData(this.data.data.dashlet_type,{},{onResult:function(t){t=t.getResult();e.iframe_data=t,t?(e.removeNoResultCover(),e.setIframeData()):e.showNoResultCover(),$(".button-rotate").removeClass("button-rotate")}})}setIframeData(e){$(this.el).find("#iframe").length>0&&$(this.el).find("#iframe")[0].contentWindow.document&&($(this.el).find("#iframe")[0].contentWindow.document.open(),$(this.el).find("#iframe")[0].contentWindow.document.writeln(this.iframe_data),$(this.el).find("#iframe")[0].contentWindow.document.close())}initTimesheetContent(e){$(this.el).find("#iframe").remove();var t=this;(this.api=this.getAPIByViewName(e),Global.isSet(this.grid)&&Global.isSet(this.grid.grid))||$(this.el).find("#grid").attr("id","dashlet_"+this.data.id+"_grid");$(this.el).find(".refresh-btn").unbind("click").bind("click",(function(e){$(e.target).addClass("button-rotate"),t.initDefaultTimesheetData()})),$(this.el).find(".view-btn").unbind("click").bind("click",(function(e){t.onViewClick()})),this.initDefaultTimesheetData(),this.startRefresh()}initDefaultTimesheetData(){var e=this;this.accumulated_total_grid_source_map={},this.api.getTimeSheetData(LocalCacheData.getLoginUser().id,(new Date).format(),{onResult:function(t){t.isValid()?(e.full_timesheet_data=t.getResult(),e.pay_period_data=e.full_timesheet_data.pay_period_data,e.timesheet_verify_data=e.full_timesheet_data.timesheet_verify_data,e.full_timesheet_data.timesheet_dates?(e.start_date=Global.strToDate(e.full_timesheet_data.timesheet_dates.start_display_date),e.end_date=Global.strToDate(e.full_timesheet_data.timesheet_dates.end_display_date),!e.initTimesheetGridComplete&&e.start_date&&e.end_date&&(e.buildAccumulatedTotalGrid(),e.initTimesheetGridComplete=!0),e.buildAccumulatedTotalData()):e.showNoResultCover()):e.showNoResultCover(),$(".button-rotate").removeClass("button-rotate")}})}buildAccmulatedOrderMap(e){if(e)for(var t in e)for(var a in e[t])this.accmulated_order_map[a]=e[t][a].order}buildAccumulatedTotalData(){if(this.grid){this.accmulated_order_map={},this.accumulated_total_grid_source=[];var e=this.full_timesheet_data.accumulated_user_date_total_data,t=this.full_timesheet_data.pay_period_accumulated_user_date_total_data,a=t.accumulated_time,i=t.premium_time,s=t.absence_time_taken;for(var r in e.total&&this.buildAccmulatedOrderMap(e.total),t&&this.buildAccmulatedOrderMap(t),Global.isSet(a)||(a={total:{label:"Total Time",total_time:"0"}}),this.buildSubGridsData(a,"pay_period",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"accumulated_time"),Global.isSet(i)&&this.buildSubGridsData(i,"pay_period",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"premium_time"),Global.isSet(s)&&this.buildSubGridsData(s,"pay_period",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"absence_time"),a={total:{label:"Total Time",total_time:"0"}},this.buildSubGridsData(a,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"accumulated_time"),e)if("total"!==r);else{var d=e.total;a=d.accumulated_time,i=d.premium_time,s=d.absence_time_taken,Global.isSet(a)&&this.buildSubGridsData(a,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"accumulated_time"),Global.isSet(i)&&this.buildSubGridsData(i,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"premium_time"),Global.isSet(s)&&this.buildSubGridsData(s,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"absence_time")}this.sortAccumulatedTotalData(),this.grid.setData(this.accumulated_total_grid_source)}}sortAccumulatedTotalData(){this.accumulated_total_grid_source.sort(Global.m_sort_by(["order","punch_info"]))}buildSubGridsData(e,t,a,i,r){var d,o=!1;for(var l in e)if(a[l])(d=a[l])[t],e[l].key=l,d[t]=Global.getTimeUnit(e[l].total_time),d[t+"_data"]=e[l],"accumulated_time"===d.parent_key&&e[l].override&&(d.is_override_row=!0);else{(d={}).parent_key=r,d.key=l,"accumulated_time"===r?("total"===l||"worked_time"===l?d.type=s.TOTAL_ROW:0==o&&0===l.indexOf("regular_time")?(d.type=s.REGULAR_ROW,o=!0):d.type=s.ACCUMULATED_TIME_ROW,e[l].override&&(d.is_override_row=!0)):"premium_time"===r&&(d.type=s.PREMIUM_ROW),this.accmulated_order_map[l]&&(d.order=this.accmulated_order_map[l]),d.punch_info=e[l].label;var n=l.split("_"),u=!1;n.length>1&&"0"==n[1]&&(u=!0),e[l].key=l,d[t]=Global.getTimeUnit(e[l].total_time),d[t+"_data"]=e[l],u?i.unshift(d):i.push(d),a[l]=d}}getAccumulatedTotalGridPayperiodHeader(){this.pay_period_header=$.i18n._("No Pay Period");var e=this.timesheet_verify_data.pay_period_id;if(e&&this.pay_period_data)for(var t in this.pay_period_data){var a=this.pay_period_data[t];if(a.id===e){var i=Global.strToDate(a.start_date).format(),s=Global.strToDate(a.end_date).format();this.pay_period_header=i+" to "+s;break}}}buildAccumulatedTotalGrid(){var e,t=this,a=[];Global.isSet(this.grid)||(e="dashlet_"+this.data.id+"_grid");var i={name:"punch_info",index:"punch_info",label:" ",width:200,sortable:!1,title:!1,formatter:this.onCellFormat};a.push(i);var s=this.start_date.format(Global.getLoginUserDateFormat()),r=this.end_date.format(Global.getLoginUserDateFormat());this.getAccumulatedTotalGridPayperiodHeader();var d={name:"week",index:"week",label:$.i18n._("Week")+"<br>"+s+" to "+r,width:100,sortable:!1,title:!1,formatter:this.onCellFormat},o={name:"pay_period",index:"pay_period",label:$.i18n._("Pay Period")+"<br>"+this.pay_period_header,width:100,sortable:!1,title:!1,formatter:this.onCellFormat};a.push(d),a.push(o);var l={};(l=this.grid?{shrinkToFit:!1}:{multiselectPosition:"none",gridComplete:function(){$(this).jqGrid("getGridParam","data").length>0&&t.setGridColumnsWidth()}}).onResizeGrid=!1,this.grid=new TTGrid(e,l,a),t.setGridSize()}initDefaultDashletContent(e){$(this.el).find("#iframe").remove();var t=this;(this.api=this.getAPIByViewName(e),$(window).resize((function(){t.grid&&t.setGridSize()})),Global.isSet(this.grid))||$(this.el).find("#grid").attr("id","dashlet_"+this.data.id+"_grid");$(this.el).find(".refresh-btn").unbind("click").bind("click",(function(e){$(e.target).addClass("button-rotate"),t.initDefaultDashletData()})),$(this.el).find(".view-btn").unbind("click").bind("click",(function(e){t.onViewClick()})),this.initDefaultDashletData(),this.startRefresh()}initDefaultDashletData(){var e=this;e.getDefaultDashletData((function(){e.getAllColumns((function(){e.setSelectLayout();var t=Global.formatGridData(e.dashboard_data.data,e.data.data.dashlet_type);t=e.processId(t),e.grid&&e.grid.setData(t),$(".button-rotate").removeClass("button-rotate"),!Global.isArray(e.dashboard_data.data)||e.dashboard_data.data.length<1?e.showNoResultCover():e.removeNoResultCover(),e.setGridCellBackGround()}))}))}processId(e){var t=-2;return e=_.map(e,(function(e){return!e.hasOwnProperty("id")||e.id&&e.id!=TTUUID.zero_id||(e.id=t),t--,e}))}addIframeBack(){var e=this;e.iframe&&($(e.el).find(".content").append(e.iframe),e.setIframeData(),e.iframe=null)}removeIframe(){var e=this;e.iframe=$(e.el).find("#iframe"),$(e.el).find("#iframe").remove()}saveSize(e,t){this.data.data.width=Math.floor(t/$(".dashboard-container").width()*100),this.data.data.height=e,console.log(this.data.data),this.user_generic_data_api.setUserGenericData(this.data,{onResult:function(e){}})}setGridSize(){this.grid&&this.grid.grid&&this.grid.grid.is(":visible")&&(this.grid.grid.setGridWidth($(this.el).find(".content").width()),this.grid.grid.setGridHeight($(this.el).find(".content").height()-28))}initReportContent(){var e=this;$(this.el).find("#grid").remove(),$(this.el).find(".view-btn").remove(),$(this.el).find(".refresh-btn").unbind("click").bind("click",(function(t){$(t.target).addClass("button-rotate"),e.initReportData()})),this.api_user_report=TTAPI.APIUserReportData,this.api=this.getAPIByViewName(this.data.data.report),this.initReportData(),this.startRefresh()}cleanWhenUnloadView(){this.refresh_timer&&clearInterval(this.refresh_timer)}initReportData(){var e=this;"saved_report"!==e.data.data.template?this.getAPIByViewName(this.data.data.report).getTemplate(e.data.data.template,{onResult:function(t){var a=t.getResult();a.other={"page_orientation":"P","font_size":0,"auto_refresh":!1,"disable_grand_total":!1,"maximum_page_limit":100,"show_duplicate_values":!1,is_embedded:!0},e.api["get"+e.api.key_name](a,"html",{onResult:function(t){var a=t.getResult();e.iframe_data=a,a&&e.setIframeData(),$(".button-rotate").removeClass("button-rotate")}})}}):e.api_user_report.getUserReportData({filter_data:{id:e.data.data.saved_report_id}},{onResult:function(t){var a=t.getResult();a&&1==a.length&&(a[0].data.config.other?a[0].data.config.other.is_embedded=!0:a[0].data.config.other={is_embedded:!0},e.api["get"+e.api.key_name](a[0].data.config,"html",{onResult:function(t){var a=t.getResult();e.iframe_data=a,a&&e.setIframeData(),$(".button-rotate").removeClass("button-rotate")}}))}})}startRefresh(){var e=this,t=this.data.data.auto_refresh;t>0&&(this.refresh_timer=setInterval((function(){"Home"!==LocalCacheData.current_open_primary_controller.viewId&&clearInterval(e.refresh_timer),"custom_list"==e.data.data.dashlet_type?e.initCustomViewData():"custom_report"==e.data.data.dashlet_type?e.initReportData():"exception_summary"==e.data.data.dashlet_type||"request_summary"==e.data.data.dashlet_type||"message_summary"==e.data.data.dashlet_type||"exception_summary_child"==e.data.data.dashlet_type||"request_authorize_summary"==e.data.data.dashlet_type||"accrual_balance_summary"==e.data.data.dashlet_type||"user_active_shift_summary"==e.data.data.dashlet_type||"timesheet_verification_summary"==e.data.data.dashlet_type||"timesheet_verification_summary_child"==e.data.data.dashlet_type||"schedule_summary"==e.data.data.dashlet_type||"schedule_summary_child"==e.data.data.dashlet_type?e.initDefaultDashletData():"timesheet_summary"==e.data.data.dashlet_type?e.initDefaultTimesheetData():"news"==e.data.data.dashlet_type&&e.initNewsData()}),1e3*t))}initCustomViewContent(){$(this.el).find("#iframe").remove();var e=this;(this.api=this.getAPIByViewName(this.data.data.view_name),$(window).resize((function(){e.grid&&e.setGridSize()})),Global.isSet(this.grid))||$(this.el).find("#grid").attr("id","dashlet_"+this.data.id+"_grid");$(this.el).find(".refresh-btn").unbind("click").bind("click",(function(t){$(t.target).addClass("button-rotate"),e.initCustomViewData()})),$(this.el).find(".view-btn").unbind("click").bind("click",(function(t){e.onViewClick()})),this.initCustomViewData(),this.startRefresh()}setGridCellBackGround(){var e,t,a=this.grid.getData();if("exception_summary"===this.data.data.dashlet_type||"exception_summary_child"===this.data.data.dashlet_type){if(!a)return;e=a.length;for(var i=0;i<e;i++){if((t=a[i]).exception_background_color){var s=$(this.el).find("tr[id='"+t.id+"']").find('td[aria-describedby="dashlet_'+this.data.id+'_grid_severity"]');s.css("background-color",t.exception_background_color),s.css("font-weight","bold")}if(t.exception_color){var r=$(this.el).find("tr[id='"+t.id+"']").find('td[aria-describedby="dashlet_'+this.data.id+'_grid_exception_policy_type_id"]');r.css("color",t.exception_color),r.css("font-weight","bold")}}}else if("message_summary"===this.data.data.dashlet_type){if(!a)return;e=a.length;for(i=0;i<e;i++)10==(t=a[i]).status_id&&$(this.el).find("tr[id='"+t.id+"'] td").css("font-weight","bold")}else if("request_summary"===this.data.data.dashlet_type){if(!a)return;e=a.length;for(i=0;i<e;i++)30==(t=a[i]).status_id&&$(this.el).find("tr[id='"+t.id+"']").addClass("bolder-request")}else if("user_active_shift_summary"===this.data.data.dashlet_type){if(!a)return;e=a.length;for(i=0;i<e;i++)10==(t=a[i])._status_id?$(this.el).find("tr[id='"+t.id+"']").addClass("light-green"):"Out"===t.status&&$(this.el).find("tr[id='"+t.id+"']").addClass("light-red")}else if("schedule_summary"===this.data.data.dashlet_type||"schedule_summary_child"===this.data.data.dashlet_type){if(!a)return;e=a.length;for(i=0;i<e;i++)20==(t=a[i]).status_id&&$(this.el).find("tr[id='"+t.id+"']").addClass("red-absence")}}startCustomViewAutoRefresh(){var e=this,t=this.data.data.auto_refresh;t>0&&(this.refresh_timer=setInterval((function(){"Home"!==LocalCacheData.current_open_primary_controller.viewId&&clearInterval(e.refresh_timer),e.initCustomViewData()}),1e3*t))}initCustomViewData(){var e=this;e.getCustomListDashboardData((function(){e.getAllColumns((function(){e.setSelectLayout(),e.grid.setData(Global.formatGridData(e.dashboard_data.data)),$(".button-rotate").removeClass("button-rotate"),Global.isArray(e.dashboard_data.data)?e.removeNoResultCover():e.showNoResultCover(),TTPromise.wait(null,null,(function(){e.setGridCellBackGround()}))}))}))}getCustomListDashboardData(e){var t=this;this.data.data.rows_per_page||(this.data.data.rows_per_page=0),this.api_dashboard.getDashletData(this.data.data.dashlet_type,{"class":this.data.data.view_name,"user_generic_data_id":this.data.data.layout_id.toString(),"rows_per_page":this.data.data.rows_per_page.toString()},{onResult:function(a){var i=a.getResult();t.dashboard_data=i,e()}})}getDefaultDashletData(e){var t=this;this.data.data.rows_per_page||(this.data.data.rows_per_page=0),this.api_dashboard.getDashletData(this.data.data.dashlet_type,{"rows_per_page":this.data.data.rows_per_page.toString()},{onResult:function(a){var i=a.getResult();t.dashboard_data=i,e()}})}buildDisplayColumns(e){for(var t=this.all_columns.length,a=e?e.length:0,i=[],s=0;s<a;s++)for(var r=0;r<t;r++)e[s]===this.all_columns[r].value&&i.push(this.all_columns[r]);return i}onGridDblClickRow(){this.onViewClick()}setSelectLayout(){var e,t=this;Global.isSet(this.grid)||(e="dashlet_"+this.data.id+"_grid",$("#"+e).length>0&&$("#"+e).jqGrid("GridUnload"));for(var a=this.buildDisplayColumns(this.dashboard_data.display_columns),i=[],s=a.length,r=0;r<s;r++){var d=a[r],o={name:d.value,index:d.value,label:d.label,width:100,sortable:!1,title:!1};i.push(o)}if(!this.grid){var l={multiselectPosition:"none",onSelectRow:$.proxy(this.onGridSelectRow,this),ondblClickRow:function(){t.onGridDblClickRow()},gridComplete:function(){$(this).jqGrid("getGridParam","data").length>0&&t.setGridColumnsWidth()},onResizeGrid:!1};this.grid=new TTGrid(e,l,i)}t.setGridSize()}showNoResultCover(){(this.removeNoResultCover(),this.no_result_box=Global.loadWidgetByName(WidgetNamesDic.NO_RESULT_BOX),this.no_result_box)&&(this.no_result_box.NoResultBox({related_view_controller:this,is_new:!1,message:this.getNoResultMessage()}),this.no_result_box.attr("id","dashlet_"+this.data.id+"_no_result_box"),$("#dashlet_"+this.data.id+"_no_result_box").remove(),$(this.el).find(".content").append(this.no_result_box))}getNoResultMessage(){var e=$.i18n._("No Results Found");switch(this.data.data.dashlet_type){case"schedule_summary":e=$.i18n._("Perhaps if you ask nicely, your supervisor will add a schedule for you?");break;case"exception_summary":e=$.i18n._("No exceptions to correct, great job!");break;case"message_summary":e=$.i18n._("All messages are read, nicely done!");break;case"request_summary":e=$.i18n._("Send a request to your supervisor by clicking MyAccount -> Requests.");break;case"accrual_balance_summary":e=$.i18n._("No accrual balances at this time.");break;case"timesheet_summary":e=$.i18n._("Timesheet not available.");break;case"timesheet_verification_summary":case"timesheet_verification_summary_child":e=$.i18n._("No timesheets to verify yet.");break;case"schedule_summary_child":e=$.i18n._("Schedules can be added by clicking Attendance -> Schedules.");break;case"exception_summary_child":e=$.i18n._("All exceptions are corrected... You can relax now!");break;case"user_active_shift_summary":e=$.i18n._("No active shifts at this moment.");break;case"request_authorize_summary":e=$.i18n._("All requests are authorized, excellent work!");break;case"news":e=$.i18n._("Slow news day, nothing to see here yet...")}return e}removeNoResultCover(){this.no_result_box&&this.no_result_box.length>0&&this.no_result_box.remove(),this.no_result_box=null}getAllColumns(e){var t=this;this.api&&this.api.getOptions("columns",{onResult:function(a){var i=a.getResult();t.all_columns=Global.buildColumnArray(i),e&&e()}})}getDefaultDisplayColumns(e){var t=this;this.api.getOptions("default_display_columns",{onResult:function(a){var i=a.getResult();t.default_display_columns=i,e&&e()}})}setTitle(){$(this.el).find(".title").text(this.data.name)}getAPIByViewName(e){var t=null;switch(e.toLowerCase()){case"message_summary":t=TTAPI.APIMessageControl;break;case"schedule_summary":case"schedule_summary_child":case"schedule":t=TTAPI.APISchedule;break;case"exception":case"exception_summary":case"exception_summary_child":t=TTAPI.APIException;break;case"invoice":t=TTAPI.APIInvoice;break;case"user":t=TTAPI.APIUser;break;case"request_summary":case"request":case"request-authorization":case"request_authorize_summary":t=TTAPI.APIRequest;break;case"accrual_balance_summary":t=TTAPI.APIAccrualBalance;break;case"timesheet_verification_summary":case"timesheet_verification_summary_child":t=TTAPI.APITimesheetSummaryReport;break;case"timesheet_summary":t=TTAPI.APITimeSheet;break;case"user_active_shift_summary":t=TTAPI.APIActiveShiftReport;break;case"payperiodtimesheetverify":t=TTAPI.APIPayPeriodTimeSheetVerify;break;case"userexpense":case"userexpense-authorization":t=TTAPI.APIUserExpense;break;case"timesheetsummaryreport":t=TTAPI.APITimesheetSummaryReport;break;case"timesheetdetailreport":t=TTAPI.APITimesheetDetailReport;break;case"accrualbalance":t=TTAPI.APIAccrualBalance;break;case"accrual":t=TTAPI.APIAccrual;break;case"recurringschedulecontrol":t=TTAPI.APIRecurringScheduleControl;break;case"recurringscheduletemplatecontrol":t=TTAPI.APIRecurringScheduleTemplateControl;break;case"job":t=TTAPI.APIJob;break;case"jobitem":t=TTAPI.APIJobItem;break;case"usercontact":t=TTAPI.APIUserContact;break;case"userwage":t=TTAPI.APIUserWage;break;case"paystub":t=TTAPI.APIPayStub;break;case"payperiod":t=TTAPI.APIPayPeriod;break;case"paystubamendment":t=TTAPI.APIPayStubAmendment;break;case"client":t=TTAPI.APIClient;break;case"clientcontact":t=TTAPI.APIClientContact;break;case"transaction":t=TTAPI.APITransaction;break;case"userreviewcontrol":t=TTAPI.APIUserReviewControl;break;case"jobvacancy":t=TTAPI.APIJobVacancy;break;case"jobapplicant":t=TTAPI.APIJobApplicant;break;case"jobapplication":t=TTAPI.APIJobApplication;break;case"accrualbalancesummaryreport":t=TTAPI.APIAccrualBalanceSummaryReport;break;case"usersummaryreport":t=TTAPI.APIUserSummaryReport;break;case"activeshiftreport":t=TTAPI.APIActiveShiftReport;break;case"audittrailreport":t=TTAPI.APIAuditTrailReport;break;case"schedulesummaryreport":t=TTAPI.APIScheduleSummaryReport;break;case"punchsummaryreport":t=TTAPI.APIPunchSummaryReport;break;case"exceptionreport":t=TTAPI.APIExceptionReport;break;case"paystubsummaryreport":t=TTAPI.APIPayStubSummaryReport;break;case"userexpensereport":t=TTAPI.APIUserExpenseReport;break;case"jobsummaryreport":t=TTAPI.APIJobSummaryReport;break;case"jobdetailreport":t=TTAPI.APIJobDetailReport;break;case"jobinformationreport":t=TTAPI.APIJobInformationReport;break;case"jobiteminformationreport":t=TTAPI.APIJobItemInformationReport;break;case"invoicetransactionsummaryreport":t=TTAPI.APIInvoiceTransactionSummaryReport;break;case"userqualificationreport":t=TTAPI.APIUserQualificationReport;break;case"kpireport":t=TTAPI.APIKPIReport;break;case"userrecruitmentsummaryreport":t=TTAPI.APIUserRecruitmentSummaryReport;break;case"userrecruitmentdetailreport":t=TTAPI.APIUserRecruitmentDetailReport}return t}setGridColumnsWidth(){var e=this.grid.getGridParam("colModel"),t=this.grid.getGridParam("data");if(this.grid_total_width=0,e){for(var a=0;a<e.length;a++){for(var i=e[a],s=i.name,r="",d=0;d<t.length;d++){var o=t[d];if(!o.hasOwnProperty(s))break;var l=o[s];l||(l=""),r?l&&l.toString().length>r.length&&(r=l.toString()):r=l.toString()}if(r){var n=$('<span id="width_test"></span>');n.css("font-size","11"),n.css("font-weight","normal"),$("body").append(n),n.text(r);var u=n.width();n.text(i.label);var c=n.width();c>u&&(u=c+20),this.grid_total_width+=u+5,this.grid.grid.setColProp(s,{widthOrg:u}),n.remove()}}var h=this.grid.getGridParam("width");this.grid.setGridWidth(h)}}}s.TOTAL_ROW=4,s.REGULAR_ROW=5,s.ABSENCE_ROW=6,s.ACCUMULATED_TIME_ROW=7,s.PREMIUM_ROW=8}}]);
//# sourceMappingURL=home-dashlet-DashletController.bundle.js.map?v=d178e81f65820e5181f5