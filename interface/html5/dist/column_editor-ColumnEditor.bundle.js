(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["column_editor-ColumnEditor"],{9613:()=>{var e;(e=jQuery).fn.ColumnEditor=function(t){var l,o,a=e.extend({},e.fn.ColumnEditor.defaults,t),s=null,i=null,n=this,r=!1,u=null,d=null,c=null,p=[{label:e.i18n._("Default"),value:0},{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:50,value:50},{label:100,value:100},{label:250,value:250},{label:500,value:500},{label:1e3,value:1e3}];return this.getIsMouseOver=function(){return r},this.getParentAwesomeBox=function(){return s},Global.addCss("global/widgets/column_editor/ColumnEditor.css"),this.show=function(){if(LocalCacheData.openAwesomeBoxColumnEditor){if(LocalCacheData.openAwesomeBoxColumnEditor.getParentAwesomeBox().getId()===s.getId())return void LocalCacheData.openAwesomeBoxColumnEditor.onClose();LocalCacheData.openAwesomeBoxColumnEditor.onClose()}var t=s.getLayout(),a=e(this).find(".column-editor-drop-down-div"),p=e(this).find(".rows-per-page-div");i=Global.loadWidget("global/widgets/awesomebox/ADropDown.html"),i=(i=e(i)).ADropDown({display_show_all:!1,id:"column_editor",key:"value",display_close_btn:!1,display_column_settings:!1,static_height:150,resize_grids:!0}),a.append(i),e("body").append(e(this).css("visibility","hidden")),i.setColumns([{name:"label",index:"label",label:e.i18n._("Column Name"),width:100,sortable:!1}]),i.setUnselectedGridData(s.getAllColumns()),o=s.getDisplayColumnsForEditor(),i.setSelectGridData(o),i.setResizeGrids(!0),958+e(s).offset().left+50>Global.bodyWidth()?e(this).css("left",Global.bodyWidth()-958-50):e(this).css("left",e(s).offset().left);var f=this;setTimeout((function(){e(f).height()+e(s).offset().top+50>Global.bodyHeight()?e(f).css("top",Global.bodyHeight()-e(f).height()-25):e(f).css("top",e(s).offset().top+25),e(f).css("visibility","visible")}),100),e(this).mouseenter((function(){r=!0})),e(this).mouseleave((function(e){e.target==this&&(r=!1)})),LocalCacheData.openAwesomeBoxColumnEditor=n,t&&Global.isSet(t.data.type)&&10===t.data.type?(a.css("display","none"),p.css("display","none")):(a.css("display","block"),p.css("display","block"));var h=s.getScriptName();s.getAPI().getOptions("columns",{onResult:function(e){var t=e.getResult();l=Global.buildColumnArray(t)}}),d.getUserGenericData({filter_data:{script:h,deleted:!1}},{onResult:function(l){var o=l.getResult();if(c=o,o&&o.length>0){o.sort((function(e,t){return Global.compare(e,t,"name")})),e(u).empty();var s=[];s.push({label:e.i18n._(Global.customize_item),value:-1});for(var i=o.length,n=0;n<i;n++){var r=o[n];s.push({label:r.name,value:r.id})}u.setSourceData(s),t&&Global.isSet(t.data.type)&&10===t.data.type&&(e(e(u).find("option")).filter((function(){return parseInt(e(this).attr("value"))===t.data.layout_id})).prop("selected",!0).attr("selected",!0),-1===u.getValue()&&(a.css("display","block"),p.css("display","block")))}else(s=[]).push({label:e.i18n._(Global.customize_item),value:-1}),u.setSourceData(s),a.css("display","block"),p.css("display","block")}})},this.onClose=function(){e(n).remove(),LocalCacheData.openAwesomeBoxColumnEditor=null,r=!1},this.onSave=function(){n.onClose();var t=u.getValue();if(c)if(-1!==t)for(var l=c.length,a=0;a<l;a++){var r=c[a];if(r.id===t){r.data.filter_data=Global.convertLayoutFilterToAPIFilter(r),r.data.display_columns=n.buildDisplayColumns(r.data.display_columns),s.onColumnSettingSaveFromLayout(r);break}}else e(n).find("#rows-per-page-selector").find("option:selected").each((function(){var t=e(this).attr("value"),l=i.getSelectItems();0===l.length&&(l=o),s.onColumnSettingSave(l,t,"-1")}))},this.buildDisplayColumns=function(e){for(var t=l.length,o=e.length,a=[],s=0;s<o;s++)for(var i=0;i<t;i++)e[s]===l[i].value&&a.push(l[i]);return a},this.each((function(){var t=e.meta?e.extend({},a,e(this).data()):a,l=e(this).find("#close_btn"),o=e(this).find("#save_btn");d=TTAPI.APIUserGenericData,s=t.parent_awesome_box,l.bind("click",n.onClose),o.bind("click",n.onSave);for(var i=e(this).find("#rows-per-page-selector"),r=p.length,c=0;c<r;c++){var f=p[c];e(i).append('<option value="'+f.value+'">'+f.label+"</option>")}e(e(i).find("option")).filter((function(){return e(this).attr("value")===s.getRowPerPage()})).prop("selected",!0).attr("selected",!0),u=(u=e(this).find("#layout-selector")).TComboBox();var h=e(this).find(".column-editor-drop-down-div"),b=e(this).find(".rows-per-page-div");u.bind("formItemChange",(function(e,t){-1!==t.getValue()?(h.css("display","none"),b.css("display","none")):(h.css("display","block"),b.css("display","block"))}))})),this},e.fn.ColumnEditor.defaults={}}}]);
//# sourceMappingURL=column_editor-ColumnEditor.bundle.js.map?v=667aa0fc4206f9e5c3df