(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["policy-regular_time_policy-RegularTimePolicyViewController"],{3247:(e,i,t)=>{"use strict";t.r(i),t.d(i,{"RegularTimePolicyViewController":()=>o});class o extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#regular_time_policy_view_container",type_array:null,branch_selection_type_array:null,department_selection_type_array:null,job_group_selection_type_array:null,job_selection_type_array:null,job_group_array:null,job_item_group_array:null,job_item_group_selection_type_array:null,job_item_selection_type_array:null,job_group_api:null,job_item_group_api:null}),super(e)}init(e){this.edit_view_tpl="RegularTimePolicyEditView.html",this.permission_id="regular_time_policy",this.viewId="RegularTimePolicy",this.script_name="RegularTimePolicyView",this.table_name_key="regular_time_policy",this.context_menu_name=$.i18n._("Regular Time Policy"),this.navigation_label=$.i18n._("Regular Time Policy")+":",this.api=TTAPI.APIRegularTimePolicy,Global.getProductEdition()>=20&&(this.job_group_api=TTAPI.APIJobGroup,this.job_item_group_api=TTAPI.APIJobItemGroup),this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary("RegularTimePolicy")}initOptions(){var e=this;this.initDropDownOption("type"),this.initDropDownOption("branch_selection_type"),this.initDropDownOption("department_selection_type"),this.initDropDownOption("job_group_selection_type"),this.initDropDownOption("job_selection_type"),this.initDropDownOption("job_item_group_selection_type"),this.initDropDownOption("job_item_selection_type"),Global.getProductEdition()>=20&&(this.job_group_api.getJobGroup("",!1,!1,{onResult:function(i){i=i.getResult(),i=Global.buildTreeRecord(i),e.job_group_array=i}}),this.job_item_group_api.getJobItemGroup("",!1,!1,{onResult:function(i){i=i.getResult(),i=Global.buildTreeRecord(i),e.job_item_group_array=i}}))}buildEditViewUI(){super.buildEditViewUI();var e=this,i={"tab_regular_time_policy":{"label":$.i18n._("Regular Time Policy")},"tab_differential_criteria":{"label":$.i18n._("Differential Criteria"),"init_callback":"initSubDifferentialCriteriaView"},"tab_audit":!0};this.setTabModel(i),this.navigation.AComboBox({api_class:TTAPI.APIRegularTimePolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_regular_time",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var t=this.edit_view_tab.find("#tab_regular_time_policy").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(t);var o=Global.loadWidgetByName(FormItemType.TEXT_INPUT);o.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),o,t,""),o.parent().width("45%"),(o=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),o,t,"",null,null,!0),o.parent().width("45%"),(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIContributingShiftPolicy,allow_multiple_selection:!1,layout_name:"global_contributing_shift_policy",show_search_inputs:!0,set_empty:!0,field:"contributing_shift_policy_id"}),this.addEditFieldToColumn($.i18n._("Contributing Shift Policy"),o,t),(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayCode,allow_multiple_selection:!1,layout_name:"global_pay_code",show_search_inputs:!0,set_empty:!0,field:"pay_code_id"}),this.addEditFieldToColumn($.i18n._("Pay Code"),o,t),(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIPayFormulaPolicy,allow_multiple_selection:!1,layout_name:"global_pay_formula_policy",show_search_inputs:!0,set_empty:!0,field:"pay_formula_policy_id",custom_first_label:$.i18n._("-- Defined By Pay Code --"),added_items:[{value:TTUUID.zero_id,label:$.i18n._("-- Defined By Pay Code --")}]}),this.addEditFieldToColumn($.i18n._("Pay Formula Policy"),o,t),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"calculation_order",width:50}),this.addEditFieldToColumn($.i18n._("Calculation Order"),o,t,"");var l=this.edit_view_tab.find("#tab_differential_criteria").find(".first-column");this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(l);var a=$("<div class='v-box'></div>");(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"branch_selection_type_id",set_empty:!1}),o.setSourceData(e.branch_selection_type_array),n=this.putInputToInsideFormItem(o,"Selection Type"),a.append(n),a.append("<div class='clear-both-div'></div>");var _=Global.loadWidgetByName(FormItemType.AWESOME_BOX);_.AComboBox({api_class:TTAPI.APIBranch,allow_multiple_selection:!0,layout_name:"global_branch",show_search_inputs:!0,set_empty:!0,field:"branch"});var n=this.putInputToInsideFormItem(_,"Selection");a.append(n);var d=Global.loadWidgetByName(FormItemType.CHECKBOX);d.TCheckbox({field:"exclude_default_branch"}),n=this.putInputToInsideFormItem(d,"Exclude Default"),a.append(n),this.addEditFieldToColumn($.i18n._("Branches"),[o,_,d],l,"",a,!1,!0),a=$("<div class='v-box'></div>"),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"department_selection_type_id",set_empty:!1}),o.setSourceData(e.department_selection_type_array),n=this.putInputToInsideFormItem(o,"Selection Type"),a.append(n),a.append("<div class='clear-both-div'></div>"),(_=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIDepartment,allow_multiple_selection:!0,layout_name:"global_department",show_search_inputs:!0,set_empty:!0,field:"department"}),n=this.putInputToInsideFormItem(_,"Selection"),a.append(n),(d=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"exclude_default_department"}),n=this.putInputToInsideFormItem(d,"Exclude Default"),a.append(n),this.addEditFieldToColumn($.i18n._("Departments"),[o,_,d],l,"",a,!1,!0),Global.getProductEdition()>=20&&(a=$("<div class='v-box'></div>"),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_group_selection_type_id",set_empty:!1}),o.setSourceData(e.job_group_selection_type_array),n=this.putInputToInsideFormItem(o,"Selection Type"),a.append(n),a.append("<div class='clear-both-div'></div>"),(_=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"job_group"}),_.setSourceData(e.job_group_array),n=this.putInputToInsideFormItem(_,"Selection"),a.append(n),this.addEditFieldToColumn($.i18n._("Job Groups"),[o,_],l,"",a,!1,!0),a=$("<div class='v-box'></div>"),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_selection_type_id",set_empty:!1}),o.setSourceData(e.job_selection_type_array),n=this.putInputToInsideFormItem(o,"Selection Type"),a.append(n),a.append("<div class='clear-both-div'></div>"),(_=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJob,allow_multiple_selection:!0,layout_name:"global_job",show_search_inputs:!0,set_empty:!0,field:"job"}),n=this.putInputToInsideFormItem(_,"Selection"),a.append(n),(d=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"exclude_default_job"}),n=this.putInputToInsideFormItem(d,"Exclude Default"),a.append(n),this.addEditFieldToColumn($.i18n._("Jobs"),[o,_,d],l,"",a,!1,!0),a=$("<div class='v-box'></div>"),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_item_group_selection_type_id",set_empty:!1}),o.setSourceData(e.job_item_group_selection_type_array),n=this.putInputToInsideFormItem(o,"Selection Type"),a.append(n),a.append("<div class='clear-both-div'></div>"),(_=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"job_item_group"}),_.setSourceData(e.job_item_group_array),n=this.putInputToInsideFormItem(_,"Selection"),a.append(n),this.addEditFieldToColumn($.i18n._("Task Groups"),[o,_],l,"",a,!1,!0),a=$("<div class='v-box'></div>"),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"job_item_selection_type_id",set_empty:!1}),o.setSourceData(e.job_item_selection_type_array),n=this.putInputToInsideFormItem(o,"Selection Type"),a.append(n),a.append("<div class='clear-both-div'></div>"),(_=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!0,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,field:"job_item"}),n=this.putInputToInsideFormItem(_,"Selection"),a.append(n),(d=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"exclude_default_job_item"}),n=this.putInputToInsideFormItem(d,"Exclude Default"),a.append(n),this.addEditFieldToColumn($.i18n._("Tasks"),[o,_,d],l,"",a,!1,!0))}onFormItemChange(e){this.is_changed=!0,this.setMassEditingFieldsWhenFormChange(e);var i=e.getField(),t=e.getValue();this.current_edit_record[i]=t,"branch_selection_type_id"===i&&this.onBranchSelectionTypeChange(),"department_selection_type_id"===i&&this.onDepartmentSelectionTypeChange(),"job_group_selection_type_id"===i&&this.onJobGroupSelectionTypeChange(),"job_selection_type_id"===i&&this.onJobSelectionTypeChange(),"job_item_group_selection_type_id"===i&&this.onJobItemGroupSelectionTypeChange(),"job_item_selection_type_id"===i&&this.onJobItemSelectionTypeChange(),this.validate()}setCurrentEditRecordData(){for(var e in this.setDefaultData({"branch_selection_type_id":10,"department_selection_type_id":10,"job_group_selection_type_id":10,"job_selection_type_id":10,"job_item_group_selection_type_id":10,"job_item_selection_type_id":10}),this.current_edit_record){var i=this.edit_view_ui_dic[e];Global.isSet(i)&&i.setValue(this.current_edit_record[e])}this.onBranchSelectionTypeChange(),this.onDepartmentSelectionTypeChange(),this.onJobGroupSelectionTypeChange(),this.onJobSelectionTypeChange(),this.onJobItemGroupSelectionTypeChange(),this.onJobItemSelectionTypeChange(),this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onBranchSelectionTypeChange(){10==this.current_edit_record.branch_selection_type_id?this.edit_view_ui_dic.branch.setEnabled(!1):this.edit_view_ui_dic.branch.setEnabled(!0)}onDepartmentSelectionTypeChange(){10==this.current_edit_record.department_selection_type_id?this.edit_view_ui_dic.department.setEnabled(!1):this.edit_view_ui_dic.department.setEnabled(!0)}onJobGroupSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_group_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job_group.setEnabled(!1):this.edit_view_ui_dic.job_group.setEnabled(!0))}onJobSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job.setEnabled(!1):this.edit_view_ui_dic.job.setEnabled(!0))}onJobItemGroupSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_item_group_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job_item_group.setEnabled(!1):this.edit_view_ui_dic.job_item_group.setEnabled(!0))}onJobItemSelectionTypeChange(){Global.getProductEdition()>=20&&(10==this.current_edit_record.job_item_selection_type_id||this.is_viewing?this.edit_view_ui_dic.job_item.setEnabled(!1):this.edit_view_ui_dic.job_item.setEnabled(!0))}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Pay Code"),in_column:1,field:"pay_code_id",layout_name:"global_pay_code",api_class:TTAPI.APIPayCode,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Pay Formula Policy"),in_column:1,field:"pay_formula_policy_id",layout_name:"global_pay_formula_policy",api_class:TTAPI.APIPayFormulaPolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}initSubDifferentialCriteriaView(){Global.getProductEdition()>=15?(this.edit_view_tab.find("#tab_differential_criteria").find(".first-column").css("display","block"),this.edit_view.find(".permission-defined-div").css("display","none"),this.buildContextMenu(!0),this.setEditMenu()):(this.edit_view_tab.find("#tab_differential_criteria").find(".first-column").css("display","none"),this.edit_view.find(".permission-defined-div").css("display","block"),this.edit_view.find(".permission-message").html(Global.getUpgradeMessage()))}}}}]);
//# sourceMappingURL=policy-regular_time_policy-RegularTimePolicyViewController.bundle.js.map?v=93e2249796bb26761f65