{"version":3,"sources":["webpack://timetrex/./interface/html5/views/hr/recruitment/JobApplicantLocationViewController.js"],"names":["JobApplicantLocationViewController","BaseViewController","options","_","defaults","el","country_array","province_array","e_province_array","company_api","sub_view_grid_autosize","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIJobApplicantLocation","APICompany","render","sub_view_mode","initData","show_new_btn","showNoResultCover","buildContextMenu","onAddClick","initDropDownOption","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","id","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_job_applicant_location_column1","edit_view_tab","find","edit_view_tabs","push","form_item_input","Global","loadWidgetByName","FormItemType","TEXT_INPUT","TTextInput","field","width","addEditFieldToColumn","COMBO_BOX","TComboBox","set_empty","setSourceData","DATE_PICKER","TDatePicker","TAG_INPUT","TTagInput","object_type_id","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","current_edit_record","getValue","edit_view_ui_dic","setValue","validate","onCountryChange","widget","isSet","setCountryValue","collectUIDataToCurrentEditRecord","setEditViewDataDone","val","m","$this","getOptions","onResult","res","getResult","buildRecordArray","adv_search_field_ui_dic","refresh","province_widget","length","province","value","setDefaultMenu","searchDone","TTPromise","resolve","loadSubView","container","beforeViewLoadedFun","afterViewLoadedFun","loadViewSource","result","template","html","sub_job_applicant_location_view_controller"],"mappings":"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","file":"hr-recruitment-JobApplicantLocationViewController.bundle.js?v=8ff13648ec9af3a566a8","sourcesContent":["export class JobApplicantLocationViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#job_applicant_location_view_container',\n\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\t\t\te_province_array: null,\n\n\t\t\tcompany_api: null,\n\n\t\t\tsub_view_grid_autosize: true\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'JobApplicantLocationEditView.html';\n\t\tthis.permission_id = 'job_applicant';\n\t\tthis.viewId = 'JobApplicantLocation';\n\t\tthis.script_name = 'JobApplicantLocationView';\n\t\tthis.table_name_key = 'job_applicant_location';\n\t\tthis.context_menu_name = $.i18n._( 'Job Applicant Location' );\n\t\tthis.navigation_label = $.i18n._( 'Job Applicant Location' ) + ':';\n\t\tthis.api = TTAPI.APIJobApplicantLocation;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.render();\n\n\t\t//call init data in parent view\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\n\t\t//this.setSelectRibbonMenuIfNecessary( 'UserContact' )\n\t}\n\n\tshowNoResultCover( show_new_btn ) {\n\t\tsuper.showNoResultCover( ( this.sub_view_mode ) ? true : false );\n\t}\n\n\tonAddClick() {\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t}\n\n\t\tsuper.onAddClick();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'country', 'country', this.company_api );\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_job_applicant_location': { 'label': $.i18n._( 'Job Applicant Location' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIJobApplicantLocation,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_applicant_location',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\tvar tab_job_applicant_location = this.edit_view_tab.find( '#tab_job_applicant_location' );\n\t\tvar tab_job_applicant_location_column1 = tab_job_applicant_location.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_job_applicant_location_column1 );\n\n\t\t// tab_job_applicant_location column1\n\n\t\t// Address (Line 1)\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'address1',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 1)' ), form_item_input, tab_job_applicant_location_column1, '' );\n\n\t\t// Address (Line 2)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'address2',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Address (Line 2)' ), form_item_input, tab_job_applicant_location_column1 );\n\n\t\t// City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'city', width: 200 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_job_applicant_location_column1 );\n\n\t\t// Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'country', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_job_applicant_location_column1 );\n\n\t\t// Province/State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'province' } );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province/State' ), form_item_input, tab_job_applicant_location_column1 );\n\n\t\t// Postal / ZIP Code\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'postal_code', width: 90 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_job_applicant_location_column1 );\n\n\t\t// Start Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'start_date' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Start Date' ), form_item_input, tab_job_applicant_location_column1, '', null );\n\n\t\t// End Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'end_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'End Date' ), form_item_input, tab_job_applicant_location_column1, '', null );\n\n\t\t// Tags\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\t\tform_item_input.TTagInput( {\n\t\t\tfield: 'tag',\n\t\t\tobject_type_id: 370\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_job_applicant_location_column1, '', null, null, true );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\n\t\tthis.current_edit_record[key] = target.getValue();\n\n\t\tswitch ( key ) {\n\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonGridSelectRow() {\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\t\tthis.setDefaultMenu();\n\t}\n\n\tsearchDone() {\n\n\t\tsuper.searchDone();\n\n\t\tTTPromise.resolve( 'JobApplicant_History_Tab', 'JobApplicantLocationViewController' );\n\n\t}\n\n}\n\nJobApplicantLocationViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\tGlobal.loadViewSource( 'JobApplicantLocation', 'SubJobApplicantLocationView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_job_applicant_location_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};"],"sourceRoot":""}