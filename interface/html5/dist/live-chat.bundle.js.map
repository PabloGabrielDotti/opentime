{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/live-chat/live-chat.js"],"names":["openSupportChat","current_company","LocalCacheData","getLocalCache","current_user","getLoginUser","chat_email_address","work_email","home_email","LHCChatOptions","attr","Array","push","work_phone","home_phone","getLoginData","registration_key","attr_online","first_name","last_name","name","attr_prefill","attr_prefill_admin","opt","widget_height","widget_width","popup_height","popup_width","domain","po","document","createElement","type","async","refferer","encodeURIComponent","referrer","substr","indexOf","location","window","href","substring","protocol","length","src","Date","getTime","crossOrigin","onload","lh_inst","lh_openchatWindow","s","getElementsByTagName","parentNode","insertBefore"],"mappings":"yKAAA,IAIIA,EAJAC,EAAkBC,eAAeC,cAAe,kBAAmB,QACnEC,EAAeF,eAAeG,eAC9BC,EAAkD,IAA3BF,EAAaG,WAAmBH,EAAaG,WAA0C,IAA3BH,EAAaI,WAAmBJ,EAAaI,WAAa,iCAC7IC,EAAiB,GAGhBR,GAAmBG,IAEvBK,EAAeC,KAAO,IAAIC,MAC1BF,EAAeC,KAAKE,KAAM,CACzB,OAAQ,QACR,QAASN,EACT,OAAQ,SACR,OAAQ,IAETG,EAAeC,KAAKE,KAAM,CACzB,OAAQ,QACR,QAAsC,IAA3BR,EAAaS,WAAmBT,EAAaS,WAAaT,EAAaU,WAClF,OAAQ,SACR,OAAQ,IAETL,EAAeC,KAAKE,KAAM,CACzB,OAAQ,mBACR,QAASV,eAAea,eAAeC,iBACvC,OAAQ,SACR,OAAQ,IAGTP,EAAeQ,YAAc,IAAIN,MACjCF,EAAeQ,YAAYL,KAAM,CAChC,OAAQ,WACR,QAASR,EAAac,WAAa,IAAMd,EAAae,UACtD,UAAU,IAEXV,EAAeQ,YAAYL,KAAM,CAChC,OAAQ,QACR,QAASN,EACT,UAAU,IAEXG,EAAeQ,YAAYL,KAAM,CAAE,OAAQ,UAAW,QAASX,EAAgBmB,KAAM,UAAU,IAE/FX,EAAeY,aAAe,IAAIV,MAClCF,EAAeY,aAAaT,KAAM,CACjC,OAAQ,WACR,QAASR,EAAac,WAAa,IAAMd,EAAae,UACtD,UAAU,IAEXV,EAAeY,aAAaT,KAAM,CACjC,OAAQ,QACR,QAASN,EACT,UAAU,IAEXG,EAAeY,aAAaT,KAAM,CACjC,OAAQ,QACR,QAAsC,IAA3BR,EAAaS,WAAmBT,EAAaS,WAAaT,EAAaU,WAClF,UAAU,IAEXL,EAAeY,aAAaT,KAAM,CAAE,OAAQ,UAAW,QAASX,EAAgBmB,KAAM,UAAU,IAEhGX,EAAea,mBAAqB,IAAIX,MACxCF,EAAea,mBAAmBV,KAAM,CAAE,QAAS,IAAK,QAASX,EAAgBmB,KAAM,UAAU,IAEjGX,EAAec,IAAM,CACpBC,cAAe,IACfC,aAAc,IACdC,aAAc,IACdC,YAAa,IACbC,OAAQ,gBAIT5B,EAAkB,YACjB,WACC,IAAI6B,EAAKC,SAASC,cAAe,UACjCF,EAAGG,KAAO,kBACVH,EAAGI,OAAQ,EACX,IAAIC,EAAaJ,SAAkB,SAAIK,mBAAoBL,SAASM,SAASC,OAAQP,SAASM,SAASE,QAAS,OAAU,IAAQ,GAC9HC,EAAaT,SAAkB,SAAIK,mBAAoBK,OAAOD,SAASE,KAAKC,UAAWF,OAAOD,SAASI,SAASC,SAAa,GACjIf,EAAGgB,IAAM,wLAA0LX,EAAW,MAAQK,EAAW,SAAU,IAAIO,MAAOC,UACtPlB,EAAGmB,YAAc,YACjBnB,EAAGoB,OAAS,WACX,OAAOC,QAAQC,qBAEhB,IAAIC,EAAItB,SAASuB,qBAAsB,UAAW,GAClDD,EAAEE,WAAWC,aAAc1B,EAAIuB,GAZhC","file":"live-chat.bundle.js?v=903f5f9df85146493fc9","sourcesContent":["var current_company = LocalCacheData.getLocalCache( 'current_company', 'JSON' ); //Can't use LocalCacheData.getCurrentCompany(); as that uses getRequiredLocalCache() and if the user logs in, then logs out before this can load, it will cause a JS exception.\nvar current_user = LocalCacheData.getLoginUser();\nvar chat_email_address = ( current_user.work_email != '' ? current_user.work_email : ( current_user.home_email != '' ? current_user.home_email : 'EmailNotSpecified@NoDomain.com' )  ); //Fall back to a bogus email address otherwise the live chat will be rejected, and some people have complained about that.\nvar LHCChatOptions = {};\nvar openSupportChat;\n\nif ( current_company && current_user ) {\n\n\tLHCChatOptions.attr = new Array();\n\tLHCChatOptions.attr.push( {\n\t\t'name': 'email',\n\t\t'value': chat_email_address,\n\t\t'type': 'hidden',\n\t\t'size': 0\n\t} );\n\tLHCChatOptions.attr.push( {\n\t\t'name': 'phone',\n\t\t'value': ( current_user.work_phone != '' ? current_user.work_phone : current_user.home_phone ),\n\t\t'type': 'hidden',\n\t\t'size': 0\n\t} );\n\tLHCChatOptions.attr.push( {\n\t\t'name': 'registration_key',\n\t\t'value': LocalCacheData.getLoginData().registration_key,\n\t\t'type': 'hidden',\n\t\t'size': 0\n\t} );\n\n\tLHCChatOptions.attr_online = new Array(); //Online Chat List info.\n\tLHCChatOptions.attr_online.push( {\n\t\t'name': 'username',\n\t\t'value': current_user.first_name + ' ' + current_user.last_name,\n\t\t'hidden': true\n\t} );\n\tLHCChatOptions.attr_online.push( {\n\t\t'name': 'email',\n\t\t'value': chat_email_address,\n\t\t'hidden': true\n\t} );\n\tLHCChatOptions.attr_online.push( { 'name': 'company', 'value': current_company.name, 'hidden': true } );\n\n\tLHCChatOptions.attr_prefill = new Array(); //Chat Form info.\n\tLHCChatOptions.attr_prefill.push( {\n\t\t'name': 'username',\n\t\t'value': current_user.first_name + ' ' + current_user.last_name,\n\t\t'hidden': true\n\t} );\n\tLHCChatOptions.attr_prefill.push( {\n\t\t'name': 'email',\n\t\t'value': chat_email_address,\n\t\t'hidden': true\n\t} );\n\tLHCChatOptions.attr_prefill.push( {\n\t\t'name': 'phone',\n\t\t'value': ( current_user.work_phone != '' ? current_user.work_phone : current_user.home_phone ),\n\t\t'hidden': true\n\t} );\n\tLHCChatOptions.attr_prefill.push( { 'name': 'company', 'value': current_company.name, 'hidden': true } );\n\n\tLHCChatOptions.attr_prefill_admin = new Array();\n\tLHCChatOptions.attr_prefill_admin.push( { 'index': '0', 'value': current_company.name, 'hidden': true } );\n\n\tLHCChatOptions.opt = {\n\t\twidget_height: 340,\n\t\twidget_width: 300,\n\t\tpopup_height: 520,\n\t\tpopup_width: 500,\n\t\tdomain: 'timetrex.com'\n\t};\n\n\t//Only make a call to load the chat service JS when the chat button is actually clicked. This should help reduce the chance of JS errors occurring for users who never use the chat.\n\topenSupportChat = function openSupportChat() {\n\t\t( function() {\n\t\t\tvar po = document.createElement( 'script' );\n\t\t\tpo.type = 'text/javascript';\n\t\t\tpo.async = true;\n\t\t\tvar refferer = ( document.referrer ) ? encodeURIComponent( document.referrer.substr( document.referrer.indexOf( '://' ) + 1 ) ) : '';\n\t\t\tvar location = ( document.location ) ? encodeURIComponent( window.location.href.substring( window.location.protocol.length ) ) : '';\n\t\t\tpo.src = 'https://chat.timetrex.com/index.php/chat/getstatus/(click)/internal/(position)/api/(ma)/br/(dot)/true/(units)/pixels/(leaveamessage)/true/(department)/2/(disable_pro_active)/true?r=' + refferer + '&l=' + location + '&ttr=' + new Date().getTime();\n\t\t\tpo.crossOrigin = 'anonymous';\n\t\t\tpo.onload = function() {\n\t\t\t\treturn lh_inst.lh_openchatWindow();\n\t\t\t}; //Wait for script to load before popping up chat box.\n\t\t\tvar s = document.getElementsByTagName( 'script' )[0];\n\t\t\ts.parentNode.insertBefore( po, s );\n\t\t} )();\n\t}\n}\n\nexport { LHCChatOptions, openSupportChat };\n"],"sourceRoot":""}