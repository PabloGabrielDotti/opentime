{"version":3,"sources":["webpack://timetrex/./interface/html5/views/employees/user_preference/UserPreferenceViewController.js"],"names":["UserPreferenceViewController","BaseViewController","options","_","defaults","el","date_format_array","other_date_format_array","js_date_format_array","flex_date_format_array","jquery_date_format_array","time_format_array","js_time_format_array","flex_time_format_array","date_time_format_array","time_unit_format_array","distance_format_array","time_zone_array","location_timezone_array","area_code_timezone_array","timesheet_view_array","start_week_day_array","schedule_icalendar_type_array","language_array","user_group_array","country_array","province_array","e_province_array","user_api","user_group_api","company_api","api_date","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIUserPreference","APITTDate","APIUser","APIUserGroup","APICompany","render","buildContextMenu","initData","exclude","ContextMenuIconName","add","copy","copy_as_new","save_and_copy","save_and_new","delete_icon","delete_and_next","include","$this","initDropDownOption","getUserGroup","onResult","res","getResult","Global","buildTreeRecord","sub_view_mode","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","val","m","getOptions","buildRecordArray","refresh","province_widget","edit_view_ui_dic","length","current_edit_record","province","value","setValue","search_panel","getSelectTabIndex","select_value","getValue","setProvince","change","proxy","selectVal","search_fields","SearchField","label","in_column","field","multiple","basic_search","adv_search","layout_name","api_class","form_item_type","FormItemType","AWESOME_BOX","TEXT_INPUT","tree_mode","APIBranch","APIDepartment","APIUserTitle","COMBO_BOX","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","c_value","onStatusChange","validate","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","id","allow_multiple_selection","navigation_mode","show_search_inputs","setNavigation","form_item_input","widgetContainer","tab_preference","edit_view_tab","find","tab_preference_column1","tab_preference_column2","edit_view_tabs","push","loadWidgetByName","TEXT","TText","addEditFieldToColumn","TComboBox","set_empty","TTextInput","width","default_login_screen_array","CHECKBOX","TCheckbox","SEPARATED_BOX","SeparatedBox","tab_schedule_sync_column1","need_parser_sec","append","is_add","is_viewing","is_mass_editing","LocalCacheData","current_doing_context_action","openEditView","filter","grid_selected_id_array","getGridSelectIdArray","mass_edit_record_ids","each","index","filter_data","key_name","result","result_data","unique_columns","linked_columns","initEditView","schedule_icalendar_type_id","detachElement","attachElement","editFieldResize","widget","isSet","collectUIDataToCurrentEditRecord","setEditViewDataDone","user_name","ServiceCaller","root_url","unbind","click","window","open","text","getProductEdition","css","edit_view","setEditMenu","html","getUpgradeMessage","getSelectedItem","getLoginUser","updateUserPreference","onSaveDone","record","isChecked","getEnabled","validateResult","loadView","loadViewSource","contentContainer"],"mappings":"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","file":"employees-user_preference-UserPreferenceViewController.bundle.js?v=2dcebedf45888e8439bf","sourcesContent":["export class UserPreferenceViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#user_preference_view_container',\n\n\n\n\t\t\tdate_format_array: null,\n\t\t\tother_date_format_array: null,\n\t\t\tjs_date_format_array: null,\n\t\t\tflex_date_format_array: null,\n\t\t\tjquery_date_format_array: null,\n\t\t\ttime_format_array: null,\n\t\t\tjs_time_format_array: null,\n\t\t\tflex_time_format_array: null,\n\t\t\tdate_time_format_array: null,\n\t\t\ttime_unit_format_array: null,\n\t\t\tdistance_format_array: null,\n\t\t\ttime_zone_array: null,\n\t\t\tlocation_timezone_array: null,\n\t\t\tarea_code_timezone_array: null,\n\t\t\ttimesheet_view_array: null,\n\t\t\tstart_week_day_array: null,\n\t\t\tschedule_icalendar_type_array: null,\n\t\t\tlanguage_array: null,\n\t\t\tuser_group_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\te_province_array: null,\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tcompany_api: null,\n\n\t\t\tapi_date: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'UserPreferenceEditView.html';\n\t\tthis.permission_id = 'user_preference';\n\t\tthis.viewId = 'UserPreference';\n\t\tthis.script_name = 'UserPreferenceView';\n\t\tthis.table_name_key = 'user_preference';\n\t\tthis.context_menu_name = $.i18n._( 'Preference' );\n\t\tthis.navigation_label = $.i18n._( 'Employees' ) + ':';\n\t\tthis.api = TTAPI.APIUserPreference;\n\t\tthis.api_date = TTAPI.APITTDate;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.company_api = TTAPI.APICompany;\n\n\t\tthis.render();\n\n\t\tthis.buildContextMenu();\n\n\t\t//call init data in parent view\n\n\t\tthis.initData();\n\n\t\t//this.setSelectRibbonMenuIfNecessary( 'UserContact' )\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [\n\t\t\t\tContextMenuIconName.add,\n\t\t\t\tContextMenuIconName.copy,\n\t\t\t\tContextMenuIconName.copy_as_new,\n\t\t\t\tContextMenuIconName.save_and_copy,\n\t\t\t\tContextMenuIconName.save_and_new,\n\t\t\t\tContextMenuIconName.delete_icon,\n\t\t\t\tContextMenuIconName.delete_and_next\n\t\t\t],\n\t\t\tinclude: []\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tinitOptions() {\n\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'status', '', this.user_api );\n\t\tthis.initDropDownOption( 'country', 'country', this.company_api );\n\t\tthis.initDropDownOption( 'language' );\n\t\tthis.initDropDownOption( 'date_format' );\n\t\tthis.initDropDownOption( 'time_format' );\n\t\tthis.initDropDownOption( 'time_unit_format' );\n\t\tthis.initDropDownOption( 'distance_format' );\n\t\tthis.initDropDownOption( 'time_zone' );\n\t\tthis.initDropDownOption( 'start_week_day' );\n\t\tthis.initDropDownOption( 'schedule_icalendar_type' );\n\t\tthis.initDropDownOption( 'default_login_screen' );\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t$this.user_group_array = res;\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSetSearchFilterFinished() {\n\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'last_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Number' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'employee_number',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( key === 'schedule_icalendar_type_id' ) {\n\n\t\t\tthis.onStatusChange();\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_preference': { 'label': $.i18n._( 'Preference' ) },\n\t\t\t'tab_schedule_sync': {\n\t\t\t\t'label': $.i18n._( 'Schedule Synchronization' ),\n\t\t\t\t'init_callback': 'initSubScheduleSyncView'\n\t\t\t},\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_preference = this.edit_view_tab.find( '#tab_preference' );\n\n\t\tvar tab_preference_column1 = tab_preference.find( '.first-column' );\n\t\tvar tab_preference_column2 = tab_preference.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_preference_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_preference_column2 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t// Employee\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'full_name' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_preference_column1, '' );\n\n\t\t// Language\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'language', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.language_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Language' ), form_item_input, tab_preference_column1 );\n\n\t\t// Date Format\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'date_format', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.date_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Date Format' ), form_item_input, tab_preference_column1 );\n\n\t\t// Time Format\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'time_format', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.time_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time Format' ), form_item_input, tab_preference_column1 );\n\n\t\t// Time Units\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'time_unit_format', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.time_unit_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time Units' ), form_item_input, tab_preference_column1 );\n\n\t\t// Distance Units\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'distance_format', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.distance_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Distance Units' ), form_item_input, tab_preference_column1 );\n\n\t\t// Time Zone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'time_zone', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.time_zone_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time Zone' ), form_item_input, tab_preference_column1 );\n\n\t\t// Start Weeks on\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'start_week_day' } );\n\t\tform_item_input.setSourceData( $this.start_week_day_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Calendar Starts On' ), form_item_input, tab_preference_column1 );\n\n\t\t// Rows per page\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'items_per_page', width: 50 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Rows per page' ), form_item_input, tab_preference_column1 );\n\n\t\t// Default Login Screen\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'default_login_screen' } );\n\t\tform_item_input.setSourceData( $this.default_login_screen_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Default Screen' ), form_item_input, tab_preference_column1 );\n\n\t\t// Save TimeSheet State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_save_timesheet_state' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Save TimeSheet State' ), form_item_input, tab_preference_column1 );\n\n\t\t// Automatically Show Context Menu\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_auto_context_menu' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Automatically Show Context Menu' ), form_item_input, tab_preference_column1, '' );\n\n\t\t// Email Notifications\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Email Notifications' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_preference_column2 );\n\n\t\t// Exceptions\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_exception' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Exceptions' ), form_item_input, tab_preference_column2 );\n\n\t\t// Messages\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_message' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Messages' ), form_item_input, tab_preference_column2 );\n\n\t\t// Pay Stubs\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_pay_stub' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Stubs' ), form_item_input, tab_preference_column2, '' );\n\n\t\t// Send Notifications to Home Email\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_home' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Send Notifications to Home Email' ), form_item_input, tab_preference_column2, '' );\n\n\t\t//Tab 1 start\n\n\t\tvar tab_schedule_sync = this.edit_view_tab.find( '#tab_schedule_sync' );\n\n\t\tvar tab_schedule_sync_column1 = tab_schedule_sync.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[1] = [];\n\n\t\tthis.edit_view_tabs[1].push( tab_schedule_sync_column1 );\n\n\t\t//// schedule icalendar type\n\t\t//form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\t//form_item_input.TComboBox( {field: 'schedule_icalendar_type_id' } );\n\t\t//form_item_input.setSourceData( $this.schedule_icalendar_type_array );\n\t\t//this.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_schedule_sync_column1, 'first-last' );\n\t\t//\n\t\t//// Calendar URL\n\t\t//form_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t//form_item_input.TText( {field: 'calendar_url' } );\n\t\t//form_item_input.addClass( 'link' );\n\t\t//this.addEditFieldToColumn( $.i18n._( 'Calendar URL' ), form_item_input, tab_schedule_sync_column1, '', null, true );\n\n\t\t// Shifts Scheduled to Work\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Shifts Scheduled to Work' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_schedule_sync_column1, '', null, true, false, 'shifts_scheduled_to_work' );\n\n\t\t// Alarm 1\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm1_working', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 1' ), form_item_input, tab_schedule_sync_column1, '', widgetContainer, true );\n\n\t\t// Alarm 2\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm2_working', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 2' ), form_item_input, tab_schedule_sync_column1, '', widgetContainer, true );\n\n\t\t// Shifts Scheduled Absent\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Shifts Scheduled Absent' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_schedule_sync_column1, '', null, true, false, 'shifts_scheduled_absent' );\n\n\t\t// Alarm 1\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm1_absence', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 1' ), form_item_input, tab_schedule_sync_column1, '', widgetContainer, true );\n\n\t\t// Alarm 2\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm2_absence', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 2' ), form_item_input, tab_schedule_sync_column1, '', widgetContainer, true );\n\n\t\t// Modified Shifts\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Modified Shifts' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_schedule_sync_column1, '', null, true, false, 'modified_shifts' );\n\n\t\t// Alarm 1\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm1_modified', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 1' ), form_item_input, tab_schedule_sync_column1, '', widgetContainer, true );\n\n\t\t// Alarm 2\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm2_modified', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 2' ), form_item_input, tab_schedule_sync_column1, '', widgetContainer, true );\n\t}\n\n\tonMassEditClick() {\n\n\t\tvar $this = this;\n\t\t$this.is_add = false;\n\t\t$this.is_viewing = false;\n\t\t$this.is_mass_editing = true;\n\t\tLocalCacheData.current_doing_context_action = 'mass_edit';\n\t\t$this.openEditView();\n\t\tvar filter = {};\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tthis.mass_edit_record_ids = [];\n\n\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t$this.mass_edit_record_ids.push( value );\n\t\t} );\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.mass_edit_record_ids;\n\n\t\tthis.api['getCommon' + this.api.key_name + 'Data']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\t$this.unique_columns = [];\n\t\t\t\t$this.linked_columns = [];\n\n\t\t\t\t$this.current_edit_record = result_data;\n\t\t\t\t$this.initEditView();\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonStatusChange() {\n\n\t\tif ( this.current_edit_record.schedule_icalendar_type_id == 0 ) {\n\t\t\t//this.edit_view_form_item_dic['calendar_url'].css( 'display', 'none' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm1_working' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm2_working' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm1_absence' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm2_absence' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm1_modified' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm2_modified' );\n\t\t\tthis.detachElement( 'shifts_scheduled_to_work' );\n\t\t\tthis.detachElement( 'shifts_scheduled_absent' );\n\t\t\tthis.detachElement( 'modified_shifts' );\n\n\t\t} else {\n\t\t\t//this.setCalendarURL();\n\t\t\t//this.edit_view_form_item_dic['calendar_url'].css( 'display', 'block' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm1_working' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm2_working' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm1_absence' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm2_absence' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm1_modified' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm2_modified' );\n\t\t\tthis.attachElement( 'shifts_scheduled_to_work' );\n\t\t\tthis.attachElement( 'shifts_scheduled_absent' );\n\t\t\tthis.attachElement( 'modified_shifts' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'full_name':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record['first_name'] + ' ' + this.current_edit_record['last_name'] );\n\t\t\t\t\t\tbreak;\n//\t\t\t\t\tcase 'schedule_icalendar_alarm1_working':\n//\t\t\t\t\tcase 'schedule_icalendar_alarm2_working':\n//\t\t\t\t\tcase 'schedule_icalendar_alarm1_absence':\n//\t\t\t\t\tcase 'schedule_icalendar_alarm2_absence':\n//\t\t\t\t\tcase 'schedule_icalendar_alarm1_modified':\n//\t\t\t\t\tcase 'schedule_icalendar_alarm2_modified':\n//\t\t\t\t\t\tvar result = Global.getTimeUnit( this.current_edit_record[key] )\n//\t\t\t\t\t\twidget.setValue( result );\n//\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.onStatusChange();\n\t}\n\n\tsetCalendarURL( widget ) {\n\n\t\tif ( !Global.isSet( widget ) ) {\n\t\t\twidget = this.edit_view_ui_dic['calendar_url'];\n\t\t}\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\twidget.setValue( 'Not available when mass editing' );\n\t\t\treturn;\n\t\t}\n\n\t\tthis.api['getScheduleIcalendarURL']( this.current_edit_record.user_name, this.current_edit_record.schedule_icalendar_type_id, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\twidget.setValue( ServiceCaller.root_url + result_data, true );\n\n\t\t\t\twidget.unbind( 'click' ); // First unbind all click events, otherwise, when we change the schedule icalendar type this will trigger several times click events.\n\n\t\t\t\twidget.click( function() {\n\t\t\t\t\twindow.open( widget.text() );\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitSubScheduleSyncView() {\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tthis.edit_view_tab.find( '#tab_schedule_sync' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\tthis.buildContextMenu( true );\n\t\t\tthis.setEditMenu();\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_schedule_sync' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t}\n\t}\n\n\tonSaveDone( result ) {\n\t\t// #2224 - Don't use current_edit_record here, use getSelectedItem() instead, or it causes:\n\t\t// Uncaught Error From: UserPreferenceView Error: Unable to get property 'id' of undefined or null reference\n\t\tvar user_id = this.getSelectedItem().id;\n\n\t\tif ( user_id === LocalCacheData.getLoginUser().id ) {\n\t\t\tGlobal.updateUserPreference();\n\t\t}\n\t}\n\n\tonSaveAndContinueDone( result ) {\n\t\tthis.onSaveDone( result );\n\t}\n\n\tonSaveAndNextDone( result ) {\n\t\tthis.onSaveDone( result );\n\t}\n\n\tvalidate() {\n\t\tvar $this = this;\n\n\t\tvar record = {};\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( this.mass_edit_record_ids.length > 0 ) {\n\t\t\t\trecord.id = this.mass_edit_record_ids[0];\n\t\t\t}\n\t\t} else {\n\t\t\trecord = this.current_edit_record;\n\t\t}\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\t$this.validateResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n}\n\nUserPreferenceViewController.loadView = function() {\n\tGlobal.loadViewSource( 'UserPreference', 'UserPreferenceView.html', function( result ) {\n\t\tvar args = {};\n\t\t//var template = _.template( result, args );\n\n\t\tGlobal.contentContainer().html( result );\n\t} );\n};"],"sourceRoot":""}