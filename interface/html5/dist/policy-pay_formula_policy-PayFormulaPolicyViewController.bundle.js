(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["policy-pay_formula_policy-PayFormulaPolicyViewController"],{5787:(e,i,t)=>{"use strict";t.r(i),t.d(i,{"PayFormulaPolicyViewController":()=>a});class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#pay_formula_policy_view_container",type_array:null,pay_type_array:null,wage_source_type_array:null}),super(e)}init(e){this.edit_view_tpl="PayFormulaPolicyEditView.html",this.permission_id="pay_formula_policy",this.viewId="PayFormulaPolicy",this.script_name="PayFormulaPolicyView",this.table_name_key="pay_formula_policy",this.context_menu_name=$.i18n._("Pay Formula Policy"),this.navigation_label=$.i18n._("Pay Formula Policy")+":",this.api=TTAPI.APIPayFormulaPolicy,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary("PayFormulaPolicy")}initOptions(){this.initDropDownOption("pay_type"),this.initDropDownOption("wage_source_type")}buildEditViewUI(){super.buildEditViewUI();var e={"tab_pay_formula_policy":{"label":$.i18n._("Pay Formula Policy")},"tab_audit":!0};this.setTabModel(e),this.navigation.AComboBox({api_class:TTAPI.APIPayFormulaPolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_pay_code",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i,t,a,_=this.edit_view_tab.find("#tab_pay_formula_policy").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(_),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),i,_,""),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),i,_,"",null,null,!0),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"pay_type_id",set_empty:!1}),i.setSourceData(this.pay_type_array),this.addEditFieldToColumn($.i18n._("Pay Type"),i,_),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"wage_source_type_id",set_empty:!1}),i.setSourceData(this.wage_source_type_array),this.addEditFieldToColumn($.i18n._("Wage Source"),i,_,"",null,!0),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIContributingShiftPolicy,allow_multiple_selection:!1,layout_name:"global_contributing_shift_policy",show_search_inputs:!0,set_empty:!0,field:"wage_source_contributing_shift_policy_id"}),this.addEditFieldToColumn($.i18n._("Wage Source Contributing Shift Policy"),i,_,"",null,!0),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIContributingShiftPolicy,allow_multiple_selection:!1,layout_name:"global_contributing_shift_policy",show_search_inputs:!0,set_empty:!0,field:"time_source_contributing_shift_policy_id"}),this.addEditFieldToColumn($.i18n._("Time Source Contributing Shift Policy"),i,_,"",null,!0),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"rate",width:65}),t=$("<div class='widget-h-box'></div>"),a=$("<span class='widget-right-label'> ("+$.i18n._("ie")+": "+$.i18n._("1.5 for time and a half")+")</span>"),t.append(i),t.append(a),this.addEditFieldToColumn($.i18n._("Rate"),i,_,"",t,!0),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIWageGroup,allow_multiple_selection:!1,layout_name:"global_wage_group",show_search_inputs:!0,set_default:!0,field:"wage_group_id"}),this.addEditFieldToColumn($.i18n._("Wage Group"),i,_,"",null,!0),(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIAccrualPolicyAccount,allow_multiple_selection:!1,layout_name:"global_accrual_policy_account",show_search_inputs:!0,set_empty:!0,field:"accrual_policy_account_id"}),this.addEditFieldToColumn($.i18n._("Accrual Account"),i,_,""),(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"accrual_rate",width:100}),this.addEditFieldToColumn($.i18n._("Accrual Rate"),i,_,"",null,!0)}setCurrentEditRecordData(){for(var e in this.setDefaultData({"pay_type_id":10,"wage_source_type_id":10}),this.current_edit_record)if(this.current_edit_record.hasOwnProperty(e)){var i=this.edit_view_ui_dic[e];Global.isSet(i)&&i.setValue(this.current_edit_record[e])}this.collectUIDataToCurrentEditRecord(),this.onPayTypeChange(),this.onWageSourceTypeChange(),this.onAccrualAccountChange(),this.setEditViewDataDone()}onPayTypeChange(){10==this.current_edit_record.pay_type_id?(this.edit_view_form_item_dic.rate.find(".edit-view-form-item-label").text($.i18n._("Rate")+": "),this.edit_view_form_item_dic.rate.find(".widget-right-label").text("("+$.i18n._("ie")+": "+$.i18n._("1.5 for time and a half")+")"),this.attachElement("wage_group_id"),this.attachElement("wage_source_type_id")):30==this.current_edit_record.pay_type_id||34==this.current_edit_record.pay_type_id||40==this.current_edit_record.pay_type_id?(this.edit_view_form_item_dic.rate.find(".edit-view-form-item-label").text($.i18n._("Hourly Rate")+": "),this.edit_view_form_item_dic.rate.find(".widget-right-label").text("("+$.i18n._("ie")+": "+$.i18n._("10.00/hr")+")"),this.attachElement("wage_group_id"),this.attachElement("wage_source_type_id")):50==this.current_edit_record.pay_type_id?(this.edit_view_form_item_dic.rate.find(".edit-view-form-item-label").text($.i18n._("Premium")+": "),this.edit_view_form_item_dic.rate.find(".widget-right-label").text("("+$.i18n._("ie")+": "+$.i18n._("0.75 for 75 cent/hr")+")"),this.attachElement("wage_group_id"),this.attachElement("wage_source_type_id")):32==this.current_edit_record.pay_type_id?(this.edit_view_form_item_dic.rate.find(".edit-view-form-item-label").text($.i18n._("Hourly Rate")+": "),this.edit_view_form_item_dic.rate.find(".widget-right-label").text("("+$.i18n._("ie")+": "+$.i18n._("10.00/hr")+")"),this.detachElement("wage_group_id"),this.detachElement("wage_source_contributing_shift_policy_id"),this.detachElement("time_source_contributing_shift_policy_id"),this.detachElement("wage_source_type_id")):42==this.current_edit_record.pay_type_id&&(this.edit_view_form_item_dic.rate.find(".edit-view-form-item-label").text($.i18n._("Hourly Rate")+": "),this.edit_view_form_item_dic.rate.find(".widget-right-label").text("("+$.i18n._("ie")+": "+$.i18n._("10.00/hr")+")"),this.attachElement("wage_group_id"),this.attachElement("wage_source_type_id")),this.editFieldResize()}onAccrualAccountChange(){!1===this.current_edit_record.accrual_policy_account_id||void 0===this.current_edit_record.accrual_policy_account_id||this.current_edit_record.accrual_policy_account_id==TTUUID.zero_id?this.detachElement("accrual_rate"):this.attachElement("accrual_rate"),this.editFieldResize()}onWageSourceTypeChange(){10==this.current_edit_record.wage_source_type_id?(this.detachElement("wage_source_contributing_shift_policy_id"),this.detachElement("time_source_contributing_shift_policy_id"),32==this.current_edit_record.pay_type_id?this.detachElement("wage_group_id"):this.attachElement("wage_group_id")):20==this.current_edit_record.wage_source_type_id?(this.detachElement("wage_source_contributing_shift_policy_id"),this.detachElement("time_source_contributing_shift_policy_id"),this.detachElement("wage_group_id")):30==this.current_edit_record.wage_source_type_id&&("block"===this.edit_view_form_item_dic.wage_source_type_id.css("display")&&(this.attachElement("wage_source_contributing_shift_policy_id"),this.attachElement("time_source_contributing_shift_policy_id")),this.detachElement("wage_group_id")),this.editFieldResize()}onFormItemChange(e){this.is_changed=!0,this.setMassEditingFieldsWhenFormChange(e);var i=e.getField(),t=e.getValue();this.current_edit_record[i]=t,"pay_type_id"===i&&this.onPayTypeChange(),"wage_source_type_id"===i&&this.onWageSourceTypeChange(),"accrual_policy_account_id"===i&&this.onAccrualAccountChange(),this.validate()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Pay Type"),in_column:1,field:"pay_type_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Deposit to Accrual Policy"),in_column:1,field:"accrual_policy_account_id",layout_name:"global_accrual_policy_account",api_class:TTAPI.APIAccrualPolicyAccount,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}}}]);
//# sourceMappingURL=policy-pay_formula_policy-PayFormulaPolicyViewController.bundle.js.map?v=1062ca76c432c8c65dda