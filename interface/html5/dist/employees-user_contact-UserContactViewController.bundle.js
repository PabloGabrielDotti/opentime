(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["employees-user_contact-UserContactViewController"],{6738:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"UserContactViewController":()=>a});class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#user_contact_view_container",user_api:null,company_api:null,ethnic_group_api:null,status_array:null,type_array:null,sex_array:null,country_array:null,province_array:null,e_province_array:null}),super(e)}init(e){this.edit_view_tpl="UserContactEditView.html",this.permission_id="user_contact",this.viewId="UserContact",this.script_name="UserContactView",this.table_name_key="user_contact",this.context_menu_name=$.i18n._("Employee Contacts"),this.navigation_label=$.i18n._("Employee Contact")+":",this.api=TTAPI.APIUserContact,this.user_api=TTAPI.APIUser,this.company_api=TTAPI.APICompany,this.ethnic_group_api=TTAPI.APIEthnicGroup,this.document_object_type_id=115,this.render(),this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.sub_view_mode||this.initData()}getCustomContextMenuModel(){return{exclude:[ContextMenuIconName.copy],include:[]}}initOptions(){this.initDropDownOption("status"),this.initDropDownOption("type"),this.initDropDownOption("sex"),this.initDropDownOption("country","country",this.company_api)}onFormItemChange(e,t){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var i=e.getField();switch(i){case"country":this.edit_view_ui_dic.province.setValue(null)}this.current_edit_record[i]=e.getValue(),"country"!==i?t||this.validate():this.onCountryChange()}setSelectLayout(){this.sub_view_mode?super.setSelectLayout(["employee_first_name","employee_last_name","title","user_group","default_branch","default_department"]):super.setSelectLayout()}buildEditViewUI(){super.buildEditViewUI();var e=this,t={"tab_employee_contact":{"label":$.i18n._("Employee Contact")},"tab_attachment":!0,"tab_audit":!0};this.setTabModel(t),this.navigation.AComboBox({api_class:TTAPI.APIUserContact,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_user_contact",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_employee_contact"),a=i.find(".first-column"),o=i.find(".second-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(a),this.edit_view_tabs[0].push(o);var l=Global.loadWidgetByName(FormItemType.AWESOME_BOX);l.AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!1,layout_name:"global_user",field:"user_id",set_empty:!0,show_search_inputs:!0});var n={permission_section:"user_contact"};l.setDefaultArgs(n),this.addEditFieldToColumn($.i18n._("Employee"),l,a,""),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"status_id"}),l.setSourceData(e.status_array),this.addEditFieldToColumn($.i18n._("Status"),l,a),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"type_id"}),l.setSourceData(e.type_array),this.addEditFieldToColumn($.i18n._("Type"),l,a),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"first_name",width:200}),this.addEditFieldToColumn($.i18n._("First Name"),l,a),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"middle_name",width:200}),this.addEditFieldToColumn($.i18n._("Middle Name"),l,a),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"last_name",width:200}),this.addEditFieldToColumn($.i18n._("Last Name"),l,a),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"sex_id"}),l.setSourceData(e.sex_array),this.addEditFieldToColumn($.i18n._("Gender"),l,a),(l=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIEthnicGroup,field:"ethnic_group_id",set_empty:!0,allow_multiple_selection:!1,layout_name:"global_ethnic_group",show_search_inputs:!0}),this.addEditFieldToColumn($.i18n._("Ethnicity"),l,a),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address1",width:200}),this.addEditFieldToColumn($.i18n._("Home Address (Line 1)"),l,a),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address2",width:200}),this.addEditFieldToColumn($.i18n._("Home Address (Line 2)"),l,a),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"city",width:200}),this.addEditFieldToColumn($.i18n._("City"),l,a),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"country"}),l.setSourceData(e.country_array),this.addEditFieldToColumn($.i18n._("Country"),l,a),(l=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"province"}),l.setSourceData([]),this.addEditFieldToColumn($.i18n._("Province/State"),l,a),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"postal_code",width:90}),this.addEditFieldToColumn($.i18n._("Postal/ZIP Code"),l,a,""),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"work_phone",width:200}),this.addEditFieldToColumn($.i18n._("Work Phone"),l,o,""),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"work_phone_ext",width:90}),this.addEditFieldToColumn($.i18n._("Work Phone Ext"),l,o),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"home_phone",width:200}),this.addEditFieldToColumn($.i18n._("Home Phone"),l,o),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"mobile_phone",width:200}),this.addEditFieldToColumn($.i18n._("Mobile Phone"),l,o),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"fax_phone",width:200}),this.addEditFieldToColumn($.i18n._("Fax"),l,o),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"work_email",width:200}),this.addEditFieldToColumn($.i18n._("Work Email"),l,o),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"home_email",width:200}),this.addEditFieldToColumn($.i18n._("Home Email"),l,o),(l=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"birth_date"}),this.addEditFieldToColumn($.i18n._("Birth Date"),l,o),(l=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"sin",width:200}),this.addEditFieldToColumn($.i18n._("SIN / SSN"),l,o),(l=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"note"}),this.addEditFieldToColumn($.i18n._("Note"),l,o,"",null,null,!0),(l=Global.loadWidgetByName(FormItemType.TAG_INPUT)).TTagInput({field:"tag",object_type_id:230}),this.addEditFieldToColumn($.i18n._("Tags"),l,o,"",null,null,!0)}buildSearchFields(){var e={permission_section:"user_contact"};this.search_fields=[new SearchField({label:$.i18n._("Employee"),in_column:1,default_args:e,field:"user_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_user",api_class:TTAPI.APIUser,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("First Name"),in_column:1,field:"first_name",basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Last Name"),in_column:1,field:"last_name",basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Phone"),in_column:1,field:"any_phone",basic_search:!1,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Email"),field:"any_email",basic_search:!1,adv_search:!0,in_column:1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Status"),in_column:2,field:"status_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Type"),in_column:2,field:"type_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Gender"),in_column:2,field:"sex_id",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Tags"),in_column:2,field:"tag",basic_search:!0,adv_search:!0,object_type_id:230,form_item_type:FormItemType.TAG_INPUT}),new SearchField({label:$.i18n._("Country"),in_column:3,field:"country",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.COMBO_BOX}),new SearchField({label:$.i18n._("Province/State"),in_column:3,field:"province",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("City"),in_column:3,field:"city",basic_search:!1,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("SIN/SSN"),in_column:3,field:"sin",basic_search:!1,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT})]}setProvince(e,t){var i=this;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),i.province_array=Global.buildRecordArray(e),i.adv_search_field_ui_dic.province.setSourceData(i.province_array)}}):(i.province_array=[],this.adv_search_field_ui_dic.province.setSourceData([]))}eSetProvince(e,t){var i=this,a=i.edit_view_ui_dic.province;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),i.e_province_array=Global.buildRecordArray(e),t&&i.e_province_array.length>0&&(i.current_edit_record.province=i.e_province_array[0].value,a.setValue(i.current_edit_record.province)),a.setSourceData(i.e_province_array)}}):(i.e_province_array=[],a.setSourceData([]))}onSetSearchFilterFinished(){if(1===this.search_panel.getSelectTabIndex()){var e=this.adv_search_field_ui_dic.country.getValue();this.setProvince(e)}}onBuildAdvUIFinished(){this.adv_search_field_ui_dic.country.change($.proxy((function(){var e=this.adv_search_field_ui_dic.country.getValue();this.setProvince(e),this.adv_search_field_ui_dic.province.setValue(null)}),this))}searchDone(){super.searchDone(),TTPromise.resolve("ContactView","init")}}a.loadSubView=function(e,t,i){Global.loadViewSource("UserContact","SubUserContactView.html",(function(a){var o=_.template(a);Global.isSet(t)&&t(),Global.isSet(e)&&(e.html(o({})),Global.isSet(i)&&i(sub_user_contact_view_controller))}))}}}]);
//# sourceMappingURL=employees-user_contact-UserContactViewController.bundle.js.map?v=97188d908c37dc124b74