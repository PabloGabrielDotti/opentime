(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["invoice-area_policy-AreaPolicyViewController"],{8477:(e,i,t)=>{"use strict";t.r(i),t.d(i,{"AreaPolicyViewController":()=>a});class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#area_policy_view_container",status_array:null,country_array:null,district_array:null,province_array:null,company_api:null}),super(e)}init(e){this.edit_view_tpl="AreaPolicyEditView.html",this.permission_id="area_policy",this.viewId="AreaPolicy",this.script_name="AreaPolicyView",this.table_name_key="area_policy",this.context_menu_name=$.i18n._("Area Policy"),this.navigation_label=$.i18n._("Area")+":",this.api=TTAPI.APIAreaPolicy,this.company_api=TTAPI.APICompany,this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary()}onFormItemChange(e,i){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var t=e.getField(),a=e.getValue();switch(t){case"country":if(a.toString()===this.current_edit_record[t].toString())break;var r=this.edit_view_ui_dic.province,l=this.edit_view_ui_dic.district;r.setValue(null),l.setValue(null),this.current_edit_record.province=!1,this.current_edit_record.district=!1;var o=this.edit_view_ui_dic.province.getValue();this.eSetProvince(a),this.setDistrict(a,o);break;case"province":if(a.toString()===this.current_edit_record[t].toString())break;(r=this.edit_view_ui_dic.district).setValue(null);var s=this.edit_view_ui_dic.country.getValue();this.setDistrict(s,a)}this.current_edit_record[t]=a,"country"!==t&&this.validate()}initOptions(){this.initDropDownOption("country",null,this.company_api)}setDistrict(e,i){var t=this,a=t.edit_view_ui_dic.district;Global.isSet(e)&&"-1"!==e&&"0"!==e&&Global.isSet(i)&&"-1"!==i&&"0"!==i?this.api.getDistrictOptions(e,i,{onResult:function(e){e=e.getResult(),t.district_array=Global.buildRecordArray(e),a.setSourceData(t.district_array)}}):(t.district_array=[],a.setSourceData([]))}eSetProvince(e,i){var t=this,a=t.edit_view_ui_dic.province;e&&"-1"!==e&&"0"!==e?this.api.getProvinceOptions(e,{onResult:function(e){(e=e.getResult())||(e=[]),t.province_array=Global.buildRecordArray(e),a.setSourceData(t.province_array)}}):(t.e_province_array=[],a.setSourceData([]))}setCurrentEditRecordData(){for(var e in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(e)){this.edit_view_ui_dic.province.setSourceData(null),this.edit_view_ui_dic.district.setSourceData(null);var i=this.edit_view_ui_dic[e];if(Global.isSet(i))switch(e){case"country":this.setCountryValue(i,e);break;case"province":this.setDistrict(this.current_edit_record.country,this.current_edit_record[e]),i.setValue(this.current_edit_record[e]);break;case"":default:i.setValue(this.current_edit_record[e])}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}buildEditViewUI(){super.buildEditViewUI();var e={"tab_area":{"label":$.i18n._("Area")},"tab_audit":!0};this.setTabModel(e),this.navigation.AComboBox({api_class:TTAPI.APIAreaPolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_area_policy",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_area").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var t=Global.loadWidgetByName(FormItemType.TEXT_INPUT);t.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),t,i,""),t.parent().width("45%"),(t=(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"country",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"})).setSourceData(this.country_array),this.addEditFieldToColumn($.i18n._("Country"),t,i,""),t=(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"province",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),this.addEditFieldToColumn($.i18n._("Province"),t,i,""),t=(t=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"district",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),this.addEditFieldToColumn($.i18n._("District"),t,i,"")}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}}}]);
//# sourceMappingURL=invoice-area_policy-AreaPolicyViewController.bundle.js.map?v=3258f2fd7f8610ddc8a7