{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/filebrowser/TImage.js","webpack://timetrex/./interface/html5/views/attendance/punches/PunchesViewController.js"],"names":["$","fn","TImage","options","Global","addCss","field","opts","extend","defaults","this","clearErrorStyle","getField","getValue","setValue","val","d","Date","attr","getTime","each","o","meta","data","document","on","e","$this_image_widget","target","parents","height","top","file_browser_overlay","css","append","parent","find","TAlertManager","showConfirmAlert","i18n","_","flag","type","message","time","trigger","off","remove","jQuery","PunchesViewController","BaseViewController","el","old_type_status","user_api","user_group_api","api_station","type_array","actual_time_label","is_mass_adding","super","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","navigation_label","api","TTAPI","APIPunch","APIUser","APIUserGroup","getProductEdition","job_api","APIJob","job_item_api","APIJobItem","APIStation","initPermission","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","p_id","PermissionManager","validate","jobUIValidate","show_job_ui","jobItemUIValidate","show_job_item_ui","branchUIValidate","show_branch_ui","departmentUIValidate","show_department_ui","goodQuantityUIValidate","show_good_quantity_ui","badQuantityUIValidate","show_bad_quantity_ui","transferUIValidate","show_transfer_ui","noteUIValidate","show_note_ui","locationUIValidate","show_location_ui","stationValidate","show_station_ui","$this","initDropDownOption","getUserGroup","onResult","res","getResult","buildTreeRecord","user_group_array","basic_search_field_ui_dic","setSourceData","adv_search_field_ui_dic","setStation","arg","filter_data","id","current_edit_record","station_id","getStation","result","station","widget","edit_view_ui_dic","description","records","hasOwnProperty","time_stamp","buildEditViewUI","form_item_input","widgetContainer","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","tab_punch_column1","edit_view_tab","edit_view_tabs","push","loadWidgetByName","FormItemType","AWESOME_BOX","set_empty","default_args","setDefaultArgs","addEditFieldToColumn","TIME_PICKER","TTimePicker","validation_field","DATE_PICKER","TDatePicker","TRangePicker","CHECKBOX","TCheckbox","is_add","detachElement","COMBO_BOX","TComboBox","check_box","label","is_viewing","status_array","APIBranch","addition_source_function","source_data","onSourceDataCreate","added_items","value","TTUUID","not_exist_id","default_item","APIDepartment","setRealValueCallBack","job_coder","manual_id","TEXT_INPUT","TTextInput","disable_keyup_event","addClass","job_item_coder","good","width","good_label","bad","bad_label","hide","TEXT_AREA","TTextArea","latitude","TEXT","TText","longitude","accuracy","map_icon","location_wrapper","click","onMapClick","is_edit","IndexViewController","openEditView","IMAGE","is_mass_editing","display_columns","getDisplayColumns","first_item","second_item","index","content","name","unshift","did_clean_dic","key","edit_view_form_item_dic","column","tab_id","hasClass","zero_id","attachElement","isSet","setEnabled","initial_load","is_transfer","type_id_widget","status_id_widget","type_id","status_id","original_note","note","new_note","record","isChecked","getEnabled","mass_edit_record_ids","uniformVariable","buildMassAddRecord","key_name","validateResult","changed_fields","mass_records","common_record","clone","dates_array","punch_dates","indexOf","parserDatesRange","i","length","punch_date","user_id","isArray","j","final_record","date","dates","split","resultArray","beginDate","strToDate","endDate","nextDate","format","setDate","getDate","date_array","setCountryValue","args","job_id","ServiceCaller","getURLByObjectType","actual_time_value","actual_time_stamp","text","collectUIDataToCurrentEditRecord","setLocationValue","setEditViewDataDone","isEditChange","location_data","position_accuracy","show","setTabOVisibility","setAllowMultipleSelection","TTPromise","resolve","sub_log_view_controller","getSubViewFilter","filter","parent_edit_record","punch_control_id","insertBefore","result_data","company","LocalCacheData","current_company","sub_view_mode","parent_key","parent_value","initEditView","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIPayPeriod","permission_section","tree_mode","APIUserTitle","context_menu_model","exclude","ContextMenuIconName","copy","include","timesheet","group","icon","Icons","edit_employee","employee","map","import_icon","sort_order","ProgressBar","showProgressBar","filter_columns","punch_time","punches","map_options","single_marker_draggable","ids","getGridSelectIdArray","convertLayoutFilterToAPIFilter","select_layout","first_name","last_name","date_stamp","status","branch","branch_id","department","department_id","job_manual_id","job","job_item_manual_id","job_item","job_item_id","total_time","getPunch","async","then","module","processed_punches_for_map","TTConvertMapData","processPunchesFromViewController","catch","importErrorHandler","onNavigationClick","onImportClick","openWizard","search","doNotSetFocus","context_menu_array","selectContextMenu","setTotalDisplaySpan","len","grid_selected_length","context_btn","removeClass","add","setDefaultMenuAddIcon","edit","setDefaultMenuEditIcon","view","setDefaultMenuViewIcon","mass_edit","setDefaultMenuMassEditIcon","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","cancel","setDefaultMenuCancelIcon","export_excel","setDefaultMenuExportIcon","setDefaultMenuMapIcon","setContextMenuGroupVisibility","setEditMenuSaveIcon","setEditMenuAddIcon","setEditMenuEditIcon","setEditMenuViewIcon","setEditMenuMassEditIcon","setEditMenuCopyIcon","setEditMenuDeleteIcon","setEditMenuDeleteAndNextIcon","setEditMenuSaveAndContinueIcon","setEditMenuSaveAndAddIcon","setEditMenuSaveAndNextIcon","setEditMenuSaveAndCopyIcon","setEditMenuCopyAndAddIcon","setEditMenuNavViewIcon","setEditMenuNavEditIcon","iconName","temp_filter","grid_selected_id_array","base_date","addViewTab","window","location","href","goToView","selectedId","pId","saveAndContinueValidate","isMassDateOrMassUser","setCurrentEditViewState","current_doing_context_action","edit_view","copyAsNewResetIds","setEditMenu","setTabStatus","is_changed","closeOverlay","_continueDoCopyAsNew","ignoreWarning","clearNavigationData","onSaveAndCopyResult","onSaveAndNewResult","unique_columns","result1","linked_columns","onSaveAndContinueResult","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","c_value","onTransferChanged","setJobItemValueWhenJobChanged","setCheckBox","onJobQuickSearch","dataset","successCallback","savePunchPosition","moved_unsaved_markers","Debug","Text","full_item","getLoginUser","column_filter","enable_system_columns","undefined","_getFilterColumnsFromDisplayColumns"],"mappings":"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","file":"attendance-punches-PunchesViewController.bundle.js?v=8905607cec8cd27c59d0","sourcesContent":["( function( $ ) {\n\n\t$.fn.TImage = function( options ) {\n\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImage.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\tif ( !val ) {\n\t\t\t\tthis.attr( 'src', '' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar d = new Date();\n\t\t\tthis.attr( 'src', val + '&t=' + d.getTime() );\n\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImage.defaults = {};\n\n\t$( document ).on( 'mouseover', '.file-browser img', function( e ) {\n\t\tvar $this_image_widget = $( e.target ).parents( '.file-browser' );\n\n\t\tif ( !$( '.file_browser_overlay' )[0] && $( e.target ).attr( 'enable-delete' ) == 1 ) {\n\t\t\tvar height = $( e.target ).height();\n\t\t\tvar top = ( height - 32 ) / 2;\n\t\t\tvar left = top;\n\n\t\t\tvar file_browser_overlay = $( '<div class=\"file_browser_overlay\"><img src=\"theme/default/images/delete-512.png\" style=\"position:absolute;width:32px;height:32px;top:' + top + 'px;left:' + left + 'px;\"></div>' );\n\t\t\tfile_browser_overlay.css( 'position', 'absolute' );\n\t\t\tfile_browser_overlay.css( 'top', '0px' );\n\t\t\tfile_browser_overlay.css( 'left', '0' );\n\t\t\tfile_browser_overlay.css( 'cursor', 'pointer' );\n\t\t\tfile_browser_overlay.css( 'height', height + 'px' );\n\t\t\tfile_browser_overlay.css( 'width', '100%' );\n\t\t\tfile_browser_overlay.css( 'background', 'rgba(255,255,255,0.85)' );\n\n\t\t\t$( e.target ).parents( '.file-browser' ).append( file_browser_overlay );\n\n\t\t\t$( document ).on( 'click', '.file_browser_overlay', function( e ) {\n\t\t\t\tvar img_src = $( e.target ).parent().find( 'img' ).attr( 'src' );\n\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'This will permanently delete the image. Are you sure?' ), '', function( flag ) {\n\t\t\t\t\tif ( flag ) {\n\t\t\t\t\t\tvar e = { type: 'deleteClick', message: 'Delete image clicked.', time: new Date() };\n\t\t\t\t\t\t$this_image_widget.trigger( e );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t$( document ).on( 'mouseleave', '.file-browser', function() {\n\t\t\t\t$( document ).off( 'click', '.file_browser_overlay' );\n\t\t\t\tif ( $( '.file_browser_overlay' )[0] ) {\n\t\t\t\t\tvar file_browser_overlay = $( this ).find( '.file_browser_overlay' );\n\t\t\t\t\tfile_browser_overlay.off().remove();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\n} )( jQuery );","import '@/global/widgets/filebrowser/TImage';\n\nexport class PunchesViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#punches_view_container',\n\n\t\t\t// _required_files: {\n\t\t\t// \t10: ['TImage'],\n\t\t\t// \t15: ['leaflet-timetrex']\n\t\t\t// },\n\t\t\t// TODO: breakdown leaflet-timetrex so only the convert functions are needed in ViewControllers.\n\n\t\t\told_type_status: {},\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tapi_station: null,\n\t\t\ttype_array: null,\n\n\t\t\tactual_time_label: null,\n\n\t\t\tis_mass_adding: false\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PunchesEditView.html';\n\t\tthis.permission_id = 'punch';\n\t\tthis.viewId = 'Punches';\n\t\tthis.script_name = 'PunchesView';\n\t\tthis.table_name_key = 'punch';\n\t\tthis.context_menu_name = $.i18n._( 'Punches' );\n\t\tthis.navigation_label = $.i18n._( 'Punch' ) + ':';\n\t\tthis.api = TTAPI.APIPunch;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\tthis.job_api = TTAPI.APIJob;\n\t\t\tthis.job_item_api = TTAPI.APIJobItem;\n\t\t}\n\n\t\tthis.api_station = TTAPI.APIStation;\n\n\t\tthis.initPermission();\n\t\tthis.render();\n\n\t\tthis.buildContextMenu();\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tjobUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( 'job', 'enabled' ) &&\n\t\t\tPermissionManager.validate( p_id, 'edit_job' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tjobItemUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( 'job_item', 'enabled' ) &&\n\t\t\tPermissionManager.validate( p_id, 'edit_job_item' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tbranchUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_branch' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdepartmentUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_department' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgoodQuantityUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_quantity' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tbadQuantityUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_quantity' ) &&\n\t\t\tPermissionManager.validate( p_id, 'edit_bad_quantity' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttransferUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_transfer' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tnoteUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_note' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tlocationUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = 'punch';\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_location' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tstationValidate() {\n\t\tif ( PermissionManager.validate( 'station', 'enabled' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t//Speical permission check for views, need override\n\tinitPermission() {\n\t\tsuper.initPermission();\n\n\t\tif ( this.jobUIValidate() ) {\n\t\t\tthis.show_job_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_ui = false;\n\t\t}\n\n\t\tif ( this.jobItemUIValidate() ) {\n\t\t\tthis.show_job_item_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_item_ui = false;\n\t\t}\n\n\t\tif ( this.branchUIValidate() ) {\n\t\t\tthis.show_branch_ui = true;\n\t\t} else {\n\t\t\tthis.show_branch_ui = false;\n\t\t}\n\n\t\tif ( this.departmentUIValidate() ) {\n\t\t\tthis.show_department_ui = true;\n\t\t} else {\n\t\t\tthis.show_department_ui = false;\n\t\t}\n\n\t\tif ( this.goodQuantityUIValidate() ) {\n\t\t\tthis.show_good_quantity_ui = true;\n\t\t} else {\n\t\t\tthis.show_good_quantity_ui = false;\n\t\t}\n\n\t\tif ( this.badQuantityUIValidate() ) {\n\t\t\tthis.show_bad_quantity_ui = true;\n\t\t} else {\n\t\t\tthis.show_bad_quantity_ui = false;\n\t\t}\n\n\t\tif ( this.transferUIValidate() ) {\n\t\t\tthis.show_transfer_ui = true;\n\t\t} else {\n\t\t\tthis.show_transfer_ui = false;\n\t\t}\n\n\t\tif ( this.noteUIValidate() ) {\n\t\t\tthis.show_note_ui = true;\n\t\t} else {\n\t\t\tthis.show_note_ui = false;\n\t\t}\n\n\t\tif ( this.locationUIValidate() ) {\n\t\t\tthis.show_location_ui = true;\n\t\t} else {\n\t\t\tthis.show_location_ui = false;\n\t\t}\n\n\t\tif ( this.stationValidate() ) {\n\t\t\tthis.show_station_ui = true;\n\t\t} else {\n\t\t\tthis.show_station_ui = false;\n\t\t}\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'type' );\n\n\t\tthis.initDropDownOption( 'status', 'status_id', this.api, null, 'status_array' );\n\n\t\tthis.initDropDownOption( 'status', 'user_status_id', this.user_api, null, 'user_status_array' );\n\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\n\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t$this.user_group_array = res;\n\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonEditStationDone() {\n\t\tthis.setStation();\n\t}\n\n\tsetStation() {\n\n\t\tvar $this = this;\n\t\tvar arg = { filter_data: { id: this.current_edit_record.station_id } };\n\n\t\tthis.api_station.getStation( arg, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.station = result.getResult()[0];\n\t\t\t\tvar widget = $this.edit_view_ui_dic['station_id'];\n\t\t\t\twidget.setValue( $this.station.type + '-' + $this.station.description );\n\t\t\t\twidget.css( 'cursor', 'pointer' );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tuniformVariable( records ) {\n\t\tif ( !records.hasOwnProperty( 'time_stamp' ) ) {\n\t\t\trecords.time_stamp = false;\n\t\t}\n\n\t\treturn records;\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_punch': { 'label': $.i18n._( 'Punch' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPunch,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_punch',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_punch = this.edit_view_tab.find( '#tab_punch' );\n\n\t\tvar tab_punch_column1 = tab_punch.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_punch_column1 );\n\n\t\t// Employee\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'user_id'\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'punch';\n\t\tform_item_input.setDefaultArgs( default_args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_punch_column1, '', null, true );\n\n\t\t// Time\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TIME_PICKER );\n\n\t\tform_item_input.TTimePicker( { field: 'punch_time', validation_field: 'time_stamp' } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tthis.actual_time_label = $( '<span class=\\'widget-right-label\\'></span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( this.actual_time_label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time' ), form_item_input, tab_punch_column1, '', widgetContainer );\n\n\t\t//Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'punch_date', validation_field: 'date_stamp' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Date' ), form_item_input, tab_punch_column1, '', null, true );\n\n\t\t//Mass Add Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TRangePicker( { field: 'punch_dates', validation_field: 'date_stamp' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Date' ), form_item_input, tab_punch_column1, '', null, true );\n\n\t\t//Transfer\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'transfer' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Transfer' ), form_item_input, tab_punch_column1, '', null, true );\n\t\tif ( this.show_transfer_ui == false || this.is_add == false ) {\n\t\t\tthis.detachElement( 'transfer' );\n\t\t}\n\n\t\t// Punch\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\tvar check_box = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tcheck_box.TCheckbox( { field: 'disable_rounding' } );\n\n\t\tvar label = $( '<span class=\\'widget-right-label\\'>' + $.i18n._( 'Disable Rounding' ) + '</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\n\t\t// Check if view only mode. To prevent option appearing but disabled, as disabled checkboxes are not very clear - same in TimeSheetViewController\n\t\tif ( this.is_viewing ) {\n\t\t\t// dev-note: not sure if we need to pass widgetContainer here, or if we can omit if its only one element now (due to the if is_viewing).\n\t\t\t// to be safe, will continue to use widgetContainer for this case. We only want to affect viewing mode (hide rounding checkbox), less risk of regression to keep widget container in.\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Punch Type' ), form_item_input, tab_punch_column1, '', widgetContainer, true );\n\t\t} else {\n\t\t\twidgetContainer.append( label );\n\t\t\twidgetContainer.append( check_box );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Punch Type' ), [form_item_input, check_box], tab_punch_column1, '', widgetContainer, true );\n\t\t}\n\n\t\t// In/Out\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'In/Out' ), form_item_input, tab_punch_column1 );\n\n\t\t// Branch\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_branch',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'branch_id',\n\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t} ),\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t\t{ value: 'ffffffff-ffff-ffff-ffff-000000000002', label: $.i18n._( '-- Current Shift --' ) }\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Branch' ), form_item_input, tab_punch_column1, '', null, true );\n\n\t\tif ( !this.show_branch_ui ) {\n\t\t\tthis.detachElement( 'branch_id' );\n\t\t}\n\n\t\t// Department\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_department',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'department_id',\n\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t} ),\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t\t{ value: 'ffffffff-ffff-ffff-ffff-000000000002', label: $.i18n._( '-- Current Shift --' ) }\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Department' ), form_item_input, tab_punch_column1, '', null, true );\n\n\t\tif ( !this.show_department_ui ) {\n\t\t\tthis.detachElement( 'department_id' );\n\t\t}\n\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\n\t\t\t//Job\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJob,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'job_id',\n\t\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t\t} ),\n\t\t\t\tadded_items: [\n\t\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t\t\t{ value: 'ffffffff-ffff-ffff-ffff-000000000002', label: $.i18n._( '-- Current Shift --' ) }\n\t\t\t\t]\n\t\t\t} );\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_coder.TTextInput( { field: 'job_quick_search', disable_keyup_event: true } );\n\t\t\tjob_coder.addClass( 'job-coder' );\n\n\t\t\twidgetContainer.append( job_coder );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Job' ), [form_item_input, job_coder], tab_punch_column1, '', widgetContainer, true );\n\n\t\t\tif ( !this.show_job_ui ) {\n\t\t\t\tthis.detachElement( 'job_id' );\n\t\t\t}\n\n\t\t\t//Job Item\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJobItem,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job_item',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_item_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'job_item_id',\n\t\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t\t} ),\n\t\t\t\tadded_items: [\n\t\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t\t\t{ value: 'ffffffff-ffff-ffff-ffff-000000000002', label: $.i18n._( '-- Current Shift --' ) }\n\t\t\t\t]\n\t\t\t} );\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_item_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_item_coder.TTextInput( { field: 'job_item_quick_search', disable_keyup_event: true } );\n\t\t\tjob_item_coder.addClass( 'job-coder' );\n\n\t\t\twidgetContainer.append( job_item_coder );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Task' ), [form_item_input, job_item_coder], tab_punch_column1, '', widgetContainer, true );\n\n\t\t\tif ( !this.show_job_item_ui ) {\n\t\t\t\tthis.detachElement( 'job_item_id' );\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t// Quantity\n\t\t\tvar good = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tgood.TTextInput( { field: 'quantity', width: 40 } );\n\t\t\tgood.addClass( 'quantity-input' );\n\n\t\t\tvar good_label = $( '<span class=\\'widget-right-label\\'>' + $.i18n._( 'Good' ) + ': </span>' );\n\n\t\t\tvar bad = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tbad.TTextInput( { field: 'bad_quantity', width: 40 } );\n\t\t\tbad.addClass( 'quantity-input' );\n\n\t\t\tvar bad_label = $( '<span class=\\'widget-right-label\\'>/ ' + $.i18n._( 'Bad' ) + ': </span>' );\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\twidgetContainer.append( good_label );\n\t\t\twidgetContainer.append( good );\n\t\t\twidgetContainer.append( bad_label );\n\t\t\twidgetContainer.append( bad );\n\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Quantity' ), [good, bad], tab_punch_column1, '', widgetContainer, true );\n\n\t\t\tif ( !this.show_bad_quantity_ui && !this.show_good_quantity_ui ) {\n\t\t\t\tthis.detachElement( 'quantity' );\n\t\t\t} else {\n\t\t\t\tif ( !this.show_bad_quantity_ui ) {\n\t\t\t\t\tbad_label.hide();\n\t\t\t\t\tbad.hide();\n\t\t\t\t}\n\n\t\t\t\tif ( !this.show_good_quantity_ui ) {\n\t\t\t\t\tgood_label.hide();\n\t\t\t\t\tgood.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'note', width: '100%' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_punch_column1, '', null, true, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\tif ( !this.show_note_ui ) {\n\t\t\tthis.detachElement( 'note' );\n\t\t}\n\n\t\t//Location\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tvar latitude = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\tlatitude.TText( { field: 'latitude' } );\n\t\t\tvar longitude = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\tlongitude.TText( { field: 'longitude' } );\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box link-widget-box\\'></div>' );\n\t\t\tvar accuracy = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\taccuracy.TText( { field: 'position_accuracy' } );\n\t\t\tlabel = $( '<span class=\\'widget-right-label\\'>' + $.i18n._( 'Accuracy' ) + ':</span>' );\n\n\t\t\tvar map_icon = $( '<img class=\"widget-h-box-mapIcon\" src=\"framework/leaflet/images/marker-icon-red.png\" >' ); // TODO, fix image location so that its not in a library folder incase library removed.\n\n\t\t\tthis.location_wrapper = $( '<div class=\"widget-h-box-mapLocationWrapper\"></div>' );\n\t\t\twidgetContainer.append( map_icon );\n\t\t\twidgetContainer.append( this.location_wrapper );\n\t\t\tthis.location_wrapper.append( latitude );\n\t\t\tthis.location_wrapper.append( $( '<span>, </span>' ) );\n\t\t\tthis.location_wrapper.append( longitude );\n\t\t\tthis.location_wrapper.append( label );\n\t\t\tthis.location_wrapper.append( accuracy );\n\t\t\tthis.location_wrapper.append( $( '<span>m</span>' ) );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Location' ), [latitude, longitude, accuracy], tab_punch_column1, '', widgetContainer, true );\n\t\t\twidgetContainer.click( function() {\n\t\t\t\t$this.onMapClick();\n\t\t\t} );\n\n\t\t\t// #2117 - Manual location only supported in edit because we need a punch record to append the data to.\n\t\t\tif ( ( !this.is_edit && !this.is_viewing ) || !this.show_location_ui ) {\n\t\t\t\twidgetContainer.parents( '.edit-view-form-item-div' ).hide();\n\t\t\t}\n\t\t}\n\n\t\t// Station\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'station_id' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Station' ), form_item_input, tab_punch_column1, '', null, true, true );\n\n\t\tform_item_input.click( function() {\n\t\t\tif ( $this.current_edit_record.station_id && $this.show_station_ui ) {\n\t\t\t\tIndexViewController.openEditView( $this, 'Station', $this.current_edit_record.station_id );\n\t\t\t}\n\n\t\t} );\n\n\t\t//Split Punch Control\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'split_punch_control' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Split Existing Punches' ), form_item_input, tab_punch_column1, '', null, true );\n\t\tif ( this.is_add == false ) {\n\t\t\tthis.detachElement( 'split_punch_control' );\n\t\t}\n\n\t\t//Punch Image\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.IMAGE );\n\t\tform_item_input.TImage( { field: 'punch_image' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Image' ), form_item_input, tab_punch_column1, '', null, true, true );\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tthis.detachElement( 'punch_image' );\n\t\t\tthis.detachElement( 'user_id' );\n\t\t}\n\t}\n\n\tonSourceDataCreate( target, source_data ) {\n\t\tvar display_columns = target.getDisplayColumns();\n\t\tvar first_item = {};\n\t\tvar second_item = {};\n\n\t\t$.each( display_columns, function( index, content ) {\n\t\t\tfirst_item.id = TTUUID.not_exist_id;\n\t\t\tfirst_item[content.name] = Global.default_item;\n\n\t\t\tsecond_item.id = 'ffffffff-ffff-ffff-ffff-000000000002';\n\t\t\tsecond_item[content.name] = $.i18n._( '-- Current Shift --' );\n\n\t\t\treturn false;\n\t\t} );\n\n\t\t//Error: Object doesn't support property or method 'unshift' in /interface/html5/line 6953\n\t\tif ( !source_data || $.type( source_data ) !== 'array' ) {\n\t\t\tsource_data = [];\n\t\t}\n\n\t\tsource_data.unshift( second_item );\n\t\tsource_data.unshift( first_item );\n\n\t\treturn source_data;\n\t}\n\n\t//set widget disablebility if view mode or edit mode\n\tsetEditViewWidgetsMode() {\n\t\tvar did_clean_dic = {};\n\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tvar widgetContainer = this.edit_view_form_item_dic[key];\n\t\t\twidget.css( 'opacity', 1 );\n\t\t\tvar column = widget.parent().parent().parent();\n\t\t\tvar tab_id = column.parent().attr( 'id' );\n\t\t\tif ( !column.hasClass( 'v-box' ) ) {\n\t\t\t\tif ( !did_clean_dic[tab_id] ) {\n\t\t\t\t\tdid_clean_dic[tab_id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'punch_dates':\n\t\t\t\t\tif ( !this.is_mass_editing && ( this.is_mass_adding || !this.current_edit_record.id || this.current_edit_record.id == TTUUID.zero_id ) ) {\n\t\t\t\t\t\tthis.attachElement( key );\n\t\t\t\t\t\twidget.css( 'opacity', 1 ); //show\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.detachElement( key );\n\t\t\t\t\t\twidget.css( 'opacity', 0 ); //hide\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'punch_date':\n\t\t\t\t\tif ( !this.is_mass_editing && ( this.is_mass_adding || !this.current_edit_record.id || this.current_edit_record.id == TTUUID.zero_id ) ) {\n\t\t\t\t\t\tthis.detachElement( key );\n\t\t\t\t\t\twidget.css( 'opacity', 0 ); //hide - opposite from above\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.attachElement( key );\n\t\t\t\t\t\twidget.css( 'opacity', 1 ); //show\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( this.is_viewing ) {\n\t\t\t\tif ( Global.isSet( widget.setEnabled ) ) {\n\t\t\t\t\twidget.setEnabled( false );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( Global.isSet( widget.setEnabled ) ) {\n\n\t\t\t\t\twidget.setEnabled( true );\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\tonTransferChanged( initial_load ) {\n\n\t\tvar is_transfer = false;\n\t\tif ( this.edit_view_ui_dic && this.edit_view_ui_dic['transfer'] && this.edit_view_ui_dic['transfer'].getValue() == true ) {\n\t\t\tis_transfer = true;\n\t\t}\n\n\t\t// type_id_widget is undefined in interface/html5/framework/jquery.min.js?v=9.0.1-20151022-091549 line 2 > eval line 390\n\t\tvar type_id_widget = this.edit_view_ui_dic['type_id'];\n\t\tvar status_id_widget = this.edit_view_ui_dic['status_id'];\n\t\tif ( is_transfer && type_id_widget && status_id_widget ) {\n\n\t\t\ttype_id_widget.setEnabled( false );\n\t\t\tstatus_id_widget.setEnabled( false );\n\n\t\t\tthis.old_type_status.type_id = type_id_widget.getValue();\n\t\t\tthis.old_type_status.status_id = status_id_widget.getValue();\n\n\t\t\ttype_id_widget.setValue( 10 );\n\t\t\tstatus_id_widget.setValue( 10 );\n\n\t\t\tthis.current_edit_record.type_id = 10;\n\t\t\tthis.current_edit_record.status_id = 10;\n\n\t\t} else if ( type_id_widget && status_id_widget ) {\n\t\t\ttype_id_widget.setEnabled( true );\n\t\t\tstatus_id_widget.setEnabled( true );\n\n\t\t\tif ( this.old_type_status.hasOwnProperty( 'type_id' ) ) {\n\t\t\t\ttype_id_widget.setValue( this.old_type_status.type_id );\n\t\t\t\tstatus_id_widget.setValue( this.old_type_status.status_id );\n\n\t\t\t\tthis.current_edit_record.type_id = this.old_type_status.type_id;\n\t\t\t\tthis.current_edit_record.status_id = this.old_type_status.status_id;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( is_transfer == true ) {\n\t\t\tif ( this.original_note == '' ) {\n\t\t\t\tthis.original_note = this.current_edit_record.note;\n\t\t\t} else {\n\t\t\t\tthis.original_note = this.edit_view_ui_dic.note.getValue();\n\t\t\t}\n\t\t\tthis.edit_view_ui_dic.note.setValue( this.new_note ? this.new_note : '' );\n\t\t\tthis.current_edit_record.note = this.new_note ? this.new_note : '';\n\n\t\t} else if ( typeof initial_load == 'undefined' || initial_load === false ) {\n\n\t\t\tthis.new_note = this.edit_view_ui_dic.note.getValue();\n\t\t\tthis.edit_view_ui_dic.note.setValue( this.original_note ? this.original_note : '' );\n\t\t\tthis.current_edit_record.note = this.original_note ? this.original_note : '';\n\t\t}\n\t}\n\n\t//Make sure this.current_edit_record is updated before validate\n\tvalidate() {\n\n\t\tvar $this = this;\n\n\t\tvar record = {};\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\n\t\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trecord.id = this.mass_edit_record_ids[0];\n\t\t\trecord = this.uniformVariable( record );\n\n\t\t} else if ( this.is_mass_adding ) {\n\n\t\t\trecord = this.buildMassAddRecord( this.current_edit_record );\n\n\t\t} else {\n\t\t\trecord = this.current_edit_record;\n\t\t\trecord = this.uniformVariable( record );\n\t\t}\n\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\t// TODO: not ideal to need to have this here. want to use the base view version,\n\t//  but need this in order to prevent it using the uniformVariable function in BaseViewController version,\n\t//  as Punches uniformVariable function does something additional\n\tbuildMassEditSaveRecord( mass_edit_record_ids, changed_fields ) {\n\t\tvar $this = this;\n\t\tvar mass_records = [];\n\t\t$.each( mass_edit_record_ids, function( index, value ) {\n\t\t\tvar common_record = Global.clone( changed_fields );\n\t\t\tcommon_record.id = value;\n\t\t\tmass_records.push( common_record );\n\t\t} );\n\t\treturn mass_records;\n\t}\n\n\tbuildMassAddRecord( current_edit_record ) {\n\t\tvar record = [];\n\t\tvar dates_array = current_edit_record.punch_dates;\n\n\t\tif ( dates_array.indexOf( ' - ' ) > 0 ) {\n\t\t\tdates_array = this.parserDatesRange( dates_array );\n\t\t}\n\n\t\tfor ( var i = 0; i < dates_array.length; i++ ) {\n\t\t\tvar common_record = Global.clone( current_edit_record );\n\t\t\tdelete common_record.punch_dates;\n\t\t\tcommon_record.punch_date = dates_array[i];\n\t\t\tvar user_id = this.current_edit_record.user_id;\n\n\t\t\tif ( Global.isArray( user_id ) ) {\n\t\t\t\tfor ( var j = 0; j < user_id.length; j++ ) {\n\t\t\t\t\tvar final_record = Global.clone( common_record );\n\t\t\t\t\tfinal_record.user_id = this.current_edit_record.user_id[j];\n\t\t\t\t\tfinal_record = this.uniformVariable( final_record );\n\t\t\t\t\trecord.push( final_record );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcommon_record = this.uniformVariable( common_record );\n\t\t\t\trecord.push( common_record );\n\t\t\t}\n\n\t\t}\n\n\t\treturn record;\n\t}\n\n\tparserDatesRange( date ) {\n\t\tvar dates = date.split( ' - ' );\n\t\tvar resultArray = [];\n\t\tvar beginDate = Global.strToDate( dates[0] );\n\t\tvar endDate = Global.strToDate( dates[1] );\n\n\t\tvar nextDate = beginDate;\n\n\t\twhile ( nextDate.getTime() < endDate.getTime() ) {\n\t\t\tresultArray.push( nextDate.format() );\n\t\t\tnextDate = new Date( new Date( nextDate.getTime() ).setDate( nextDate.getDate() + 1 ) );\n\t\t}\n\n\t\tresultArray.push( dates[1] );\n\n\t\treturn resultArray;\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'punch_dates':\n\t\t\t\t\t\tvar date_array;\n\t\t\t\t\t\tif ( !this.current_edit_record.punch_dates ) {\n\t\t\t\t\t\t\tdate_array = [this.current_edit_record['punch_date']];\n\t\t\t\t\t\t\tthis.current_edit_record.punch_dates = date_array;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdate_array = this.current_edit_record.punch_dates;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidget.setValue( date_array );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'enable_email_notification_message':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_id':\n\t\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\t\targs.filter_data = { status_id: 10, user_id: this.current_edit_record.user_id };\n\t\t\t\t\t\t\twidget.setDefaultArgs( args );\n\t\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_item_id':\n\t\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\t\targs.filter_data = { status_id: 10, job_id: this.current_edit_record.job_id };\n\t\t\t\t\t\t\twidget.setDefaultArgs( args );\n\t\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_quick_search':\n//\t\t\t\t\t\twidget.setValue( this.current_edit_record['job_id'] ? this.current_edit_record['job_id'] : 0 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_item_quick_search':\n//\t\t\t\t\t\twidget.setValue( this.current_edit_record['job_item_id'] ? this.current_edit_record['job_item_id'] : 0 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'station_id':\n\t\t\t\t\t\tif ( this.current_edit_record[key] ) {\n\t\t\t\t\t\t\tthis.setStation();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidget.setValue( 'N/A' );\n\t\t\t\t\t\t\twidget.css( 'cursor', 'default' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'punch_image':\n\t\t\t\t\t\tvar station_form_item = this.edit_view_form_item_dic['station_id'];\n\t\t\t\t\t\tif ( this.current_edit_record['has_image'] ) {\n\t\t\t\t\t\t\tthis.attachElement( 'punch_image' );\n\t\t\t\t\t\t\twidget.setValue( ServiceCaller.getURLByObjectType( 'file_download' ) + '&object_type=punch_image&parent_id=' + this.current_edit_record.user_id + '&object_id=' + this.current_edit_record.id );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.detachElement( 'punch_image' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tvar actual_time_value;\n\t\tif ( this.current_edit_record.id ) {\n\n\t\t\tif ( this.current_edit_record.actual_time_stamp ) {\n\t\t\t\tactual_time_value = $.i18n._( 'Actual Time' ) + ': ' + this.current_edit_record.actual_time_stamp;\n\t\t\t} else {\n\t\t\t\tactual_time_value = 'N/A';\n\t\t\t}\n\n\t\t}\n\t\tthis.actual_time_label.text( actual_time_value );\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setLocationValue();\n\n\t\tthis.setEditViewDataDone();\n\t\tthis.isEditChange();\n\t}\n\n\tsetLocationValue( location_data ) {\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tif ( location_data ) {\n\t\t\t\tthis.current_edit_record.latitude = location_data.latitude;\n\t\t\t\tthis.current_edit_record.longitude = location_data.longitude;\n\t\t\t\tthis.current_edit_record.position_accuracy = location_data.position_accuracy; //If position is manually modified, it should always be set to 0m.\n\t\t\t}\n\t\t\tthis.edit_view_ui_dic['latitude'].setValue( this.current_edit_record.latitude );\n\t\t\tthis.edit_view_ui_dic['longitude'].setValue( this.current_edit_record.longitude );\n\t\t\tthis.edit_view_ui_dic['position_accuracy'].setValue( this.current_edit_record.position_accuracy ? this.current_edit_record.position_accuracy : 0 );\n\n\t\t\tif ( !this.current_edit_record.latitude && !this.is_mass_editing ) {\n\t\t\t\tthis.location_wrapper.hide();\n\t\t\t} else {\n\t\t\t\tif ( this.show_location_ui ) {\n\t\t\t\t\tthis.location_wrapper.show();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisEditChange() {\n\n\t\tif ( this.current_edit_record.id || this.is_mass_editing ) {\n\t\t\tthis.edit_view_ui_dic['user_id'].setEnabled( false );\n\t\t} else {\n\t\t\tthis.edit_view_ui_dic['user_id'].setEnabled( true );\n\t\t}\n\t}\n\n\t//set tab 0 visible after all data set done. This be hide when init edit view data\n\tsetEditViewDataDone() {\n\t\t// Remove this on 14.9.14 because adding tab url support, ned set url when tab index change and\n\t\t// need know what's current doing action. See if this cause any problem\n\t\t//LocalCacheData.current_doing_context_action = '';\n\t\tthis.setTabOVisibility( true );\n\n\t\tif ( this.is_edit == true ) {\n\t\t\tthis.edit_view_ui_dic.user_id.setAllowMultipleSelection( false );\n\t\t} else {\n\t\t\tthis.edit_view_ui_dic.user_id.setAllowMultipleSelection( true );\n\t\t}\n\n\t\tif ( this.is_edit == false && ( this.current_edit_record.latitude == 0 || this.current_edit_record.longitude == 0 ) ) {\n\t\t\t$( '.widget-h-box-mapLocationWrapper' ).parents( '.edit-view-form-item-div' ).hide();\n\t\t} else {\n\t\t\tif ( this.show_location_ui ) {\n\t\t\t\t$( '.widget-h-box-mapLocationWrapper' ).parents( '.edit-view-form-item-div' ).show();\n\t\t\t}\n\t\t}\n\n\t\tthis.navigation.setValue( this.current_edit_record.id );\n\n\t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t\tTTPromise.resolve( 'init', 'init' );\n\t}\n\n\tsetSubLogViewFilter() {\n\t\tif ( !this.sub_log_view_controller ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.sub_log_view_controller.getSubViewFilter = function( filter ) {\n\t\t\tfilter['table_name_object_id'] = {\n\t\t\t\t'punch': [this.parent_edit_record.id],\n\t\t\t\t'punch_control': [this.parent_edit_record.punch_control_id]\n\t\t\t};\n\n\t\t\treturn filter;\n\t\t};\n\n\t\treturn true;\n\t}\n\n\tbuildOtherFieldUI( field, label ) {\n\n\t\tif ( !this.edit_view_tab ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar form_item_input;\n\t\tvar $this = this;\n\t\tvar tab_punch = this.edit_view_tab.find( '#tab_punch' );\n\t\tvar tab_punch_column1 = tab_punch.find( '.first-column' );\n\n\t\tif ( $this.edit_view_ui_dic[field] ) {\n\t\t\tform_item_input = $this.edit_view_ui_dic[field];\n\t\t\tform_item_input.setValue( $this.current_edit_record[field] );\n\t\t} else {\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tform_item_input.TTextInput( { field: field } );\n\t\t\tvar input_div = $this.addEditFieldToColumn( label, form_item_input, tab_punch_column1 );\n\n\t\t\tinput_div.insertBefore( this.edit_view_form_item_dic['note'] );\n\n\t\t\tform_item_input.setValue( $this.current_edit_record[field] );\n\t\t}\n\t\tform_item_input.css( 'opacity', 1 );\n\t\tform_item_input.css( 'minWidth', 300 );\n\n\t\tif ( $this.is_viewing ) {\n\t\t\tform_item_input.setEnabled( false );\n\t\t} else {\n\t\t\tform_item_input.setEnabled( true );\n\t\t}\n\t}\n\n\tonAddResult( result ) {\n\t\tvar $this = this;\n\t\tvar result_data = result.getResult();\n\n\t\tif ( !result_data ) {\n\t\t\tresult_data = [];\n\t\t}\n\n\t\tresult_data.company = LocalCacheData.current_company.name;\n\t\tresult_data.punch_date = ( new Date() ).format();\n\n\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t}\n\n\t\t$this.current_edit_record = result_data;\n\t\t$this.initEditView();\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tvar default_args = { permission_section: 'punch' };\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_id',\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Start Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'start_date',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'End Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'end_date',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'title_id',\n\t\t\t\tlayout_name: 'global_user_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Punch Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Punch Department' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'department_id',\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Job' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'job_id',\n\t\t\t\tlayout_name: 'global_job',\n\t\t\t\tapi_class: ( Global.getProductEdition() >= 20 ) ? TTAPI.APIJob : null,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: ( this.show_job_ui && ( Global.getProductEdition() >= 20 ) ),\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Task' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'job_item_id',\n\t\t\t\tlayout_name: 'global_job_item',\n\t\t\t\tapi_class: ( Global.getProductEdition() >= 20 ) ? TTAPI.APIJobItem : null,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: ( this.show_job_item_ui && ( Global.getProductEdition() >= 20 ) ),\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [ContextMenuIconName.copy],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: ContextMenuIconName.timesheet,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.timesheet\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit<br>Employee' ),\n\t\t\t\t\tid: ContextMenuIconName.edit_employee,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: Icons.employee\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tcontext_menu_model.include.push(\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Map' ),\n\t\t\t\t\tid: ContextMenuIconName.map,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.map\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\t\tid: ContextMenuIconName.import_icon,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.import_icon,\n\t\t\t\t\tsort_order: 8000\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn context_menu_model;\n\t}\n\n\tonMapClick() {\n\t\t// only trigger map load in specific product editions.\n\t\tif ( ( Global.getProductEdition() >= 15 ) ) {\n\t\t\tProgressBar.showProgressBar();\n\n\t\t\t// TODO: this is repeated below, perhaps in future now that getFilterColumnsFromDisplayColumns() is commented out, this can be consolidated?\n\t\t\tvar data = {\n\t\t\t\tfilter_columns: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tlatitude: true,\n\t\t\t\t\tlongitude: true,\n\t\t\t\t\tpunch_date: true,\n\t\t\t\t\tpunch_time: true,\n\t\t\t\t\tposition_accuracy: true,\n\t\t\t\t\tuser_id: true\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar punches = [];\n\t\t\tvar map_options = {};\n\n\t\t\tif ( this.is_edit ) {\n\t\t\t\t//when editing, if the user reloads, the grid's selected id array become the whole grid.\n\t\t\t\t//to avoid mapping every punch in that scenario we need to grab the current_edit_record, rather than pull data from getGridSelectIdArray()\n\t\t\t\t//check for mass edit as well. <-- not sure what this refers to, assuming the same happens in mass edit, but maps are disabled on mass edit atm.\n\t\t\t\tpunches.push( this.current_edit_record );\n\t\t\t\t// from the edit view we want to allow single markers to be draggable.\n\t\t\t\tif ( !this.is_viewing ) {\n\t\t\t\t\t// make sure that when view only (so no save) marker is not draggable, and thus no new marker can be added either.\n\t\t\t\t\tmap_options.single_marker_draggable = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar ids = this.getGridSelectIdArray();\n\t\t\t\t// from the map icon on the ribbon bar we want to PREVENT single markers being draggable. As this is intended as a read only view.\n\t\t\t\tmap_options.single_marker_draggable = false;\n\n\t\t\t\tdata.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\t\t\tif ( ids.length > 0 ) {\n\t\t\t\t\tdata.filter_data.id = ids;\n\t\t\t\t}\n\t\t\t\t// data.filter_columns = this.getFilterColumnsFromDisplayColumns()\n\t\t\t\tdata.filter_columns.first_name = true;\n\t\t\t\tdata.filter_columns.last_name = true;\n\t\t\t\tdata.filter_columns.user_id = true;\n\t\t\t\tdata.filter_columns.date_stamp = true; // #2735 - grouping punches by date_stamp instead of punch_date, to allow cross date punch controls to plot distances.\n\t\t\t\tdata.filter_columns.punch_date = true;\n\t\t\t\tdata.filter_columns.punch_time = true;\n\t\t\t\tdata.filter_columns.time_stamp = true;\n\t\t\t\tdata.filter_columns.status = true;\n\t\t\t\tdata.filter_columns.punch_control_id = true;\n\t\t\t\tdata.filter_columns.branch = true;\n\t\t\t\tdata.filter_columns.branch_id = true;\n\t\t\t\tdata.filter_columns.department = true;\n\t\t\t\tdata.filter_columns.department_id = true;\n\t\t\t\tdata.filter_columns.job_manual_id = true;\n\t\t\t\tdata.filter_columns.job = true;\n\t\t\t\tdata.filter_columns.job_id = true;\n\t\t\t\tdata.filter_columns.job_item_manual_id = true;\n\t\t\t\tdata.filter_columns.job_item = true; // also known as Task\n\t\t\t\tdata.filter_columns.job_item_id = true;\n\t\t\t\tdata.filter_columns.total_time = true;\n\t\t\t\tdata.filter_columns.latitude = true;\n\t\t\t\tdata.filter_columns.longitude = true;\n\t\t\t\tdata.filter_columns.position_accuracy = true;\n\n\t\t\t\tpunches = this.api.getPunch( data, { async: false } ).getResult();\n\t\t\t}\n\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\timport( /* webpackChunkName: \"leaflet-timetrex\" */ '@/framework/leaflet/leaflet-timetrex' ).then(( module )=>{\n\t\t\t\t\tvar processed_punches_for_map = module.TTConvertMapData.processPunchesFromViewController( punches, map_options );\n\t\t\t\t\tIndexViewController.openEditView( this, 'Map', processed_punches_for_map );\n\t\t\t\t}).catch( Global.importErrorHandler );\n\t\t\t}\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.map:\n\t\t\t\tthis.onMapClick();\n\t\t\t\tbreak;\n\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonImportClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'Punch', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.map:\n\t\t\t\t\tthis.setDefaultMenuMapIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetEditMenu() {\n\n\t\tthis.selectContextMenu();\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\tswitch ( id ) {\n\t\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setEditMenuAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setEditMenuMassEditIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setEditMenuCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setEditMenuDeleteIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setEditMenuDeleteAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setEditMenuSaveAndContinueIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setEditMenuSaveAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setEditMenuSaveAndNextIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setEditMenuSaveAndCopyIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setEditMenuCopyAndAddIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\t\tthis.setEditMenuNavViewIcon( context_btn, 'punch' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\t\tthis.setEditMenuNavEditIcon( context_btn, 'user' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.map:\n\t\t\t\t\tthis.setDefaultMenuMapIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tonNavigationClick( iconName ) {\n\t\tvar $this = this;\n\t\tvar filter;\n\t\tvar temp_filter;\n\t\tvar grid_selected_id_array;\n\t\tvar grid_selected_length;\n\n\t\tswitch ( iconName ) {\n\t\t\tcase ContextMenuIconName.timesheet:\n\t\t\t\tfilter = { filter_data: {} };\n\t\t\t\tif ( Global.isSet( this.current_edit_record ) ) {\n\n\t\t\t\t\tfilter.user_id = this.current_edit_record.user_id;\n\t\t\t\t\tfilter.base_date = this.current_edit_record.punch_date;\n\t\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Punches' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t\t\t\t} else {\n\t\t\t\t\ttemp_filter = {};\n\t\t\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t\t\tgrid_selected_length = grid_selected_id_array.length;\n\n\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\tvar selectedId = grid_selected_id_array[0];\n\n\t\t\t\t\t\ttemp_filter.filter_data = {};\n\t\t\t\t\t\ttemp_filter.filter_data.id = [selectedId];\n\n\t\t\t\t\t\tthis.api['get' + this.api.key_name]( temp_filter, {\n\t\t\t\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\t\t\t\tfilter.user_id = result_data.user_id;\n\t\t\t\t\t\t\t\tfilter.base_date = result_data.punch_date;\n\n\t\t\t\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Punches' ), window.location.href );\n\t\t\t\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase ContextMenuIconName.edit_employee:\n\t\t\t\tfilter = { filter_data: {} };\n\t\t\t\tif ( Global.isSet( this.current_edit_record ) ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Employee', this.current_edit_record.user_id );\n\t\t\t\t} else {\n\t\t\t\t\ttemp_filter = {};\n\t\t\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t\t\tgrid_selected_length = grid_selected_id_array.length;\n\n\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\tselectedId = grid_selected_id_array[0];\n\n\t\t\t\t\t\ttemp_filter.filter_data = {};\n\t\t\t\t\t\ttemp_filter.filter_data.id = [selectedId];\n\n\t\t\t\t\t\tthis.api['get' + this.api.key_name]( temp_filter, {\n\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\t\t\t\tIndexViewController.openEditView( $this, 'Employee', result_data.user_id );\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetEditMenuSaveAndContinueIcon( context_btn, pId ) {\n\t\tthis.saveAndContinueValidate( context_btn, pId );\n\n\t\tif ( this.is_mass_editing || this.is_viewing || this.isMassDateOrMassUser() ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tcopyAsNewResetIds( data ) {\n\t\t//override where needed.\n\t\tdata.id = '';\n\t\tdata.punch_control_id = ''; //Clear the punch_control_id record as well so we don't force the punch to be assigned to it.\n\t\treturn data;\n\t}\n\n\t_continueDoCopyAsNew() {\n\t\tvar $this = this;\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\tthis.is_mass_adding = true;\n\t\tLocalCacheData.current_doing_context_action = 'copy_as_new';\n\t\tif ( Global.isSet( this.edit_view ) ) {\n\t\t\tthis.current_edit_record = this.copyAsNewResetIds( this.current_edit_record );\n\t\t\tvar navigation_div = this.edit_view.find( '.navigation-div' );\n\t\t\tnavigation_div.css( 'display', 'none' );\n\t\t\tthis.openEditView();\n\t\t\tthis.initEditView();\n\t\t\tthis.setEditMenu();\n\t\t\tthis.setTabStatus();\n\t\t\tthis.is_changed = false;\n\t\t\tProgressBar.closeOverlay();\n\t\t} else {\n\t\t\tsuper._continueDoCopyAsNew();\n\t\t}\n\t}\n\n\tisMassDateOrMassUser() {\n\t\tif ( this.is_mass_adding ) {\n\t\t\tif ( this.current_edit_record.punch_dates && this.current_edit_record.punch_dates.length > 1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( this.current_edit_record.user_id && this.current_edit_record.user_id.length > 1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tonSaveAndCopy( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_add = true;\n\t\tthis.is_changed = false;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_copy';\n\t\tvar record = this.current_edit_record;\n\t\tif ( this.is_mass_adding ) {\n\t\t\trecord = this.buildMassAddRecord( record );\n\t\t} else {\n\t\t\trecord = this.uniformVariable( record );\n\t\t}\n\n\t\tthis.clearNavigationData();\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onSaveAndCopyResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveAndNewClick( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\tvar record = this.current_edit_record;\n\t\tif ( this.is_mass_adding ) {\n\t\t\trecord = this.buildMassAddRecord( record );\n\t\t} else {\n\t\t\trecord = this.uniformVariable( record );\n\t\t}\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onSaveAndNewResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonMassEditClick() {\n\n\t\tvar $this = this;\n\t\t$this.is_add = false;\n\t\t$this.is_viewing = false;\n\t\t$this.is_mass_editing = true;\n\t\tthis.is_mass_adding = false;\n\t\tLocalCacheData.current_doing_context_action = 'mass_edit';\n\t\t$this.openEditView();\n\t\tvar filter = {};\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tthis.mass_edit_record_ids = [];\n\n\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t$this.mass_edit_record_ids.push( value );\n\t\t} );\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.mass_edit_record_ids;\n\n\t\tthis.api['getCommon' + this.api.key_name + 'Data']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\t$this.api['getOptions']( 'unique_columns', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.unique_columns = result.getResult();\n\t\t\t\t\t\t$this.api['getOptions']( 'linked_columns', {\n\t\t\t\t\t\t\tonResult: function( result1 ) {\n\t\t\t\t\t\t\t\t$this.linked_columns = result1.getResult();\n\n\t\t\t\t\t\t\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\t\t\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$this.current_edit_record = result_data;\n\t\t\t\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveAndContinue( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_changed = false;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_continue';\n\n\t\tif ( this.is_mass_adding ) {\n\n\t\t\tif ( this.current_edit_record.punch_dates && this.current_edit_record.punch_dates.length === 1 ) {\n\t\t\t\tthis.current_edit_record.punch_date = this.current_edit_record.punch_dates[0];\n\t\t\t}\n\n\t\t\tif ( this.current_edit_record.user_id && this.current_edit_record.user_id.length === 1 ) {\n\t\t\t\tthis.current_edit_record.user_id = this.current_edit_record.user_id[0];\n\t\t\t}\n\n\t\t}\n\n\t\tthis.current_edit_record = this.uniformVariable( this.current_edit_record );\n\n\t\tthis.api['set' + this.api.key_name]( this.current_edit_record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onSaveAndContinueResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tswitch ( key ) {\n\t\t\tcase 'user_id':\n\t\t\t\tif ( $.isArray( this.current_edit_record.user_id ) ) {\n\t\t\t\t\tthis.is_mass_adding = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.is_mass_adding = false;\n\t\t\t\t}\n\t\t\t\tthis.setEditMenu();\n\t\t\t\tbreak;\n\t\t\tcase 'punch_date':\n\t\t\t\tthis.current_edit_record.punch_dates = [c_value];\n\t\t\t\tbreak;\n\t\t\tcase 'punch_dates':\n\t\t\t\tthis.is_mass_adding = true;\n\t\t\t\tthis.setEditMenu();\n\t\t\t\tbreak;\n\t\t\tcase 'transfer':\n\t\t\t\tthis.onTransferChanged();\n\t\t\t\tbreak;\n\t\t\tcase 'job_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.setJobItemValueWhenJobChanged( target.getValue( true ), 'job_item_id', {\n\t\t\t\t\t\tstatus_id: 10,\n\t\t\t\t\t\tjob_id: this.current_edit_record.job_id\n\t\t\t\t\t} );\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_quick_search':\n\t\t\tcase 'job_item_quick_search':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.onJobQuickSearch( key, c_value );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.current_edit_record[key] = c_value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tonMapSaveClick( dataset, successCallback ) {\n\t\tthis.savePunchPosition( dataset, successCallback );\n\t}\n\n\tsavePunchPosition( moved_unsaved_markers, successCallback ) {\n\t\tif ( !moved_unsaved_markers || moved_unsaved_markers.length !== 1 ) {\n\t\t\tDebug.Text( 'ERROR: Invalid params/data passed to function.', 'PunchesViewController.js', 'PunchesViewController', 'savePunchPosition', 1 );\n\t\t\treturn false;\n\t\t}\n\n\t\t// Regardless of record type, we want to just pass the value back, rather than a api save from map, then another save from parent view.\n\t\t// Map info will only be saved if user clicks save on the parent edit view.\n\t\tthis.setLocationValue( moved_unsaved_markers[0] );\n\t\tsuccessCallback();\n\t\tthis.is_changed = true;\n\t\treturn true;\n\t}\n\n\tgetSelectEmployee( full_item ) {\n\t\tvar user;\n\t\tif ( full_item ) {\n\t\t\tuser = LocalCacheData.getLoginUser();\n\t\t} else {\n\t\t\tuser = LocalCacheData.getLoginUser().id;\n\t\t}\n\t\treturn user;\n\t}\n\n\tgetFilterColumnsFromDisplayColumns( column_filter, enable_system_columns ) {\n\t\tif ( column_filter == undefined ) {\n\t\t\tcolumn_filter = {};\n\t\t}\n\t\tcolumn_filter.latitude = true;\n\t\tcolumn_filter.longitude = true;\n\t\treturn this._getFilterColumnsFromDisplayColumns( column_filter, enable_system_columns );\n\t}\n}\n"],"sourceRoot":""}