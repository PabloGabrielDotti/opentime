{"version":3,"sources":["webpack://timetrex/./interface/html5/views/my_account/user_preference/LoginUserPreferenceViewController.js"],"names":["LoginUserPreferenceViewController","BaseViewController","options","_","defaults","language_array","date_format_array","time_format_array","time_unit_format_array","distance_format_array","time_zone_array","start_week_day_array","schedule_icalendar_type_array","saved_schedules","selected_schedule_uri_fragment","date_api","currentUser_api","user_preference_api","super","this","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","api","TTAPI","APIUserPreference","APITTDate","APIAuthentication","generic_user_data_api","APIUserGenericData","render","initData","callBack","option_name","field_name","initDropDownOptions","result","Intl","detected_tz","DateTimeFormat","resolvedOptions","timeZone","length","Debug","Text","current_edit_record","widget","edit_view_ui_dic","setValue","trigger","TAlertManager","showAlert","exclude","include","ContextMenuIconName","save","cancel","$this","filter","filter_data","user_id","LocalCacheData","loginUser","id","key_name","onResult","result_data","getResult","Global","isArray","isSet","newResult","data","script","deleted","getUserGenericData","i","name","default_layout_name","splice","key","collectUIDataToCurrentEditRecord","setEditViewDataDone","onStatusChange","edit_only_mode","initOptions","getSavedScheduleSearchAndLayout","push","value","label","getUserPreferenceData","buildContextMenu","edit_view","initEditViewUI","first_name","last_name","initEditView","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","getField","c_value","getValue","setCalendarURL","onSavedScheduleChange","getLabel","validate","schedule_icalendar_type_id","detachElement","attachElement","editFieldResize","user_name","ServiceCaller","root_url","unbind","click","window","open","text","getProductEdition","edit_view_tab","find","css","setEditMenu","html","getUpgradeMessage","isValid","setLanguageCookie","language","setI18nDic","updateUserPreference","location","reload","IndexViewController","setNotificationBar","context_btn","pId","len","context_menu_array","attr","removeClass","addClass","buildEditViewUI","tab_model","setTabModel","form_item_input","tab_preferences","tab_preferences_column1","tab_preference_column2","edit_view_tabs","loadWidgetByName","FormItemType","TEXT","TText","field","addEditFieldToColumn","COMBO_BOX","TComboBox","setSourceData","set_empty","widgetContainer","autodetect_tz_btn","detectTimeZone","append","TEXT_INPUT","TTextInput","width","default_login_screen_array","CHECKBOX","TCheckbox","SEPARATED_BOX","SeparatedBox","tab_schedule_synchronization_column1","copy_icon","getRealImagePath","Icons","copy","copyCalendarUrl","need_parser_sec","calendar_url","text_area","document","createElement","textContent","body","appendChild","select","execCommand","remove"],"mappings":"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","file":"my_account-user_preference-LoginUserPreferenceViewController.bundle.js?v=eb708c8ac0f4a35c1d23","sourcesContent":["export class LoginUserPreferenceViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\n\t\t\tlanguage_array: null,\n\t\t\tdate_format_array: null,\n\n\t\t\ttime_format_array: null,\n\n\t\t\ttime_unit_format_array: null,\n\n\t\t\tdistance_format_array: null,\n\n\t\t\ttime_zone_array: null,\n\t\t\tstart_week_day_array: null,\n\n\t\t\tschedule_icalendar_type_array: null,\n\n\t\t\tsaved_schedules: null,\n\n\t\t\tselected_schedule_uri_fragment: null,\n\n\t\t\tdate_api: null,\n\t\t\tcurrentUser_api: null,\n\n\t\t\tuser_preference_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\t//this._super('initialize', options );\n\n\t\tthis.permission_id = 'user_preference';\n\t\tthis.viewId = 'LoginUserPreference';\n\t\tthis.script_name = 'LoginUserPreferenceView';\n\t\tthis.table_name_key = 'user_preference';\n\t\tthis.context_menu_name = $.i18n._( 'Preferences' );\n\t\tthis.api = TTAPI.APIUserPreference;\n\t\tthis.date_api = TTAPI.APITTDate;\n\t\tthis.currentUser_api = TTAPI.APIAuthentication;\n\t\tthis.user_preference_api = TTAPI.APIUserPreference;\n\t\tthis.generic_user_data_api = TTAPI.APIUserGenericData;\n\t\tthis.saved_schedules = [];\n\t\tthis.selected_schedule_uri_fragment = '';\n\n\t\tthis.render();\n\n\t\tthis.initData();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\t}\n\n\tinitOptions( callBack ) {\n\n\t\tvar options = [\n\t\t\t{ option_name: 'language', field_name: null, api: this.api },\n\t\t\t{ option_name: 'date_format', field_name: null, api: this.api },\n\t\t\t{ option_name: 'time_format', field_name: null, api: this.api },\n\t\t\t{ option_name: 'time_unit_format', field_name: null, api: this.api },\n\t\t\t{ option_name: 'distance_format', field_name: null, api: this.api },\n\t\t\t{ option_name: 'time_zone', field_name: null, api: this.api },\n\t\t\t{ option_name: 'start_week_day', field_name: null, api: this.api },\n\t\t\t{ option_name: 'schedule_icalendar_type', field_name: null, api: this.api },\n\t\t\t{ option_name: 'default_login_screen', field_name: null, api: this.api }\n\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\t\t} );\n\t}\n\n\tdetectTimeZone() {\n\t\tif ( Intl ) {\n\t\t\tvar detected_tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n\t\t\tif ( detected_tz && detected_tz.length > 0 ) {\n\t\t\t\tDebug.Text( 'Detected TimeZone: ' + detected_tz, 'UserPreferenceViewController.js', 'UserPreferenceViewController', 'detectTimeZone', 10 );\n\t\t\t\tthis.current_edit_record['time_zone'] = detected_tz;\n\n\t\t\t\tvar widget = this.edit_view_ui_dic['time_zone'];\n\t\t\t\twidget.setValue( this.current_edit_record['time_zone'] );\n\t\t\t\twidget.trigger( 'formItemChange', [widget] );\n\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Time Zone detected as' ) + ' ' + detected_tz );\n\t\t\t} else {\n\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Unable to determine time zone' ) );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\tContextMenuIconName.save,\n\t\t\t\tContextMenuIconName.cancel\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tgetUserPreferenceData( callBack ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.user_id = LocalCacheData.loginUser.id;\n\n\t\t$this.api['get' + $this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( Global.isArray( result_data ) && Global.isSet( result_data[0] ) ) {\n\t\t\t\t\tcallBack( result_data[0] );\n\t\t\t\t} else {\n\t\t\t\t\t$this.api['get' + $this.api.key_name + 'DefaultData']( {\n\t\t\t\t\t\tonResult: function( newResult ) {\n\t\t\t\t\t\t\tvar result_data = newResult.getResult();\n\t\t\t\t\t\t\tcallBack( result_data );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetSavedScheduleSearchAndLayout( callBack ) {\n\t\tvar data = {};\n\t\tdata.filter_data = { script: 'ScheduleView', deleted: false };\n\n\t\tthis.generic_user_data_api.getUserGenericData( data, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t// Remove -- Default -- (multiple languages) option from list as it can change everytime a user searches and is not relevant.\n\t\t\t\tfor ( var i = result_data.length - 1; i >= 0; i-- ) {\n\t\t\t\t\tif ( result_data[i].name === BaseViewController.default_layout_name ) {\n\t\t\t\t\t\tresult_data.splice( i, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallBack( result_data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'full_name':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record['first_name'] + ' ' + this.current_edit_record['last_name'] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.onStatusChange();\n\t}\n\n\topenEditView() {\n\t\tvar $this = this;\n\n\t\tif ( $this.edit_only_mode ) {\n\n\t\t\t$this.initOptions( function( result ) {\n\n\t\t\t\t$this.getSavedScheduleSearchAndLayout( function( result ) {\n\n\t\t\t\t\t$this.saved_schedules.push( { value: 0, label: $.i18n._( 'My Schedule (Default)' ) } );\n\t\t\t\t\tfor ( var i = 0; i < result.length; i++ ) {\n\t\t\t\t\t\t$this.saved_schedules.push( { value: result[i].id, label: result[i].name } );\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.getUserPreferenceData( function( result ) {\n\n\t\t\t\t\t\t$this.buildContextMenu();\n\n\t\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\t\t$this.initEditViewUI( 'LoginUserPreference', 'LoginUserPreferenceEditView.html' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !result.id ) {\n\t\t\t\t\t\t\tresult.first_name = LocalCacheData.loginUser.first_name;\n\t\t\t\t\t\t\tresult.last_name = LocalCacheData.loginUser.last_name;\n\t\t\t\t\t\t\tresult.user_id = LocalCacheData.loginUser.id;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Waiting for the API returns data to set the current edit record.\n\t\t\t\t\t\t$this.current_edit_record = result;\n\n\t\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t}\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( key === 'schedule_icalendar_type_id' ) {\n\t\t\tthis.onStatusChange();\n\t\t\tthis.setCalendarURL();\n\t\t} else if ( key === 'schedule_saved_search' ) {\n\t\t\tthis.onSavedScheduleChange( target.getValue(), target.getLabel() );\n\t\t\tthis.setCalendarURL();\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tonStatusChange() {\n\n\t\tif ( this.current_edit_record.schedule_icalendar_type_id == 0 ) {\n\t\t\tthis.detachElement( 'schedule_saved_search' );\n\t\t\tthis.detachElement( 'calendar_url' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm1_working' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm2_working' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm1_absence' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm2_absence' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm1_modified' );\n\t\t\tthis.detachElement( 'schedule_icalendar_alarm2_modified' );\n\t\t\tthis.detachElement( 'shifts_scheduled_to_work' );\n\t\t\tthis.detachElement( 'shifts_scheduled_absent' );\n\t\t\tthis.detachElement( 'modified_shifts' );\n\n\t\t} else {\n\t\t\tthis.setCalendarURL();\n\t\t\tthis.attachElement( 'schedule_saved_search' );\n\t\t\tthis.attachElement( 'calendar_url' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm1_working' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm2_working' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm1_absence' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm2_absence' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm1_modified' );\n\t\t\tthis.attachElement( 'schedule_icalendar_alarm2_modified' );\n\t\t\tthis.attachElement( 'shifts_scheduled_to_work' );\n\t\t\tthis.attachElement( 'shifts_scheduled_absent' );\n\t\t\tthis.attachElement( 'modified_shifts' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonSavedScheduleChange( value, label ) {\n\t\tif ( value === 0 ) {\n\t\t\tthis.selected_schedule_uri_fragment = '';\n\t\t} else {\n\t\t\tthis.selected_schedule_uri_fragment = label;\n\t\t}\n\t}\n\n\tsetCalendarURL( widget ) {\n\n\t\tif ( !Global.isSet( widget ) ) {\n\t\t\twidget = this.edit_view_ui_dic['calendar_url'];\n\t\t}\n\n\t\tthis.api['getScheduleIcalendarURL']( this.current_edit_record.user_name, this.current_edit_record.schedule_icalendar_type_id, this.selected_schedule_uri_fragment, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\twidget.setValue( ServiceCaller.root_url + result_data );\n\n\t\t\t\twidget.unbind( 'click' ); // First unbind all click events, otherwise, when we change the schedule icalendar type this will trigger several times click events.\n\n\t\t\t\twidget.click( function() {\n\t\t\t\t\twindow.open( widget.text() );\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitSubScheduleSynchronizationView() {\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tthis.edit_view_tab.find( '#tab_schedule_synchronization' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\tthis.buildContextMenu( true );\n\t\t\tthis.setEditMenu();\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_schedule_synchronization' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t}\n\t}\n\n\tonSaveDone( result ) {\n\t\tif ( result.isValid() ) {\n\n\t\t\tGlobal.setLanguageCookie( this.current_edit_record.language );\n\t\t\tLocalCacheData.setI18nDic( null );\n\n\t\t\tGlobal.updateUserPreference( function() {\n\t\t\t\twindow.location.reload( true );\n\t\t\t}, $.i18n._( 'Updating preferences, reloading' ) + '...' );\n\n\t\t\tIndexViewController.setNotificationBar( 'preference' );\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tsetEditMenuSaveIcon( context_btn, pId ) {\n\t}\n\n\tsetErrorMenu() {\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tvar $this = this;\n\t\tsuper.buildEditViewUI();\n\n\t\tvar tab_model = {\n\t\t\t'tab_preferences': { 'label': $.i18n._( 'Preferences' ) },\n\t\t\t'tab_schedule_synchronization': {\n\t\t\t\t'label': $.i18n._( 'Schedule Synchronization' ),\n\t\t\t\t'init_callback': 'initSubScheduleSynchronizationView'\n\t\t\t},\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\n\t\t//Tab 0 start\n\n\t\tvar tab_preferences = this.edit_view_tab.find( '#tab_preferences' );\n\n\t\tvar tab_preferences_column1 = tab_preferences.find( '.first-column' );\n\t\tvar tab_preference_column2 = tab_preferences.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_preferences_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_preference_column2 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t// Employee\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'full_name' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_preferences_column1, '' );\n\n\t\t// Language\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'language' } );\n\t\tform_item_input.setSourceData( $this.language_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Language' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Date Format\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'date_format' } );\n\t\tform_item_input.setSourceData( $this.date_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Date Format' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Time Format\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'time_format' } );\n\t\tform_item_input.setSourceData( $this.time_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time Format' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Time Units\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'time_unit_format' } );\n\t\tform_item_input.setSourceData( $this.time_unit_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time Units' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Distance Units\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'distance_format' } );\n\t\tform_item_input.setSourceData( $this.distance_format_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Distance Units' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Time Zone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'time_zone', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.time_zone_array );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tvar autodetect_tz_btn = $( '<input class=\\'t-button\\' style=\\'margin-left: 5px; height: 25px;\\' type=\\'button\\' value=\\'' + $.i18n._( 'Auto-Detect' ) + '\\'></input>' );\n\t\tautodetect_tz_btn.click( function() {\n\t\t\t$this.detectTimeZone();\n\t\t} );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( autodetect_tz_btn );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time Zone' ), form_item_input, tab_preferences_column1, '', widgetContainer );\n\n\t\t// Start Weeks on\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'start_week_day' } );\n\t\tform_item_input.setSourceData( $this.start_week_day_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Calendar Starts On' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Rows per page\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'items_per_page', width: 50 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Rows per page' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Default Login Screen\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'default_login_screen' } );\n\t\tform_item_input.setSourceData( $this.default_login_screen_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Default Screen' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Save TimeSheet State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_save_timesheet_state' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Save TimeSheet State' ), form_item_input, tab_preferences_column1 );\n\n\t\t// Automatically Show Context Menu\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_auto_context_menu' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Automatically Show Context Menu' ), form_item_input, tab_preferences_column1 );\n\n\t\t// TODO\n\t\t// Zoom\n\n\t\t// Email Notifications\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Email Notifications' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_preference_column2 );\n\n\t\t// Exceptions\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_exception' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Exceptions' ), form_item_input, tab_preference_column2 );\n\n\t\t// Messages\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_message' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Messages' ), form_item_input, tab_preference_column2 );\n\n\t\t// Pay Stubs\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_pay_stub' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Stubs' ), form_item_input, tab_preference_column2 );\n\n\t\t// Send Notifications to Home Email\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_email_notification_home' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Send Notifications to Home Email' ), form_item_input, tab_preference_column2, '' );\n\n\t\t//Tab 1 start\n\n\t\tvar tab_schedule_synchronization = this.edit_view_tab.find( '#tab_schedule_synchronization' );\n\n\t\tvar tab_schedule_synchronization_column1 = tab_schedule_synchronization.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[1] = [];\n\n\t\tthis.edit_view_tabs[1].push( tab_schedule_synchronization_column1 );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'schedule_icalendar_type_id' } );\n\t\tform_item_input.setSourceData( $this.schedule_icalendar_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_schedule_synchronization_column1, '' );\n\n\t\t// Saved Schedule View\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'schedule_saved_search' } );\n\t\tform_item_input.setSourceData( $this.saved_schedules );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Schedule Saved Search' ), form_item_input, tab_schedule_synchronization_column1, '', null, true, false, 'schedule_saved_search' );\n\n\t\t// Calendar URL\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'calendar_url' } );\n\t\tform_item_input.addClass( 'link' );\n\n\t\tvar widgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tvar copy_icon = $( ' <img style=\"margin-left: 5px; cursor: pointer; width: 20px; height: 20px;\" src=\"' + Global.getRealImagePath( 'css/global/widgets/ribbon/icons/' + Icons.copy ) + '\">' );\n\t\tcopy_icon.click( function() {\n\t\t\t$this.copyCalendarUrl();\n\t\t} );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( copy_icon );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Calendar URL' ), form_item_input, tab_schedule_synchronization_column1, '', widgetContainer, true );\n\n\t\t// Shifts Scheduled to Work\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Shifts Scheduled to Work' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_schedule_synchronization_column1, '', null, true, false, 'shifts_scheduled_to_work' );\n\n\t\t// Alarm 1\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm1_working', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 1' ), form_item_input, tab_schedule_synchronization_column1, '', widgetContainer, true );\n\n\t\t// Alarm 2\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm2_working', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 2' ), form_item_input, tab_schedule_synchronization_column1, '', widgetContainer, true );\n\n\t\t// Shifts Scheduled Absent\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Shifts Scheduled Absent' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_schedule_synchronization_column1, '', null, true, false, 'shifts_scheduled_absent' );\n\n\t\t// Alarm 1\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm1_absence', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 1' ), form_item_input, tab_schedule_synchronization_column1, '', widgetContainer, true );\n\n\t\t// Alarm 2\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm2_absence', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 2' ), form_item_input, tab_schedule_synchronization_column1, '', widgetContainer, true );\n\n\t\t// Modified Shifts\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Modified Shifts' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_schedule_synchronization_column1, '', null, true, false, 'modified_shifts' );\n\n\t\t// Alarm 1\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm1_modified', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 1' ), form_item_input, tab_schedule_synchronization_column1, '', widgetContainer, true );\n\n\t\t// Alarm 2\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'schedule_icalendar_alarm2_modified', width: 90, need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'before schedule start time' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Alarm 2' ), form_item_input, tab_schedule_synchronization_column1, '', widgetContainer, true );\n\t}\n\n\tcopyCalendarUrl() {\n\t\tvar calendar_url = this.edit_view_ui_dic['calendar_url'][0];\n\n\t\t// Create a temporary textarea to copy text from as cannot use select() on a span.\n\t\tvar text_area = document.createElement( 'textarea' );\n\t\ttext_area.value = calendar_url.textContent;\n\t\tdocument.body.appendChild( text_area );\n\t\ttext_area.select();\n\t\tdocument.execCommand( 'Copy' );\n\t\ttext_area.remove();\n\n\t\tTAlertManager.showAlert( $.i18n._( 'Calendar URL copied to clipboard.' ) );\n\t}\n\n}\n"],"sourceRoot":""}