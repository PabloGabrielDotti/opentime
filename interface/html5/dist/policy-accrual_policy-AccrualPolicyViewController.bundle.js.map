{"version":3,"sources":["webpack://timetrex/./interface/html5/views/policy/accrual_policy/AccrualPolicyViewController.js"],"names":["AccrualPolicyViewController","BaseViewController","options","_","defaults","el","type_array","apply_frequency_array","month_of_year_array","day_of_month_array","day_of_week_array","month_of_quarter_array","length_of_service_unit_array","date_api","accrual_policy_milestone_api","accrual_policy_user_modifier_api","sub_accrual_policy_user_modifier_view_controller","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIAccrualPolicy","APITTDate","APIAccrualPolicyMilestone","APIAccrualPolicyUserModifier","Global","buildRecordArray","1","2","3","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","id","ContextMenuIconName","re_calculate_accrual","onReCalAccrualClick","default_data","$this","edit_view","accrual_policy_id","current_edit_record","getGridSelectIdArray","IndexViewController","openWizard","search","exclude","include","label","group","icon","Icons","re_cal_timesheet","permission_result","permission","initDropDownOption","getMonthOfYearArray","onResult","res","getResult","getDayOfMonthArray","getDayOfWeekArray","doNotSetFocus","context_menu_array","setDefaultMenu","len","length","grid_selected_length","i","context_btn","find","attr","setDefaultMenuReCalAccrualWizardIcon","setContextMenuGroupVisibility","setEditMenu","setEditMenuReCalAccrualWizardIcon","PermissionManager","validate","removeClass","addClass","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","form_item_input","widgetContainer","tab_accrual_policy","edit_view_tab","tab_length_of_service_milestones","tab_accrual_policy_column1","tab_length_of_service_milestones_column1","edit_view_tabs","push","loadWidgetByName","FormItemType","TEXT_INPUT","TTextInput","field","width","addEditFieldToColumn","parent","TEXT_AREA","TTextArea","COMBO_BOX","TComboBox","set_empty","setSourceData","AWESOME_BOX","APIContributingShiftPolicy","set_default","APIAccrualPolicyAccount","APIContributingPayCodePolicy","SEPARATED_BOX","SeparatedBox","CHECKBOX","TCheckbox","tab_accrual_policy_column2","extend","append","inside_editor_div","args","length_of_service","accrual_rate","accrual_total_maximum","annual_maximum_rollover","annual_maximum_time","editor","INSIDE_EDITOR","InsideEditor","addRow","insideEditorAddRow","removeRow","insideEditorRemoveRow","getValue","insideEditorGetValue","setValue","insideEditorSetValue","render_args","row_render","parent_controller","detachElement","attachElement","editFieldResize","arg","isSet","onApplyFrequencyHireDate","is_mass_editing","show","css","onApplyFrequencyChange","setAccrualRageFormat","type","rows_widgets_array","row","accrual_rate_hourly","accrual_rate_yearly","hide","td","children","eq","text","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","c_value","onTypeChange","onMilestoneRolloverHireDate","count","val","removeAllRows","parent_id","data","index","row_id","TTUUID","generateUUID","getRowRender","getRender","widgets","label_1","label_2","setWidgetEnableBaseOnParentController","form_item_combobox","length_of_service_unit_id","bind","e","isDisplayLengthOfServiceHoursBasedOn","need_parser_sec","setPlaceHolder","mode","type_id","maximum_time","rollover_time","insertAfter","splice","is_viewing","addIconsEvent","removeLastRowLine","rowIndex","remove_id","isUUID","not_exist_id","zero_id","delete_ids","remove","current_edit_item_id","result","setEditViewDataDone","initInsideEditorData","mass_edit","copied_record_id","filter_data","getAccrualPolicyMilestone","callBack","refresh_id","remove_ids","deleteAccrualPolicyMilestone","isValid","setAccrualPolicyMilestone","result_data","saveInsideEditorData","onSaveDone","removeEditView","setErrorMenu","setErrorTips","onCopyAsNewClick","LocalCacheData","current_doing_context_action","is_add","_continueDoCopyAsNew","TAlertManager","showAlert","onCancelClick","openEditView","sub_view_mode","parent_key","parent_value","initEditView","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser","getProductEdition","html","getUpgradeMessage","parent_edit_record","loadScript","firstColumn","trackView","AccrualPolicyUserModifierViewController","loadSubView","beforeLoadView","afterLoadView","TTPromise","resolve","tpl","template","parent_view","subViewController","parent_view_controller","wait"],"mappings":"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","file":"policy-accrual_policy-AccrualPolicyViewController.bundle.js?v=bb42f3360f031f11df05","sourcesContent":["export class AccrualPolicyViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#accrual_policy_view_container',\n\n\t\t\ttype_array: null,\n\t\t\tapply_frequency_array: null,\n\t\t\tmonth_of_year_array: null,\n\t\t\tday_of_month_array: null,\n\t\t\tday_of_week_array: null,\n\t\t\tmonth_of_quarter_array: null,\n\t\t\tlength_of_service_unit_array: null,\n\t\t\tdate_api: null,\n\t\t\taccrual_policy_milestone_api: null,\n\t\t\taccrual_policy_user_modifier_api: null,\n\n\t\t\tsub_accrual_policy_user_modifier_view_controller: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'AccrualPolicyEditView.html';\n\t\tthis.permission_id = 'accrual_policy';\n\t\tthis.viewId = 'AccrualPolicy';\n\t\tthis.script_name = 'AccrualPolicyView';\n\t\tthis.table_name_key = 'accrual_policy';\n\t\tthis.context_menu_name = $.i18n._( 'Accrual Policy' );\n\t\tthis.navigation_label = $.i18n._( 'Accrual Policy' ) + ':';\n\t\tthis.api = TTAPI.APIAccrualPolicy;\n\t\tthis.date_api = TTAPI.APITTDate;\n\t\tthis.accrual_policy_milestone_api = TTAPI.APIAccrualPolicyMilestone;\n\t\tthis.accrual_policy_user_modifier_api = TTAPI.APIAccrualPolicyUserModifier;\n\t\tthis.month_of_quarter_array = Global.buildRecordArray( { 1: 1, 2: 2, 3: 3 } );\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'AccrualPolicy' );\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.re_calculate_accrual:\n\t\t\t\tthis.onReCalAccrualClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonReCalAccrualClick() {\n\t\tvar default_data = {};\n\t\tvar $this = this;\n\n\t\tif ( this.edit_view ) {\n\t\t\tdefault_data.accrual_policy_id = [this.current_edit_record.id];\n\t\t} else {\n\t\t\tdefault_data.accrual_policy_id = this.getGridSelectIdArray();\n\t\t}\n\n\t\tIndexViewController.openWizard( 'ReCalculateAccrualWizard', default_data, function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'ReCalculate<br>Accrual' ),\n\t\t\t\t\tid: ContextMenuIconName.re_calculate_accrual,\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\ticon: Icons.re_cal_timesheet,\n\t\t\t\t\tpermission_result: true,\n\t\t\t\t\tpermission: null\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'type' );\n\t\tthis.initDropDownOption( 'apply_frequency' );\n\t\tthis.initDropDownOption( 'length_of_service_unit', 'length_of_service_unit_id', this.accrual_policy_milestone_api );\n\t\tthis.date_api.getMonthOfYearArray( {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\t$this.month_of_year_array = res;\n\t\t\t}\n\t\t} );\n\t\tthis.date_api.getDayOfMonthArray( {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\t$this.day_of_month_array = res;\n\t\t\t}\n\t\t} );\n\t\tthis.date_api.getDayOfWeekArray( {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\t$this.day_of_week_array = res;\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.setDefaultMenu( doNotSetFocus );\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.re_calculate_accrual:\n\t\t\t\t\tthis.setDefaultMenuReCalAccrualWizardIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetEditMenu() {\n\n\t\tsuper.setEditMenu();\n\n\t\tvar len = this.context_menu_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.re_calculate_accrual:\n\t\t\t\t\tthis.setEditMenuReCalAccrualWizardIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\tsetEditMenuReCalAccrualWizardIcon( context_btn ) {\n\t\tif ( PermissionManager.validate( 'accrual_policy', 'enabled' ) &&\n\t\t\t( PermissionManager.validate( 'accrual_policy', 'edit' ) || PermissionManager.validate( 'accrual_policy', 'edit_child' ) || PermissionManager.validate( 'accrual_policy', 'edit_own' ) )\n\t\t) {\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( this.current_edit_record.id ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetDefaultMenuReCalAccrualWizardIcon( context_btn, grid_selected_length ) {\n\t\tif ( PermissionManager.validate( 'accrual_policy', 'enabled' ) &&\n\t\t\t( PermissionManager.validate( 'accrual_policy', 'edit' ) || PermissionManager.validate( 'accrual_policy', 'edit_child' ) || PermissionManager.validate( 'accrual_policy', 'edit_own' ) )\n\t\t) {\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'invisible-image' );\n\t\t}\n\n\t\tif ( grid_selected_length >= 1 ) {\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\t\t} else {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_accrual_policy': { 'label': $.i18n._( 'Accrual Policy' ) },\n\t\t\t'tab_length_of_service_milestones': { 'label': $.i18n._( 'Length Of Service Milestones' ) },\n\t\t\t'tab_employee_settings': {\n\t\t\t\t'label': $.i18n._( 'Employee Settings' ),\n\t\t\t\t'init_callback': 'initSubAccrualPolicyUserModifier',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicy,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_accrual',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_accrual_policy = this.edit_view_tab.find( '#tab_accrual_policy' );\n\t\tvar tab_length_of_service_milestones = this.edit_view_tab.find( '#tab_length_of_service_milestones' );\n\n\t\tvar tab_accrual_policy_column1 = tab_accrual_policy.find( '.first-column' );\n\t\tvar tab_length_of_service_milestones_column1 = tab_length_of_service_milestones.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_accrual_policy_column1 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t//Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_accrual_policy_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_accrual_policy_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_accrual_policy_column1 );\n\n\t\t// Contributing Shift\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIContributingShiftPolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_contributing_shift_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'contributing_shift_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contributing Shift Policy' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\t// Accrual Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicyAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_accrual_policy_account',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'accrual_policy_account_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Account' ), form_item_input, tab_accrual_policy_column1 );\n\n\t\t//Length of Service contributing pay codes.\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIContributingPayCodePolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_contributing_pay_code_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'length_of_service_contributing_pay_code_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Length Of Service Hours Based On' ), form_item_input, tab_length_of_service_milestones_column1, '', null, true );\n\n\t\t//Milestone Rollover Based On\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Milestone Rollover Based On' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_accrual_policy_column1, '', null, true, false, 'separated_2' );\n\n\t\t//Employee's Hire Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'milestone_rollover_hire_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee\\'s Hire Date' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\t//Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'milestone_rollover_month' } );\n\t\tform_item_input.setSourceData( $this.month_of_year_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Month' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\t//Day Of Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'milestone_rollover_day_of_month' } );\n\t\tform_item_input.setSourceData( $this.day_of_month_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Day of Month' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\tvar tab_accrual_policy_column2 = tab_accrual_policy.find( '.second-column' );\n\t\tthis.edit_view_tabs[0].push( tab_accrual_policy_column2 );\n\n\t\t//Frequency In Which To Apply Time to Employee Records\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Frequency In Which To Apply Time to Employee Records' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_accrual_policy_column2, '', null, true, false, 'separated_1' );\n\n\t\t//Frequency\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.apply_frequency_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Frequency' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Employee's Hire Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'apply_frequency_hire_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee\\'s Hire Date' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_month' } );\n\t\tform_item_input.setSourceData( $this.month_of_year_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Month' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Day Of Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_day_of_month' } );\n\t\tform_item_input.setSourceData( $this.day_of_month_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Day of Month' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Day Of Week\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_day_of_week' } );\n\t\tform_item_input.setSourceData( $.extend( {}, $this.day_of_week_array ) );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Day Of Week' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t// Month of Quarter\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_quarter_month', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.month_of_quarter_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Month of Quarter' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t// After Minimum Employed Days\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'minimum_employed_days', width: 30 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'After Minimum Employed Days' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Enable Opening Balance\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_opening_balance' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(Applies Initial Accrual Amount on Hire Date)' ) + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Enable Opening Balance' ), form_item_input, tab_accrual_policy_column2, '', widgetContainer, true );\n\n\t\t//Enable Pro-Rate Initial Period\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_pro_rate_initial_period' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(Based on Hire Date)' ) + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Prorate Initial Accrual Amount' ), form_item_input, tab_accrual_policy_column2, '', widgetContainer, true );\n\n\t\tvar tab_length_of_service_milestones = this.edit_view_tab.find( '#tab_length_of_service_milestones' );\n\n\t\t//\n\t\t//Inside editor\n\t\t//\n\t\tvar inside_editor_div = tab_length_of_service_milestones.find( '.inside-editor-div' );\n\t\tvar args = {\n\t\t\tlength_of_service: $.i18n._( 'Length Of Service' ),\n\t\t\taccrual_rate: $.i18n._( 'Accrual Rate/Year' ),\n\t\t\taccrual_total_maximum: $.i18n._( 'Accrual Maximum Balance' ),\n\t\t\tannual_maximum_rollover: $.i18n._( 'Annual Maximum Rollover' ),\n\t\t\tannual_maximum_time: $.i18n._( 'Annual Accrual Maximum' )\n\t\t};\n\n\t\tthis.editor = Global.loadWidgetByName( FormItemType.INSIDE_EDITOR );\n\n\t\tthis.editor.InsideEditor( {\n\t\t\taddRow: this.insideEditorAddRow,\n\t\t\tremoveRow: this.insideEditorRemoveRow,\n\t\t\tgetValue: this.insideEditorGetValue,\n\t\t\tsetValue: this.insideEditorSetValue,\n\t\t\trender: 'views/policy/accrual_policy/AccrualPolicyInsideEditorRender.html',\n\t\t\trender_args: args,\n\t\t\trow_render: 'views/policy/accrual_policy/AccrualPolicyInsideEditorRow.html',\n\t\t\tparent_controller: this\n\t\t} );\n\n\t\tinside_editor_div.append( this.editor );\n\t}\n\n\tonMilestoneRolloverHireDate() {\n\t\tif ( this.current_edit_record['milestone_rollover_hire_date'] === true ) {\n\t\t\tthis.detachElement( 'milestone_rollover_month' );\n\t\t\tthis.detachElement( 'milestone_rollover_day_of_month' );\n\t\t} else if ( this.current_edit_record['milestone_rollover_hire_date'] === false ) {\n\t\t\tthis.attachElement( 'milestone_rollover_month' );\n\t\t\tthis.attachElement( 'milestone_rollover_day_of_month' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonApplyFrequencyHireDate() {\n\t\tif ( this.current_edit_record['apply_frequency_id'] == 20 ) {\n\t\t\tthis.attachElement( 'apply_frequency_hire_date' );\n\t\t\tif ( this.current_edit_record['apply_frequency_hire_date'] === true ) {\n\t\t\t\tthis.detachElement( 'apply_frequency_month' );\n\t\t\t\tthis.detachElement( 'apply_frequency_day_of_month' );\n\t\t\t} else {\n\t\t\t\tthis.attachElement( 'apply_frequency_month' );\n\t\t\t\tthis.attachElement( 'apply_frequency_day_of_month' );\n\t\t\t}\n\n\t\t\tthis.editFieldResize();\n\t\t}\n\t}\n\n\tonApplyFrequencyChange( arg ) {\n\n\t\tif ( !Global.isSet( arg ) ) {\n\n\t\t\tif ( !Global.isSet( this.current_edit_record['apply_frequency_id'] ) ) {\n\t\t\t\tthis.current_edit_record['apply_frequency_id'] = 10;\n\t\t\t}\n\n\t\t\targ = this.current_edit_record['apply_frequency_id'];\n\t\t}\n\t\tthis.detachElement( 'apply_frequency_hire_date' );\n\t\tthis.detachElement( 'apply_frequency_month' );\n\t\tthis.detachElement( 'apply_frequency_day_of_month' );\n\t\tthis.detachElement( 'apply_frequency_day_of_week' );\n\t\tthis.detachElement( 'apply_frequency_quarter_month' );\n\n\t\tif ( arg == 20 ) {\n\t\t\tthis.onApplyFrequencyHireDate();\n\n\t\t} else if ( arg == 30 ) {\n\t\t\tthis.attachElement( 'apply_frequency_day_of_month' );\n\n\t\t} else if ( arg == 40 ) {\n\t\t\tthis.attachElement( 'apply_frequency_day_of_week' );\n\t\t} else if ( arg == 25 ) {\n\t\t\tthis.attachElement( 'apply_frequency_day_of_month' );\n\t\t\tthis.attachElement( 'apply_frequency_quarter_month' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonTypeChange() {\n\t\tif ( !Global.isSet( this.current_edit_record['type_id'] ) ) {\n\t\t\tthis.current_edit_record['type_id'] = 20;\n\t\t}\n\n\t\tif ( this.current_edit_record['type_id'] == 20 ) {\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[1] ).show();\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[2] ).show();\n\t\t\t}\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.second-column' ).css( 'display', 'block' );\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.first-column' ).removeClass( 'full-width-column' );\n\t\t\tthis.attachElement( 'separated_1' );\n\t\t\tthis.attachElement( 'apply_frequency_id' );\n\t\t\tthis.attachElement( 'minimum_employed_days' );\n\t\t\tthis.detachElement( 'contributing_shift_policy_id' );\n\t\t\tthis.attachElement( 'enable_opening_balance' );\n\t\t\tthis.attachElement( 'enable_pro_rate_initial_period' );\n\n\t\t\tthis.onApplyFrequencyChange();\n\t\t\tthis.onApplyFrequencyHireDate();\n\t\t} else if ( this.current_edit_record['type_id'] == 30 ) {\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[1] ).show();\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[2] ).show();\n\t\t\t}\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.second-column' ).css( 'display', 'block' );\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.first-column' ).removeClass( 'full-width-column' );\n\t\t\tthis.attachElement( 'contributing_shift_policy_id' );\n\t\t\tthis.attachElement( 'separated_1' );\n\t\t\tthis.attachElement( 'minimum_employed_days' );\n\t\t\tthis.detachElement( 'enable_opening_balance' );\n\t\t\tthis.detachElement( 'enable_pro_rate_initial_period' );\n\t\t\tthis.detachElement( 'apply_frequency_id' );\n\n\t\t\tthis.onApplyFrequencyChange( false );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t\tthis.setAccrualRageFormat();\n\t}\n\n\tsetAccrualRageFormat( type ) {\n\n\t\tvar len = this.editor.rows_widgets_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.editor.rows_widgets_array[i];\n\n\t\t\tif ( this.current_edit_record['type_id'] == 30 ) {\n\t\t\t\trow.accrual_rate_hourly.show();\n\t\t\t\trow.accrual_rate_yearly.hide();\n\t\t\t} else {\n\t\t\t\trow.accrual_rate_yearly.show();\n\t\t\t\trow.accrual_rate_hourly.hide();\n\t\t\t}\n\t\t}\n\n\t\tvar td = $( '.inside-editor-render' ).children().eq( 0 ).children().eq( 0 ).children().eq( 1 );\n\t\tif ( this.current_edit_record['type_id'] == 30 ) {\n\t\t\ttd.text( $.i18n._( 'Accrual Rate/Hour' ) );\n\t\t\t$( '.annual-maximum-time-td' ).show();\n\t\t} else {\n\t\t\ttd.text( $.i18n._( 'Accrual Rate/Year' ) );\n\t\t\t$( '.annual-maximum-time-td' ).hide();\n\t\t}\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\t\tif ( key === 'type_id' ) {\n\n\t\t\tthis.onTypeChange();\n\t\t}\n\n\t\tif ( key === 'apply_frequency_id' ) {\n\t\t\tthis.onApplyFrequencyChange();\n\t\t}\n\n\t\tif ( key === 'apply_frequency_hire_date' ) {\n\t\t\tthis.onApplyFrequencyHireDate();\n\t\t}\n\n\t\tif ( key === 'milestone_rollover_hire_date' ) {\n\t\t\tthis.onMilestoneRolloverHireDate();\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tisDisplayLengthOfServiceHoursBasedOn() {\n\t\tvar len = this.editor.rows_widgets_array.length;\n\n\t\tvar count = 0;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.editor.rows_widgets_array[i];\n\t\t\tif ( row['length_of_service_unit_id'].getValue() == 50 ) {\n\t\t\t\tcount++;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( count === 0 ) {\n\t\t\tthis.detachElement( 'length_of_service_contributing_pay_code_policy_id' );\n\t\t\tthis.edit_view_tab.find( '#tab_length_of_service_milestones' ).find( '.first-column' ).css( 'border', 'none' );\n\t\t} else {\n\t\t\tthis.attachElement( 'length_of_service_contributing_pay_code_policy_id' );\n\t\t\tthis.edit_view_tab.find( '#tab_length_of_service_milestones' ).find( '.first-column' ).css( 'border', '1px solid #c7c7c7' );\n\t\t}\n\t}\n\n\tinsideEditorSetValue( val ) {\n\t\tvar len = val.length;\n\n\t\tthis.removeAllRows();\n\t\tfor ( var i = 0; i < val.length; i++ ) {\n\t\t\tif ( Global.isSet( val[i] ) ) {\n\t\t\t\tvar row = val[i];\n\t\t\t\tif ( Global.isSet( this.parent_id ) ) {\n\t\t\t\t\trow['id'] = '';\n\t\t\t\t}\n\t\t\t\tthis.addRow( row );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tinsideEditorAddRow( data, index ) {\n\n\t\tif ( !data ) {\n\t\t\tdata = {};\n\t\t}\n\n\t\tvar row_id = ( data.id && this.parent_controller.current_edit_record.id ) ? data.id : TTUUID.generateUUID();\n\n\t\tvar $this = this;\n\t\tvar row = this.getRowRender(); //Get Row render\n\t\tvar render = this.getRender(); //get render, should be a table\n\t\tvar widgets = {}; //Save each row's widgets\n\n\t\t//Build row widgets\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\n\t\t// Length Of Service\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\tvar label_1 = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'After' ) + ': ' + ' </span>' );\n\t\tvar label_2 = $( '<span class=\\'widget-right-label\\'>&nbsp;</span>' );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'length_of_service', width: 30 } );\n\t\tform_item_input.setValue( data.length_of_service ? data.length_of_service : 0 );\n\t\tform_item_input.attr( 'milestone_id', row_id );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\tvar form_item_combobox = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_combobox.TComboBox( { field: 'length_of_service_unit_id' } );\n\t\tform_item_combobox.setSourceData( this.parent_controller.length_of_service_unit_array );\n\t\tform_item_combobox.setValue( data.length_of_service_unit_id ? data.length_of_service_unit_id : 10 );\n\n\t\tform_item_combobox.bind( 'formItemChange', function( e, target ) {\n\t\t\t$this.parent_controller.isDisplayLengthOfServiceHoursBasedOn();\n\t\t} );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_combobox );\n\n\t\twidgetContainer.append( label_1 );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label_2 );\n\t\twidgetContainer.append( form_item_combobox );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\twidgets[form_item_combobox.getField()] = form_item_combobox;\n\t\trow.children().eq( 0 ).append( widgetContainer );\n\n\t\t// Accrual Rate/Year\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tform_item_input.TTextInput( { field: 'accrual_rate_hourly', width: 90, need_parser_sec: false } );\n\t\tform_item_input.setPlaceHolder( '' );\n\t\tform_item_input.setValue( data.accrual_rate ? data.accrual_rate : '0.000' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 1 ).append( widgetContainer );\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'accrual_rate_yearly',\n\t\t\twidth: 90,\n\t\t\tmode: 'time_unit',\n\t\t\tneed_parser_sec: true\n\t\t} );\n\t\tform_item_input.setValue( data.accrual_rate ? data.accrual_rate : '0' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 1 ).append( widgetContainer );\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\tif ( data.type_id == 30 ) {\n\t\t\twidgets.accrual_rate_hourly.show();\n\t\t\twidgets.accrual_rate_yearly.hide();\n\t\t} else {\n\t\t\twidgets.accrual_rate_yearly.show();\n\t\t\twidgets.accrual_rate_hourly.hide();\n\t\t}\n\n\t\t//Annual Accrual Maximum\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'annual_maximum_time',\n\t\t\twidth: 90,\n\t\t\tmode: 'time_unit',\n\t\t\tneed_parser_sec: true\n\t\t} );\n\t\tform_item_input.setValue( data.annual_maximum_time ? data.annual_maximum_time : '0' );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 2 ).append( form_item_input );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t// Accrual Total Maximum\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'maximum_time', width: 90, mode: 'time_unit', need_parser_sec: true } );\n\t\tform_item_input.setValue( data.maximum_time ? data.maximum_time : '0' );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 3 ).append( form_item_input );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t// Annual Maximum Rollover\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'rollover_time', width: 90, mode: 'time_unit', need_parser_sec: true } );\n\t\tform_item_input.setValue( data.rollover_time ? data.rollover_time : '0' );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 4 ).append( form_item_input );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\tif ( typeof index != 'undefined' ) {\n\n\t\t\trow.insertAfter( $( render ).find( 'tr' ).eq( index ) );\n\t\t\tthis.rows_widgets_array.splice( ( index ), 0, widgets );\n\n\t\t} else {\n\t\t\t$( render ).append( row );\n\t\t\tthis.rows_widgets_array.push( widgets );\n\t\t}\n\n\t\tif ( this.parent_controller.is_viewing ) {\n\t\t\trow.find( '.control-icon' ).hide();\n\t\t}\n\n\t\tthis.addIconsEvent( row ); //Bind event to add and minus icon\n\t\tthis.removeLastRowLine();\n\n\t\tthis.parent_controller.setAccrualRageFormat();\n\t}\n\n\tinsideEditorRemoveRow( row ) {\n\t\tvar index = row[0].rowIndex - 1;\n\t\tvar remove_id = this.rows_widgets_array[index].length_of_service.attr( 'milestone_id' );\n\t\tif ( remove_id && TTUUID.isUUID( remove_id ) && remove_id != TTUUID.not_exist_id && remove_id != TTUUID.zero_id ) {\n\t\t\tthis.delete_ids.push( remove_id );\n\t\t}\n\t\trow.remove();\n\t\tthis.rows_widgets_array.splice( index, 1 );\n\t\tthis.removeLastRowLine();\n\n\t\tthis.parent_controller.isDisplayLengthOfServiceHoursBasedOn();\n\t}\n\n\tinsideEditorGetValue( current_edit_item_id ) {\n\t\tvar len = this.rows_widgets_array.length;\n\n\t\tvar result = [];\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.rows_widgets_array[i];\n\t\t\tvar accrual_rate = 0;\n\n\t\t\tif ( this.parent_controller.current_edit_record.type_id == 30 ) {\n\t\t\t\taccrual_rate = row.accrual_rate_hourly.getValue();\n\t\t\t} else {\n\t\t\t\taccrual_rate = row.accrual_rate_yearly.getValue();\n\t\t\t}\n\n\t\t\tvar data = {\n\t\t\t\tlength_of_service: row.length_of_service.getValue(),\n\t\t\t\tlength_of_service_unit_id: row.length_of_service_unit_id.getValue(),\n\t\t\t\taccrual_rate: accrual_rate,\n\t\t\t\tmaximum_time: row.maximum_time.getValue(),\n\t\t\t\trollover_time: row.rollover_time.getValue()\n\n\t\t\t};\n\n\t\t\tif ( this.parent_controller.current_edit_record.type_id == 30 ) {\n\t\t\t\tdata.annual_maximum_time = row.annual_maximum_time.getValue();\n\t\t\t}\n\n\t\t\tdata.id = row.length_of_service.attr( 'milestone_id' );\n\n\t\t\tdata.accrual_policy_id = current_edit_item_id;\n\t\t\tresult.push( data );\n\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\n\t\tthis.onApplyFrequencyChange();\n\n\t\tthis.onTypeChange();\n\n\t\tthis.onMilestoneRolloverHireDate();\n\n\t\tthis.initInsideEditorData();\n\t}\n\n\tinitInsideEditorData() {\n\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\n\t\tif ( this.mass_edit || ( ( !this.current_edit_record || !this.current_edit_record.id ) && !this.copied_record_id ) ) {\n\t\t\t$this.editor.removeAllRows();\n\t\t\t$this.editor.addRow();\n\t\t\t$this.isDisplayLengthOfServiceHoursBasedOn();\n\n\t\t} else {\n\t\t\targs.filter_data.accrual_policy_id = this.current_edit_record.id ? this.current_edit_record.id : this.copied_record_id;\n\t\t\tthis.copied_record_id = '';\n\t\t\tthis.accrual_policy_milestone_api.getAccrualPolicyMilestone( args, true, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar data = res.getResult();\n\t\t\t\t\tif ( data === true ) { // result is null\n\t\t\t\t\t\t$this.editor.addRow();\n\t\t\t\t\t} else if ( data.length > 0 ) {\n\t\t\t\t\t\t$this.editor.setValue( data );\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.isDisplayLengthOfServiceHoursBasedOn();\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n//\t\tif ( !accrual_policy_id ) {\n//\t\t\tthis.editor.removeAllRows();\n//\t\t\tthis.editor.addRow();\n//\n//\t\t} else {\n//\t\t\targs.filter_data.accrual_policy_id = accrual_policy_id;\n//\t\t\tthis.accrual_policy_milestone_api.getAccrualPolicyMilestone( args, true, {onResult: function( res ) {\n//\t\t\t\tvar data = res.getResult();\n//\t\t\t\tif ( data === true ) { // result is null\n//\t\t\t\t\t$this.editor.addRow();\n//\t\t\t\t} else if ( data.length > 0 ) {\n//\t\t\t\t\t$this.editor.setValue( data );\n//\t\t\t\t}\n//\n//\t\t\t}} );\n//\t\t}\n\t}\n\n\tsaveInsideEditorData( result, callBack ) {\n\t\tvar $this = this;\n\t\tvar data = this.editor.getValue( this.refresh_id );\n\t\tvar remove_ids = $this.editor.delete_ids;\n\t\tif ( remove_ids.length > 0 ) {\n\t\t\t$this.accrual_policy_milestone_api.deleteAccrualPolicyMilestone( remove_ids, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( res.isValid() ) {\n\t\t\t\t\t\t$this.editor.delete_ids = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t$this.accrual_policy_milestone_api.setAccrualPolicyMilestone( data, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tvar res_data = res.getResult();\n\t\t\t\tif ( Global.isSet( result ) ) {\n\t\t\t\t\tresult();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveResult( result ) {\n\t\tif ( result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\tthis.refresh_id = this.current_edit_record.id; // as add\n\t\t\t} else if ( result_data && TTUUID.isUUID( result_data ) && result_data != TTUUID.not_exist_id && result_data != TTUUID.zero_id ) {\n\t\t\t\tthis.refresh_id = result_data;\n\t\t\t}\n\n\t\t\tif ( this.is_mass_editing == false ) {\n\t\t\t\tvar $this = this;\n\t\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t\t$this.search();\n\t\t\t\t\t$this.onSaveDone( result );\n\n\t\t\t\t\t$this.removeEditView();\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.search();\n\t\t\t\tthis.onSaveDone( result );\n\t\t\t\tthis.removeEditView();\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.setErrorMenu();\n\t\t\tthis.setErrorTips( result );\n\t\t}\n\t}\n\n\tremoveEditView() {\n\n\t\tsuper.removeEditView();\n\t\tthis.sub_accrual_policy_user_modifier_view_controller = null;\n\t}\n\n\t// onSaveAndContinueResult( result ) {\n\t//\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t//\n\t// \t\t} else if ( result_data && TTUUID.isUUID( result_data ) && result_data != TTUUID.not_exist_id && result_data != TTUUID.zero_id ) { // as new\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onEditClick( $this.refresh_id, true );\n\t//\n\t// \t\t\t$this.onSaveAndContinueDone( result );\n\t//\n\t// \t\t} );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\t// onSaveAndNewResult: function( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t//\n\t// \t\t} else if ( result_data && TTUUID.isUUID( result_data ) && result_data != TTUUID.not_exist_id && result_data != TTUUID.zero_id ) { // as new\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onAddClick( true );\n\t//\n\t// \t\t} );\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\tonSaveAndCopyResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t} else if ( result_data && TTUUID.isUUID( result_data ) && result_data != TTUUID.not_exist_id && result_data != TTUUID.zero_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\n\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t$this.search( false );\n\t\t\t\t$this.onCopyAsNewClick();\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\t$this.setErrorTips( result );\n\t\t\t$this.setErrorMenu();\n\t\t}\n\t}\n\n\t// onSaveAndNextResult( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t//\n\t// \t\t} else if ( result_data && TTUUID.isUUID( result_data ) && result_data != TTUUID.not_exist_id && result_data != TTUUID.zero_id ) {\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.onRightArrowClick();\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onSaveAndNextDone( result );\n\t//\n\t// \t\t} );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\t_continueDoCopyAsNew() {\n\t\tLocalCacheData.current_doing_context_action = 'copy_as_new';\n\t\tthis.is_add = true;\n\t\tif ( Global.isSet( this.edit_view ) ) {\n\t\t\tfor ( var i = 0; i < this.editor.rows_widgets_array.length; i++ ) {\n\t\t\t\tthis.editor.rows_widgets_array[i].length_of_service.attr( 'milestone_id', '' );\n\t\t\t}\n\t\t}\n\t\tsuper._continueDoCopyAsNew();\n\t}\n\n\tonCopyAsNewResult( result ) {\n\t\tvar $this = this;\n\t\tvar result_data = result.getResult();\n\n\t\tif ( !result_data ) {\n\t\t\tTAlertManager.showAlert( $.i18n._( 'Record does not exist' ) );\n\t\t\t$this.onCancelClick();\n\t\t\treturn;\n\t\t}\n\n\t\t$this.openEditView(); // Put it here is to avoid if the selected one is not existed in data or have deleted by other pragram. in this case, the edit view should not be opend.\n\n\t\tresult_data = result_data[0];\n\n\t\tthis.copied_record_id = result_data.id;\n\n\t\tresult_data.id = '';\n\n\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t}\n\n\t\t$this.current_edit_record = result_data;\n\t\t$this.initEditView();\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tinitSubAccrualPolicyUserModifier() {\n\t\tvar $this = this;\n\n\t\tif ( Global.getProductEdition() <= 10 ) { //This must go before the current_edit_record.id check below, otherwise we return too early and it displays the wrong div.\n\t\t\tthis.edit_view_tab.find( '#tab_employee_settings' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.save-and-continue-div' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_employee_settings' ).find( '.first-column-sub-view' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t}\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.sub_accrual_policy_user_modifier_view_controller ) {\n\t\t\tthis.sub_accrual_policy_user_modifier_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_accrual_policy_user_modifier_view_controller.setDefaultMenu();\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_key = 'accrual_policy_id';\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.initData(); //Init data in this parent view\n\t\t\treturn;\n\t\t}\n\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tGlobal.loadScript( 'views/policy/accrual_policy/AccrualPolicyUserModifierViewController.js', function() {\n\t\t\t\tvar tab_accrual_policy = $this.edit_view_tab.find( '#tab_employee_settings' );\n\n\t\t\t\tvar firstColumn = tab_accrual_policy.find( '.first-column-sub-view' );\n\n\t\t\t\tGlobal.trackView( 'Sub' + 'AccrualPolicyUserModifier' + 'View' );\n\t\t\t\tAccrualPolicyUserModifierViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\t\t\t} );\n\t\t}\n\n\t\tfunction beforeLoadView( tpl ) {\n\t\t\tvar args = { parent_view: 'accrual_policy' };\n\t\t\treturn { template: _.template( tpl ), args: args };\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller = subViewController;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_key = 'accrual_policy_id';\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_view_controller = $this;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.initData(); //Init data in this parent view\n\t\t\t} );\n\t\t}\n\t}\n\n}\n"],"sourceRoot":""}