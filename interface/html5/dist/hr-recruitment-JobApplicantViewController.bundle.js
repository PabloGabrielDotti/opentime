(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["hr-recruitment-JobApplicantViewController"],{19:(e,i,t)=>{"use strict";t.r(i),t.d(i,{"JobApplicantViewController":()=>a});class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#job_applicant_view_container",status_array:null,identification_type_array:null,sex_array:null,available_days_of_week_array:null,available_hours_of_day_array:null,minimum_wage_type_array:null,boolean_array:null,document_object_type_id:null,country_array:null,province_array:null,e_province_array:null,i_province_array:null,company_api:null,sub_application_view_controller:null,sub_job_applicant_employment_view_controller:null,sub_job_applicant_reference_view_controller:null,sub_job_applicant_location_view_controller:null,sub_job_applicant_skill_view_controller:null,sub_job_applicant_education_view_controller:null,sub_job_applicant_membership_view_controller:null,sub_job_applicant_license_view_controller:null,sub_job_applicant_language_view_controller:null,user_api:null}),super(e)}init(e){this.edit_view_tpl="JobApplicantEditView.html",this.permission_id="job_applicant",this.viewId="JobApplicant",this.script_name="JobApplicantView",this.table_name_key="job_applicant",this.context_menu_name=$.i18n._("Job Applicants"),this.navigation_label=$.i18n._("Job Applicant")+":",this.api=TTAPI.APIJobApplicant,this.company_api=TTAPI.APICompany,this.user_api=TTAPI.APIUser,this.document_object_type_id=160,this.boolean_array=[$.i18n._("No"),$.i18n._("Yes")],this.render(),this.buildContextMenu(),this.initData(),this.setSelectRibbonMenuIfNecessary()}initOptions(e){var i=this,t=[{option_name:"status",field_name:null,api:null},{option_name:"identification_type",field_name:null,api:null},{option_name:"sex",field_name:null,api:null},{option_name:"available_days_of_week",field_name:null,api:null},{option_name:"available_hours_of_day",field_name:null,api:null},{option_name:"minimum_wage_type",field_name:null,api:null},{option_name:"country",field_name:"country",api:this.company_api}];this.initDropDownOptions(t,(function(i){e&&e(i)})),this.edit_only_mode||(i.basic_search_field_ui_dic.currently_employed.setSourceData(Global.buildRecordArray(this.boolean_array)),i.adv_search_field_ui_dic.currently_employed.setSourceData(Global.buildRecordArray(this.boolean_array)),i.basic_search_field_ui_dic.criminal_record.setSourceData(Global.buildRecordArray(this.boolean_array)),i.adv_search_field_ui_dic.criminal_record.setSourceData(Global.buildRecordArray(this.boolean_array)),i.basic_search_field_ui_dic.immediate_drug_test.setSourceData(Global.buildRecordArray(this.boolean_array)),i.adv_search_field_ui_dic.immediate_drug_test.setSourceData(Global.buildRecordArray(this.boolean_array)))}buildEditViewUI(){super.buildEditViewUI();var e=this,i={"tab_job_applicant":{"label":$.i18n._("Job Applicant")},"tab_background":{"label":$.i18n._("Background")},"tab_availability":{"label":$.i18n._("Availability")},"tab_history":{"label":$.i18n._("History"),"init_callback":"initSubHistoryView","display_on_mass_edit":!1},"tab_qualifications":{"label":$.i18n._("Qualifications"),"init_callback":"initSubQualificationView","display_on_mass_edit":!1},"tab_portal":{"label":$.i18n._("Portal")},"tab_applications":{"label":$.i18n._("Applications"),"init_callback":"initSubApplicationView","display_on_mass_edit":!1},"tab_attachment":!0,"tab_audit":!0};this.setTabModel(i),this.edit_only_mode||(this.navigation.AComboBox({api_class:TTAPI.APIJobApplicant,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_job_applicant",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation());var t=this.edit_view_tab.find("#tab_job_applicant"),a=t.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(a);var o=Global.loadWidgetByName(FormItemType.COMBO_BOX);o.TComboBox({field:"status_id"}),o.setSourceData(e.status_array),this.addEditFieldToColumn($.i18n._("Status"),o,a,""),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"first_name",width:200}),this.addEditFieldToColumn($.i18n._("First Name"),o,a),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"middle_name",width:200}),this.addEditFieldToColumn($.i18n._("Middle Name"),o,a),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"last_name",width:200}),this.addEditFieldToColumn($.i18n._("Last Name"),o,a),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"maiden_name",width:200}),this.addEditFieldToColumn($.i18n._("Maiden Name"),o,a),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"sex_id"}),o.setSourceData(e.sex_array),this.addEditFieldToColumn($.i18n._("Gender"),o,a),(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIEthnicGroup,allow_multiple_selection:!1,layout_name:"global_ethnic_group",field:"ethnic_group_id",set_empty:!0,show_search_inputs:!0}),this.addEditFieldToColumn($.i18n._("Ethnicity"),o,a),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"home_phone",width:200}),this.addEditFieldToColumn($.i18n._("Phone"),o,a),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"mobile_phone",width:200}),this.addEditFieldToColumn($.i18n._("Mobile Phone"),o,a),(o=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"currently_employed"}),this.addEditFieldToColumn($.i18n._("Currently Employed"),o,a),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"minimum_wage_type_id"}),o.setSourceData(e.minimum_wage_type_array),this.addEditFieldToColumn($.i18n._("Expected Wage Type"),o,a),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"minimum_wage",width:100}),this.addEditFieldToColumn($.i18n._("Expected Wage"),o,a,"");var n=t.find(".second-column");this.edit_view_tabs[0].push(n),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"email",width:200}),this.addEditFieldToColumn($.i18n._("Email"),o,n,""),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address1",width:"100%"}),this.addEditFieldToColumn($.i18n._("Address(Line 1)"),o,n),o.parent().width("45%"),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"address2",width:"100%"}),this.addEditFieldToColumn($.i18n._("Address(Line 2)"),o,n),o.parent().width("45%"),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"city",width:200}),this.addEditFieldToColumn($.i18n._("City"),o,n),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"country",set_empty:!0}),o.setSourceData(e.country_array),this.addEditFieldToColumn($.i18n._("Country"),o,n),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"province"}),o.setSourceData([]),this.addEditFieldToColumn($.i18n._("Province/State"),o,n),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"postal_code",width:90}),this.addEditFieldToColumn($.i18n._("Postal/ZIP Code"),o,n),(o=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"birth_date"}),this.addEditFieldToColumn($.i18n._("Birth Date"),o,n),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"sin",width:200}),this.addEditFieldToColumn($.i18n._("SIN/SSN"),o,n),(o=Global.loadWidgetByName(FormItemType.TAG_INPUT)).TTagInput({field:"tag",object_type_id:360}),this.addEditFieldToColumn($.i18n._("Tags"),o,n,"",null,null,!0);var l=this.edit_view_tab.find("#tab_background"),_=l.find(".first-column");this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(_),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"identification_type_id"}),o.setSourceData(e.identification_type_array),this.addEditFieldToColumn($.i18n._("Identification Type"),o,_,""),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"identification_number",width:300}),this.addEditFieldToColumn($.i18n._("Identification Number"),o,_),(o=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"identification_expire_date"}),this.addEditFieldToColumn($.i18n._("Identification Expires"),o,_,"",null),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"identification_country"}),o.setSourceData(e.country_array),this.addEditFieldToColumn($.i18n._("Identification Country"),o,_),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"identification_province"}),o.setSourceData([]),this.addEditFieldToColumn($.i18n._("Identification Province/State"),o,_,"");var r=l.find(".second-column");this.edit_view_tabs[1].push(r),(o=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"immediate_drug_test"}),this.addEditFieldToColumn($.i18n._("Available for Immediate Drug Test"),o,r,""),(o=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"criminal_record"}),this.addEditFieldToColumn($.i18n._("Criminal Record"),o,r),(o=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"criminal_record_description"}),this.addEditFieldToColumn($.i18n._("Describe criminal convictions"),o,r,"",null,null,!0);var c=this.edit_view_tab.find("#tab_availability"),s=c.find(".first-column");this.edit_view_tabs[2]=[],this.edit_view_tabs[2].push(s),(o=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"available_start_date"}),this.addEditFieldToColumn($.i18n._("Available Date"),o,s,"",null),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"available_minimum_hours_per_week",width:30}),this.addEditFieldToColumn($.i18n._("Available Hours Per Week (Minimum)"),o,s),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"available_maximum_hours_per_week",width:30}),this.addEditFieldToColumn($.i18n._("Available Hours Per Week (Maximum)"),o,s,"");var d=c.find(".second-column");this.edit_view_tabs[2].push(d),(o=(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"available_days_of_week",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column"})).setSourceData(e.available_days_of_week_array),this.addEditFieldToColumn($.i18n._("Available Days Of Week"),o,d,""),(o=(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"available_hours_of_day",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column"})).setSourceData(e.available_hours_of_day_array),this.addEditFieldToColumn($.i18n._("Available Hours"),o,d,"");var u=this.edit_view_tab.find("#tab_portal").find(".first-column");this.edit_view_tabs[5]=[],this.edit_view_tabs[5].push(u),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"user_name",width:200}),this.addEditFieldToColumn($.i18n._("User Name"),o,u,""),(o=Global.loadWidgetByName(FormItemType.PASSWORD_INPUT)).TPasswordInput({field:"password",width:200}),this.addEditFieldToColumn($.i18n._("Password"),o,u),(o=Global.loadWidgetByName(FormItemType.PASSWORD_INPUT)).TPasswordInput({field:"password_confirm",width:200}),this.addEditFieldToColumn($.i18n._("Password (Confirm)"),o,u,"")}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:$.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("First Name"),in_column:1,field:"first_name",multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Last Name"),in_column:1,field:"last_name",multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Phone"),field:"any_phone",basic_search:!0,adv_search:!0,in_column:2,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Email"),field:"email",basic_search:!0,adv_search:!0,in_column:2,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Country"),in_column:1,field:"country",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.COMBO_BOX}),new SearchField({label:$.i18n._("Province/State"),in_column:1,field:"province",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("City"),field:"city",basic_search:!1,adv_search:!0,in_column:1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Resume Keywords"),in_column:1,field:"resume_text",multiple:!1,basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Criminal Record"),in_column:2,field:"criminal_record",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Immediate Drug Test"),in_column:2,field:"immediate_drug_test",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Hours/Week (Min)"),field:"available_minimum_hours_per_week",basic_search:!1,adv_search:!0,in_column:2,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Hours/Week (Max)"),field:"available_maximum_hours_per_week",basic_search:!1,adv_search:!0,in_column:2,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:$.i18n._("Currently Employed"),in_column:3,field:"currently_employed",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Gender"),in_column:3,field:"sex_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Tags"),field:"tag",basic_search:!0,adv_search:!0,in_column:3,object_type_id:360,form_item_type:FormItemType.TAG_INPUT}),new SearchField({label:$.i18n._("Created By"),in_column:3,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:$.i18n._("Updated By"),in_column:3,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX})]}onFormItemChange(e,i){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var t=e.getField();switch(this.current_edit_record[t]=e.getValue(),t){case"country":var a=this.edit_view_ui_dic.province;a.setValue(null);break;case"identification_country":(a=this.edit_view_ui_dic.identification_province).setValue(null)}return"country"==t?(this.eSetProvince(this.edit_view_ui_dic.country.getValue(),!0),this.clearErrorTips(),void this.setEditMenu()):"identification_country"===t?(this.iSetProvince(this.edit_view_ui_dic.identification_country.getValue(),!0),this.clearErrorTips(),void this.setEditMenu()):void(i||this.validate())}setCurrentEditRecordData(){for(var e in this.current_edit_record){var i=this.edit_view_ui_dic[e];if(Global.isSet(i))switch(e){case"country":this.setCountryValue(i,e);break;case"identification_country":this.current_edit_record.identification_province?this.iSetProvince(this.current_edit_record[e]):this.iSetProvince(this.current_edit_record[e],!0),i.setValue(this.current_edit_record[e]);break;default:i.setValue(this.current_edit_record[e])}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onSetSearchFilterFinished(){if(1===this.search_panel.getSelectTabIndex()){var e=this.adv_search_field_ui_dic.country.getValue();this.setProvince(e)}}onBuildAdvUIFinished(){this.adv_search_field_ui_dic.country.change($.proxy((function(){var e=this.adv_search_field_ui_dic.country.getValue();this.setProvince(e),this.adv_search_field_ui_dic.province.setValue(null)}),this))}setProvince(e,i){var t=this;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),t.province_array=Global.buildRecordArray(e),t.adv_search_field_ui_dic.province.setSourceData(t.province_array)}}):(t.province_array=[],this.adv_search_field_ui_dic.province.setSourceData([]))}eSetProvince(e,i){var t=this,a=t.edit_view_ui_dic.province;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),t.e_province_array=Global.buildRecordArray(e),i&&t.e_province_array.length>0&&(t.current_edit_record.province=t.e_province_array[0].value,a.setValue(t.current_edit_record.province)),a.setSourceData(t.e_province_array)}}):(t.e_province_array=[],a.setSourceData([]))}iSetProvince(e,i){var t=this,a=t.edit_view_ui_dic.identification_province;e&&"-1"!==e&&"0"!==e?this.company_api.getOptions("province",e,{onResult:function(e){(e=e.getResult())||(e=[]),t.i_province_array=Global.buildRecordArray(e),i&&t.i_province_array.length>0&&(t.current_edit_record.identification_province=t.i_province_array[0].value,a.setValue(t.current_edit_record.identification_province)),a.setSourceData(t.i_province_array)}}):(t.i_province_array=[],a.setSourceData([]))}getCustomContextMenuModel(){return{exclude:[ContextMenuIconName.copy],include:[{label:$.i18n._("Job<br>Applications"),id:ContextMenuIconName.job_application,group:"navigation",icon:"jobapplications-35x35.png"},{label:$.i18n._("Hire Applicant"),id:ContextMenuIconName.edit_employee,group:"navigation",icon:Icons.employee},{label:$.i18n._("Map"),id:ContextMenuIconName.map,group:"navigation",icon:Icons.map}]}}onCustomContextClick(e){switch(e){case ContextMenuIconName.map:this.onMapClick();break;case ContextMenuIconName.export_excel:case ContextMenuIconName.edit_employee:case ContextMenuIconName.job_application:this.onNavigationClick(e)}}onMapClick(){if(Global.getProductEdition()>=15){this.is_viewing=!1,ProgressBar.showProgressBar();var e={filter_columns:{id:!0,first_name:!0,last_name:!0,address1:!0,address2:!0,city:!0,province:!0,country:!0,postal_code:!0,latitude:!0,longitude:!0}},i=this.getGridSelectIdArray();e.filter_data=Global.convertLayoutFilterToAPIFilter(this.select_layout),i.length>0&&(e.filter_data.id=i);var a=this.api.getJobApplicant(e,{async:!1}).getResult();this.is_mass_editing||Promise.all([t.e("vendors-node_modules_leaflet-draw_dist_leaflet_draw_js-node_modules_leaflet_dist_leaflet-src_js"),t.e("vendors-node_modules_leaflet_dist_images_marker-icon-2x_png-node_modules_leaflet_dist_images_-e2a419"),t.e("interface_html5_framework_leaflet_leaflet-timetrex_js"),t.e("leaflet-timetrex")]).then(t.bind(t,6889)).then((e=>{var i=e.TTConvertMapData.processBasicFromGenericViewController(a);IndexViewController.openEditView(this,"Map",i)})).catch(Global.importErrorHandler)}}openEditView(e){if(void 0===e&&this.edit_only_mode)this.onCancelClick(!0,!0);else if(this.edit_only_mode&&e){var i=this;this.initOptions((function(){i.edit_view||i.initEditViewUI(i.viewId,i.edit_view_tpl);var t={filter_data:{id:e}};i.api.getJobApplicant(t,{onResult:function(e){(e=e.getResult()[0])?(i.current_edit_record=e,i.initEditView()):(TAlertManager.showAlert($.i18n._("Invalid job applicant")),i.onCancelClick())}})}))}else this.edit_view||this.initEditViewUI(this.viewId,this.edit_view_tpl)}setDefaultMenu(e){if(this.context_menu_array){Global.isSet(e)&&e||this.selectContextMenu(),this.setTotalDisplaySpan();for(var i=this.context_menu_array.length,t=this.getGridSelectIdArray().length,a=0;a<i;a++){var o=$(this.context_menu_array[a]),n=$(o.find(".ribbon-sub-menu-icon")).attr("id");switch(o.removeClass("invisible-image"),o.removeClass("disable-image"),n){case ContextMenuIconName.add:this.setDefaultMenuAddIcon(o,t);break;case ContextMenuIconName.edit:this.setDefaultMenuEditIcon(o,t);break;case ContextMenuIconName.view:this.setDefaultMenuViewIcon(o,t);break;case ContextMenuIconName.mass_edit:this.setDefaultMenuMassEditIcon(o,t);break;case ContextMenuIconName.copy:this.setDefaultMenuCopyIcon(o,t);break;case ContextMenuIconName.delete_icon:this.setDefaultMenuDeleteIcon(o,t);break;case ContextMenuIconName.delete_and_next:this.setDefaultMenuDeleteAndNextIcon(o,t);break;case ContextMenuIconName.save:this.setDefaultMenuSaveIcon(o,t);break;case ContextMenuIconName.save_and_next:this.setDefaultMenuSaveAndNextIcon(o,t);break;case ContextMenuIconName.save_and_continue:this.setDefaultMenuSaveAndContinueIcon(o,t);break;case ContextMenuIconName.save_and_new:this.setDefaultMenuSaveAndAddIcon(o,t);break;case ContextMenuIconName.save_and_copy:this.setDefaultMenuSaveAndCopyIcon(o,t);break;case ContextMenuIconName.copy_as_new:this.setDefaultMenuCopyAsNewIcon(o,t);break;case ContextMenuIconName.cancel:this.setDefaultMenuCancelIcon(o,t);break;case ContextMenuIconName.edit_employee:this.setDefaultMenuEditIcon(o,t,"user");break;case ContextMenuIconName.job_application:this.setDefaultMenuEditIcon(o,t,"job_application");break;case ContextMenuIconName.export_excel:this.setDefaultMenuExportIcon(o,t);break;case ContextMenuIconName.map:this.setDefaultMenuMapIcon(o)}}this.setContextMenuGroupVisibility()}}setDefaultMenuEmployeeIcon(e,i,t){this.viewPermissionValidate(t)&&!this.edit_only_mode||e.addClass("invisible-image"),1===i?e.removeClass("disable-image"):e.addClass("disable-image")}setEditMenu(){this.selectContextMenu();for(var e=this.context_menu_array.length,i=0;i<e;i++){var t=$(this.context_menu_array[i]),a=$(t.find(".ribbon-sub-menu-icon")).attr("id");if(t.removeClass("disable-image"),this.is_mass_editing)switch(a){case ContextMenuIconName.save:this.setEditMenuSaveIcon(t);break;case ContextMenuIconName.cancel:break;default:t.addClass("disable-image")}else switch(a){case ContextMenuIconName.add:this.setEditMenuAddIcon(t);break;case ContextMenuIconName.edit:this.setEditMenuEditIcon(t);break;case ContextMenuIconName.view:this.setEditMenuViewIcon(t);break;case ContextMenuIconName.mass_edit:this.setEditMenuMassEditIcon(t);break;case ContextMenuIconName.copy:this.setEditMenuCopyIcon(t);break;case ContextMenuIconName.delete_icon:this.setEditMenuDeleteIcon(t);break;case ContextMenuIconName.delete_and_next:this.setEditMenuDeleteAndNextIcon(t);break;case ContextMenuIconName.save:this.setEditMenuSaveIcon(t);break;case ContextMenuIconName.save_and_continue:this.setEditMenuSaveAndContinueIcon(t);break;case ContextMenuIconName.save_and_new:this.setEditMenuSaveAndAddIcon(t);break;case ContextMenuIconName.save_and_next:this.setEditMenuSaveAndNextIcon(t);break;case ContextMenuIconName.save_and_copy:this.setEditMenuSaveAndCopyIcon(t);break;case ContextMenuIconName.copy_as_new:this.setEditMenuCopyAndAddIcon(t);break;case ContextMenuIconName.cancel:break;case ContextMenuIconName.edit_employee:this.setEditMenuNavEditIcon(t,"user");break;case ContextMenuIconName.job_application:this.setEditMenuNavEditIcon(t,"job_application");break;case ContextMenuIconName.export_excel:this.setDefaultMenuExportIcon(t);break;case ContextMenuIconName.map:this.setEditMenuMapIcon(t)}}this.setContextMenuGroupVisibility()}setEditMenuMapIcon(e){e.addClass("invisible-image")}onNavigationClick(e){var i,t,a,o=this;switch(e){case ContextMenuIconName.edit_employee:function n(e){o.user_api.getUserDefaultData({onResult:function(i){var t=i.getResult();e(t)}})}_={filter_data:{}},Global.isSet(this.current_edit_record)?n((function(e){for(var i in e)o.current_edit_record[i]||(o.current_edit_record[i]=e[i]);IndexViewController.openEditView(o,"Employee",o.current_edit_record)})):n((function(e){i={},t=o.getGridSelectIdArray(),t.length>0&&(a=t[0],i.filter_data={},i.filter_data.id=[a],o.api["get"+o.api.key_name](i,{onResult:function(i){var t=i.getResult();for(var a in t||(t=[]),t=t[0],e)t[a]||(t[a]=e[a]);IndexViewController.openEditView(o,"Employee",t)}}))}));break;case ContextMenuIconName.export_excel:this.onExportClick("export"+this.api.key_name);break;case ContextMenuIconName.job_application:var l,_={filter_data:{}},r=this.getSelectedItem();null!=r&&(l=r.id),_.filter_data.job_applicant_id=l,Global.addViewTab(this.viewId,$.i18n._("Job Applicant"),window.location.href),IndexViewController.goToView("JobApplication",_)}}initSubHistoryView(){var e=this;function i(){}function t(i){$(i.el).find(".sub-view-title").text($.i18n._("Employment")),e.sub_job_applicant_employment_view_controller=i,e.sub_job_applicant_employment_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_employment_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_employment_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_employment_view_controller.parent_view_controller=e,e.sub_job_applicant_employment_view_controller.postInit=function(){this.initData()}}function a(i){$(i.el).find(".sub-view-title").text($.i18n._("Reference")),e.sub_job_applicant_reference_view_controller=i,e.sub_job_applicant_reference_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_reference_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_reference_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_reference_view_controller.parent_view_controller=e,e.sub_job_applicant_reference_view_controller.postInit=function(){this.initData()}}function o(i){$(i.el).find(".sub-view-title").text($.i18n._("Location")),e.sub_job_applicant_location_view_controller=i,e.sub_job_applicant_location_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_location_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_location_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_location_view_controller.parent_view_controller=e,e.sub_job_applicant_location_view_controller.postInit=function(){this.initData()}}this.current_edit_record.id?($("#tab_history").css("opacity",0),TTPromise.add("JobApplicant_History_Tab","initSubHistoryView"),TTPromise.add("JobApplicant_History_Tab","JobApplicantEmploymentViewController"),Global.loadScript("views/hr/recruitment/JobApplicantEmploymentViewController.js",(function(){var a=e.edit_view_tab.find("#tab_history").find(".first-column-sub-view").find(".first-sub-view");Global.trackView("SubJobApplicantEmploymentView"),JobApplicantEmploymentViewController.loadSubView(a,i,t)})),TTPromise.add("JobApplicant_History_Tab","JobApplicantReferenceViewController"),Global.loadScript("views/hr/recruitment/JobApplicantReferenceViewController.js",(function(){var t=e.edit_view_tab.find("#tab_history").find(".first-column-sub-view").find(".second-sub-view");Global.trackView("SubJobApplicantReferenceView"),JobApplicantReferenceViewController.loadSubView(t,i,a)})),TTPromise.add("JobApplicant_History_Tab","JobApplicantLocationViewController"),Global.loadScript("views/hr/recruitment/JobApplicantLocationViewController.js",(function(){var t=e.edit_view_tab.find("#tab_history").find(".first-column-sub-view").find(".third-sub-view");Global.trackView("SubJobApplicantLocationView"),JobApplicantLocationViewController.loadSubView(t,i,o)})),TTPromise.wait(null,null,(function(){$("#tab_history").css("opacity",1)})),TTPromise.resolve("JobApplicant_History_Tab","initSubHistoryView")):TTPromise.resolve("BaseViewController","onTabShow")}initSubQualificationView(){var e=this;function i(){}function t(i){$(i.el).find(".sub-view-title").text($.i18n._("Skills")),e.sub_job_applicant_skill_view_controller=i,e.sub_job_applicant_skill_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_skill_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_skill_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_skill_view_controller.parent_view_controller=e,e.sub_job_applicant_skill_view_controller.postInit=function(){this.initData()}}function a(i){$(i.el).find(".sub-view-title").text($.i18n._("Licenses")),e.sub_job_applicant_license_view_controller=i,e.sub_job_applicant_license_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_license_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_license_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_license_view_controller.parent_view_controller=e,e.sub_job_applicant_license_view_controller.postInit=function(){this.initData()}}function o(i){$(i.el).find(".sub-view-title").text($.i18n._("Languages")),e.sub_job_applicant_language_view_controller=i,e.sub_job_applicant_language_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_language_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_language_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_language_view_controller.parent_view_controller=e,e.sub_job_applicant_language_view_controller.postInit=function(){this.initData()}}function n(i){$(i.el).find(".sub-view-title").text($.i18n._("Education")),e.sub_job_applicant_education_view_controller=i,e.sub_job_applicant_education_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_education_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_education_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_education_view_controller.parent_view_controller=e,e.sub_job_applicant_education_view_controller.postInit=function(){this.initData()}}function l(i){$(i.el).find(".sub-view-title").text($.i18n._("Memberships")),e.sub_job_applicant_membership_view_controller=i,e.sub_job_applicant_membership_view_controller.parent_key="job_applicant_id",e.sub_job_applicant_membership_view_controller.parent_value=e.current_edit_record.id,e.sub_job_applicant_membership_view_controller.parent_edit_record=e.current_edit_record,e.sub_job_applicant_membership_view_controller.parent_view_controller=e,e.sub_job_applicant_membership_view_controller.postInit=function(){this.initData()}}this.current_edit_record.id?($("#tab_qualifications .first-column-sub-view").css("opacity","0"),TTPromise.add("JobApplicant_Qualifications_Tab","initSubQualificationView"),TTPromise.add("JobApplicant_Qualifications_Tab","JobApplicantSkillViewController"),Global.loadScript("views/hr/recruitment/JobApplicantSkillViewController.js",(function(){var a=e.edit_view_tab.find("#tab_qualifications").find(".first-column-sub-view").find(".first-sub-view");Global.trackView("SubJobApplicantSkillView"),JobApplicantSkillViewController.loadSubView(a,i,t)})),TTPromise.add("JobApplicant_Qualifications_Tab","JobApplicantEducationViewController"),Global.loadScript("views/hr/recruitment/JobApplicantEducationViewController.js",(function(){var t=e.edit_view_tab.find("#tab_qualifications").find(".first-column-sub-view").find(".second-sub-view");Global.trackView("SubJobApplicantEducationView"),JobApplicantEducationViewController.loadSubView(t,i,n)})),TTPromise.add("JobApplicant_Qualifications_Tab","JobApplicantMembershipViewController"),Global.loadScript("views/hr/recruitment/JobApplicantMembershipViewController.js",(function(){var t=e.edit_view_tab.find("#tab_qualifications").find(".first-column-sub-view").find(".third-sub-view");Global.trackView("SubJobApplicantMembershipView"),JobApplicantMembershipViewController.loadSubView(t,i,l)})),TTPromise.add("JobApplicant_Qualifications_Tab","JobApplicantLicenseViewController"),Global.loadScript("views/hr/recruitment/JobApplicantLicenseViewController.js",(function(){var t=e.edit_view_tab.find("#tab_qualifications").find(".first-column-sub-view").find(".forth-sub-view");Global.trackView("SubJobApplicantLicenseView"),JobApplicantLicenseViewController.loadSubView(t,i,a)})),TTPromise.add("JobApplicant_Qualifications_Tab","JobApplicantLanguageViewController"),Global.loadScript("views/hr/recruitment/JobApplicantLanguageViewController.js",(function(){var t=e.edit_view_tab.find("#tab_qualifications").find(".first-column-sub-view").find(".fifth-sub-view");Global.trackView("SubJobApplicantLanguageView"),JobApplicantLanguageViewController.loadSubView(t,i,o)})),TTPromise.wait(null,null,(function(){$("#contentContainer").trigger("resize"),$("#tab_qualifications .first-column-sub-view").css("opacity","1")})),TTPromise.resolve("JobApplicant_Qualifications_Tab","initSubQualificationView")):TTPromise.resolve("BaseViewController","onTabShow")}initSubApplicationView(){var e=this;if(this.current_edit_record.id){if(this.sub_application_view_controller)return this.sub_application_view_controller.buildContextMenu(!0),this.sub_application_view_controller.setDefaultMenu(),e.sub_application_view_controller.parent_value=e.current_edit_record.id,e.sub_application_view_controller.parent_edit_record=e.current_edit_record,void e.sub_application_view_controller.initData();TTPromise.add("initSubApplicationView","loadscript"),Global.loadScript("views/hr/recruitment/JobApplicationViewController.js",(function(){var a=e.edit_view_tab.find("#tab_applications").find(".first-column-sub-view");Global.trackView("SubJobApplicationView"),JobApplicationViewController.loadSubView(a,i,t)}))}else TTPromise.resolve("BaseViewController","onTabShow");function i(){}function t(i){e.sub_application_view_controller=i,e.sub_application_view_controller.parent_key="job_applicant_id",e.sub_application_view_controller.parent_value=e.current_edit_record.id,e.sub_application_view_controller.parent_edit_record=e.current_edit_record,e.sub_application_view_controller.parent_view_controller=e,e.sub_application_view_controller.postInit=function(){this.initData(),TTPromise.resolve("initSubApplicationView","loadscript")}}}removeEditView(){super.removeEditView(),this.sub_application_view_controller=null,this.sub_job_applicant_employment_view_controller=null,this.sub_job_applicant_reference_view_controller=null,this.sub_job_applicant_location_view_controller=null,this.sub_job_applicant_skill_view_controller=null,this.sub_job_applicant_license_view_controller=null,this.sub_job_applicant_language_view_controller=null,this.sub_job_applicant_education_view_controller=null,this.sub_job_applicant_membership_view_controller=null}getFilterColumnsFromDisplayColumns(e,i){return null==e&&(e={}),e.latitude=!0,e.longitude=!0,this._getFilterColumnsFromDisplayColumns(e,i)}}}}]);
//# sourceMappingURL=hr-recruitment-JobApplicantViewController.bundle.js.map?v=84a8fb86af32765ed692