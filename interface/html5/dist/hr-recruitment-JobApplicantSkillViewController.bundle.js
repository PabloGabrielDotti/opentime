(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["hr-recruitment-JobApplicantSkillViewController"],{9962:(e,i,t)=>{"use strict";t.r(i),t.d(i,{"JobApplicantSkillViewController":()=>l});class l extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#job_applicant_skill_view_container",proficiency_array:null,qualification_array:null,qualification_api:null,sub_view_grid_autosize:!0,sub_view_mode:!0}),super(e)}initialize(e){super.initialize(e),this.edit_view_tpl="JobApplicantSkillEditView.html",this.permission_id="job_applicant",this.viewId="JobApplicantSkill",this.script_name="JobApplicantSkillView",this.table_name_key="job_applicant_skill",this.context_menu_name=$.i18n._("Skills"),this.navigation_label=$.i18n._("Skill")+":",this.api=TTAPI.APIJobApplicantSkill,this.qualification_api=TTAPI.APIQualification,this.render(),this.sub_view_mode||this.initData()}showNoResultCover(e){super.showNoResultCover(!!this.sub_view_mode)}onGridSelectRow(){this.sub_view_mode?(this.buildContextMenu(!0),this.cancelOtherSubViewSelectedStatus()):this.buildContextMenu(),this.setDefaultMenu()}onGridSelectAll(){this.sub_view_mode&&(this.buildContextMenu(!0),this.cancelOtherSubViewSelectedStatus()),this.setDefaultMenu()}cancelOtherSubViewSelectedStatus(){switch(!0){case void 0!==this.parent_view_controller.sub_job_applicant_license_view_controller:this.parent_view_controller.sub_job_applicant_license_view_controller.unSelectAll();case void 0!==this.parent_view_controller.sub_job_applicant_language_view_controller:this.parent_view_controller.sub_job_applicant_language_view_controller.unSelectAll();case void 0!==this.parent_view_controller.sub_job_applicant_education_view_controller:this.parent_view_controller.sub_job_applicant_education_view_controller.unSelectAll();case void 0!==this.parent_view_controller.sub_job_applicant_membership_view_controller:this.parent_view_controller.sub_job_applicant_membership_view_controller.unSelectAll()}}onMassEditClick(){var e=this;e.is_add=!1,e.is_viewing=!1,e.is_mass_editing=!0,LocalCacheData.current_doing_context_action="mass_edit",e.openEditView();var i={},t=this.getGridSelectIdArray();t.length;this.mass_edit_record_ids=[],$.each(t,(function(i,t){e.mass_edit_record_ids.push(t)})),i.filter_data={},i.filter_data.id=this.mass_edit_record_ids,this.api["getCommon"+this.api.key_name+"Data"](i,{onResult:function(i){var t=i.getResult();e.unique_columns={},e.linked_columns={},t||(t=[]),e.sub_view_mode&&e.parent_key&&(t[e.parent_key]=e.parent_value),e.current_edit_record=t,e.initEditView()}})}initOptions(){var e=this;this.initDropDownOption("proficiency");var i={},t={type_id:[10]};i.filter_data=t,this.qualification_api.getQualification(i,{onResult:function(i){i=i.getResult(),e.qualification_array=i}})}buildEditViewUI(){super.buildEditViewUI();var e={"tab_skill":{"label":$.i18n._("Skill")},"tab_audit":!0};this.setTabModel(e),this.navigation.AComboBox({api_class:TTAPI.APIJobApplicantSkill,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_jobApplicantSkill",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i,t,l,a=this.edit_view_tab.find("#tab_skill").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(a);var n={},s={type_id:[10]};n.filter_data=s,(i=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APIQualification,allow_multiple_selection:!1,layout_name:"global_qualification",show_search_inputs:!0,set_empty:!0,field:"qualification_id"}),i.setDefaultArgs(n),this.addEditFieldToColumn($.i18n._("Skill"),i,a,""),(i=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"proficiency_id",set_empty:!0}),i.setSourceData(this.proficiency_array),this.addEditFieldToColumn($.i18n._("Proficiency"),i,a),(i=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"first_used_date"}),this.addEditFieldToColumn($.i18n._("First Used Date"),i,a),(i=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"last_used_date"}),this.addEditFieldToColumn($.i18n._("Last Used Date"),i,a);var _=[];(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"experience",width:50}),_.push(i),t=$('<div class="widget-h-box"></div>'),l=$("<span class='widget-right-label'> "+$.i18n._("Automatic")+"</span>"),t.append(i),t.append(l),(i=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"enable_calc_experience"}),_.push(i),t.append(i),this.addEditFieldToColumn($.i18n._("Years Experience"),_,a,"",t),(i=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"expiry_date"}),this.addEditFieldToColumn($.i18n._("Expiry Date"),i,a,"",null),(i=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),i,a,"",null,null,!0),i.parent().width("45%"),(i=Global.loadWidgetByName(FormItemType.TAG_INPUT)).TTagInput({field:"tag",object_type_id:391}),this.addEditFieldToColumn($.i18n._("Tags"),i,a,"",null,null,!0)}setEditViewDataDone(){super.setEditViewDataDone(),this.current_edit_record.enable_calc_experience?this.edit_view_ui_dic.experience.setEnabled(!1):this.edit_view_ui_dic.experience.setEnabled(!0)}onFormItemChange(e,i){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var t=e.getField(),l=e.getValue();switch(t){case"enable_calc_experience":l?this.calcExperience():this.edit_view_ui_dic.experience.setEnabled(!0);break;case"last_used_date":case"first_used_date":this.current_edit_record.enable_calc_experience&&this.calcExperience()}this.current_edit_record[t]=l,i||this.validate()}calcExperience(){this.edit_view_ui_dic.experience.setEnabled(!1);var e=this.edit_view_ui_dic.first_used_date.getValue(),i=this.edit_view_ui_dic.last_used_date.getValue();if(i=i||(new Date).format(),""!==e&&""!==i){var t=this.api.calcExperience(e,i,{async:!1});if(t){var l=t.getResult();this.edit_view_ui_dic.experience.setValue(l)}}else this.edit_view_ui_dic.experience.setValue(0)}onAddClick(){this.sub_view_mode&&this.buildContextMenu(!0),super.onAddClick()}searchDone(){super.searchDone(),TTPromise.resolve("JobApplicant_Qualifications_Tab","JobApplicantSkillViewController")}}l.loadSubView=function(e,i,t){Global.loadViewSource("JobApplicantSkill","SubJobApplicantSkillView.html",(function(l){var a=_.template(l);Global.isSet(i)&&i(),Global.isSet(e)&&(e.html(a({})),Global.isSet(t)&&t(sub_job_applicant_skill_view_controller))}))}}}]);
//# sourceMappingURL=hr-recruitment-JobApplicantSkillViewController.bundle.js.map?v=dd3e303404d96eb67cf9