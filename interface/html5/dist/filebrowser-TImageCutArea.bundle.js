(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["filebrowser-TImageCutArea"],{8453:()=>{var e;(e=jQuery).fn.TImageCutArea=function(t){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var a,r=e.extend({},e.fn.TImageCutArea.defaults,t),n=this;this.clearErrorStyle=function(){},this.getField=function(){return a},this.getValue=function(){};var i=function(e){var t=n.children().eq(1).children().eq(1);e?(new Date,t.attr("src",e)):t.attr("src","")};this.setImage=function(t){var a=n.children().eq(0).children().eq(1);t?(new Date,a.attr("src",t),i(t),setTimeout((function(){e(a).imgAreaSelect({handles:!0,x1:0,y1:0,x2:e(a).width(),y2:e(a).height(),onSelectEnd:function(t,r){var n=a[0].naturalWidth/a.width(),h=r.x1*n,l=r.y1*n,c=(r.x2,r.y2,r.width*n),d=r.height*n,s=e("<canvas></canvas>");(s=s[0]).width=c,s.height=d,s.getContext("2d").drawImage(a[0],h,l,c-1,d-1,0,0,c,d),i(""),i(s.toDataURL())}})}),100)):a.attr("src","")},this.getAfterImageSrc=function(){return n.children().eq(1).children().eq(1).attr("src")},this.clearSelect=function(){var t=n.children().eq(0).children().eq(1);e(t).imgAreaSelect({remove:!0})},this.setValue=function(e){e||(e="")};for(var h=0;h<this.length;h++){var l=this[h],c=e.meta?e.extend({},r,e(l).data()):r;a=c.field,c.default_width>0&&c.default_width,c.default_height>0&&c.default_height,Global.isSet(c.name)&&c.name,e(l).children().eq(0).children().eq(1).on("load",(function(){})),e(l).children().eq(1).children().eq(1).on("load",(function(){}))}return this},e.fn.TImageCutArea.defaults={}}}]);
//# sourceMappingURL=filebrowser-TImageCutArea.bundle.js.map?v=09c340eb717a8bc8fe31