{"version":3,"sources":["webpack://timetrex/./interface/html5/views/policy/pay_formula_policy/PayFormulaPolicyViewController.js"],"names":["PayFormulaPolicyViewController","BaseViewController","options","_","defaults","el","type_array","pay_type_array","wage_source_type_array","super","this","edit_view_tpl","permission_id","viewId","script_name","table_name_key","context_menu_name","$","i18n","navigation_label","api","TTAPI","APIPayFormulaPolicy","render","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","initDropDownOption","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","id","allow_multiple_selection","layout_name","navigation_mode","show_search_inputs","setNavigation","form_item_input","widgetContainer","label","tab_pay_formula_policy_column1","edit_view_tab","find","edit_view_tabs","push","Global","loadWidgetByName","FormItemType","TEXT_INPUT","TTextInput","field","width","addEditFieldToColumn","parent","TEXT_AREA","TTextArea","COMBO_BOX","TComboBox","set_empty","setSourceData","AWESOME_BOX","APIContributingShiftPolicy","append","APIWageGroup","set_default","APIAccrualPolicyAccount","key","setDefaultData","current_edit_record","hasOwnProperty","widget","edit_view_ui_dic","isSet","setValue","collectUIDataToCurrentEditRecord","onPayTypeChange","onWageSourceTypeChange","onAccrualAccountChange","setEditViewDataDone","edit_view_form_item_dic","text","attachElement","detachElement","editFieldResize","TTUUID","zero_id","css","target","is_changed","setMassEditingFieldsWhenFormChange","getField","c_value","getValue","validate","buildSearchFields","search_fields","SearchField","in_column","multiple","basic_search","adv_search","form_item_type","APIUser"],"mappings":"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","file":"policy-pay_formula_policy-PayFormulaPolicyViewController.bundle.js?v=1062ca76c432c8c65dda","sourcesContent":["export class PayFormulaPolicyViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_formula_policy_view_container',\n\n\t\t\ttype_array: null,\n\t\t\tpay_type_array: null,\n\t\t\twage_source_type_array: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PayFormulaPolicyEditView.html';\n\t\tthis.permission_id = 'pay_formula_policy';\n\t\tthis.viewId = 'PayFormulaPolicy';\n\t\tthis.script_name = 'PayFormulaPolicyView';\n\t\tthis.table_name_key = 'pay_formula_policy';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Formula Policy' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Formula Policy' ) + ':';\n\t\tthis.api = TTAPI.APIPayFormulaPolicy;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t\tthis.setSelectRibbonMenuIfNecessary( 'PayFormulaPolicy' );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'pay_type' );\n\t\tthis.initDropDownOption( 'wage_source_type' );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_formula_policy': { 'label': $.i18n._( 'Pay Formula Policy' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayFormulaPolicy,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_code',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_pay_formula_policy = this.edit_view_tab.find( '#tab_pay_formula_policy' );\n\n\t\tvar tab_pay_formula_policy_column1 = tab_pay_formula_policy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_pay_formula_policy_column1 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t//Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_pay_formula_policy_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_pay_formula_policy_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Pay Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'pay_type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.pay_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Type' ), form_item_input, tab_pay_formula_policy_column1 );\n\n\t\t// Wage Source\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'wage_source_type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.wage_source_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage Source' ), form_item_input, tab_pay_formula_policy_column1, '', null, true );\n\n\t\t//Wage Source Contributing Shift\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIContributingShiftPolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_contributing_shift_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'wage_source_contributing_shift_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage Source Contributing Shift Policy' ), form_item_input, tab_pay_formula_policy_column1, '', null, true );\n\n\t\t//Time Source Contributing Shift\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIContributingShiftPolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_contributing_shift_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'time_source_contributing_shift_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Time Source Contributing Shift Policy' ), form_item_input, tab_pay_formula_policy_column1, '', null, true );\n\n\t\t// Premium\n\t\t// Hourly Rate\n\t\t// Rate\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'rate', width: 65 } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> (' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '1.5 for time and a half' ) + ')</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Rate' ), form_item_input, tab_pay_formula_policy_column1, '', widgetContainer, true );\n\n\t\t// Wage Group\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIWageGroup,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_wage_group',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'wage_group_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage Group' ), form_item_input, tab_pay_formula_policy_column1, '', null, true );\n\n\t\t// Deposit Accrual Policy Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicyAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_accrual_policy_account',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'accrual_policy_account_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Account' ), form_item_input, tab_pay_formula_policy_column1, '' );\n\n\t\t// Accrual Rate\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'accrual_rate', width: 100 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Rate' ), form_item_input, tab_pay_formula_policy_column1, '', null, true );\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t// When mass editing, these fields may not be the common data, so their value will be undefined, so this will cause their change event cannot work properly.\n\t\tthis.setDefaultData( {\n\t\t\t'pay_type_id': 10,\n\t\t\t'wage_source_type_id': 10\n\t\t} );\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.onPayTypeChange();\n\t\tthis.onWageSourceTypeChange();\n\t\tthis.onAccrualAccountChange();\n\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tonPayTypeChange() {\n\t\tif ( this.current_edit_record['pay_type_id'] == 10 ) {\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.edit-view-form-item-label' ).text( $.i18n._( 'Rate' ) + ': ' );\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.widget-right-label' ).text( '(' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '1.5 for time and a half' ) + ')' );\n\t\t\tthis.attachElement( 'wage_group_id' );\n\t\t\tthis.attachElement( 'wage_source_type_id' );\n\n\t\t} else if ( this.current_edit_record['pay_type_id'] == 30 || this.current_edit_record['pay_type_id'] == 34 || this.current_edit_record['pay_type_id'] == 40 ) {\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.edit-view-form-item-label' ).text( $.i18n._( 'Hourly Rate' ) + ': ' );\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.widget-right-label' ).text( '(' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '10.00/hr' ) + ')' );\n\t\t\tthis.attachElement( 'wage_group_id' );\n\t\t\tthis.attachElement( 'wage_source_type_id' );\n\n\t\t} else if ( this.current_edit_record['pay_type_id'] == 50 ) {\n\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.edit-view-form-item-label' ).text( $.i18n._( 'Premium' ) + ': ' );\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.widget-right-label' ).text( '(' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '0.75 for 75 cent/hr' ) + ')' );\n\t\t\tthis.attachElement( 'wage_group_id' );\n\t\t\tthis.attachElement( 'wage_source_type_id' );\n\n\t\t} else if ( this.current_edit_record['pay_type_id'] == 32 ) {\n\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.edit-view-form-item-label' ).text( $.i18n._( 'Hourly Rate' ) + ': ' );\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.widget-right-label' ).text( '(' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '10.00/hr' ) + ')' );\n\t\t\tthis.detachElement( 'wage_group_id' );\n\t\t\tthis.detachElement( 'wage_source_contributing_shift_policy_id' );\n\t\t\tthis.detachElement( 'time_source_contributing_shift_policy_id' );\n\t\t\tthis.detachElement( 'wage_source_type_id' );\n\t\t} else if ( this.current_edit_record['pay_type_id'] == 42 ) {\n\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.edit-view-form-item-label' ).text( $.i18n._( 'Hourly Rate' ) + ': ' );\n\t\t\tthis.edit_view_form_item_dic['rate'].find( '.widget-right-label' ).text( '(' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '10.00/hr' ) + ')' );\n\t\t\tthis.attachElement( 'wage_group_id' );\n\t\t\tthis.attachElement( 'wage_source_type_id' );\n\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonAccrualAccountChange() {\n\t\tif ( this.current_edit_record['accrual_policy_account_id'] === false || typeof this.current_edit_record['accrual_policy_account_id'] == 'undefined' || this.current_edit_record['accrual_policy_account_id'] == TTUUID.zero_id ) {\n\t\t\tthis.detachElement( 'accrual_rate' );\n\t\t} else {\n\t\t\tthis.attachElement( 'accrual_rate' );\n\t\t}\n\t\tthis.editFieldResize();\n\t}\n\n\tonWageSourceTypeChange() {\n\t\tif ( this.current_edit_record['wage_source_type_id'] == 10 ) {\n\t\t\tthis.detachElement( 'wage_source_contributing_shift_policy_id' );\n\t\t\tthis.detachElement( 'time_source_contributing_shift_policy_id' );\n\n\t\t\tif ( this.current_edit_record['pay_type_id'] == 32 ) {\n\t\t\t\tthis.detachElement( 'wage_group_id' );\n\t\t\t} else {\n\t\t\t\tthis.attachElement( 'wage_group_id' );\n\t\t\t}\n\n\t\t} else if ( this.current_edit_record['wage_source_type_id'] == 20 ) {\n\t\t\tthis.detachElement( 'wage_source_contributing_shift_policy_id' );\n\t\t\tthis.detachElement( 'time_source_contributing_shift_policy_id' );\n\t\t\tthis.detachElement( 'wage_group_id' );\n\t\t} else if ( this.current_edit_record['wage_source_type_id'] == 30 ) {\n\t\t\tif ( this.edit_view_form_item_dic['wage_source_type_id'].css( 'display' ) === 'block' ) {\n\t\t\t\tthis.attachElement( 'wage_source_contributing_shift_policy_id' );\n\t\t\t\tthis.attachElement( 'time_source_contributing_shift_policy_id' );\n\t\t\t}\n\t\t\tthis.detachElement( 'wage_group_id' );\n\t\t}\n\t\tthis.editFieldResize();\n\t}\n\n\tonFormItemChange( target ) {\n\t\tthis.is_changed = true;\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( key === 'pay_type_id' ) {\n\t\t\tthis.onPayTypeChange();\n\t\t}\n\n\t\tif ( key === 'wage_source_type_id' ) {\n\t\t\tthis.onWageSourceTypeChange();\n\t\t}\n\n\t\tif ( key === 'accrual_policy_account_id' ) {\n\t\t\tthis.onAccrualAccountChange();\n\t\t}\n\n\t\tthis.validate();\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Deposit to Accrual Policy' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'accrual_policy_account_id',\n\t\t\t\tlayout_name: 'global_accrual_policy_account',\n\t\t\t\tapi_class: TTAPI.APIAccrualPolicyAccount,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n//\n//\t\t\tnew SearchField( {label: $.i18n._( 'Pay Stub Account' ),\n//\t\t\t\tin_column: 1,\n//\t\t\t\tfield: 'pay_stub_entry_account_id',\n//\t\t\t\tlayout_name: 'global_PayStubAccount',\n//\t\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n//\t\t\t\tmultiple: true,\n//\t\t\t\tbasic_search: true,\n//\t\t\t\tadv_search: false,\n//\t\t\t\tform_item_type: FormItemType.AWESOME_BOX} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n}\n"],"sourceRoot":""}