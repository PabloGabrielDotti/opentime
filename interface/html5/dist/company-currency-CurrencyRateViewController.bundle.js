(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["company-currency-CurrencyRateViewController"],{4607:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"CurrencyRateViewController":()=>a});class a extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#currency_rate_view_container"}),super(e)}init(e){this.edit_view_tpl="CurrencyRateEditView.html",this.permission_id="currency",this.script_name="CurrencyRateView",this.viewId="CurrencyRate",this.table_name_key="currency_rate",this.context_menu_name=$.i18n._("Rates"),this.navigation_label=$.i18n._("Rate")+":",this.api=TTAPI.APICurrencyRate,this.render(),this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.sub_view_mode||this.initData(),this.setSelectRibbonMenuIfNecessary("CurrencyRate")}getCustomContextMenuModel(){return{exclude:[ContextMenuIconName.copy],include:[]}}buildEditViewUI(){super.buildEditViewUI();var e,t,i={"tab_currency_rate":{"label":$.i18n._("Currency Rate")},"tab_audit":!0};this.setTabModel(i),this.navigation.AComboBox({api_class:TTAPI.APICurrencyRate,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_currency_rate",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var a=this.edit_view_tab.find("#tab_currency_rate").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(a),(e=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({api_class:TTAPI.APICurrency,allow_multiple_selection:!1,layout_name:"global_currency",field:"currency_id",set_empty:!1,show_search_inputs:!0}),this.addEditFieldToColumn($.i18n._("Currency"),e,a),(e=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"date_stamp"}),this.addEditFieldToColumn($.i18n._("Date"),e,a),(e=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"conversion_rate",width:114}),t=$("<div class=''></div>");var n=$("<span id='rate_conversion_rate_clarification_box'></span>");t.append(e),t.append(n),this.addEditFieldToColumn($.i18n._("Conversion Rate"),[e],a,"",t,!1,!0)}onMassEditClick(){var e=this;e.is_add=!1,e.is_viewing=!1,e.is_mass_editing=!0,LocalCacheData.current_doing_context_action="mass_edit",e.openEditView();var t={},i=this.getGridSelectIdArray();i.length;this.mass_edit_record_ids=[],$.each(i,(function(t,i){e.mass_edit_record_ids.push(i)})),t.filter_data={},t.filter_data.id=this.mass_edit_record_ids,this.api["getCommon"+this.api.key_name+"Data"](t,{onResult:function(t){var i=t.getResult();i||(i=[]),e.api.getOptions("unique_columns",{onResult:function(t){e.unique_columns=t.getResult(),e.linked_columns={},e.sub_view_mode&&e.parent_key&&(i[e.parent_key]=e.parent_value),e.current_edit_record=i,e.initEditView()}})}})}onFormItemChange(e,t){"conversion_rate"==e.getField()&&this.setConversionRateExampleText(e.getValue(),null,this.edit_view_ui_dic.currency_id.getValue()),super.onFormItemChange(e,t)}initEditView(e,t){super.initEditView(),this.setConversionRateExampleText(this.edit_view_ui_dic.conversion_rate.getValue(),null,this.edit_view_ui_dic.currency_id.getValue())}}a.loadSubView=function(e,t,i){Global.loadViewSource("CurrencyRate","SubCurrencyRateView.html",(function(a){var n=_.template(a);Global.isSet(t)&&t(),Global.isSet(e)&&(e.html(n({})),Global.isSet(i)&&TTPromise.wait("BaseViewController","initialize",(function(){i(sub_currency_rate_view_controller)})))}))}}}]);
//# sourceMappingURL=company-currency-CurrencyRateViewController.bundle.js.map?v=509670ef01cf2e368b16