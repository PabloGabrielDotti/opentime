(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["reports-report_schedule-ReportScheduleViewController"],{649:(e,t,i)=>{"use strict";i.r(t),i.d(t,{"ReportScheduleViewController":()=>o});class o extends BaseViewController{constructor(e={}){_.defaults(e,{el:"#report_schedule_view_container",status_array:null,priority_array:null,minute_array:null,hour_array:null,day_of_month_array:null,month_array:null,day_of_week_array:null}),super(e)}init(e){this.edit_view_tpl="ReportScheduleEditView.html",this.permission_id="report",this.viewId="ReportSchedule",this.script_name="ReportScheduleView",this.table_name_key="report_schedule",this.context_menu_name=$.i18n._("Report Schedule"),this.navigation_label=$.i18n._("Report Schedule")+":",this.api=TTAPI.APIReportSchedule,this.render(),this.sub_view_mode?this.buildContextMenu(!0):(this.buildContextMenu(),this.sub_view_mode||this.initData())}onAddResult(e){var t=this,i=e.getResult();i||(i=[]),i.company=LocalCacheData.current_company.name,t.sub_view_mode&&t.parent_key&&(i[t.parent_key]=t.parent_value),t.current_edit_record=i,t.current_edit_record[this.parent_key]=this.parent_value,t.initEditView()}initOptions(){this.initDropDownOption("status"),this.initDropDownOption("priority"),this.initDropDownOption("minute"),this.initDropDownOption("hour"),this.initDropDownOption("day_of_month"),this.initDropDownOption("month"),this.initDropDownOption("day_of_week")}buildEditViewUI(){super.buildEditViewUI();var e=this,t={"tab_report_schedule":{"label":$.i18n._("Report Schedule")},"tab_audit":!0};this.setTabModel(t),this.navigation.AComboBox({api_class:TTAPI.APIUserReportData,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_branch",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_report_schedule").find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var o=Global.loadWidgetByName(FormItemType.COMBO_BOX);o.TComboBox({field:"status_id",set_empty:!1}),o.setSourceData(e.status_array),this.addEditFieldToColumn($.i18n._("Status"),o,i,""),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn($.i18n._("Name"),o,i),o.parent().width("45%"),(o=Global.loadWidgetByName(FormItemType.TEXT_AREA)).TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn($.i18n._("Description"),o,i,"",null,null,!0),o.parent().width("45%");var a=Global.loadWidgetByName(FormItemType.COMBO_BOX);a.TComboBox({field:"output_format",set_empty:!1}),this.api.getReportOutputFormatOptions(this.parent_edit_record.id,{onResult:function(e){a.setSourceData(Global.buildRecordArray(e.getResult()))}}),this.addEditFieldToColumn($.i18n._("Format"),a,i),(o=Global.loadWidgetByName(FormItemType.COMBO_BOX)).TComboBox({field:"priority_id",set_empty:!1}),o.setSourceData(e.priority_array),this.addEditFieldToColumn($.i18n._("Priority"),o,i),(o=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"start_date"}),this.addEditFieldToColumn($.i18n._("Start Date"),o,i),(o=Global.loadWidgetByName(FormItemType.DATE_PICKER)).TDatePicker({field:"end_date"}),this.addEditFieldToColumn($.i18n._("End Date"),o,i),(o=(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"minute",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"})).setSourceData(e.minute_array),this.addEditFieldToColumn($.i18n._("Minute"),o,i),(o=(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"hour",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"})).setSourceData(e.hour_array),this.addEditFieldToColumn($.i18n._("Hour"),o,i),(o=(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"day_of_month",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"})).setSourceData(e.day_of_month_array),this.addEditFieldToColumn($.i18n._("Day of Month"),o,i),(o=(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"month",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"})).setSourceData(e.month_array),this.addEditFieldToColumn($.i18n._("Month"),o,i),(o=(o=Global.loadWidgetByName(FormItemType.AWESOME_BOX)).AComboBox({field:"day_of_week",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"})).setSourceData(e.day_of_week_array),this.addEditFieldToColumn($.i18n._("Day of Week"),o,i),(o=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"email_blank_report"}),this.addEditFieldToColumn($.i18n._("Email Even If Blank"),o,i),(o=Global.loadWidgetByName(FormItemType.CHECKBOX)).TCheckbox({field:"home_email_cc"}),this.addEditFieldToColumn($.i18n._("Send Report to Home Email"),o,i),(o=Global.loadWidgetByName(FormItemType.TEXT_INPUT)).TTextInput({field:"other_email",width:300}),this.addEditFieldToColumn($.i18n._("Send Report to Other Email"),o,i)}searchDone(){$("window").trigger("resize"),this.sub_view_mode&&TTPromise.resolve("initSubReportScheduleView","init"),super.searchDone()}}o.loadSubView=function(e,t,i){Global.loadViewSource("ReportSchedule","SubReportScheduleView.html",(function(o){var a=_.template(o);Global.isSet(t)&&t(),Global.isSet(e)&&(e.html(a({})),Global.isSet(i)&&TTPromise.wait("BaseViewController","initialize",(function(){i(sub_report_schedule_view)})))}))}}}]);
//# sourceMappingURL=reports-report_schedule-ReportScheduleViewController.bundle.js.map?v=691bd04445a13f18883b