{"version":3,"sources":["webpack://timetrex/./interface/html5/views/company/wage/WageViewController.js"],"names":["WageViewController","BaseViewController","options","_","defaults","el","user_api","user_group_api","company_api","currency_api","type_array","status_array","sex_array","user_group_array","country_array","province_array","e_province_array","currency","code","is_mass_adding","events","super","this","edit_view_tpl","permission_id","script_name","viewId","table_name_key","context_menu_name","$","i18n","navigation_label","document_object_type_id","api","TTAPI","APIUserWage","APIUserGroup","APICompany","APIUser","APICurrency","render","sub_view_mode","buildContextMenu","initData","setSelectRibbonMenuIfNecessary","$this","initDropDownOption","getUserGroup","onResult","res","getResult","Global","buildTreeRecord","adv_search_field_ui_dic","setSourceData","exclude","ContextMenuIconName","copy","include","label","id","import_icon","group","icon","Icons","permission_result","PermissionManager","checkTopLevelPermission","permission","sort_order","target","doNotValidate","setIsChanged","setMassEditingFieldsWhenFormChange","key","getField","c_value","getValue","current_edit_record","onTypeChange","isArray","user_id","length","setCurrency","getHourlyRate","validate","doNotSetFocus","context_menu_array","isSet","selectContextMenu","setTotalDisplaySpan","len","grid_selected_length","getGridSelectIdArray","i","context_btn","find","attr","removeClass","add","setDefaultMenuAddIcon","edit","setDefaultMenuEditIcon","view","setDefaultMenuViewIcon","mass_edit","setDefaultMenuMassEditIcon","setDefaultMenuCopyIcon","delete_icon","setDefaultMenuDeleteIcon","delete_and_next","setDefaultMenuDeleteAndNextIcon","save","setDefaultMenuSaveIcon","save_and_next","setDefaultMenuSaveAndNextIcon","save_and_continue","setDefaultMenuSaveAndContinueIcon","save_and_new","setDefaultMenuSaveAndAddIcon","save_and_copy","setDefaultMenuSaveAndCopyIcon","copy_as_new","setDefaultMenuCopyAsNewIcon","login","setDefaultMenuLoginIcon","cancel","setDefaultMenuCancelIcon","setDefaultMenuImportIcon","export_excel","setDefaultMenuExportIcon","setContextMenuGroupVisibility","record","LocalCacheData","current_doing_context_action","is_mass_editing","edit_view_ui_dic","widget","isChecked","getEnabled","each","index","value","commonRecord","clone","push","key_name","result","validateResult","pId","onImportClick","IndexViewController","openWizard","search","ignoreWarning","callback","buildMassAddRecord","doSaveAPICall","saveAndContinueValidate","addClass","saveAndNewValidate","setEditViewData","setAllowMultipleSelection","filter","filter_data","getCurrency","text","symbol","iso_code","wage","weekly_time","type_id","getInputValue","isValid","hourly_rate","val","getRate","parseInt","attachElement","detachElement","buildEditViewUI","tab_model","setTabModel","navigation","AComboBox","api_class","allow_multiple_selection","layout_name","show_search_inputs","navigation_mode","setNavigation","form_item_input","widgetContainer","tab_wage_column1","edit_view_tab","loadWidgetByName","FormItemType","AWESOME_BOX","set_empty","field","default_args","setDefaultArgs","addEditFieldToColumn","APIWageGroup","set_default","COMBO_BOX","TComboBox","TEXT_INPUT","TTextInput","width","append","need_parser_sec","DATE_PICKER","TDatePicker","TEXT_AREA","TTextArea","height","setSelectLayout","m","getOptions","buildRecordArray","province_widget","search_panel","getSelectTabIndex","select_value","setProvince","change","proxy","selectVal","setValue","buildSearchFields","search_fields","SearchField","in_column","permission_section","multiple","basic_search","adv_search","form_item_type","tree_mode","APIBranch","APIDepartment","APIUserTitle","callBack","remove","cleanWhenUnloadView","TTPromise","resolve","searchDone","loadView","container","loadViewSource","args","template","html","contentContainer","loadSubView","beforeViewLoadedFun","afterViewLoadedFun","sub_wage_view_controller"],"mappings":"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","file":"company-wage-WageViewController.bundle.js?v=6ab4f50e59552649dd54","sourcesContent":["export class WageViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#wage_view_container', //Must set el here and can only set string, so events can work\n\n\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tcompany_api: null,\n\t\t\tcurrency_api: null,\n\n\t\t\ttype_array: null,\n\t\t\tstatus_array: null,\n\t\t\tsex_array: null,\n\t\t\tuser_group_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\te_province_array: null,\n\n\t\t\tcurrency: '',\n\t\t\tcode: '',\n\n\t\t\tis_mass_adding: false,\n\t\t\tevents: {}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'WageEditView.html';\n\t\tthis.permission_id = 'wage';\n\t\tthis.script_name = 'WageView';\n\t\tthis.viewId = 'Wage';\n\t\tthis.table_name_key = 'user_wage';\n\t\tthis.context_menu_name = $.i18n._( 'Wage' );\n\t\tthis.navigation_label = $.i18n._( 'Wage' ) + ':';\n\t\tthis.document_object_type_id = 110;\n\t\tthis.api = TTAPI.APIUserWage;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.currency_api = TTAPI.APICurrency;\n\t\tthis.render();\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\n\t\t//call init data in parent view\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\n\t\tthis.setSelectRibbonMenuIfNecessary();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'type' );\n\t\tthis.initDropDownOption( 'status', '', this.user_api );\n\t\tthis.initDropDownOption( 'country', 'country', this.company_api );\n\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\n\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\tif ( !$this.sub_view_mode ) {\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [ContextMenuIconName.copy],\n\t\t\tinclude: [{\n\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\tid: ContextMenuIconName.import_icon,\n\t\t\t\tgroup: 'other',\n\t\t\t\ticon: Icons.import_icon,\n\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ImportCSVWage' ),\n\t\t\t\tpermission: null,\n\t\t\t\tsort_order: 8000\n\t\t\t}]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tswitch ( key ) {\n\t\t\tcase 'type_id':\n\t\t\t\tthis.onTypeChange( true );\n\t\t\t\tbreak;\n\t\t\tcase 'user_id':\n\t\t\t\tif ( $.isArray( this.current_edit_record.user_id ) && this.current_edit_record.user_id.length > 1 ) {\n\t\t\t\t\tthis.is_mass_adding = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.is_mass_adding = false;\n\t\t\t\t}\n\t\t\t\tthis.setCurrency();\n\t\t\t\tbreak;\n\t\t\tcase 'wage':\n\t\t\tcase 'weekly_time':\n\t\t\t\tthis.getHourlyRate();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\t/* jshint ignore:start */\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Error: Uncaught TypeError: Cannot read property 'length' of undefined in /interface/html5/#!m=Employee&a=edit&id=42411&tab=Wage line 282\n\t\tif ( !this.context_menu_array ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !Global.isSet( doNotSetFocus ) || !doNotSetFocus ) {\n\t\t\tthis.selectContextMenu();\n\t\t}\n\n\t\tthis.setTotalDisplaySpan();\n\n\t\tvar len = this.context_menu_array.length;\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar context_btn = $( this.context_menu_array[i] );\n\t\t\tvar id = $( context_btn.find( '.ribbon-sub-menu-icon' ) ).attr( 'id' );\n\t\t\tcontext_btn.removeClass( 'invisible-image' );\n\t\t\tcontext_btn.removeClass( 'disable-image' );\n\n\t\t\tswitch ( id ) {\n\t\t\t\tcase ContextMenuIconName.add:\n\t\t\t\t\tthis.setDefaultMenuAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.edit:\n\t\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.view:\n\t\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.mass_edit:\n\t\t\t\t\tthis.setDefaultMenuMassEditIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy:\n\t\t\t\t\tthis.setDefaultMenuCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_icon:\n\t\t\t\t\tthis.setDefaultMenuDeleteIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.delete_and_next:\n\t\t\t\t\tthis.setDefaultMenuDeleteAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save:\n\t\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_next:\n\t\t\t\t\tthis.setDefaultMenuSaveAndNextIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_continue:\n\t\t\t\t\tthis.setDefaultMenuSaveAndContinueIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_new:\n\t\t\t\t\tthis.setDefaultMenuSaveAndAddIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.save_and_copy:\n\t\t\t\t\tthis.setDefaultMenuSaveAndCopyIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.copy_as_new:\n\t\t\t\t\tthis.setDefaultMenuCopyAsNewIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.login:\n\t\t\t\t\tthis.setDefaultMenuLoginIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.cancel:\n\t\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\t\tthis.setDefaultMenuImportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t\tcase ContextMenuIconName.export_excel:\n\t\t\t\t\tthis.setDefaultMenuExportIcon( context_btn, grid_selected_length );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setContextMenuGroupVisibility();\n\t}\n\n\t/* jshint ignore:end */\n\n\t//Make sure this.current_edit_record is updated before validate\n\tvalidate() {\n\t\tvar $this = this;\n\t\tvar record = {};\n\t\tLocalCacheData.current_doing_context_action = 'validate';\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif ( Global.isArray( this.current_edit_record.user_id ) && this.current_edit_record.user_id.length > 0 ) {\n\t\t\t\trecord = [];\n\t\t\t\t$.each( this.current_edit_record.user_id, function( index, value ) {\n\n\t\t\t\t\tvar commonRecord = Global.clone( $this.current_edit_record );\n\t\t\t\t\tcommonRecord.user_id = value;\n\t\t\t\t\trecord.push( commonRecord );\n\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\trecord = this.current_edit_record;\n\t\t\t}\n\t\t}\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetDefaultMenuImportIcon( context_btn, grid_selected_length, pId ) {\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase ContextMenuIconName.import_icon:\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonImportClick() {\n\t\tvar $this = this;\n\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'UserWage', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tdoSaveAPICall( record, ignoreWarning, callback ) {\n\t\t// #2644: We have to handle the record as though its a mass_add, as the awesomebox will always return an array of user_id's. See 733f709e287626070b84e39ca67f78e69a3fcee6.\n\t\t// Normal handling results in 'Invalid Employee' errors for single records. Cannot force is_mass_adding flag, as this affects the save&continue button disabling.\n\t\trecord = this.buildMassAddRecord( record );\n\t\tsuper.doSaveAPICall( record, ignoreWarning, callback );\n\t}\n\n\tsetEditMenuSaveAndContinueIcon( context_btn, pId ) {\n\t\tthis.saveAndContinueValidate( context_btn );\n\n\t\tif ( this.is_mass_adding || !this.current_edit_record ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuSaveAndAddIcon( context_btn, pId ) {\n\t\tthis.saveAndNewValidate( context_btn );\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditMenuSaveAndCopyIcon( context_btn, pId ) {\n\t\tthis.saveAndContinueValidate( context_btn );\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tcontext_btn.addClass( 'disable-image' );\n\t\t}\n\t}\n\n\tsetEditViewData() {\n\t\tvar $this = this;\n\t\tsuper.setEditViewData(); //Set Navigation\n\n\t\tthis.setCurrency();\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tvar widget = $this.edit_view_ui_dic['user_id'];\n\t\t\tif ( widget ) {\n\t\t\t\tif ( ( !this.current_edit_record || !this.current_edit_record.id ) && !this.is_mass_editing ) {\n\t\t\t\t\twidget.setAllowMultipleSelection( true );\n\t\t\t\t} else {\n\t\t\t\t\twidget.setAllowMultipleSelection( false );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$this.onTypeChange( false );\n\t}\n\n\tsetCurrency() {\n\n\t\tvar $this = this;\n\t\tif ( Global.isSet( this.current_edit_record.user_id ) ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.filter_data = { user_id: this.current_edit_record.user_id };\n\n\t\t\tthis.currency_api.getCurrency( filter, false, false, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( Global.isArray( res ) ) {\n\t\t\t\t\t\t$this.currency.text( res[0].symbol );\n\t\t\t\t\t\t$this.code.text( res[0].iso_code );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.currency.text( '' );\n\t\t\t\t\t\t$this.code.text( '' );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetHourlyRate() {\n\n\t\tvar $this = this;\n\t\tif ( this.current_edit_record.wage &&\n\t\t\tthis.current_edit_record.weekly_time &&\n\t\t\tthis.current_edit_record.type_id &&\n\t\t\tthis.current_edit_record.type_id != 10 ) {\n\n\t\t\t//wwkly_time need value before pasrse to seconds.\n\t\t\tthis.api.getHourlyRate( this.current_edit_record.wage, $this.edit_view_ui_dic['weekly_time'].getInputValue(), this.current_edit_record.type_id, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar res = result.getResult();\n\n\t\t\t\t\tif ( result.isValid() ) {\n\t\t\t\t\t\t$this.current_edit_record.hourly_rate = res;\n\t\t\t\t\t\t$this.edit_view_ui_dic['hourly_rate'].val( res );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonTypeChange( getRate ) {\n\n\t\tif ( parseInt( this.current_edit_record.type_id ) != 10 ) {\n\t\t\tthis.attachElement( 'weekly_time' );\n\t\t\tthis.attachElement( 'hourly_rate' );\n\n\t\t\tif ( getRate ) {\n\t\t\t\tthis.getHourlyRate();\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.detachElement( 'weekly_time' );\n\t\t\tthis.detachElement( 'hourly_rate' );\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_wage': { 'label': $.i18n._( 'Wage' ) },\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserWage,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_wage',\n\t\t\tshow_search_inputs: true,\n\t\t\tnavigation_mode: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_wage = this.edit_view_tab.find( '#tab_wage' );\n\n\t\tvar tab_wage_column1 = tab_wage.find( '.first-column' );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\t//Employee\n\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tfield: 'user_id'\n\n\t\t\t} );\n\n\t\t\tvar default_args = {};\n\t\t\tdefault_args.permission_section = 'wage';\n\t\t\tform_item_input.setDefaultArgs( default_args );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_wage_column1, '' );\n\t\t}\n\n\t\t//Wage Group\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIWageGroup,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_wage_group',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'wage_group_id'\n\t\t} );\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage Group' ), form_item_input, tab_wage_column1, '' );\n\t\t} else {\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage Group' ), form_item_input, tab_wage_column1 );\n\t\t}\n\n\t\t//Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_wage_column1 );\n\n\t\t//Wage\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'wage', width: 90 } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tthis.currency = $( '<span class=\\'widget-left-label\\'></span>' );\n\t\tthis.code = $( '<span class=\\'widget-right-label\\'></span>' );\n\n\t\twidgetContainer.append( this.currency );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( this.code );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage' ), form_item_input, tab_wage_column1, '', widgetContainer );\n\n\t\t//Average Time / Week\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'weekly_time', need_parser_sec: true } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>( ' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '40 hours / week' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Average Time / Week' ), form_item_input, tab_wage_column1, '', widgetContainer, true );\n\n\t\t//Annual Hourly Rate\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'hourly_rate' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Annual Hourly Rate' ), form_item_input, tab_wage_column1, '', null, true );\n\n\t\t//Labor Burden Percent\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'labor_burden_percent', width: 50 } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'>% ( ' + $.i18n._( 'ie' ) + ': ' + $.i18n._( '25% burden' ) + ' )</span>' );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Labor Burden Percent' ), form_item_input, tab_wage_column1, '', widgetContainer );\n\n\t\t//Effective Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'effective_date', width: 120 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Effective Date' ), form_item_input, tab_wage_column1 );\n\n\t\t//Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'note', width: 389, height: 117 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_wage_column1, '', null, null, true );\n\t}\n\n\t//Override for: Do not show first 2 columns in sub wage view\n\tsetSelectLayout() {\n\t\tif ( this.sub_view_mode ) {\n\t\t\tsuper.setSelectLayout( ['first_name', 'last_name'] );\n\t\t} else {\n\t\t\tsuper.setSelectLayout();\n\t\t}\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSetSearchFilterFinished() {\n\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildBasicUIFinished() {\n\t\tvar basicSearchTabPanel = this.search_panel.find( 'div #basic_search' );\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tvar default_args = { permission_section: 'wage' };\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Wage Group' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'wage_group_id',\n\t\t\t\tlayout_name: 'global_wage_group',\n\t\t\t\tapi_class: TTAPI.APIWageGroup,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tcleanWhenUnloadView( callBack ) {\n\n\t\t$( '#wage_view_container' ).remove();\n\t\tsuper.cleanWhenUnloadView( callBack );\n\t}\n\n\tsearchDone() {\n\t\tTTPromise.resolve( 'WageView', 'init' );\n\t\tsuper.searchDone();\n\t}\n\n}\n\nWageViewController.loadView = function( container ) {\n\tGlobal.loadViewSource( 'Wage', 'WageView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t} else {\n\t\t\tGlobal.contentContainer().html( template( args ) );\n\t\t}\n\t} );\n};\n\nWageViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\tGlobal.loadViewSource( 'Wage', 'SubWageView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_wage_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};\n"],"sourceRoot":""}