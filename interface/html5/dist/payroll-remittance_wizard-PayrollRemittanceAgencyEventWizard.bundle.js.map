{"version":3,"sources":["webpack://timetrex/./interface/html5/global/widgets/wizard/Wizard.js","webpack://timetrex/./interface/html5/views/payroll/remittance_wizard/PayrollRemittanceAgencyEventWizard.js"],"names":["Wizard","TTBackboneView","options","_","defaults","current_step","wizard_id","wizard_name","$","i18n","step_history","step_objects","el","previous_wizard","_step_map","do_not_initialize_onload","external_data","events","super","initialize","this","setExternalData","$this","initStepObject","getCurrentStepName","obj","init","render","enableButtons","LocalCacheData","current_open_wizard_controller","data","e","button_click_procesing","target","hasClass","disableButtons","name","getStepObject","getNextStepName","step_obj","setPreviousStepName","setCurrentStepName","getPreviousStepName","TAlertManager","showConfirmAlert","flag","cleanUp","isRequiredButtonsClicked","onDoneComplete","val","n","remove","reload","TFeedback","source","callback","hasOwnProperty","Global","loadScript","script_path","find","html","eval","object_name","addStepObject","clicked_buttons","step","addClass","removeClass","_enableButtons","PayrollRemittanceAgencyEventWizard","addViewTab","window","location","href","delegateEvents","i","getProductEdition","showAlert","getUpgradeMessage","selected_remittance_agency_event","selected_remittance_agency_event_id","payroll_remittance_agency_event_block","grid","row_data","getRowData","getSelectedRow","onNextClick","container_id","div","append","column_one_keys","key","title","column_two_keys","upper_bound","length","tr","label","value","start_date","end_date","row_contents","id","columns","filter","filter_data","filter_columns","TTAPI","APIPayrollRemittanceAgencyEvent","getPayrollRemittanceAgencyEvent","onResult","event_result","getResult","APIPayrollRemittanceAgency","getPayrollRemittanceAgency","payroll_remittance_agency_id","agency_result","payroll_remittance_agency_obj","render_type","post_data","0","1","APIFileDownload","report_name","new_window","ProgressBar","showOverlay","res","closeOverlay","isValid","result","w","open","document","writeln","api_retval","close","IndexViewController","openWizard","showErrorAlert","getPayrollRemittanceAgencyEventById","enable_recalculate_dates","last_due_date","due_date","setPayrollRemittanceAgencyEvent"],"mappings":"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","file":"payroll-remittance_wizard-PayrollRemittanceAgencyEventWizard.bundle.js?v=42b5a79d3e3c58e1f372","sourcesContent":["/**\n * For an example of implementation see: interface/html5/views/payroll/remittance_wizard/PayrollRemittanceAgencyEventWizard.js\n *\n * CRITICAL: ALL WIZARDS MUST HAVE A HOME STEP SO THAT THEY HAVE SOMEWHERE TO START.\n **/\n\nimport { TTBackboneView } from '@/views/TTBackboneView';\n\nexport class Wizard extends TTBackboneView {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tcurrent_step: false,\n\t\t\twizard_id: 'generic_wizard',\n\t\t\twizard_name: $.i18n._( 'Wizard' ),\n\t\t\tstep_history: {},\n\t\t\tstep_objects: {},\n\t\t\tel: $( '.wizard' ),\n\t\t\tprevious_wizard: null,\n\t\t\t_step_map: null,\n\t\t\tdo_not_initialize_onload: false, //when this flag is set, initialize will not be run automagically.\n\t\t\texternal_data: null,\n\t\t\tevents: {\n\t\t\t\t'click .close-btn': 'onCloseClick',\n\t\t\t\t'click .close-icon': 'onCloseClick',\n\t\t\t\t'click .wizard-overlay.onclick-close': 'onCloseClick',\n\t\t\t\t'click .forward-btn': 'onNextClick',\n\t\t\t\t'click .back-btn': 'onPrevClick',\n\t\t\t\t'click .done-btn': 'onDone'\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitialize( options ) {\n\t\tsuper.initialize( options );\n\n\t\tif ( options && options.external_data ) {\n\t\t\tthis.setExternalData( options.external_data );\n\t\t}\n\n\t\tif ( !this.do_not_initialize_onload ) {\n\t\t\tthis.step_history = {};\n\t\t\tthis.step_objects = {};\n\t\t\tvar $this = this;\n\n\t\t\tthis.initStepObject( ( this.getCurrentStepName() ? this.getCurrentStepName() : 'home' ), function( obj ) {\n\t\t\t\t$this.init();\n\t\t\t\t$this.render();\n\t\t\t\t$this.enableButtons();\n\n\t\t\t\tif ( LocalCacheData.current_open_wizard_controller ) {\n\t\t\t\t\t$this.previous_wizard = LocalCacheData.current_open_wizard_controller;\n\t\t\t\t} else {\n\t\t\t\t\t$this.previous_wizard = false;\n\t\t\t\t}\n\t\t\t\tLocalCacheData.current_open_wizard_controller = $this;\n\t\t\t} );\n\t\t}\n\t}\n\n\t//always override\n\tinit() {\n\t\treturn;\n\t}\n\n\tsetExternalData( data ) {\n\t\tthis.external_data = data;\n\t}\n\n\tgetExternalData() {\n\t\treturn this.external_data;\n\t}\n\n\tonNextClick( e ) {\n\t\tif ( this.button_click_procesing == true ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( $( e.target ).hasClass( 'disable-image' ) == false ) {\n\t\t\tthis.disableButtons();\n\n\t\t\tvar name = this.getStepObject().getNextStepName();\n\t\t\tvar $this = this;\n\t\t\tthis.initStepObject( name, function( step_obj ) {\n\t\t\t\tstep_obj.setPreviousStepName( $this.getCurrentStepName() );\n\t\t\t\t$this.setCurrentStepName( name );\n\t\t\t\t//$this.enableButtons(); //This should be done at the end of each _render() function to avoid race conditions and hammer clicking right arrow causing JS exceptions.\n\t\t\t} );\n\t\t}\n\t}\n\n\tonPrevClick( e ) {\n\t\tif ( this.button_click_procesing == true ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( e === true || $( e.target ).hasClass( 'disable-image' ) == false ) {\n\t\t\tthis.disableButtons();\n\n\t\t\tvar name = this.getStepObject().getPreviousStepName();\n\t\t\tvar $this = this;\n\n\t\t\t//Needs to be initialized in the event that we came back from the min_tab.\n\t\t\tthis.initStepObject( name, function( step_obj ) {\n\t\t\t\t//step_obj.setPreviousStepName($this.getCurrentStepName());\n\t\t\t\t$this.setCurrentStepName( name );\n\t\t\t\t//$this.enableButtons(); //This should be done at the end of each _render() function to avoid race conditions and hammer clicking right arrow causing JS exceptions.\n\t\t\t} );\n\t\t}\n\t}\n\n\tonCloseClick( e ) {\n\t\tif ( !e || $( e.target ).hasClass( 'disable-image' ) == false ) {\n\t\t\tvar $this = this;\n\n\t\t\tif ( this.getStepObject().getPreviousStepName() !== false && this.getStepObject().getNextStepName() !== false ) { //Not on first step, and not last step\n\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'Are you sure you wish to cancel without completing all steps for this event?' ), null, function( flag ) {\n\t\t\t\t\tif ( flag === true ) {\n\t\t\t\t\t\t$this.cleanUp();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else if ( this.getStepObject().getNextStepName() == false ) { //On last step.\n\t\t\t\tif ( this.getStepObject().isRequiredButtonsClicked() == false ) { //Required actions are not performed.\n\t\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( '<strong>WARNING</strong>: You are about to cancel without performing all required actions on this step! <br><br><strong>This may result in payments or reports not being submitted to this agency.</strong> <br><br>Are you sure you wish to continue?<br><br>' ), null, function( flag ) {\n\t\t\t\t\t\tif ( flag === true ) {\n\t\t\t\t\t\t\t$this.cleanUp();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else { //Required actions ARE performed.\n\t\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'Are you sure you wish to cancel without marking this event as completed?' ), null, function( flag ) {\n\t\t\t\t\t\tif ( flag === true ) {\n\t\t\t\t\t\t\t$this.cleanUp();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$this.cleanUp();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDone( e ) {\n\t\tif ( !e || $( e.target ).hasClass( 'disable-image' ) == false ) {\n\t\t\tvar $this = this;\n\n\t\t\tif ( this.getStepObject().getNextStepName() == false && this.getStepObject().isRequiredButtonsClicked() == false ) { //On last step.\n\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( '<strong>WARNING</strong>: You are about to mark this event as completed without performing all required actions on this step! <br><br><strong>This may result in payments or reports not being submitted to this agency.</strong> <br><br>Are you sure you wish to continue?<br><br>' ), null, function( flag ) {\n\t\t\t\t\tif ( flag === true ) {\n\t\t\t\t\t\t$this.onDoneComplete();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t$this.onDoneComplete();\n\t\t\t}\n\t\t}\n\t}\n\n\t//Override this function to perform other actions when the user clicks the green checkmark to complete the wizard.\n\tonDoneComplete( e ) {\n\t\t$this.cleanUp();\n\t}\n\n\taddStepObject( name, obj ) {\n\t\t//always override.\n\t\tthis.step_objects[name] = obj;\n\t\treturn this.step_objects[name]; //returned for chaining.\n\t}\n\n\tgetStepObject( name ) {\n\t\tif ( typeof name == 'undefined' ) {\n\t\t\tname = this.getCurrentStepName();\n\t\t}\n\n\t\tif ( typeof this.step_objects[name] == 'object' ) {\n\t\t\treturn this.step_objects[name];\n\t\t}\n\t\treturn this.step_objects['home'];\n\t}\n\n\tgetCurrentStepName() {\n\t\treturn this.current_step;\n\t}\n\n\tsetCurrentStepName( val ) {\n\t\tthis.current_step = val;\n\t}\n\n\t//Stub to stop backbone from complaining that it's missing, Wizard really doesn't render itself as such, it just displays its template.\n\trender() {\n\t}\n\n\t/*\n\t * Clean up the markup.\n\t */\n\tcleanUp() {\n\t\t$( this.el ).remove();\n\t\tfor ( var n in this.step_objects ) {\n\t\t\tif ( this.step_objects[n] ) {\n\t\t\t\tthis.step_objects[n].reload = true;\n\t\t\t}\n\t\t}\n\n\t\tLocalCacheData.current_open_wizard_controller = null;\n\n\t\t$().TFeedback( {\n\t\t\tsource: this.wizard_id\n\t\t} );\n\t}\n\n\t/**\n\t * setup a step object\n\t *\n\t * @param name\n\t * @param callback\n\t */\n\tinitStepObject( name, callback ) {\n\t\tif ( this._step_map.hasOwnProperty( name ) ) {\n\t\t\tif ( this.step_objects[name] == null || typeof this.step_objects[name] != 'object' ) {\n\t\t\t\tvar $this = this;\n\t\t\t\tGlobal.loadScript( this._step_map[name].script_path, function() {\n\t\t\t\t\t$this.setCurrentStepName( name );\n\t\t\t\t\t$( $this.el ).find( '.content' ).html( '' );\n\n\t\t\t\t\t//var obj = new window[$this._step_map[name].object_name]( $this );\n\t\t\t\t\tvar obj = eval( 'new ' + $this._step_map[name].object_name + '( $this );' );\n\t\t\t\t\tobj.reload = false;\n\t\t\t\t\t$this.addStepObject( name, obj );\n\n\t\t\t\t\tif ( typeof callback == 'function' ) {\n\t\t\t\t\t\tcallback( obj );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\t//reopening a step\n\t\t\t\tthis.setCurrentStepName( name );\n\t\t\t\tif ( typeof callback == 'function' ) {\n\t\t\t\t\tvar obj = this.step_objects[name];\n\n\t\t\t\t\t$( this.el ).find( '.content' ).html( '' );\n\t\t\t\t\t//obj = new window[this._step_map[name].object_name]( this );\n\t\t\t\t\tvar obj = eval( 'new ' + this._step_map[name].object_name + '( this );' );\n\n\t\t\t\t\t//reopening a step that has been opened in a previously closed wizard.\n\t\t\t\t\tif ( this.step_objects[name].reload == true ) {\n\t\t\t\t\t\tobj.clicked_buttons = {};\n\t\t\t\t\t\tobj.reload = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addStepObject( name, obj );\n\n\t\t\t\t\tcallback( obj );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisableButtons() {\n\t\tthis.button_click_procesing = true;\n\n\t\t//Changing the button images causes flashing and isn't required for just disabling the buttons while the view loads.\n\t\t// $( this.el ).find( '.forward-btn' ).addClass( 'disable-image' );\n\t\t// $( this.el ).find( '.back-btn' ).addClass( 'disable-image' );\n\t}\n\n\t/**\n\t * Enables the next/prev buttons\n\t * the step object for the first step should return false instead fo a previous step name to disable the previous button\n\t * the step object for the last step should return false instead of a next step name to disable the next button and enable the done button.\n\t */\n\tenableButtons() {\n\t\tvar step = this.getStepObject();\n\n\t\tif ( typeof step.getNextStepName() != 'string' ) {\n\t\t\t$( this.el ).find( '.forward-btn' ).addClass( 'disable-image' );\n\t\t\t$( this.el ).find( '.done-btn' ).removeClass( 'disable-image' ); //When right arrow is disabled, assume last step and enable done button.\n\t\t} else {\n\t\t\t$( this.el ).find( '.forward-btn' ).removeClass( 'disable-image' );\n\t\t\t$( this.el ).find( '.done-btn' ).addClass( 'disable-image' ); //When right arrow is enabled, assume *not* last step, disable done button.\n\t\t}\n\n\t\tif ( typeof step.getPreviousStepName() != 'string' ) {\n\t\t\t$( this.el ).find( '.back-btn' ).addClass( 'disable-image' );\n\t\t} else {\n\t\t\t$( this.el ).find( '.back-btn' ).removeClass( 'disable-image' );\n\t\t}\n\n\t\tthis._enableButtons();\n\n\t\tthis.button_click_procesing = false;\n\t}\n\n\t//override me.\n\t_enableButtons() {\n\t}\n\n\t/**\n\t * minimize the wiazrd to a min_tab\n\t */\n\tminimize() {\n\t\tLocalCacheData.PayrollRemittanceAgencyEventWizard = this;\n\t\tGlobal.addViewTab( this.wizard_id, this.wizard_name, window.location.href );\n\t\tthis.delegateEvents();\n\t\t$( this.el ).remove();\n\t}\n\n\treload() {\n\t\tfor ( var i in this.step_objects ) {\n\t\t\tthis.step_objects[i].reload = true;\n\t\t}\n\t}\n\n\tdisableForCommunity( callback ) {\n\t\tif ( Global.getProductEdition() <= 10 ) {\n\t\t\tTAlertManager.showAlert( Global.getUpgradeMessage(), $.i18n._( 'Denied' ) );\n\t\t} else {\n\t\t\tif ( typeof callback == 'function' ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t}\n\n}","import { Wizard } from '@/global/widgets/wizard/Wizard';\n\nexport class PayrollRemittanceAgencyEventWizard extends Wizard {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tcurrent_step: false,\n\t\t\twizard_name: $.i18n._( 'Tax Wizard' ),\n\n\t\t\tselected_remittance_agency_event: null,\n\t\t\tselected_remittance_agency_event_id: null,\n\t\t\tpayroll_remittance_agency_event_block: null,\n\n\t\t\twizard_id: 'PayrollRemittanceAgencyEventWizard',\n\t\t\t_step_map: {\n\t\t\t\t'home': { // TODO: Webpack: Investigate how this works/does not work with Webpack\n\t\t\t\t\tscript_path: 'views/payroll/remittance_wizard/PayrollRemittanceAgencyEventWizardStepHome.js',\n\t\t\t\t\tobject_name: 'PayrollRemittanceAgencyEventWizardStepHome'\n\t\t\t\t},\n\t\t\t\t'review': {\n\t\t\t\t\tscript_path: 'views/payroll/remittance_wizard/PayrollRemittanceAgencyEventWizardStepReview.js',\n\t\t\t\t\tobject_name: 'PayrollRemittanceAgencyEventWizardStepReview'\n\t\t\t\t},\n\t\t\t\t'submit': {\n\t\t\t\t\tscript_path: 'views/payroll/remittance_wizard/PayrollRemittanceAgencyEventWizardStepSubmit.js',\n\t\t\t\t\tobject_name: 'PayrollRemittanceAgencyEventWizardStepSubmit'\n\t\t\t\t},\n\t\t\t\t'publish': {\n\t\t\t\t\tscript_path: 'views/payroll/remittance_wizard/PayrollRemittanceAgencyEventWizardStepPublish.js',\n\t\t\t\t\tobject_name: 'PayrollRemittanceAgencyEventWizardStepPublish'\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit() {\n\t\tvar $this = this;\n\t}\n\n\trender() {\n\t\t//do render stuff\n\t}\n\n\tonNextClick( e ) {\n\t\t//Get selected row data so we can determine the time period.\n\t\tif ( this.getStepObject().grid ) {\n\t\t\tvar row_data = this.getStepObject().grid.getRowData( this.getStepObject().grid.getSelectedRow() );\n\n\t\t\tif ( row_data['in_time_period'] && row_data['in_time_period'] == true ) {\n\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'Time period for this event has not ended yet, are you sure you want to process this event early?' ), null, ( flag ) => {\n\t\t\t\t\tif ( flag === true ) {\n\t\t\t\t\t\tsuper.onNextClick( e );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tsuper.onNextClick( e );\n\t\t\t}\n\t\t} else {\n\t\t\tsuper.onNextClick( e );\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * builds the event data block used on several steps in this wizard.\n\t * @param container_id\n\t * @param data\n\t */\n\tbuildEventDataBlock( container_id, data ) {\n\t\t$( '#' + container_id ).remove(); //never allow this to duplicate on the wizard.\n\t\tvar div = $( '<div id=\\'' + container_id + '\\' class=\\'payroll_remittance_agency_event_wizard_event_details\\'><table></table></div>' );\n\t\tvar step_obj = this.getStepObject( this.getCurrentStepName() );\n\t\tstep_obj.append( div );\n\n\t\tvar even = false;\n\t\tvar td_label, td_value;\n\n\t\tif ( this.payroll_remittance_agency_event_block == null ) {\n\n\t\t\tvar column_one_keys = [\n\t\t\t\t{ key: 'legal_entity_legal_name', title: $.i18n._( 'Legal Entity' ) },\n\t\t\t\t{ key: 'payroll_remittance_agency_name', title: $.i18n._( 'Agency' ) },\n\t\t\t\t{ key: 'type', title: $.i18n._( 'Event' ) }\n\t\t\t];\n\n\t\t\tvar column_two_keys = [\n\t\t\t\t{ key: 'frequency', title: $.i18n._( 'Frequency' ) },\n\t\t\t\t{ key: 'time_period', title: $.i18n._( 'Time Period' ) },\n\t\t\t\t{ key: 'due_date', title: $.i18n._( 'Due Date' ) }\n\t\t\t];\n\n\t\t\tvar upper_bound = ( column_one_keys.length > column_two_keys.length ) ? column_one_keys.length : column_two_keys.length;\n\n\t\t\tfor ( var i = 0; i < upper_bound; i++ ) {\n\t\t\t\tvar tr = $( '<tr></tr>' );\n\n\t\t\t\tif ( column_one_keys.length > i ) {\n\t\t\t\t\tvar label = $( '<td class=\"label col1\"></td>' );\n\t\t\t\t\tlabel.html( column_one_keys[i].title + ':' );\n\n\t\t\t\t\tvar value = $( '<td class=\"value\"></td>' );\n\t\t\t\t\tvalue.html( data[column_one_keys[i].key] );\n\n\t\t\t\t\ttr.append( label );\n\t\t\t\t\ttr.append( value );\n\t\t\t\t} else {\n\t\t\t\t\ttr.append( $( '<td></td>' ) );\n\t\t\t\t\ttr.append( $( '<td></td>' ) );\n\t\t\t\t}\n\n\t\t\t\tif ( column_two_keys.length > i ) {\n\t\t\t\t\tvar label = $( '<td class=\"label col2\"></td>' );\n\t\t\t\t\tlabel.html( column_two_keys[i].title + ':' );\n\n\t\t\t\t\tvar value = $( '<td class=\"value\"></td>' );\n\t\t\t\t\tif ( column_two_keys[i].key == 'time_period' ) {\n\t\t\t\t\t\tvalue.html( data.start_date + ' - ' + data.end_date );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue.html( data[column_two_keys[i].key] );\n\t\t\t\t\t}\n\n\t\t\t\t\ttr.append( label );\n\t\t\t\t\ttr.append( value );\n\t\t\t\t} else {\n\n\t\t\t\t\ttr.append( $( '<td></td>' ) );\n\t\t\t\t\ttr.append( $( '<td></td>' ) );\n\t\t\t\t}\n\n\t\t\t\t$( '#' + container_id + ' table' ).append( tr );\n\t\t\t}\n\n\t\t\t//Show warning if still inside time period.\n\t\t\tif ( data['in_time_period'] && data['in_time_period'] == true ) {\n\t\t\t\tvar tr = $( '<tr></tr>' );\n\n\t\t\t\tvar row_contents = $( '<td align=\"center\" style=\"font-weight: bold; color: red;\" colspan=\"4\"></td>' );\n\t\t\t\trow_contents.html( $.i18n._( 'WARNING: Time period has not ended yet, you may be processing early.' ) );\n\n\t\t\t\ttr.append( row_contents );\n\n\t\t\t\t$( '#' + container_id + ' table' ).append( tr );\n\t\t\t}\n\n\t\t\tthis.payroll_remittance_agency_event_block = $( '#' + container_id + ' table' ).html();\n\t\t} else {\n\t\t\t$( '#' + container_id + ' table' ).html( this.payroll_remittance_agency_event_block );\n\t\t}\n\t}\n\n\t/**\n\t * both args required.\n\t * @param id\n\t * @param callback\n\t */\n\tgetPayrollRemittanceAgencyEventById( id, columns, callback ) {\n\t\t//Stright to the callback if nothing has changed. if ( this.selected_remittance_agency_event.id != id) {\n\t\tif ( typeof callback == 'function' && this.selected_remittance_agency_event && this.selected_remittance_agency_event.id == id ) {\n\t\t\tcallback( this.selected_remittance_agency_event );\n\t\t} else {\n\t\t\tvar filter = {\n\t\t\t\tfilter_data: {\n\t\t\t\t\tid: this.selected_remittance_agency_event_id\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif ( columns == null || typeof columns == 'undefined' ) {\n\t\t\t\tfilter.filter_columns = {\n\t\t\t\t\t'payroll_remittance_agency_id': true,\n\t\t\t\t\t'legal_entity_legal_name': true,\n\t\t\t\t\t'payroll_remittance_agency_name': true,\n\t\t\t\t\t'user_report_data_id': true,\n\t\t\t\t\t'status': true,\n\t\t\t\t\t'status_id': true,\n\t\t\t\t\t'type': true,\n\t\t\t\t\t'type_id': true,\n\t\t\t\t\t'frequency': true,\n\t\t\t\t\t'start_date': true,\n\t\t\t\t\t'end_date': true,\n\t\t\t\t\t'due_date': true,\n\t\t\t\t\t'in_time_period': true\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tfilter.columns = columns;\n\t\t\t}\n\t\t\tvar $this = this;\n\t\t\tvar api_payroll_remittance_agency_event = TTAPI.APIPayrollRemittanceAgencyEvent;\n\t\t\tapi_payroll_remittance_agency_event.getPayrollRemittanceAgencyEvent( filter, {\n\t\t\t\tonResult: function( event_result ) {\n\t\t\t\t\tvar event_result = event_result.getResult()[0];\n\n\t\t\t\t\tvar api_payroll_remittance_agency = TTAPI.APIPayrollRemittanceAgency;\n\t\t\t\t\tapi_payroll_remittance_agency.getPayrollRemittanceAgency( { filter_data: { id: event_result.payroll_remittance_agency_id } }, {\n\t\t\t\t\t\t\tonResult: function( agency_result ) {\n\t\t\t\t\t\t\t\tevent_result.payroll_remittance_agency_obj = agency_result.getResult()[0]; //Merge Event and Agency data together.\n\n\t\t\t\t\t\t\t\tif ( typeof callback == 'function' ) {\n\t\t\t\t\t\t\t\t\tcallback( event_result );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Allows us to open reports to give us access to their context menu code from within wizards.\n\t *\n\t * @param report_type\n\t * @param report_obj\n\t * @param callback\n\t */\n\tgetReport( render_type, post_data ) {\n\t\tif ( !post_data ) {\n\t\t\tpost_data = {\n\t\t\t\t0: this.selected_remittance_agency_event_id,\n\t\t\t\t1: render_type\n\t\t\t};\n\t\t}\n\t\tGlobal.APIFileDownload( 'APIPayrollRemittanceAgencyEvent', 'getReportData', post_data );\n\t}\n\n\t/**\n\t * Displays html report. Does not close wizard, but leaves it up in the background.\n\t * @param report_name\n\t * @param post_data\n\t */\n\tshowHTMLReport( report_name, new_window ) {\n\t\tProgressBar.showOverlay();\n\t\tvar api = TTAPI.APIPayrollRemittanceAgencyEvent;\n\t\tapi['getReportData']( this.selected_remittance_agency_event_id, 'html', {\n\t\t\tonResult: function( res ) {\n\t\t\t\tProgressBar.closeOverlay();\n\n\t\t\t\tif ( res.isValid() ) {\n\t\t\t\t\tvar result = res.getResult();\n\t\t\t\t\tif ( new_window ) {\n\t\t\t\t\t\tvar w = window.open();\n\t\t\t\t\t\tw.document.writeln( result.api_retval );\n\t\t\t\t\t\tw.document.close();\n\t\t\t\t\t} else if ( result ) {\n\t\t\t\t\t\tIndexViewController.openWizard( 'ReportViewWizard', result.api_retval );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( res );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @param e\n\t */\n\tonDoneComplete( e ) {\n\t\tvar $this = this;\n\t\tthis.getPayrollRemittanceAgencyEventById( this.selected_remittance_agency_event_id, {}, function( result ) {\n\t\t\tif ( result ) {\n\t\t\t\tresult.enable_recalculate_dates = 1;\n\t\t\t\tresult.last_due_date = result.due_date;\n\n\t\t\t\tvar api_payroll_remittance_agency_event = TTAPI.APIPayrollRemittanceAgencyEvent;\n\t\t\t\tapi_payroll_remittance_agency_event.setPayrollRemittanceAgencyEvent( result, false, true, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.cleanUp();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n}"],"sourceRoot":""}