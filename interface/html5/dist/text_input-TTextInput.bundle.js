(self.webpackChunktimetrex=self.webpackChunktimetrex||[]).push([["text_input-TTextInput"],{9264:()=>{var e;(e=jQuery).fn.TTextInput=function(t){var i,a,r,n,o,l,s=e.extend({},e.fn.TTextInput.defaults,t),c=this,h="",u=null,d=!0,p=null,m=!1,f=!1,_=!1,g=null,v=null,w=0,y=!1,C=!0,T=!0;return this.setPlaceHolder=function(e){c.attr("placeholder",e)},this.setNeedParsDate=function(e){m=e},this.setNeedParseSec=function(e){e&&(_=Global.parseTimeUnit(c.val())),f=e},this.getEnabled=function(){return d},this.setEnabled=function(t){d=t,!1===t||""===t?(c.attr("readonly","true"),c.addClass("t-text-input-readonly"),u&&u.hide(),!this.getValue()&&C&&this.val(e.i18n._("N/A"))):(c.removeAttr("readonly"),c.removeClass("t-text-input-readonly"),u&&u.show(),this.val()===e.i18n._("N/A")&&this.val(""))},this.setReadOnly=function(e){e?(c.attr("disabled","true"),c.addClass("t-text-input-readonly-bg")):(c.removeAttr("disabled"),c.removeClass("t-text-input-readonly-bg"))},this.setCheckBox=function(e){u&&(u.children().eq(0)[0].checked=e)},this.isChecked=function(){return!(!u||!0!==u.children().eq(0)[0].checked)},this.setMassEditMode=function(t){t?((u=e(' <div class="mass-edit-checkbox-wrapper"><input type="checkbox" class="mass-edit-checkbox"></input><label for="checkbox-input-1" class="input-helper input-helper--checkbox"></label></div>')).insertBefore(e(this)),u.change((function(){(m||f)&&(_=Global.parseTimeUnit(c.val())),c.trigger("formItemChange",[c])})),o&&l.toString().indexOf("%")>0&&c.css("width","calc("+l+" - 25px)")):u&&(u.remove(),u=null)},this.setField=function(e){i=e},this.getField=function(){return i},this.getValidationField=function(){return a},this.getInputValue=function(){return c.val()},this.getValue=function(){var t=c.val();return t===e.i18n._("N/A")&&(t=""),f||m||_?(-1===_&&(_=Global.parseTimeUnit(t)),_):t},this.setValue=function(e){e||0===e||(e=""),c.val(e),m?_=Global.parseTimeUnit(c.val()):f&&(_=e,c.val(Global.getTimeUnit(e))),this.autoResize()},this.setErrorStyle=function(t,i,a){a?e(this).addClass("warning-tip"):e(this).addClass("error-tip"),h=t,i&&this.showErrorTip()},this.setWidth=function(e){e&&(e>0||e.indexOf("%")>0)&&(c.width(e),l=e,o=!0)},this.showErrorTip=function(t){Global.isSet(t)||(t=2),r||(r=(r=Global.loadWidgetByName(WidgetNamesDic.ERROR_TOOLTIP)).ErrorTipBox()),r.cancelRemove(),e(this).hasClass("warning-tip")?r.show(this,h,t,!0):r.show(this,h,t)},this.hideErrorTip=function(){Global.isSet(r)&&r.remove()},this.clearErrorStyle=function(){e(this).removeClass("error-tip"),e(this).removeClass("warning-tip"),this.hideErrorTip(),h=""},this.autoResize=function(){var e,t;if(o){if(l.toString().indexOf("%")>0)return;t=l,e=Global.calculateTextWidth(c.getValue(),{min_width:t,max_width:l>200?l:200})}else t="time"===n?Global.calculateTextWidth(LocalCacheData.getLoginUserPreference().time_format_display):"time_unit"==n?Global.calculateTextWidth(LocalCacheData.getLoginUserPreference().time_unit_format_display):156,e=Global.calculateTextWidth(c.getValue(),{min_width:t,max_width:200});c.width(e+"px")},this.each((function(){var t=e.meta?e.extend({},s,e(this).data()):s;i=t.field,t.autocomplete&&c.attr("autocomplete",t.autocomplete),t.hasOwnProperty("do_validate")&&(T=t.do_validate),t.validation_field&&(a=t.validation_field),t.hasOwnProperty("display_na")&&(C=t.display_na),t.hasOwnProperty("no_validate_timer_sec")&&t.no_validate_timer_sec>0&&(w=t.no_validate_timer_sec),p=t.hasKeyEvent,m=t.need_parser_date,f=t.need_parser_sec,(m||f)&&TTAPI.APITTDate,t.mode&&(n=t.mode),t.width&&(t.width>0||t.width.indexOf("%")>0)&&(c.width(t.width),l=t.width,o=!0),t.disable_keyup_event&&(y=t.disable_keyup_event),"time"===n?c.setPlaceHolder(LocalCacheData.getLoginUserPreference().time_format_display):"time_unit"===n&&c.setPlaceHolder(LocalCacheData.getLoginUserPreference().time_unit_format_display),c.autoResize(),e(this).keydown((function(e){p&&9!==e.keyCode&&13!==e.keyCode&&c.trigger("formItemKeyDown",[c])})),e(this).keyup((function(e){var t=1e3;9!==e.keyCode&&13!==e.keyCode&&Global.isValidInputCodes(e.keyCode)&&(g&&(clearTimeout(g),g=null),v&&(clearTimeout(v),v=null),p&&c.trigger("formItemKeyUp",[c]),h&&h.length>0&&(t=500),T&&(g=setTimeout((function(){u&&c.setCheckBox(!0),m||f?(_=-1,y||c.trigger("formItemChange",[c,!0])):y||c.trigger("formItemChange",[c])}),t)),v=setTimeout((function(){u&&c.setCheckBox(!0),m||f?(_=-1,y||c.trigger("formItemChange",[c,!0])):y||c.trigger("formItemChange",[c,!0])}),w))})),e(this).mouseover((function(){d&&h&&h.length>0&&c.showErrorTip(20)})),e(this).mouseout((function(){e(c).is(":focus")||c.hideErrorTip()})),e(this).change((function(){c.trigger("keyup",[c]),(y||m||f)&&c.trigger("formItemChange",[c]),m||f||c.autoResize()})),e(this).focusin((function(){d?h&&h.length>0&&c.showErrorTip(20):u||(LocalCacheData.current_open_sub_controller&&LocalCacheData.current_open_sub_controller.edit_view&&LocalCacheData.current_open_sub_controller.is_viewing||LocalCacheData.current_open_primary_controller&&LocalCacheData.current_open_primary_controller.edit_view&&LocalCacheData.current_open_primary_controller.is_viewing)&&(h=Global.view_mode_message,c.showErrorTip(10))})),e(this).focusout((function(){c.hideErrorTip()}))})),this},e.fn.TTextInput.defaults={}}}]);
//# sourceMappingURL=text_input-TTextInput.bundle.js.map?v=5cf6e3f066fe2e7535a0